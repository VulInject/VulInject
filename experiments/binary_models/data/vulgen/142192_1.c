static int _remove_sibling_bit ( job_record_t * job_ptr , slurmdb_cluster_rec_t * sibling ) { uint32_t origin_id ; if ( ! _is_fed_job ( job_ptr , & origin_id ) ) { return ESLURM_JOB_NOT_FEDERATED ; } job_ptr -> fed_details -> siblings_active &= ~ ( FED_SIBLING_BIT ( sibling -> fed . id ) ) ; job_ptr -> fed_details -> siblings_viable &= ~ ( FED_SIBLING_BIT ( sibling -> fed . id ) ) ; if ( ! ( job_ptr -> fed_details -> siblings_viable & FED_SIBLING_BIT ( fed_mgr_cluster_rec -> fed . id ) ) ) { job_ptr -> job_state |= JOB_REVOKED ; } update_job_fed_details ( job_ptr ) ; return SLURM_SUCCESS ; } 