void smp4m_percpu_timer_interrupt ( struct pt_regs * regs ) { struct pt_regs * old_regs ; struct clock_event_device * ce ; int cpu = smp_processor_id ( ) ; old_regs = set_irq_regs ( regs ) ; ce = & per_cpu ( sparc32_clockevent , cpu ) ; if ( clockevent_state_periodic ( ce ) ) { sun4m_clear_profile_irq ( cpu ) ; } else { sparc_config . load_profile_irq ( cpu , 0 ) ; } irq_enter ( ) ; ce -> event_handler ( ce ) ; irq_exit ( ) ; } 