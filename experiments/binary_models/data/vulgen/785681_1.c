static void sig_connected ( IRC_SERVER_REC * server ) { GSList * tmp ; char * str , * addr ; str = g_strdup_printf ( "%s :Restoring connection to %s" , server -> nick , server -> connrec -> address ) ; addr = g_strdup ( server -> real_address ) ; signal_emit ( "event 001" , 3 , server , str , addr ) ; g_free ( addr ) ; g_free ( str ) ; for ( tmp = server -> channels ; tmp != NULL ; tmp = tmp -> next ) { IRC_CHANNEL_REC * rec = tmp -> data ; if ( rec -> session_rejoin ) { session_restore_channel ( rec ) ; } } } 