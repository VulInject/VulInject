void GMatrixEditDown ( GGadget * g ) { GMatrixEdit * gme = ( GMatrixEdit * ) g ; GRect r ; int i ; for ( i = 0 ; i < gme -> cols ; ++ i ) { struct matrix_data md = gme -> data [ gme -> active_row * gme -> cols + i ] ; gme -> data [ gme -> active_row * gme -> cols + i ] = gme -> data [ ( gme -> active_row + 1 ) * gme -> cols + i ] ; gme -> data [ ( gme -> active_row + 1 ) * gme -> cols + i ] = md ; } ++ gme -> active_row ; GGadgetGetSize ( gme -> tf , & r ) ; GGadgetMove ( gme -> tf , r . x , r . y - ( gme -> fh + 1 ) ) ; GME_EnableDelete ( gme ) ; if ( gme -> rowmotion != NULL ) { ( gme -> rowmotion ) ( ( GGadget * ) gme , gme -> active_row - 1 , gme -> active_row ) ; } GMatrixEditScrollToRowCol ( & gme -> g , gme -> active_row , gme -> active_col ) ; return ; } 