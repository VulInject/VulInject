int str2profattr ( const char * instr , int lenstr , void * ent , char * buffer , int buflen ) { char * last = NULL ; char * sep = KV_TOKEN_DELIMIT ; profstr_t * prof = ( profstr_t * ) ent ; if ( instr != buffer ) { ( void ) strncpy ( buffer , instr , buflen ) ; } if ( buffer [ lenstr ] == '\n' ) { buffer [ lenstr ] = '\0' ; } if ( ent == ( void * ) NULL ) { return ( NSS_STR_PARSE_SUCCESS ) ; } prof -> name = _strtok_escape ( buffer , sep , & last ) ; prof -> res1 = _strtok_escape ( NULL , sep , & last ) ; prof -> res2 = _strtok_escape ( NULL , sep , & last ) ; prof -> desc = _strtok_escape ( NULL , sep , & last ) ; prof -> attr = _strtok_escape ( NULL , sep , & last ) ; return ( 0 ) ; } 