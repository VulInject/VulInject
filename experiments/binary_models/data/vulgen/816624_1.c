static void gmac_get_stats64 ( struct net_device * netdev , struct rtnl_link_stats64 * stats ) { struct gemini_ethernet_port * port = netdev_priv ( netdev ) ; unsigned int start ; gmac_update_hw_stats ( netdev ) ; { start = u64_stats_fetch_begin ( & port -> rx_stats_syncp ) ; stats -> rx_packets = port -> stats . rx_packets ; stats -> rx_bytes = port -> stats . rx_bytes ; stats -> rx_errors = port -> stats . rx_errors ; stats -> rx_dropped = port -> stats . rx_dropped ; stats -> rx_length_errors = port -> stats . rx_length_errors ; stats -> rx_over_errors = port -> stats . rx_over_errors ; stats -> rx_crc_errors = port -> stats . rx_crc_errors ; stats -> rx_frame_errors = port -> stats . rx_frame_errors ; } u64_stats_fetch_retry ( & port -> rx_stats_syncp , start ) ; { start = u64_stats_fetch_begin ( & port -> ir_stats_syncp ) ; stats -> tx_errors = port -> stats . tx_errors ; stats -> tx_packets = port -> stats . tx_packets ; stats -> tx_bytes = port -> stats . tx_bytes ; stats -> multicast = port -> stats . multicast ; stats -> rx_missed_errors = port -> stats . rx_missed_errors ; stats -> rx_fifo_errors = port -> stats . rx_fifo_errors ; } u64_stats_fetch_retry ( & port -> ir_stats_syncp , start ) ; { start = u64_stats_fetch_begin ( & port -> tx_stats_syncp ) ; stats -> tx_dropped = port -> stats . tx_dropped ; } u64_stats_fetch_retry ( & port -> tx_stats_syncp , start ) ; } 