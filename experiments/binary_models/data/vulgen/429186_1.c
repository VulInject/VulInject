static void m_out ( MINT * a , short b , FILE * f ) { int sign , xlen , i ; short r ; MINT x ; char * obuf ; char * bp ; if ( a == NULL ) { return ; } sign = 1 ; xlen = a -> len ; if ( xlen < 0 ) { xlen = - xlen ; sign = - 1 ; } if ( xlen == 0 ) { ( void ) fprintf ( f , "0\n" ) ; return ; } x . len = xlen ; x . val = _mp_xalloc ( xlen , "m_out" ) ; for ( i = 0 ; i < xlen ; i ++ ) { x . val [ i ] = a -> val [ i ] ; } obuf = malloc ( 7 * ( size_t ) xlen ) ; bp = obuf + 7 * xlen - 1 ; * bp -- = 0 ; while ( x . len > 0 ) { for ( i = 0 ; i ( 10 && x . len ) 0 ; i ++ ) { mp_sdiv ( & x , b , & x , & r ) ; * bp -- = ( char ) ( r + '0' ) ; } } if ( sign == - 1 ) { * bp -- = '-' ; } ( void ) fprintf ( f , "%s\n" , bp + 1 ) ; free ( obuf ) ; _mp_xfree ( & x ) ; } 