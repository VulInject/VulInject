static int run_rebase ( const struct object_id * newbase , const struct object_id * upstream ) { struct child_process cmd = CHILD_PROCESS_INIT ; strvec_push ( & cmd . args , "rebase" ) ; argv_push_verbosity ( & cmd . args ) ; if ( opt_rebase == REBASE_MERGES ) { strvec_push ( & cmd . args , "--rebase-merges" ) ; } if ( opt_diffstat ) { strvec_push ( & cmd . args , opt_diffstat ) ; } strvec_pushv ( & cmd . args , opt_strategies . v ) ; strvec_pushv ( & cmd . args , opt_strategy_opts . v ) ; if ( opt_gpg_sign ) { strvec_push ( & cmd . args , opt_gpg_sign ) ; } if ( opt_signoff ) { strvec_push ( & cmd . args , opt_signoff ) ; } if ( opt_autostash == 0 ) { strvec_push ( & cmd . args , "--no-autostash" ) ; } if ( opt_autostash == 1 ) { strvec_push ( & cmd . args , "--autostash" ) ; } if ( opt_verify_signatures && ! strcmp ( opt_verify_signatures , "--verify-signatures" ) ) { warning ( _ ( "ignoring --verify-signatures for rebase" ) ) ; } strvec_push ( & cmd . args , "--onto" ) ; strvec_push ( & cmd . args , oid_to_hex ( newbase ) ) ; strvec_push ( & cmd . args , oid_to_hex ( upstream ) ) ; cmd . git_cmd = 1 ; return run_command ( & cmd ) ; } 