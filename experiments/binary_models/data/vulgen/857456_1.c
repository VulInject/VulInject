static DEVICE_ATTR ( decimals , S_IRUGO | S_IWUSR , show_attr_decimals , set_attr_decimals ) ; static ssize_t show_attr_textmode ( struct device * dev , struct device_attribute * attr , char * buf ) { struct usb_interface * intf = to_usb_interface ( dev ) ; struct usb_sevsegdev * mydev = usb_get_intfdata ( intf ) ; int i ; for ( i = 0 ; display_textmodes [ i ] ; i ++ ) { if ( mydev -> textmode == i ) { strcat ( buf , " [" ) ; strcat ( buf , display_textmodes [ i ] ) ; strcat ( buf , "] " ) ; } else { strcat ( buf , " " ) ; strcat ( buf , display_textmodes [ i ] ) ; strcat ( buf , " " ) ; } } strcat ( buf , "\n" ) ; return strlen ( buf ) ; } 