static void falcon_stats_complete ( struct ef4_nic * efx ) { struct falcon_nic_data * nic_data = efx -> nic_data ; nic_data -> stats_pending = false ; if ( FALCON_XMAC_STATS_DMA_FLAG ( efx ) ) { rmb ( ) ; ef4_nic_update_stats ( falcon_stat_desc , FALCON_STAT_COUNT , falcon_stat_mask , nic_data -> stats , efx -> stats_buffer . addr , true ) ; } else { netif_err ( efx , hw , efx -> net_dev , "timed out waiting for statistics\n" ) ; } } 