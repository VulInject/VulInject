static GList * make_pairs ( xmlNode * top , const xmlNode * xml_obj , const char * set_name , const char * always_first ) { GList * unsorted = NULL ; if ( xml_obj == NULL ) { return NULL ; } for ( xmlNode * attr_set = pcmk__xe_first_child ( xml_obj ) ; attr_set != NULL ; attr_set = pcmk__xe_next ( attr_set ) ) { if ( pcmk__str_eq ( set_name , ( const char * ) attr_set -> name , pcmk__str_null_matches ) ) { const char * score = NULL ; sorted_set_t * pair = NULL ; xmlNode * expanded_attr_set = expand_idref ( attr_set , top ) ; pair = calloc ( 1 , sizeof ( sorted_set_t ) ) ; pair -> name = ID ( expanded_attr_set ) ; pair -> special_name = always_first ; pair -> attr_set = expanded_attr_set ; score = crm_element_value ( expanded_attr_set , XML_RULE_ATTR_SCORE ) ; pair -> score = char2score ( score ) ; unsorted = g_list_prepend ( unsorted , pair ) ; } } return g_list_sort ( unsorted , sort_pairs ) ; } 