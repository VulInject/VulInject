static void reaper_thread ( caddr_t * arg ) { rfs4_table_t * table = ( rfs4_table_t * ) arg ; clock_t rc ; NFS4_DEBUG ( table -> dbt_debug , ( CE_NOTE , "rfs4_reaper_thread starting for %s" , table -> dbt_name ) ) ; CALLB_CPR_INIT ( & table -> dbt_reaper_cpr_info , & table -> dbt_reaper_cv_lock , callb_generic_cpr , "nfsv4Reaper" ) ; mutex_enter ( & table -> dbt_reaper_cv_lock ) ; { CALLB_CPR_SAFE_BEGIN ( & table -> dbt_reaper_cpr_info ) ; rc = cv_reltimedwait_sig ( & table -> dbt_reaper_wait , & table -> dbt_reaper_cv_lock , SEC_TO_TICK ( table -> dbt_id_reap ) , TR_CLOCK_TICK ) ; CALLB_CPR_SAFE_END ( & table -> dbt_reaper_cpr_info , & table -> dbt_reaper_cv_lock ) ; } rc != 0 && table -> dbt_reaper_shutdown == FALSE ; CALLB_CPR_EXIT ( & table -> dbt_reaper_cpr_info ) ; NFS4_DEBUG ( table -> dbt_debug , ( CE_NOTE , "rfs4_reaper_thread exiting for %s" , table -> dbt_name ) ) ; mutex_enter ( table -> dbt_db -> db_lock ) ; table -> dbt_db -> db_shutdown_count -- ; cv_signal ( & table -> dbt_db -> db_shutdown_wait ) ; mutex_exit ( table -> dbt_db -> db_lock ) ; zthread_exit ( ) ; } 