long __attribute__ ( ( aligned ( stackalign ) ) ) user_stack [ STACK_SIZE ] ; long * stack_start = & user_stack [ STACK_SIZE ] ; void decompress_kernel ( void ) { unsigned long output_addr ; output_addr = __pa ( ( unsigned long ) & _text + PAGE_SIZE ) ; output_addr |= P2SEG ; output = ( unsigned char * ) output_addr ; free_mem_ptr = ( unsigned long ) & _end ; free_mem_end_ptr = free_mem_ptr + HEAP_SIZE ; puts ( "Uncompressing Linux... " ) ; cache_control ( CACHE_ENABLE ) ; __decompress ( input_data , input_len , NULL , NULL , output , 0 , NULL , error ) ; cache_control ( CACHE_DISABLE ) ; } 