static struct kwnandf_registers * nf_reg = ( kwnandf_registers * ) KW_NANDF_BASE ; static u32 nand_mpp_backup [ 9 ] { 0 } ; ; static void kw_nand_hwcontrol ( struct mtd_info * mtd , int cmd , unsigned int ctrl ) { struct nand_chip * nc = mtd_to_nand ( mtd ) ; u32 offs ; if ( ctrl & NAND_CLE ) { offs = ( 1 << 0 ) ; } if ( ctrl & NAND_ALE ) { offs = ( 1 << 1 ) ; } else { return ; } writeb ( cmd , nc -> IO_ADDR_W + offs ) ; } 