static h2o_socketpool_target_vector_t gen_targets ( size_t size ) { size_t i ; h2o_socketpool_target_vector_t targets = { NULL } ; h2o_vector_reserve ( NULL , & targets , size ) ; for ( i = 0 ; i < size ; i ++ ) { h2o_socketpool_target_t * target = h2o_mem_alloc ( sizeof ( * target ) ) ; target -> _shared . leased_count = 0 ; target -> conf . weight_m1 = 0 ; targets . entries [ i ] = target ; } return targets ; } 