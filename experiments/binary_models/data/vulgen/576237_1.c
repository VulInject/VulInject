static int synthesize_sdt_probe_arg ( struct strbuf * buf , int i , const char * arg ) { char * op , * desc = strdup ( arg ) , * new_op = NULL ; const char * suffix = "" ; int ret = - 1 ; if ( desc == NULL ) { pr_debug4 ( "Allocation error\n" ) ; return ret ; } op = strchr ( desc , '@' ) ; if ( op ) { op [ 0 ] = '\0' ; op ++ ; if ( sdt_arg_parse_size ( desc , & suffix ) ) { error } } else { op = desc ; } ret = arch_sdt_arg_parse_op ( op , & new_op ) ; if ( ret < 0 ) { error } if ( ret == SDT_ARG_VALID ) { ret = strbuf_addf ( buf , " arg%d=%s%s" , i + 1 , new_op , suffix ) ; if ( ret < 0 ) { error } } ret = 0 ; error free ( desc ) ; return ret ; } 