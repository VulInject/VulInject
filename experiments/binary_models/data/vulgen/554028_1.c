R_API void r_crbtree_clear ( RRBTree * tree ) { r_return_if_fail ( tree ) ; RRBNode * iter = tree -> root , * save = NULL ; while ( iter ) { if ( ! iter -> link [ 0 ] ) { save = iter -> link [ 1 ] ; if ( tree -> free ) { tree -> free ( iter -> data ) ; } tree -> size -- ; } else { save = iter -> link [ 0 ] ; _set_link ( iter , save -> link [ 1 ] , 0 ) ; _set_link ( save , iter , 1 ) ; } iter = save ; } tree -> root = NULL ; } 