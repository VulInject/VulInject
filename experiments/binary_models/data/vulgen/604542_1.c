static void check_batteries ( struct cardinfo * card ) { unsigned char status ; int ret1 , ret2 ; status = readb ( card -> csr_remap + MEMCTRLSTATUS_BATTERY ) ; if ( debug & DEBUG_BATTERY_POLLING ) { dev_printk ( KERN_DEBUG , & card -> dev -> dev , "checking battery status, 1 = %s, 2 = %s\n" , ( status & BATTERY_1_FAILURE ) ?"FAILURE" : "OK" , ( status & BATTERY_2_FAILURE ) ?"FAILURE" : "OK" ) ; } ret1 = check_battery ( card , 0 , ! ( status & BATTERY_1_FAILURE ) ) ; ret2 = check_battery ( card , 1 , ! ( status & BATTERY_2_FAILURE ) ) ; } 