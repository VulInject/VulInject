static void * nft_bitmap_deactivate ( const struct net * net , const struct nft_set * set , const struct nft_set_elem * elem ) { struct nft_bitmap * priv = nft_set_priv ( set ) ; struct nft_bitmap_elem * this = elem -> priv , * be ; u8 genmask = nft_genmask_next ( net ) ; u32 idx , off ; nft_bitmap_location ( set , elem -> key . val . data , & idx , & off ) ; be = nft_bitmap_elem_find ( set , this , genmask ) ; if ( ! be ) { return NULL ; } priv -> bitmap [ idx ] &= ~ ( genmask << off ) ; return be ; } 