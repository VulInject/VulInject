pool_free ( , ) { alloc_pool_list header ; gcc_assert ( ptr ) ; memset ( ptr , 0xaf , pool -> elt_size - offsetof ( allocation_object , u . data ) ) ; gcc_assert ( pool -> id == ALLOCATION_OBJECT_PTR_FROM_USER_PTR ( ptr ) -> id ) ; ALLOCATION_OBJECT_PTR_FROM_USER_PTR ( ptr ) -> id = 0 ; header = ( alloc_pool_list ) ptr ; header -> next = pool -> free_list ; pool -> free_list = header ; pool -> elts_free ++ ; } 