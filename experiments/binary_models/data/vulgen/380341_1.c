int mxl111sf_config_pin_mux_modes ( struct mxl111sf_state * state , enum mxl111sf_mux_config pin_mux_config ) { u8 r12 , r15 , r17 , r18 , r3D , r82 , r84 , r89 ; int ret ; mxl_debug ( "(%d)" , pin_mux_config ) ; ret = mxl111sf_read_reg ( state , 0x17 , & r17 ) ; ret = mxl111sf_read_reg ( state , 0x18 , & r18 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_read_reg ( state , 0x12 , & r12 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_read_reg ( state , 0x15 , & r15 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_read_reg ( state , 0x82 , & r82 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_read_reg ( state , 0x84 , & r84 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_read_reg ( state , 0x89 , & r89 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_read_reg ( state , 0x3D , & r3D ) ; if ( mxl_fail ( ret ) ) { fail } switch ( pin_mux_config ) { case PIN_MUX_TS_OUT_PARALLEL : r17 |= PIN_MUX_MPEG_MODE_MASK ; r18 |= PIN_MUX_MPEG_PAR_EN_MASK ; r18 &= ~ PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 &= ~ PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 |= PIN_MUX_MCLK_EN_CTRL_MASK ; r82 |= PIN_MUX_MPERR_EN_CTRL_MASK ; r82 |= PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 |= PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 |= 0xF0 ; r89 |= 0xF0 ; break ; case PIN_MUX_TS_OUT_SERIAL : r17 |= PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 |= PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 &= ~ PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 |= PIN_MUX_MCLK_EN_CTRL_MASK ; r82 |= PIN_MUX_MPERR_EN_CTRL_MASK ; r82 |= PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 |= PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 |= 0xF0 ; r89 |= 0xF0 ; break ; case PIN_MUX_GPIO_MODE : r17 &= ~ PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 &= ~ PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 &= ~ PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; case PIN_MUX_TS_SERIAL_IN_MODE_0 : r17 &= ~ PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 |= PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 &= ~ PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; case PIN_MUX_TS_SERIAL_IN_MODE_1 : r17 &= ~ PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 |= PIN_MUX_MPEG_SER_EN_MASK ; r3D |= PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 &= ~ PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; case PIN_MUX_TS_SPI_IN_MODE_1 : r17 &= ~ PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 |= PIN_MUX_MPEG_SER_EN_MASK ; r3D |= PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 |= PIN_MUX_I2S_ENABLE_MASK ; r3D |= PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; case PIN_MUX_TS_SPI_IN_MODE_0 : r17 &= ~ PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 |= PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 |= PIN_MUX_I2S_ENABLE_MASK ; r3D |= PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; case PIN_MUX_TS_PARALLEL_IN : r17 &= ~ PIN_MUX_MPEG_MODE_MASK ; r18 |= PIN_MUX_MPEG_PAR_EN_MASK ; r18 &= ~ PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 &= ~ PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; case PIN_MUX_BT656_I2S_MODE : r17 &= ~ PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 &= ~ PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 |= PIN_MUX_BT656_ENABLE_MASK ; r15 |= PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; case PIN_MUX_DEFAULT : default : r17 |= PIN_MUX_MPEG_MODE_MASK ; r18 &= ~ PIN_MUX_MPEG_PAR_EN_MASK ; r18 &= ~ PIN_MUX_MPEG_SER_EN_MASK ; r3D &= ~ PIN_MUX_MPG_IN_MUX_MASK ; r12 &= ~ PIN_MUX_BT656_ENABLE_MASK ; r15 &= ~ PIN_MUX_I2S_ENABLE_MASK ; r3D &= ~ PIN_MUX_SPI_MODE_MASK ; r82 &= ~ PIN_MUX_MCLK_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPERR_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MDVAL_EN_CTRL_MASK ; r82 &= ~ PIN_MUX_MPSYN_EN_CTRL_MASK ; r84 &= 0x0F ; r89 &= 0x0F ; break ; } ret = mxl111sf_write_reg ( state , 0x17 , r17 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_write_reg ( state , 0x18 , r18 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_write_reg ( state , 0x12 , r12 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_write_reg ( state , 0x15 , r15 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_write_reg ( state , 0x82 , r82 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_write_reg ( state , 0x84 , r84 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_write_reg ( state , 0x89 , r89 ) ; if ( mxl_fail ( ret ) ) { fail } ret = mxl111sf_write_reg ( state , 0x3D , r3D ) ; if ( mxl_fail ( ret ) ) { fail } fail return ret ; } 