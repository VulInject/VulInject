static void update_cpu_masks ( void ) { struct cpu_topology_s390 * topo ; int cpu ; for_each_possible_cpu ( ) { topo = & cpu_topology [ cpu ] ; topo -> thread_mask = cpu_thread_map ( cpu ) ; topo -> core_mask = cpu_group_map ( & socket_info , cpu ) ; topo -> book_mask = cpu_group_map ( & book_info , cpu ) ; topo -> drawer_mask = cpu_group_map ( & drawer_info , cpu ) ; if ( ! MACHINE_HAS_TOPOLOGY ) { topo -> thread_id = cpu ; topo -> core_id = cpu ; topo -> socket_id = cpu ; topo -> book_id = cpu ; topo -> drawer_id = cpu ; } } numa_update_cpu_topology ( ) ; } 