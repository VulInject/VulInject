gimp_drawable_preview_set_drawable ( , ) { GimpPreview * preview = GIMP_PREVIEW ( drawable_preview ) ; GimpDrawablePreviewPrivate * priv = GET_PRIVATE ( preview ) ; gint x1 , y1 , x2 , y2 ; g_return_if_fail ( priv -> drawable == NULL ) ; priv -> drawable = drawable ; _gimp_drawable_preview_get_bounds ( drawable , & x1 , & y1 , & x2 , & y2 ) ; gimp_preview_set_bounds ( preview , x1 , y1 , x2 , y2 ) ; if ( gimp_drawable_is_indexed ( drawable ) ) { GimpImage * image = gimp_item_get_image ( GIMP_ITEM ( drawable ) ) ; GtkWidget * area = gimp_preview_get_area ( preview ) ; guchar * cmap ; gint num_colors ; gimp_preview_area_set_colormap ( GIMP_PREVIEW_AREA ( area ) , cmap , num_colors ) ; g_free ( cmap ) ; } } 