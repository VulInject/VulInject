static void __init test_copy ( void ) { DECLARE_BITMAP ( bmap1 , 1024 ) ; DECLARE_BITMAP ( bmap2 , 1024 ) ; bitmap_zero ( bmap2 , 1024 ) ; bitmap_set ( bmap1 , 0 , 19 ) ; bitmap_copy ( bmap2 , bmap1 , 23 ) ; expect_eq_pbl ( "0-18" , bmap2 , 1024 ) ; bitmap_set ( bmap2 , 0 , 23 ) ; bitmap_copy ( bmap2 , bmap1 , 23 ) ; expect_eq_pbl ( "0-18" , bmap2 , 1024 ) ; bitmap_set ( bmap1 , 0 , 109 ) ; bitmap_copy ( bmap2 , bmap1 , 1024 ) ; expect_eq_pbl ( "0-108" , bmap2 , 1024 ) ; bitmap_fill ( bmap2 , 1024 ) ; bitmap_copy ( bmap2 , bmap1 , 1024 ) ; expect_eq_pbl ( "0-108" , bmap2 , 1024 ) ; bitmap_fill ( bmap2 , 1024 ) ; bitmap_copy ( bmap2 , bmap1 , 109 ) ; expect_eq_pbl ( "0-108,128-1023" , bmap2 , 1024 ) ; bitmap_fill ( bmap2 , 1024 ) ; bitmap_copy ( bmap2 , bmap1 , 97 ) ; expect_eq_pbl ( "0-108,128-1023" , bmap2 , 1024 ) ; } 