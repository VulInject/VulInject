void set_job_id ( PDF pdf , int year , int month , int day , int time ) { char * name_string , * format_string , * s ; size_t slen ; int i ; name_string = makecstring ( job_name ) ; format_string = makecstring ( format_ident ) ; slen = SMALL_BUF_SIZE + strlen ( name_string ) + strlen ( format_string ) + strlen ( luatex_banner ) ; s = xtalloc ( slen , char ) ; i = snprintf ( s , slen , "%.4d/%.2d/%.2d %.2d:%.2d %s %s %s" , year , month , day , time / 60 , time % 60 , name_string , format_string , luatex_banner ) ; check_nprintf ( i , slen ) ; pdf -> job_id_string = xstrdup ( s ) ; xfree ( s ) ; xfree ( name_string ) ; xfree ( format_string ) ; } 