static void dmesg ( int level , char * msg ) { if ( message_priority >= level ) { FILE * fp ; int syslog_severity = - 1 ; switch ( message_dst ) { case RCD_STD : fp = level >= RCM_DEBUG ?stderr : stdout ; if ( pname != NULL ) { ( void ) fputs ( pname , fp ) ; ( void ) fputs ( ": " , fp ) ; } ( void ) fputs ( msg , fp ) ; ( void ) fputc ( '\n' , fp ) ; ( void ) fflush ( fp ) ; break ; case RCD_SYSLOG : switch ( level ) { case RCM_ERR : syslog_severity = LOG_ERR ; break ; case RCM_WARN : syslog_severity = LOG_WARNING ; break ; case RCM_INFO : syslog_severity = LOG_INFO ; break ; case RCM_DEBUG : syslog_severity = LOG_DEBUG ; break ; } break ; } } } 