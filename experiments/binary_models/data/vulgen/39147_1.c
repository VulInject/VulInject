void test_index_conflicts__iterate ( void ) { git_index_conflict_iterator * iterator ; const git_index_entry * conflict_entry [ 3 ] ; git_oid oid ; cl_git_pass ( git_index_conflict_iterator_new ( & iterator , repo_index ) ) ; cl_git_pass ( git_index_conflict_next ( & conflict_entry [ 0 ] , & conflict_entry [ 1 ] , & conflict_entry [ 2 ] , iterator ) ) ; git_oid__fromstr ( & oid , CONFLICTS_ONE_ANCESTOR_OID , GIT_OID_SHA1 ) ; cl_assert_equal_oid ( & oid , & conflict_entry [ 0 ] -> id ) ; cl_assert ( git__strcmp ( conflict_entry [ 0 ] -> path , "conflicts-one.txt" ) == 0 ) ; git_oid__fromstr ( & oid , CONFLICTS_ONE_OUR_OID , GIT_OID_SHA1 ) ; cl_assert_equal_oid ( & oid , & conflict_entry [ 1 ] -> id ) ; cl_assert ( git__strcmp ( conflict_entry [ 0 ] -> path , "conflicts-one.txt" ) == 0 ) ; git_oid__fromstr ( & oid , CONFLICTS_ONE_THEIR_OID , GIT_OID_SHA1 ) ; cl_assert_equal_oid ( & oid , & conflict_entry [ 2 ] -> id ) ; cl_assert ( git__strcmp ( conflict_entry [ 0 ] -> path , "conflicts-one.txt" ) == 0 ) ; cl_git_pass ( git_index_conflict_next ( & conflict_entry [ 0 ] , & conflict_entry [ 1 ] , & conflict_entry [ 2 ] , iterator ) ) ; git_oid__fromstr ( & oid , CONFLICTS_TWO_ANCESTOR_OID , GIT_OID_SHA1 ) ; cl_assert_equal_oid ( & oid , & conflict_entry [ 0 ] -> id ) ; git_oid__fromstr ( & oid , CONFLICTS_TWO_OUR_OID , GIT_OID_SHA1 ) ; cl_assert_equal_oid ( & oid , & conflict_entry [ 1 ] -> id ) ; cl_assert ( git__strcmp ( conflict_entry [ 0 ] -> path , "conflicts-two.txt" ) == 0 ) ; git_oid__fromstr ( & oid , CONFLICTS_TWO_THEIR_OID , GIT_OID_SHA1 ) ; cl_assert_equal_oid ( & oid , & conflict_entry [ 2 ] -> id ) ; cl_assert ( git__strcmp ( conflict_entry [ 0 ] -> path , "conflicts-two.txt" ) == 0 ) ; cl_assert ( git_index_conflict_next ( & conflict_entry [ 0 ] , & conflict_entry [ 1 ] , & conflict_entry [ 2 ] , iterator ) == GIT_ITEROVER ) ; cl_assert ( conflict_entry [ 0 ] == NULL ) ; cl_assert ( conflict_entry [ 2 ] == NULL ) ; cl_assert ( conflict_entry [ 2 ] == NULL ) ; git_index_conflict_iterator_free ( iterator ) ; } 