static int hyperv_ir_set_affinity ( struct irq_data * data , const struct cpumask * mask , bool force ) { struct irq_data * parent = data -> parent_data ; struct irq_cfg * cfg = irqd_cfg ( data ) ; int ret ; ret = parent -> chip -> irq_set_affinity ( parent , mask , force ) ; if ( ret < 0 || ret == IRQ_SET_MASK_OK_DONE ) { return ret ; } send_cleanup_vector ( cfg ) ; return 0 ; } static struct irq_chip hyperv_ir_chip = { . name = "HYPERV-IR" . irq_ack = apic_ack_irq . irq_set_affinity = hyperv_ir_set_affinity } ; 