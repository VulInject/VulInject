static irqreturn_t rt1711h_irq ( int irq , void * dev_id ) { int ret ; u16 alert ; u8 status ; struct rt1711h_chip * chip = dev_id ; ret = rt1711h_read16 ( chip , TCPC_ALERT , & alert ) ; if ( ret < 0 ) { out } if ( alert & TCPC_ALERT_CC_STATUS ) { ret = rt1711h_read8 ( chip , TCPC_CC_STATUS , & status ) ; if ( ret < 0 ) { out } if ( status & TCPC_CC_STATUS_TOGGLING ) { rt1711h_write8 ( chip , TCPC_ALERT , TCPC_ALERT_CC_STATUS ) ; } else { rt1711h_init_cc_params ( chip , status ) ; } } out return tcpci_irq ( chip -> tcpci ) ; } 