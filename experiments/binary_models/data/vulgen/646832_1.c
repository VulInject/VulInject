R_API void * r_mem_mmap_resize ( RMmap * m , ut64 newsize ) { if ( m -> fm != INVALID_HANDLE_VALUE ) { CloseHandle ( m -> fm ) ; } if ( m -> fh != INVALID_HANDLE_VALUE ) { CloseHandle ( m -> fh ) ; } if ( m -> buf ) { UnmapViewOfFile ( m -> buf ) ; } if ( ! r_sys_truncate ( m -> filename , newsize ) ) { return NULL ; } m -> len = newsize ; r_file_mmap_arch ( m , m -> filename , m -> fd ) ; return m -> buf ; } 