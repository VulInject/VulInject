static struct access_list * access_list_insert ( afi_t afi , const char * name ) { struct access_list * access ; struct access_list * point ; struct access_list_list * alist ; struct access_master * master ; master = access_master_get ( afi ) ; if ( master == NULL ) { return NULL ; } access = access_list_new ( ) ; access -> master = master ; alist = & master -> str ; for ( point = alist -> head ; point ; point = point -> next ) { if ( strcmp ( point -> name , name ) >= 0 ) { break ; } } if ( alist -> head == NULL ) { alist -> head = alist -> tail = access ; return access ; } if ( point == NULL ) { access -> prev = alist -> tail ; alist -> tail -> next = access ; alist -> tail = access ; return access ; } if ( point == alist -> head ) { access -> next = alist -> head ; alist -> head -> prev = access ; alist -> head = access ; return access ; } access -> next = point ; access -> prev = point -> prev ; if ( point -> prev ) { point -> prev -> next = access ; } point -> prev = access ; return access ; } 