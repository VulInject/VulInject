static noinstr int mce_timed_out ( u64 * t , const char * msg ) { int ret = 0 ; instrumentation_begin ( ) ; rmb ( ) ; if ( atomic_read ( & mce_panicked ) ) { wait_for_panic ( ) ; } if ( ! mca_cfg . monarch_timeout ) { out } if ( ( s64 ) * t < SPINUNIT ) { if ( cpumask_and ( & mce_missing_cpus , cpu_online_mask , & mce_missing_cpus ) ) { pr_emerg ( "CPUs not responding to MCE broadcast (may include false positives): %*pbl\n" , cpumask_pr_args ( & mce_missing_cpus ) ) ; } mce_panic ( msg , NULL , NULL ) ; ret = 1 ; out } * t -= SPINUNIT ; out instrumentation_end ( ) ; return ret ; } 