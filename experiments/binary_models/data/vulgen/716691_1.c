static void gfx_v9_4_2_log_wave_assignment ( struct amdgpu_device * adev , uint32_t * wb_ptr ) { uint32_t se , cu , simd , wave ; uint32_t offset = 0 ; char * str ; int size ; str = kmalloc ( 256 , GFP_KERNEL ) ; if ( ! str ) { return ; } dev_dbg ( adev -> dev , "wave assignment:\n" ) ; for ( se = 0 ; se < adev -> gfx . config . max_shader_engines ; se ++ ) { for ( cu = 0 ; cu < CU_ID_MAX ; cu ++ ) { size = sprintf ( str , "SE[%02d]CU[%02d]: " , se , cu ) ; for ( simd = 0 ; simd < SIMD_ID_MAX ; simd ++ ) { size += sprintf ( str + size , "[" ) ; for ( wave = 0 ; wave < WAVE_ID_MAX ; wave ++ ) { size += sprintf ( str + size , "%x" , wb_ptr [ offset ] ) ; offset ++ ; } size += sprintf ( str + size , "]  " ) ; } dev_dbg ( adev -> dev , "%s\n" , str ) ; } } kfree ( str ) ; } 