static ssize_t cca_serialnr_show ( struct device * dev , struct device_attribute * attr , char * buf ) { struct zcrypt_card * zc = dev_get_drvdata ( dev ) ; struct cca_info ci ; struct ap_card * ac = to_ap_card ( dev ) ; if ( ap_domain_index >= 0 ) { cca_get_info ( ac -> id , ap_domain_index , & ci , zc -> online ) ; } return scnprintf ( buf , PAGE_SIZE , "%s\n" , ci . serial ) ; } 