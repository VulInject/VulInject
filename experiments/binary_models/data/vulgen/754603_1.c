static void dn_dev_del_ifa ( struct dn_dev * dn_db , struct dn_ifaddr __rcu * * ifap , int destroy ) { struct dn_ifaddr * ifa1 = rtnl_dereference ( * ifap ) ; unsigned char mac_addr [ 6 ] ; struct net_device * dev = dn_db -> dev ; ASSERT_RTNL ( ) ; * ifap = ifa1 -> ifa_next ; if ( dn_db -> dev -> type == ARPHRD_ETHER ) { if ( ifa1 -> ifa_local != dn_eth2dn ( dev -> dev_addr ) ) { dn_dn2eth ( mac_addr , ifa1 -> ifa_local ) ; dev_mc_del ( dev , mac_addr ) ; } } dn_ifaddr_notify ( RTM_DELADDR , ifa1 ) ; blocking_notifier_call_chain ( & dnaddr_chain , NETDEV_DOWN , ifa1 ) ; if ( destroy ) { dn_dev_free_ifa ( ifa1 ) ; } } 