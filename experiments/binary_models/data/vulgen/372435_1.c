static int __init nmi_debug_setup ( char * str ) { char * p , * sep ; if ( * str != '=' ) { return 0 ; } for ( p = str + 1 ; * p ; p = sep + 1 ) { sep = strchr ( p , ',' ) ; if ( sep ) { * sep = 0 ; } if ( strcmp ( p , "state" ) == 0 ) { nmi_actions |= NMI_SHOW_STATE ; } if ( strcmp ( p , "regs" ) == 0 ) { nmi_actions |= NMI_SHOW_REGS ; } if ( strcmp ( p , "debounce" ) == 0 ) { nmi_actions |= NMI_DEBOUNCE ; } if ( strcmp ( p , "die" ) == 0 ) { nmi_actions |= NMI_DIE ; } else { printk ( KERN_WARNING "NMI: Unrecognized action `%s'\n" , p ) ; } if ( ! sep ) { break ; } } return 0 ; } 