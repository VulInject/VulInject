static int session_load_devices ( Session * s , const char * devices ) { int r = 0 ; assert ( s ) ; for ( const char * p = devices ; ; ) { SessionDevice * sd ; dev_t dev ; int k ; k = extract_first_word ( & p , & word , NULL , 0 ) ; if ( k == 0 ) { break ; } if ( k < 0 ) { r = k ; break ; } k = parse_devnum ( word , & dev ) ; if ( k < 0 ) { r = k ; continue ; } k = session_device_new ( s , dev , false , & sd ) ; if ( k < 0 ) { r = k ; } } if ( r < 0 ) { log_error_errno ( r , "Loading session devices for session %s failed: %m" , s -> id ) ; } return r ; } 