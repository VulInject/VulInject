static void s3c64xx_start_rx_dma ( struct s3c24xx_uart_port * ourport ) { struct s3c24xx_uart_dma * dma = ourport -> dma ; dma_sync_single_for_device ( dma -> rx_chan -> device -> dev , dma -> rx_addr , dma -> rx_size , DMA_FROM_DEVICE ) ; dma -> rx_desc = dmaengine_prep_slave_single ( dma -> rx_chan , dma -> rx_addr , dma -> rx_size , DMA_DEV_TO_MEM , DMA_PREP_INTERRUPT ) ; if ( ! dma -> rx_desc ) { dev_err ( ourport -> port . dev , "Unable to get desc for Rx\n" ) ; return ; } dma -> rx_desc -> callback = s3c24xx_serial_rx_dma_complete ; dma -> rx_desc -> callback_param = ourport ; dma -> rx_bytes_requested = dma -> rx_size ; dma_async_issue_pending ( dma -> rx_chan ) ; } 