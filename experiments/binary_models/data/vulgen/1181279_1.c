l_ok boxOverlapDistance ( BOX * box1 , BOX * box2 , l_int32 * ph_ovl , l_int32 * pv_ovl ) { l_int32 l1 , t1 , w1 , h1 , r1 , b1 , l2 , t2 , w2 , h2 , r2 , b2 , valid1 , valid2 ; if ( ! ph_ovl && ! pv_ovl ) { return ERROR_INT ( "nothing to do" , __func__ , 1 ) ; } if ( ph_ovl ) { * ph_ovl = 0 ; } if ( pv_ovl ) { * pv_ovl = 0 ; } if ( ! box1 || ! box2 ) { return ERROR_INT ( "boxes not both defined" , __func__ , 1 ) ; } boxIsValid ( box1 , & valid1 ) ; boxIsValid ( box2 , & valid2 ) ; if ( ! valid1 || ! valid2 ) { return ERROR_INT ( "boxes not both valid" , __func__ , 1 ) ; } if ( ph_ovl ) { boxGetGeometry ( box1 , & l1 , NULL , & w1 , NULL ) ; boxGetGeometry ( box2 , & l2 , NULL , & w2 , NULL ) ; r1 = l1 + w1 ; r2 = l2 + w2 ; if ( l2 >= l1 ) { * ph_ovl = r1 - l2 ; } else { * ph_ovl = r2 - l1 ; } } if ( pv_ovl ) { boxGetGeometry ( box1 , NULL , & t1 , NULL , & h1 ) ; boxGetGeometry ( box2 , NULL , & t2 , NULL , & h2 ) ; b1 = t1 + h1 ; b2 = t2 + h2 ; else { * pv_ovl = b2 - t1 ; } } return 0 ; } 