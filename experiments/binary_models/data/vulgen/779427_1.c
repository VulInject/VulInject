void * test_thread ( void * arg ) { long threadnum = ( intptr_t ) arg ; int l_i ; char l_connection [ 128 ] ; snprintf ( l_connection , sizeof ( l_connection ) , "thread_%03ld" , threadnum ) ; _snprintf ( l_connection , sizeof ( l_connection ) , "thread_%03ld" , threadnum ) ; { ECPGconnect ( __LINE__ , 0 , "ecpg1_regression" , NULL , NULL , l_connection , 0 ) ; if ( sqlca . sqlcode < 0 ) { sqlprint ( ) ; } } if ( sqlca . sqlcode != 0 ) { printf ( "%s: ERROR: cannot connect to database!\n" , l_connection ) ; return NULL ; } { ECPGtrans ( __LINE__ , l_connection , "begin" ) ; if ( sqlca . sqlcode < 0 ) { sqlprint ( ) ; } } for ( l_i = 1 ; l_i <= iterations ; l_i ++ ) { { ECPGdo ( __LINE__ , 0 , 1 , l_connection , 0 , ECPGst_normal , "insert into test_thread ( thread , iteration ) values ( $1  , $2  )" , ECPGt_char , ( l_connection ) , ( long ) 128 , ( long ) 1 , ( 128 ) * sizeof ( char ) , ECPGt_NO_INDICATOR , NULL , 0L , 0L , 0L , ECPGt_int , & ( l_i ) , ( long ) 1 , ( long ) 1 , sizeof ( int ) , ECPGt_NO_INDICATOR , NULL , 0L , 0L , 0L , ECPGt_EOIT , ECPGt_EORT ) ; if ( sqlca . sqlcode < 0 ) { sqlprint ( ) ; } } if ( sqlca . sqlcode != 0 ) { printf ( "%s: ERROR: insert failed!\n" , l_connection ) ; } } { ECPGtrans ( __LINE__ , l_connection , "commit" ) ; if ( sqlca . sqlcode < 0 ) { sqlprint ( ) ; } } { ECPGdisconnect ( __LINE__ , l_connection ) ; } return NULL ; } 