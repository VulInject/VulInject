static void dmfe_init_dm910x ( struct net_device * dev ) { struct dmfe_board_info * db = netdev_priv ( dev ) ; void __iomem * ioaddr = db -> ioaddr ; DMFE_DBUG ( 0 , "dmfe_init_dm910x()" , 0 ) ; dw32 ( DCR0 , DM910X_RESET ) ; udelay ( 100 ) ; dw32 ( DCR0 , db -> cr0_data ) ; udelay ( 5 ) ; db -> phy_addr = 1 ; dmfe_parse_srom ( db ) ; db -> media_mode = dmfe_media_mode ; dw32 ( DCR12 , 0x180 ) ; if ( db -> chip_id == PCI_DM9009_ID ) { dw32 ( DCR12 , 0x80 ) ; mdelay ( 300 ) ; } dw32 ( DCR12 , 0x0 ) ; if ( ! ( db -> media_mode & DMFE_AUTO ) ) { db -> op_mode = db -> media_mode ; } dmfe_descriptor_init ( dev ) ; update_cr6 ( db -> cr6_data , ioaddr ) ; if ( db -> chip_id == PCI_DM9132_ID ) { dm9132_id_table ( dev ) ; } else { send_filter_frame ( dev ) ; } db -> cr7_data = CR7_DEFAULT ; dw32 ( DCR7 , db -> cr7_data ) ; dw32 ( DCR15 , db -> cr15_data ) ; db -> cr6_data |= CR6_RXSC | CR6_TXSC | 0x40000 ; update_cr6 ( db -> cr6_data , ioaddr ) ; } 