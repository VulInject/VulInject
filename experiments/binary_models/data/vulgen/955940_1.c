static void nouveau_led_set_brightness ( struct led_classdev * led , enum led_brightness value ) { struct drm_device * drm_dev = container_of ( led , nouveau_led , led ) -> dev ; struct nouveau_drm * drm = nouveau_drm ( drm_dev ) ; struct nvif_object * device = & drm -> client . device . object ; u32 input_clk = 27e6 ; u32 freq = 100 ; u32 div , duty ; div = input_clk / freq ; nvif_wr32 ( device , 0x61c880 , div ) ; nvif_wr32 ( device , 0x61c884 , 0xc0000000 | duty ) ; } 