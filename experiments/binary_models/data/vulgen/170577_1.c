static enum drm_gpu_sched_stat panfrost_job_timedout ( struct drm_sched_job * sched_job ) { struct panfrost_job * job = to_panfrost_job ( sched_job ) ; struct panfrost_device * pfdev = job -> pfdev ; int js = panfrost_job_get_slot ( job ) ; dev_err ( pfdev -> dev , "gpu sched timeout, js=%d, config=0x%x, status=0x%x, head=0x%x, tail=0x%x, sched_job=%p" , js , job_read ( pfdev , JS_CONFIG ( js ) ) , job_read ( pfdev , JS_STATUS ( js ) ) , job_read ( pfdev , JS_HEAD_LO ( js ) ) , job_read ( pfdev , JS_TAIL_LO ( js ) ) , sched_job ) ; panfrost_core_dump ( job ) ; atomic_set ( & pfdev -> reset . pending , 1 ) ; panfrost_reset ( pfdev , sched_job ) ; return DRM_GPU_SCHED_STAT_NOMINAL ; } 