void * msGetSymbol ( const char * pszLibrary , const char * pszSymbolName ) { void * pLibrary ; void * pSymbol ; if ( pLibrary == NULL ) { msSetError ( MS_MISCERR , "Dynamic loading failed: %s" , "msGetSymbol()" , dlerror ( ) ) ; return NULL ; } pSymbol = dlsym ( pLibrary , pszSymbolName ) ; if ( pSymbol == NULL ) { char withUnder [ strlen ( pszSymbolName ) + 2 ] ; withUnder [ 0 ] = '_' ; withUnder [ 1 ] = 0 ; strcat ( withUnder , pszSymbolName ) ; pSymbol = dlsym ( pLibrary , withUnder ) ; } if ( pSymbol == NULL ) { msSetError ( MS_MISCERR , "Dynamic loading failed: %s" , "msGetSymbol()" , dlerror ( ) ) ; return NULL ; } return ( pSymbol ) ; } 