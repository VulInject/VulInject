again if ( ( t = tq -> tq_freelist ) != NULL && tq -> tq_nalloc >= tq -> tq_minalloc ) { tq -> tq_freelist = t -> tqent_next ; } else { if ( tq -> tq_nalloc >= tq -> tq_maxalloc ) { if ( tqflags & KM_NOSLEEP ) { return ( NULL ) ; } tq -> tq_maxalloc_wait ++ ; rv = cv_timedwait ( & tq -> tq_maxalloc_cv , & tq -> tq_lock , ddi_get_lbolt ( ) + hz ) ; tq -> tq_maxalloc_wait -- ; if ( rv > 0 ) { again } } mutex_exit ( & tq -> tq_lock ) ; mutex_enter ( & tq -> tq_lock ) ; if ( t != NULL ) { tq -> tq_nalloc ++ ; } } return ( t ) ; 