dump_template_decl ( , ) tree t ; int flags ; { tree orig_parms = DECL_TEMPLATE_PARMS ( t ) ; tree parms ; int i ; if ( flags & TFF_TEMPLATE_HEADER ) { for ( parms = orig_parms = nreverse ( orig_parms ) ; parms ; parms = TREE_CHAIN ( parms ) ) { tree inner_parms = INNERMOST_TEMPLATE_PARMS ( parms ) ; int len = TREE_VEC_LENGTH ( inner_parms ) ; output_add_string ( scratch_buffer , "template<" ) ; flags |= TFF_DECL_SPECIFIERS ; for ( i = 0 ; i < len ; i ++ ) { if ( i ) { separate_with_comma ( scratch_buffer ) ; } dump_template_parameter ( TREE_VEC_ELT ( inner_parms , i ) , flags ) ; } output_add_space ( scratch_buffer ) ; } nreverse ( orig_parms ) ; if ( DECL_TEMPLATE_TEMPLATE_PARM_P ( t ) ) { output_add_string ( scratch_buffer , "class " ) ; } } if ( TREE_CODE ( DECL_TEMPLATE_RESULT ( t ) ) == TYPE_DECL ) { dump_type ( TREE_TYPE ( t ) , ( ( flags & ~ TFF_CLASS_KEY_OR_ENUM ) | TFF_TEMPLATE_NAME | ( flags & TFF_DECL_SPECIFIERS ?TFF_CLASS_KEY_OR_ENUM : 0 ) ) ) ; } if ( TREE_CODE ( DECL_TEMPLATE_RESULT ( t ) ) == VAR_DECL ) { dump_decl ( DECL_TEMPLATE_RESULT ( t ) , flags | TFF_TEMPLATE_NAME ) ; } if ( TREE_TYPE ( t ) == NULL_TREE ) { abort ( ) ; } else { switch ( NEXT_CODE ( t ) ) { case METHOD_TYPE : case FUNCTION_TYPE : dump_function_decl ( t , flags | TFF_TEMPLATE_NAME ) ; break ; default : dump_type ( TREE_TYPE ( t ) , ( flags & ~ TFF_CLASS_KEY_OR_ENUM ) | TFF_TEMPLATE_NAME | ( flags & TFF_DECL_SPECIFIERS ?TFF_CLASS_KEY_OR_ENUM : 0 ) ) ; } } } 