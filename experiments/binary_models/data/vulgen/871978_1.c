static void g_NCR5380_trigger_irq ( struct Scsi_Host * instance ) { struct NCR5380_hostdata * hostdata = shost_priv ( instance ) ; NCR5380_write ( SELECT_ENABLE_REG , hostdata -> id_mask ) ; NCR5380_write ( OUTPUT_DATA_REG , hostdata -> id_mask ) ; NCR5380_write ( INITIATOR_COMMAND_REG , ICR_BASE | ICR_ASSERT_DATA | ICR_ASSERT_SEL ) ; msleep ( 1 ) ; NCR5380_write ( INITIATOR_COMMAND_REG , ICR_BASE ) ; NCR5380_write ( SELECT_ENABLE_REG , 0 ) ; NCR5380_write ( TARGET_COMMAND_REG , 0 ) ; } 