int em_chanmsg ( Client * client , Channel * channel , int sendflags , const char * prefix , const char * target , MessageTag * mtags , const char * text , SendType sendtype ) int em_usermsg ( Client * client , Client * to , MessageTag * mtags , const char * text , SendType sendtype ) MOD_INIT ( ) { ClientCapabilityInfo cap ; MARK_AS_OFFICIAL_MODULE ( modinfo ) ; cap . name = "echo-message" ; ClientCapabilityAdd ( modinfo -> handle , & cap , & CAP_ECHO_MESSAGE ) ; HookAdd ( modinfo -> handle , HOOKTYPE_CHANMSG , 0 , em_chanmsg ) ; HookAdd ( modinfo -> handle , HOOKTYPE_USERMSG , 0 , em_usermsg ) ; return MOD_SUCCESS ; } 