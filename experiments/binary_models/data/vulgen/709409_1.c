static struct ospf6_neighbor * better_bdrouter ( struct ospf6_neighbor * a , struct ospf6_neighbor * b ) { if ( a == NULL || ! IS_ELIGIBLE ( a ) || a -> drouter == a -> router_id ) { return b ; } if ( b == NULL || ! IS_ELIGIBLE ( b ) || b -> drouter == b -> router_id ) { return a ; } if ( a -> bdrouter == a -> router_id && b -> bdrouter != b -> router_id ) { return a ; } if ( a -> bdrouter != a -> router_id && b -> bdrouter == b -> router_id ) { return b ; } if ( a -> priority > b -> priority ) { return a ; } if ( a -> priority < b -> priority ) { return b ; } if ( ntohl ( a -> router_id ) > ntohl ( b -> router_id ) ) { return a ; } if ( ntohl ( a -> router_id ) < ntohl ( b -> router_id ) ) { return b ; } zlog_warn ( "Router-ID duplicate ?" ) ; return a ; } 