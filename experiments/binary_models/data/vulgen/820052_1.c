static void dohelp ( struct Client * source_p , int flags , const char * topic ) { static const char ntopic [ ] "index" ; ; struct cachefile * hptr ; struct cacheline * lineptr ; rb_dlink_node * ptr ; rb_dlink_node * fptr ; hptr = rb_dictionary_retrieve ( ( flags & HELP_OPER ) ?help_dict_oper : help_dict_user , topic ) ; if ( hptr == NULL || ! ( hptr -> flags & flags ) ) { sendto_one ( source_p , form_str ( ERR_HELPNOTFOUND ) , me . name , source_p -> name , topic ) ; return ; } fptr = hptr -> contents . head ; lineptr = fptr -> data ; sendto_one ( source_p , form_str ( RPL_HELPSTART ) , me . name , source_p -> name , topic , lineptr -> data ) ; RB_DLINK_FOREACH ( , ) { lineptr = ptr -> data ; sendto_one ( source_p , form_str ( RPL_HELPTXT ) , me . name , source_p -> name , topic , lineptr -> data ) ; } sendto_one ( source_p , form_str ( RPL_ENDOFHELP ) , me . name , source_p -> name , topic ) ; } 