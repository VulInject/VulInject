extern long long ticks_to_micro ( long long ) char pwf_since_boot , recover_pwf_time ; long long mpetime , offset_ticks , offset_usec ; GETPRIVMODE ( ) ; mpetime = get_time ( ) ; get_time_change_info ( & offset_ticks , & pwf_since_boot , & recover_pwf_time ) ; offset_usec = ticks_to_micro ( offset_ticks ) ; GETUSERMODE ( ) ; mpetime = mpetime - offset_usec ; tvp -> tv_usec = mpetime % 1000000LL ; return 0 ; 