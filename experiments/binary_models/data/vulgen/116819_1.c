static int sd_e_h ( GWindow gw , GEvent * event ) { struct sd_data * sd = GDrawGetUserData ( gw ) ; if ( sd == NULL ) { return ( true ) ; } if ( event -> type == et_close ) { SD_DoCancel ( sd ) ; } if ( event -> type == et_controlevent && event -> u . control . subtype == et_textchanged ) { sd -> fv -> script_unsaved = ! GTextFieldIsEmpty ( GWidgetGetControl ( sd -> gw , CID_Script ) ) ; } if ( event -> type == et_controlevent && event -> u . control . subtype == et_save ) { sd -> fv -> script_unsaved = false ; } if ( event -> type == et_char ) { if ( event -> u . chr . keysym == GK_F1 || event -> u . chr . keysym == GK_Help ) { help ( "scripting/scripting.html" , NULL ) ; return ( true ) ; } return ( false ) ; } if ( event -> type == et_map ) { GDrawRaise ( gw ) ; } return ( true ) ; } 