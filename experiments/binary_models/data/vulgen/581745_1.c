void dccp_send_delayed_ack ( struct sock * sk ) { struct inet_connection_sock * icsk = inet_csk ( sk ) ; if ( icsk -> icsk_ack . pending & ICSK_ACK_TIMER ) { if ( icsk -> icsk_ack . blocked ) { dccp_send_ack ( sk ) ; return ; } if ( ! time_before ( timeout , icsk -> icsk_ack . timeout ) ) { timeout = icsk -> icsk_ack . timeout ; } } icsk -> icsk_ack . pending |= ICSK_ACK_SCHED | ICSK_ACK_TIMER ; icsk -> icsk_ack . timeout = timeout ; sk_reset_timer ( sk , & icsk -> icsk_delack_timer , timeout ) ; } 