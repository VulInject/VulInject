static void __kobject_del ( struct kobject * kobj ) { struct kernfs_node * sd ; const struct kobj_type * ktype ; sd = kobj -> sd ; ktype = get_ktype ( kobj ) ; if ( ktype ) { sysfs_remove_groups ( kobj , ktype -> default_groups ) ; } if ( kobj -> state_add_uevent_sent && ! kobj -> state_remove_uevent_sent ) { pr_debug ( "kobject: '%s' (%p): auto cleanup 'remove' event\n" , kobject_name ( kobj ) , kobj ) ; kobject_uevent ( kobj , KOBJ_REMOVE ) ; } sysfs_remove_dir ( kobj ) ; sysfs_put ( sd ) ; kobj_kset_leave ( kobj ) ; kobj -> parent = NULL ; } 