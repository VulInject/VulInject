void ufs_set_inode_dev ( struct super_block * sb , struct ufs_inode_info * ufsi , dev_t dev ) { __u32 fs32 ; switch ( UFS_SB ( sb ) -> s_flags & UFS_ST_MASK ) { case UFS_ST_SUNx86 : case UFS_ST_SUN : fs32 = sysv_encode_dev ( dev ) ; break ; default : fs32 = old_encode_dev ( dev ) ; break ; } if ( ( UFS_SB ( sb ) -> s_flags & UFS_ST_MASK ) == UFS_ST_SUNx86 ) { ufsi -> i_u1 . i_data [ 1 ] = cpu_to_fs32 ( sb , fs32 ) ; } else { ufsi -> i_u1 . i_data [ 0 ] = cpu_to_fs32 ( sb , fs32 ) ; } } 