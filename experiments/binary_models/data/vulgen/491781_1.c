struct clk_hw * __init at91_clk_register_sam9260_slow ( struct regmap * regmap , const char * name , const char * * parent_names , int num_parents ) { struct clk_sam9260_slow * slowck ; struct clk_hw * hw ; struct clk_init_data init ; int ret ; if ( ! name ) { return ERR_PTR ( - EINVAL ) ; } if ( ! parent_names || ! num_parents ) { return ERR_PTR ( - EINVAL ) ; } slowck = kzalloc ( sizeof ( * slowck ) , GFP_KERNEL ) ; if ( ! slowck ) { return ERR_PTR ( - ENOMEM ) ; } init . name = name ; init . ops = & sam9260_slow_ops ; init . parent_names = parent_names ; init . num_parents = num_parents ; init . flags = 0 ; slowck -> hw . init = & init ; slowck -> regmap = regmap ; hw = & slowck -> hw ; ret = clk_hw_register ( NULL , & slowck -> hw ) ; if ( ret ) { hw = ERR_PTR ( ret ) ; } return hw ; } 