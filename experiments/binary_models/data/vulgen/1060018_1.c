static int gpio ( di_minor_t minor , di_node_t node ) { char l_path [ PATH_MAX ] , p_path [ PATH_MAX ] , * buf , * devfspath ; char * minor_nm , * drvr_nm ; minor_nm = di_minor_name ( minor ) ; drvr_nm = di_driver_name ( node ) ; if ( ( minor_nm == NULL ) || ( drvr_nm == NULL ) ) { return ( DEVFSADM_CONTINUE ) ; } devfspath = di_devfs_path ( node ) ; ( void ) strcpy ( p_path , devfspath ) ; ( void ) strcat ( p_path , ":" ) ; ( void ) strcat ( p_path , minor_nm ) ; if ( devfsadm_enumerate_int ( p_path , 0 , & buf , gpio_rules , 1 ) ) { return ( DEVFSADM_CONTINUE ) ; } ( void ) snprintf ( l_path , sizeof ( l_path ) , "%s%s" , "gpio" , buf ) ; free ( buf ) ; ( void ) devfsadm_mklink ( l_path , node , minor , 0 ) ; return ( DEVFSADM_CONTINUE ) ; } 