void mv_avs_init ( void ) { u32 sar_freq ; reg_write ( AVS_DEBUG_CNTR_REG , AVS_DEBUG_CNTR_DEFAULT_VALUE ) ; reg_write ( AVS_DEBUG_CNTR_REG , AVS_DEBUG_CNTR_DEFAULT_VALUE ) ; sar_freq = reg_read ( DEVICE_SAMPLE_AT_RESET1_REG ) ; sar_freq = sar_freq >> SAR_FREQ_OFFSET & SAR_FREQ_MASK ; if ( sar_freq <= 0xd ) { avs_reg_data &= ~ ( AVS_LOW_VDD_LIMIT_MASK | AVS_HIGH_VDD_LIMIT_MASK ) ; avs_reg_data |= AVS_LOW_VDD_SLOW_VAL | AVS_HIGH_VDD_SLOW_VAL ; reg_write ( AVS_ENABLED_CONTROL , avs_reg_data ) ; } } 