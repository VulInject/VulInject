static M_bool M_str_eq_max_int ( const char * s1 , const char * s2 , volatile size_t max , M_bool case_insensitive ) { char result = 0 ; int i = 0 ; if ( s1 == NULL ) { s1 = "" ; } if ( s2 == NULL ) { s2 = "" ; } if ( case_insensitive ) { for ( i = 0 ; i < max && s1 [ i ] != '\0' && s2 [ i ] != '\0' ; i ++ ) { result |= ( char ) ( M_ct_tolower ( s1 [ i ] ) ^ M_ct_tolower ( s2 [ i ] ) ) ; } } else { for ( i = 0 ; i < max && s1 [ i ] != '\0' && s2 [ i ] != '\0' ; i ++ ) { result |= ( char ) ( s1 [ i ] ^ s2 [ i ] ) ; } } if ( result != 0 ) { return M_FALSE ; } if ( i != max && ( ( s1 [ i ] == '\0' && s2 [ i ] != '\0' ) || ( s1 [ i ] != '\0' && s2 [ i ] == '\0' ) ) ) { return M_FALSE ; } return M_TRUE ; } 