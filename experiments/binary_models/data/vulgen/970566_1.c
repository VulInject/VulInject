int board_late_init ( void ) { puts ( "MODE:  " ) ; switch ( uniphier_boot_device_raw ( ) ) { case BOOT_DEVICE_MMC1 : printf ( "eMMC Boot" ) ; env_set ( "bootdev" , "emmc" ) ; break ; case BOOT_DEVICE_MMC2 : printf ( "SD Boot" ) ; env_set ( "bootdev" , "sd" ) ; break ; case BOOT_DEVICE_NAND : printf ( "NAND Boot" ) ; env_set ( "bootdev" , "nand" ) ; break ; case BOOT_DEVICE_NOR : printf ( "NOR Boot" ) ; env_set ( "bootdev" , "nor" ) ; break ; case BOOT_DEVICE_USB : printf ( "USB Boot" ) ; env_set ( "bootdev" , "usb" ) ; break ; default : printf ( "Unknown" ) ; break ; } if ( uniphier_have_internal_stm ( ) ) { printf ( " (STM: %s)" , uniphier_boot_from_backend ( ) ?"OFF" : "ON" ) ; } printf ( "\n" ) ; uniphier_set_env_fdt_file ( ) ; uniphier_set_env_addr ( "dram_base" , NULL ) ; uniphier_set_env_addr ( "kernel_addr_r" , "kernel_addr_r_offset" ) ; uniphier_set_env_addr ( "ramdisk_addr_r" , "ramdisk_addr_r_offset" ) ; uniphier_set_env_addr ( "fdt_addr_r" , "fdt_addr_r_offset" ) ; return 0 ; } 