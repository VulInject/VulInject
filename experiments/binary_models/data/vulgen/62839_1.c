int wm8350_dcdc_set_slot ( struct wm8350 * wm8350 , int dcdc , u16 start , u16 stop , u16 fault ) { int slot_reg ; u16 val ; dev_dbg ( wm8350 -> dev , "%s %d start %d stop %d\n" , __func__ , dcdc , start , stop ) ; switch ( dcdc ) { case WM8350_DCDC_1 : slot_reg = WM8350_DCDC1_TIMEOUTS ; break ; case WM8350_DCDC_2 : slot_reg = WM8350_DCDC2_TIMEOUTS ; break ; case WM8350_DCDC_3 : slot_reg = WM8350_DCDC3_TIMEOUTS ; break ; case WM8350_DCDC_4 : slot_reg = WM8350_DCDC4_TIMEOUTS ; break ; case WM8350_DCDC_5 : slot_reg = WM8350_DCDC5_TIMEOUTS ; break ; case WM8350_DCDC_6 : slot_reg = WM8350_DCDC6_TIMEOUTS ; break ; default : return - EINVAL ; } val = wm8350_reg_read ( wm8350 , slot_reg ) & ~ ( WM8350_DC1_ENSLOT_MASK | WM8350_DC1_SDSLOT_MASK | WM8350_DC1_ERRACT_MASK ) ; wm8350_reg_write ( wm8350 , slot_reg , val | ( start << WM8350_DC1_ENSLOT_SHIFT ) | ( stop << WM8350_DC1_SDSLOT_SHIFT ) | ( fault << WM8350_DC1_ERRACT_SHIFT ) ) ; return 0 ; } 