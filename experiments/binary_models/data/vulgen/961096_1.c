static void check_dtypes_for_inconsistency ( struct disk_type * dp1 , struct disk_type * dp2 ) { int i ; int result ; struct chg_list * cp1 ; struct chg_list * cp2 ; result = 0 ; result |= ( dp1 -> dtype_flags != dp2 -> dtype_flags ) ; result |= ( dp1 -> dtype_options != dp2 -> dtype_options ) ; result |= ( dp1 -> dtype_fmt_time != dp2 -> dtype_fmt_time ) ; result |= ( dp1 -> dtype_bpt != dp2 -> dtype_bpt ) ; result |= ( dp1 -> dtype_ncyl != dp2 -> dtype_ncyl ) ; result |= ( dp1 -> dtype_acyl != dp2 -> dtype_acyl ) ; result |= ( dp1 -> dtype_pcyl != dp2 -> dtype_pcyl ) ; result |= ( dp1 -> dtype_nhead != dp2 -> dtype_nhead ) ; result |= ( dp1 -> dtype_nsect != dp2 -> dtype_nsect ) ; result |= ( dp1 -> dtype_rpm != dp2 -> dtype_rpm ) ; result |= ( dp1 -> dtype_cyl_skew != dp2 -> dtype_cyl_skew ) ; result |= ( dp1 -> dtype_trk_skew != dp2 -> dtype_trk_skew ) ; result |= ( dp1 -> dtype_trks_zone != dp2 -> dtype_trks_zone ) ; result |= ( dp1 -> dtype_atrks != dp2 -> dtype_atrks ) ; result |= ( dp1 -> dtype_asect != dp2 -> dtype_asect ) ; result |= ( dp1 -> dtype_cache != dp2 -> dtype_cache ) ; result |= ( dp1 -> dtype_threshold != dp2 -> dtype_threshold ) ; result |= ( dp1 -> dtype_read_retries != dp2 -> dtype_read_retries ) ; result |= ( dp1 -> dtype_write_retries != dp2 -> dtype_write_retries ) ; result |= ( dp1 -> dtype_prefetch_min != dp2 -> dtype_prefetch_min ) ; result |= ( dp1 -> dtype_prefetch_max != dp2 -> dtype_prefetch_max ) ; for ( i = 0 ; i < NSPECIFICS ; i ++ ) { result |= ( dp1 -> dtype_specifics [ i ] != dp2 -> dtype_specifics [ i ] ) ; } cp1 = dp1 -> dtype_chglist ; cp2 = dp2 -> dtype_chglist ; while ( cp1 != NULL && cp2 != NULL ) { if ( cp1 == NULL || cp2 == NULL ) { result = 1 ; break ; } result |= ( cp1 -> pageno != cp2 -> pageno ) ; result |= ( cp1 -> byteno != cp2 -> byteno ) ; result |= ( cp1 -> mode != cp2 -> mode ) ; result |= ( cp1 -> value != cp2 -> value ) ; cp1 = cp1 -> next ; cp2 = cp2 -> next ; } if ( result ) { err_print ( "Inconsistent definitions for disk type '%s'\n" , dp1 -> dtype_asciilabel ) ; if ( dp1 -> dtype_filename != NULL && dp2 -> dtype_filename != NULL ) { err_print ( "%s (%d) - %s (%d)\n" , dp1 -> dtype_filename , dp1 -> dtype_lineno , dp2 -> dtype_filename , dp2 -> dtype_lineno ) ; } fullabort ( ) ; } } 