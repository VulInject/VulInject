static int enetc_ierb_probe ( struct platform_device * pdev ) { struct enetc_ierb * ierb ; void __iomem * regs ; if ( ! ierb ) { return - ENOMEM ; } regs = devm_platform_get_and_ioremap_resource ( pdev , 0 , NULL ) ; if ( IS_ERR ( regs ) ) { return PTR_ERR ( regs ) ; } ierb -> regs = regs ; enetc_ierb_write ( ierb , ENETC_IERB_FMBDTR , ENETC_RESERVED_FOR_ICM ) ; platform_set_drvdata ( pdev , ierb ) ; return 0 ; } 