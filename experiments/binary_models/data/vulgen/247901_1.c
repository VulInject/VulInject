static int vlandev_seq_show ( struct seq_file * seq , void * offset ) { struct net_device * vlandev = ( net_device * ) seq -> private ; const struct vlan_dev_priv * vlan = vlan_dev_priv ( vlandev ) ; struct rtnl_link_stats64 temp ; const struct rtnl_link_stats64 * stats ; static const char fmt64 [ ] "%30s %12llu\n" ; ; int i ; stats = dev_get_stats ( vlandev , & temp ) ; seq_printf ( seq , "%s  VID: %d	 REORDER_HDR: %i  dev->priv_flags: %hx\n" , vlandev -> name , vlan -> vlan_id , ( int ) ( vlan -> flags & 1 ) , vlandev -> priv_flags ) ; seq_printf ( seq , fmt64 , "total frames received" , stats -> rx_packets ) ; seq_printf ( seq , fmt64 , "total bytes received" , stats -> rx_bytes ) ; seq_printf ( seq , fmt64 , "Broadcast/Multicast Rcvd" , stats -> multicast ) ; seq_puts ( seq , "\n" ) ; seq_printf ( seq , fmt64 , "total frames transmitted" , stats -> tx_packets ) ; seq_printf ( seq , fmt64 , "total bytes transmitted" , stats -> tx_bytes ) ; seq_printf ( seq , "Device: %s" , vlan -> real_dev -> name ) ; seq_printf ( seq , "\nINGRESS priority mappings: " "0:%u  1:%u  2:%u  3:%u  4:%u  5:%u  6:%u 7:%u\n" , vlan -> ingress_priority_map [ 0 ] , vlan -> ingress_priority_map [ 1 ] , vlan -> ingress_priority_map [ 2 ] , vlan -> ingress_priority_map [ 3 ] , vlan -> ingress_priority_map [ 4 ] , vlan -> ingress_priority_map [ 5 ] , vlan -> ingress_priority_map [ 6 ] , vlan -> ingress_priority_map [ 7 ] ) ; seq_printf ( seq , " EGRESS priority mappings: " ) ; for ( i = 0 ; i < 16 ; i ++ ) { const struct vlan_priority_tci_mapping * mp = vlan -> egress_priority_map [ i ] ; while ( mp ) { seq_printf ( seq , "%u:%hu " , mp -> priority , ( ( mp -> vlan_qos >> 13 ) & 0x7 ) ) ; mp = mp -> next ; } } seq_puts ( seq , "\n" ) ; return 0 ; } 