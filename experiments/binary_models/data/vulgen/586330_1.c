int findr ( i ) int i ; { struct numtab * p ; int h = NHASH ( i ) ; if ( i == 0 ) { return ( - 1 ) ; } for ( p = nhash [ h ] ; p ; p = p -> link ) { if ( i == p -> r ) { return ( p - numtab ) ; } } for ( p = numtab ; p < & numtab [ NN ] ; p ++ ) { if ( p -> r == 0 ) { p -> r = i ; p -> link = nhash [ h ] ; nhash [ h ] = p ; regcnt ++ ; return ( p - numtab ) ; } } errprint ( gettext ( "too many number registers (%d)." ) , NN ) ; return ( 0 ) ; } 