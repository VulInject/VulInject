static int _load_cluster_settings ( bool state_only , buf_t * buffer , uint16_t protocol_version ) { char * suspend_exc_nodes = NULL ; char * suspend_exc_parts = NULL ; char * suspend_exc_states = NULL ; if ( protocol_version >= SLURM_23_02_PROTOCOL_VERSION ) { safe_unpackstr ( & suspend_exc_nodes , buffer ) ; safe_unpackstr ( & suspend_exc_parts , buffer ) ; safe_unpackstr ( & suspend_exc_states , buffer ) ; if ( ! state_only ) { xfree ( slurm_conf . suspend_exc_nodes ) ; slurm_conf . suspend_exc_nodes = suspend_exc_nodes ; suspend_exc_nodes = NULL ; xfree ( slurm_conf . suspend_exc_parts ) ; slurm_conf . suspend_exc_parts = suspend_exc_parts ; suspend_exc_parts = NULL ; xfree ( slurm_conf . suspend_exc_states ) ; slurm_conf . suspend_exc_states = suspend_exc_states ; suspend_exc_states = NULL ; } else { xfree ( suspend_exc_nodes ) ; xfree ( suspend_exc_parts ) ; } } return SLURM_SUCCESS ; unpack_error xfree ( suspend_exc_nodes ) ; xfree ( suspend_exc_parts ) ; xfree ( suspend_exc_states ) ; return SLURM_ERROR ; } 