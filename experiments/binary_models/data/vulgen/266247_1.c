static void BoxGradientElipse ( GWindow gw , GRect * r , Color start , Color end ) { int correctedwidth = r -> width + 1 ; int correctedheight = r -> height + 1 ; int xend = r -> x + correctedwidth - 1 ; int yend = r -> y + correctedheight - 1 ; int i , xoff ; double a = ( double ) correctedwidth / 2.0 ; double b = ( double ) correctedheight / 2.0 ; double precalc = ( a * a ) / ( b * b ) ; int rstart = COLOR_RED ( start ) ; int gstart = COLOR_GREEN ( start ) ; int bstart = COLOR_BLUE ( start ) ; int rdiff = COLOR_RED ( end ) - rstart ; int gdiff = COLOR_GREEN ( end ) - gstart ; int bdiff = COLOR_BLUE ( end ) - bstart ; for ( i = 0 ; i < ( correctedheight + 1 ) / 2 ; ++ i ) { xoff = lrint ( a - sqrt ( precalc * ( double ) ( i * ( correctedheight - i ) ) ) ) ; GDrawDrawLine ( gw , r -> x + xoff , r -> y + i , xend - xoff , r -> y + i , COLOR_CREATE ( rstart + rdiff * i / correctedheight , gstart + gdiff * i / correctedheight , bstart + bdiff * i / correctedheight ) ) ; GDrawDrawLine ( gw , r -> x + xoff , yend - i , xend - xoff , yend - i , COLOR_CREATE ( rstart + rdiff * ( correctedheight - i ) / correctedheight , gstart + gdiff * ( correctedheight - i ) / correctedheight , bstart + bdiff * ( correctedheight - i ) / correctedheight ) ) ; } } 