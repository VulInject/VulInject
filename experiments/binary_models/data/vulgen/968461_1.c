static int act8945a_charger_get_property ( struct power_supply * psy , enum power_supply_property prop , union power_supply_propval * val ) { struct act8945a_charger * charger = power_supply_get_drvdata ( psy ) ; struct regmap * regmap = charger -> regmap ; int ret ; switch ( prop ) { case POWER_SUPPLY_PROP_STATUS : ret = act8945a_get_charger_state ( regmap , & val -> intval ) ; break ; case POWER_SUPPLY_PROP_CHARGE_TYPE : ret = act8945a_get_charge_type ( regmap , & val -> intval ) ; break ; case POWER_SUPPLY_PROP_TECHNOLOGY : val -> intval = POWER_SUPPLY_TECHNOLOGY_LION ; break ; case POWER_SUPPLY_PROP_HEALTH : ret = act8945a_get_battery_health ( regmap , & val -> intval ) ; break ; case POWER_SUPPLY_PROP_CAPACITY_LEVEL : ret = act8945a_get_capacity_level ( charger , regmap , & val -> intval ) ; break ; case POWER_SUPPLY_PROP_CURRENT_MAX : ret = act8945a_get_current_max ( charger , regmap , & val -> intval ) ; break ; case POWER_SUPPLY_PROP_MODEL_NAME : val -> strval = act8945a_charger_model ; break ; case POWER_SUPPLY_PROP_MANUFACTURER : val -> strval = act8945a_charger_manufacturer ; break ; default : return - EINVAL ; } return ret ; } 