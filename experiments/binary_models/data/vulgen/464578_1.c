START_TEST ( ) { const char * copt = "s q one_nodeq resources_max.nodes = 1:ppn=32" ; int type , oper , errflg ; char * name = NULL ; struct attropl * attribs = NULL ; type = oper = 0 ; errflg = parse ( ( char * ) copt , & oper , & type , & name , & attribs ) ; fail_unless ( 4 == errflg , "fail to detect resource_max.nodes incorrect syntax" ) ; name = NULL ; if ( attribs ) { free_attrib ( 0 ) ; } oper = type = 0 ; copt = "s q one_nodeq resources_max.nodes = 5" ; errflg = parse ( ( char * ) copt , & oper , & type , & name , & attribs ) ; fail_unless ( 0 == errflg , "fail to detect resource_max.nodes correct syntax" ) ; } END_TEST START_TEST ( test_res_max_nodect ) { const char * copt = "s q one_nodeq resources_max.nodect = 1:ppn=32" ; int type , oper , errflg ; char * name = NULL ; struct attropl * attribs = NULL ; type = oper = 0 ; errflg = parse ( ( char * ) copt , & oper , & type , & name , & attribs ) ; fail_unless ( 4 == errflg , "fail to detect resource_max.nodect incorrect syntax" ) ; name = NULL ; if ( attribs ) { free_attrib ( & attribs ) ; } oper = type = 0 ; copt = "s q one_nodeq resources_max.nodect = 5" ; errflg = parse ( ( char * ) copt , & oper , & type , & name , & attribs ) ; fail_unless ( 0 == errflg , "fail to detect resouces_max.nodect correct syntax" ) ; } 