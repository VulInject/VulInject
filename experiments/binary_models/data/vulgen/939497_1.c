static inline void mark_socket_open ( tor_socket_t s ) { if ( s > max_socket ) { if ( max_socket == - 1 ) { max_socket = s + 128 ; } else { open_sockets = bitarray_expand ( open_sockets , max_socket , s + 128 ) ; max_socket = s + 128 ; } } if ( bitarray_is_set ( open_sockets , s ) ) { log_warn ( LD_BUG , "I thought that %d was already open, but socket() just " "gave it to me!" , s ) ; } bitarray_set ( open_sockets , s ) ; } 