static irqreturn_t norotate_irq ( int irq , void * data ) { struct ipu_image_convert_chan * chan = data ; struct ipu_image_convert_ctx * ctx ; struct ipu_image_convert_run * run ; unsigned long flags ; irqreturn_t ret ; spin_lock_irqsave ( & chan -> irqlock , flags ) ; run = chan -> current_run ; if ( ! run ) { ret = IRQ_NONE ; out } ctx = run -> ctx ; if ( ipu_rot_mode_is_irt ( ctx -> rot_mode ) ) { return IRQ_HANDLED ; } ret = do_irq ( run ) ; out spin_unlock_irqrestore ( & chan -> irqlock , flags ) ; return ret ; } 