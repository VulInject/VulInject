void CreateSharedProcArray ( void ) { bool found ; procArray = ( ProcArrayStruct * ) ShmemInitStruct ( "Proc Array" , add_size ( offsetof ( ProcArrayStruct , pgprocnos ) , mul_size ( sizeof ( int ) , PROCARRAY_MAXPROCS ) ) , & found ) ; if ( ! found ) { procArray -> maxProcs = PROCARRAY_MAXPROCS ; procArray -> maxKnownAssignedXids = TOTAL_MAX_CACHED_SUBXIDS ; procArray -> numKnownAssignedXids = 0 ; procArray -> tailKnownAssignedXids = 0 ; procArray -> headKnownAssignedXids = 0 ; SpinLockInit ( & procArray -> known_assigned_xids_lck ) ; procArray -> lastOverflowedXid = InvalidTransactionId ; procArray -> replication_slot_xmin = InvalidTransactionId ; procArray -> replication_slot_catalog_xmin = InvalidTransactionId ; ShmemVariableCache -> xactCompletionCount = 1 ; } allProcs = ProcGlobal -> allProcs ; if ( EnableHotStandby ) { KnownAssignedXids = ( TransactionId * ) ShmemInitStruct ( "KnownAssignedXids" , mul_size ( sizeof ( TransactionId ) , TOTAL_MAX_CACHED_SUBXIDS ) , & found ) ; KnownAssignedXidsValid = ( bool * ) ShmemInitStruct ( "KnownAssignedXidsValid" , mul_size ( sizeof ( bool ) , TOTAL_MAX_CACHED_SUBXIDS ) , & found ) ; } } 