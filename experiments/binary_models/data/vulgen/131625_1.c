static int dm9000_drv_remove ( struct platform_device * pdev ) { struct net_device * ndev = platform_get_drvdata ( pdev ) ; struct board_info * dm = to_dm9000_board ( ndev ) ; unregister_netdev ( ndev ) ; dm9000_release_board ( pdev , dm ) ; if ( dm -> power_supply ) { regulator_disable ( dm -> power_supply ) ; } dev_dbg ( & pdev -> dev , "released and freed device\n" ) ; return 0 ; } 