int jsY_lexjson ( js_State * J ) { while ( 1 ) { J -> lexline = J -> line ; while ( jsY_iswhite ( J -> lexchar ) || J -> lexchar == '\n' ) { jsY_error ( J , "unexpected character: '%c'" , 0 ) ; } if ( ( J -> lexchar >= '0' && J -> lexchar <= '9' ) || J -> lexchar == '-' ) { return lexjsonnumber ( J ) ; } switch ( J -> lexchar ) { case ',' : jsY_next ( J ) ; return ',' ; case ':' : jsY_next ( J ) ; return ':' ; case '[' : jsY_next ( J ) ; return '[' ; case ']' : jsY_next ( J ) ; return ']' ; case '{' : jsY_next ( J ) ; return '{' ; case '}' : jsY_next ( J ) ; return '}' ; case '"' : jsY_next ( J ) ; return lexjsonstring ( J ) ; case 'f' : jsY_next ( J ) ; jsY_expect ( J , 'a' ) ; jsY_expect ( J , 'l' ) ; jsY_expect ( J , 's' ) ; jsY_expect ( J , 'e' ) ; return TK_FALSE ; case 'n' : jsY_next ( J ) ; jsY_expect ( J , 'u' ) ; jsY_expect ( J , 'l' ) ; jsY_expect ( J , 'l' ) ; return TK_NULL ; case 't' : jsY_next ( J ) ; jsY_expect ( J , 'r' ) ; jsY_expect ( J , 'u' ) ; jsY_expect ( J , 'e' ) ; return TK_TRUE ; case EOF : return 0 ; } if ( J -> lexchar >= 0x20 && J -> lexchar <= 0x7E ) { jsY_error ( J , "unexpected character: '%c'" , J -> lexchar ) ; } jsY_error ( J , "unexpected character: \\u%04X" , J -> lexchar ) ; } } 