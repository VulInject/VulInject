void egrecv ( struct eg_softc * sc ) { while ( sc -> eg_incount < EG_INLEN ) { sc -> eg_pcb [ 0 ] = EG_CMD_RECVPACKET ; sc -> eg_pcb [ 1 ] = 0x08 ; sc -> eg_pcb [ 2 ] = 0 ; sc -> eg_pcb [ 3 ] = 0 ; sc -> eg_pcb [ 4 ] = 0 ; sc -> eg_pcb [ 5 ] = 0 ; sc -> eg_pcb [ 6 ] = EG_BUFLEN & 0xff ; sc -> eg_pcb [ 7 ] = ( EG_BUFLEN >> 8 ) & 0xff ; sc -> eg_pcb [ 8 ] = 0 ; sc -> eg_pcb [ 9 ] = 0 ; sc -> eg_incount ++ ; } } 