static int mc_node ( di_minor_t minor , di_node_t node ) { char path [ PATH_MAX ] , l_path [ PATH_MAX ] , * buf , * devfspath ; char * minor_nm ; minor_nm = di_minor_name ( minor ) ; if ( minor_nm == NULL ) { return ( DEVFSADM_CONTINUE ) ; } devfspath = di_devfs_path ( node ) ; ( void ) strcpy ( path , devfspath ) ; ( void ) strcat ( path , ":" ) ; ( void ) strcat ( path , minor_nm ) ; if ( devfsadm_enumerate_int ( path , 0 , & buf , mc_rules , 1 ) ) { return ( DEVFSADM_CONTINUE ) ; } ( void ) strcpy ( l_path , "mc/mc" ) ; ( void ) strcat ( l_path , buf ) ; free ( buf ) ; ( void ) devfsadm_mklink ( l_path , node , minor , 0 ) ; return ( DEVFSADM_CONTINUE ) ; } 