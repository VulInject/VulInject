time_t conn_stats_save ( time_t now ) { char * str = NULL ; if ( start_of_conn_stats_interval + WRITE_STATS_INTERVAL > now ) { done } str = conn_stats_format ( now ) ; conn_stats_reset ( now ) ; if ( ! check_or_create_data_subdir ( "stats" ) ) { write_to_data_subdir ( "stats" , "conn-stats" , str , "connection statistics" ) ; } done tor_free ( str ) ; return start_of_conn_stats_interval + WRITE_STATS_INTERVAL ; } 