Cell * matchop ( Node * * a , int n ) { Cell * x , * y ; char * s , * t ; int i ; fa * pfa ; int * mf ( fa * , const char * ) match ; , mode 0 if ( n == MATCHFCN ) { mf = pmatch ; mode = 1 ; } x = execute ( a [ 1 ] ) ; s = getsval ( x ) ; if ( a [ 0 ] == NULL ) { i = * mf ( ( fa * ) a [ 2 ] , s ) ; } else { y = execute ( a [ 2 ] ) ; t = getsval ( y ) ; pfa = makedfa ( t , mode ) ; i = * mf ( pfa , s ) ; tempfree ( y ) ; } tempfree ( x ) ; if ( n == MATCHFCN ) { int start = patbeg - s + 1 ; setfval ( rstartloc , ( Awkfloat ) start ) ; setfval ( rlengthloc , ( Awkfloat ) patlen ) ; x = gettemp ( ) ; x -> tval = NUM ; x -> fval = start ; return x ; } if ( ( n == MATCH && i == 1 ) || ( n == NOTMATCH && i == 0 ) ) { return ( True ) ; } else { return ( False ) ; } } 