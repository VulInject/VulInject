StatementClass * stmt = ( StatementClass * ) hstmt ; int len ; mylog ( "SQLSetCursorName: hstmt=%u, szCursor=%u, cbCursorMax=%d\n" , hstmt , szCursor , cbCursor ) ; if ( ! stmt ) { SC_log_error ( func , "" , NULL ) ; return SQL_INVALID_HANDLE ; } len = ( cbCursor == SQL_NTS ) ?strlen ( ( char * ) szCursor ) : cbCursor ; if ( len <= 0 || len > sizeof ( stmt -> cursor_name ) - 1 ) { SC_set_error ( stmt , STMT_INVALID_CURSOR_NAME , "Invalid Cursor Name" ) ; return SQL_ERROR ; } strncpy_null ( ( char * ) stmt -> cursor_name , ( char * ) szCursor , len + 1 ) ; return SQL_SUCCESS ; 