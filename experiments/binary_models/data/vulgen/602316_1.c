static void hns3_init_ring_hw ( struct hns3_enet_ring * ring ) { dma_addr_t dma = ring -> desc_dma_addr ; struct hnae3_queue * q = ring -> tqp ; if ( ! HNAE3_IS_TX_RING ( ring ) ) { hns3_write_dev ( q , HNS3_RING_RX_RING_BASEADDR_L_REG , ( u32 ) dma ) ; hns3_write_dev ( q , HNS3_RING_RX_RING_BASEADDR_H_REG , ( u32 ) ( ( dma >> 31 ) >> 1 ) ) ; hns3_write_dev ( q , HNS3_RING_RX_RING_BD_NUM_REG , ring -> desc_num / 8 - 1 ) ; } else { hns3_write_dev ( q , HNS3_RING_TX_RING_BASEADDR_L_REG , ( u32 ) dma ) ; hns3_write_dev ( q , HNS3_RING_TX_RING_BASEADDR_H_REG , ( u32 ) ( ( dma >> 31 ) >> 1 ) ) ; hns3_write_dev ( q , HNS3_RING_TX_RING_BD_NUM_REG , ring -> desc_num / 8 - 1 ) ; } } 