static struct inode * nfs_layout_find_inode_by_stateid ( nfs_client * clp , const nfs4_stateid * stateid ) __must_hold ( RCU ) ( nfs_server * server , inode * inode , pnfs_layout_hdr * lo , rcu_read_lock ( ) , list_for_each_entry_rcu ( , , ) { list_for_each_entry_rcu ( , , ) { if ( ! pnfs_layout_is_valid ( lo ) ) { continue ; } } if ( ! nfs4_stateid_match_other ( stateid , & lo -> plh_stateid ) ) { continue ; } } if ( nfs_sb_active ( server -> super ) ) { inode = igrab ( lo -> plh_inode ) ; } else { inode = ERR_PTR ( - EAGAIN ) ; } ) ; rcu_read_unlock ( ) ; if ( inode ) { return inode ; } return ERR_PTR ( - EAGAIN ) ; rcu_read_unlock ( ) ; return ERR_PTR ( - ENOENT ) ; 