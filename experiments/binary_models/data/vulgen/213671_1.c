void ficlSystemDestroy ( ficlSystem * system ) { if ( system -> dictionary ) { ficlDictionaryDestroy ( system -> dictionary ) ; } system -> dictionary = NULL ; system -> environment = NULL ; if ( system -> locals ) { ficlDictionaryDestroy ( system -> locals ) ; } system -> locals = NULL ; while ( system -> vmList != NULL ) { ficlVm * vm = system -> vmList ; system -> vmList = system -> vmList -> link ; ficlVmDestroy ( vm ) ; } if ( ficlSystemGlobal == system ) { ficlSystemGlobal = NULL ; } ficlFree ( system ) ; system = NULL ; } 