static void k3_r5_rproc_mbox_callback ( struct mbox_client * client , void * data ) { struct k3_r5_rproc * kproc = container_of ( client , k3_r5_rproc , client ) ; struct device * dev = kproc -> rproc -> dev . parent ; const char * name = kproc -> rproc -> name ; u32 msg = omap_mbox_message ( data ) ; dev_dbg ( dev , "mbox msg: 0x%x\n" , msg ) ; switch ( msg ) { case RP_MBOX_CRASH : dev_err ( dev , "K3 R5F rproc %s crashed\n" , name ) ; break ; case RP_MBOX_ECHO_REPLY : dev_info ( dev , "received echo reply from %s\n" , name ) ; break ; default : if ( msg >= RP_MBOX_READY && msg < RP_MBOX_END_MSG ) { return ; } if ( rproc_vq_interrupt ( kproc -> rproc , msg ) == IRQ_NONE ) { dev_dbg ( dev , "no message was found in vqid %d\n" , msg ) ; } } } 