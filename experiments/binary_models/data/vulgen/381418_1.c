int vme_master_set ( struct vme_resource * resource , int enabled , unsigned long long vme_base , unsigned long long size , u32 aspace , u32 cycle , u32 dwidth ) { struct vme_bridge * bridge = find_bridge ( resource ) ; struct vme_master_resource * image ; int retval ; if ( resource -> type != VME_MASTER ) { printk ( KERN_ERR "Not a master resource\n" ) ; return - EINVAL ; } image = list_entry ( resource -> entry , vme_master_resource , list ) ; if ( ! ( ( ( image -> address_attr & aspace ) == aspace ) && ( ( image -> cycle_attr & cycle ) == cycle ) && ( ( image -> width_attr & dwidth ) == dwidth ) ) ) { printk ( KERN_WARNING "Invalid attributes\n" ) ; return - EINVAL ; } retval = vme_check_window ( aspace , vme_base , size ) ; if ( retval ) { return retval ; } return bridge -> master_set ( image , enabled , vme_base , size , aspace , cycle , dwidth ) ; } 