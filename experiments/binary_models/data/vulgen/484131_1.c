static int xenFormatXLDomainNamespaceData ( virConf * conf , virDomainDef * def ) { libxlDomainXmlNsDef * nsdata = def -> namespaceData ; g_autoptr ( ) args = NULL ; size_t i ; if ( ! nsdata ) { return 0 ; } if ( nsdata -> num_args == 0 ) { return 0 ; } args -> type = VIR_CONF_LIST ; args -> list = NULL ; for ( i = 0 ; i < nsdata -> num_args ; i ++ ) { virConfValue * val ; virConfValue * tmp ; val = g_new0 ( virConfValue , 1 ) ; val -> type = VIR_CONF_STRING ; val -> str = g_strdup ( nsdata -> args [ i ] ) ; tmp = args -> list ; while ( tmp && tmp -> next ) { tmp = tmp -> next ; } if ( tmp ) { tmp -> next = val ; } else { args -> list = val ; } } if ( args -> list != NULL && virConfSetValue ( conf , "device_model_args" , & args ) < 0 ) { return - 1 ; } return 0 ; } 