static void sram_init ( struct adapter * adapter ) { u32 tmp ; tmp = read_reg_dw ( adapter , 0x71c ) ; write_reg_dw ( adapter , 0x71c , 1 ) ; if ( read_reg_dw ( adapter , 0x71c ) != 0 ) { write_reg_dw ( adapter , 0x71c , tmp ) ; adapter -> dw_sram_type = tmp & 0x30000 ; ddprintk ( "%s: dw_sram_type = %x\n" , __func__ , adapter -> dw_sram_type ) ; } else { ddprintk ( "%s: dw_sram_type = %x\n" , __func__ , adapter -> dw_sram_type ) ; } } 