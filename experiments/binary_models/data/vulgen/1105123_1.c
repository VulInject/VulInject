static int asus_rfkill_init ( struct asus_laptop * asus ) { int result = 0 ; if ( asus -> is_pega_lucid ) { return - ENODEV ; } if ( ! acpi_check_handle ( asus -> handle , METHOD_GPS_ON , NULL ) && ! acpi_check_handle ( asus -> handle , METHOD_GPS_OFF , NULL ) && ! acpi_check_handle ( asus -> handle , METHOD_GPS_STATUS , NULL ) ) { result = asus_rfkill_setup ( asus , & asus -> gps , "asus-gps" , - 1 , RFKILL_TYPE_GPS , & asus_gps_rfkill_ops ) ; } if ( result ) { exit } if ( ! acpi_check_handle ( asus -> handle , METHOD_WLAN , NULL ) && asus -> wled_type == TYPE_RFKILL ) { result = asus_rfkill_setup ( asus , & asus -> wlan , "asus-wlan" , WL_RSTS , RFKILL_TYPE_WLAN , & asus_rfkill_ops ) ; } if ( result ) { exit } if ( ! acpi_check_handle ( asus -> handle , METHOD_BLUETOOTH , NULL ) && asus -> bled_type == TYPE_RFKILL ) { result = asus_rfkill_setup ( asus , & asus -> bluetooth , "asus-bluetooth" , BT_RSTS , RFKILL_TYPE_BLUETOOTH , & asus_rfkill_ops ) ; } if ( result ) { exit } if ( ! acpi_check_handle ( asus -> handle , METHOD_WWAN , NULL ) ) { result = asus_rfkill_setup ( asus , & asus -> wwan , "asus-wwan" , WW_RSTS , RFKILL_TYPE_WWAN , & asus_rfkill_ops ) ; } if ( result ) { exit } if ( ! acpi_check_handle ( asus -> handle , METHOD_WIMAX , NULL ) ) { result = asus_rfkill_setup ( asus , & asus -> wimax , "asus-wimax" , WM_RSTS , RFKILL_TYPE_WIMAX , & asus_rfkill_ops ) ; } if ( result ) { exit } exit return result ; } 