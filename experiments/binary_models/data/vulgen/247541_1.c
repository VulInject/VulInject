static u32 gf100_fuse_read ( struct nvkm_fuse * fuse , u32 addr ) { struct nvkm_device * device = fuse -> subdev . device ; unsigned long flags ; u32 fuse_enable , unk , val ; spin_lock_irqsave ( & fuse -> lock , flags ) ; fuse_enable = nvkm_mask ( device , 0x022400 , 0x800 , 0x800 ) ; val = nvkm_rd32 ( device , 0x021100 + addr ) ; nvkm_wr32 ( device , 0x021000 , unk ) ; nvkm_wr32 ( device , 0x022400 , fuse_enable ) ; spin_unlock_irqrestore ( & fuse -> lock , flags ) ; return val ; } 