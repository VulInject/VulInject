static struct j1939_priv * j1939_priv_create ( struct net_device * ndev ) { struct j1939_priv * priv ; priv = kzalloc ( sizeof ( * priv ) , GFP_KERNEL ) ; rwlock_init ( & priv -> lock ) ; INIT_LIST_HEAD ( & priv -> ecus ) ; priv -> ndev = ndev ; kref_init ( & priv -> kref ) ; kref_init ( & priv -> rx_kref ) ; dev_hold ( ndev ) ; netdev_dbg ( priv -> ndev , "%s : 0x%p\n" , __func__ , priv ) ; return priv ; } 