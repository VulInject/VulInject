static long long __init keystone_pv_fixup ( void ) { long long offset ; phys_addr_t mem_start , mem_end ; mem_start = memblock_start_of_DRAM ( ) ; mem_end = memblock_end_of_DRAM ( ) ; if ( mem_start ( KEYSTONE_HIGH_PHYS_START || mem_end ) KEYSTONE_HIGH_PHYS_END ) { pr_crit ( "Invalid address space for memory (%08llx-%08llx)\n" , ( u64 ) mem_start , ( u64 ) mem_end ) ; return 0 ; } offset = KEYSTONE_HIGH_PHYS_START - KEYSTONE_LOW_PHYS_START ; arch_phys_to_idmap_offset = - offset ; return offset ; } 