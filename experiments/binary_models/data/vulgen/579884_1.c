static void kirkwood_dma_conf_mbus_windows ( void __iomem * base , int win , unsigned long dma , const struct mbus_dram_target_info * dram ) { int i ; writel ( 0 , base + KIRKWOOD_AUDIO_WIN_CTRL_REG ( win ) ) ; writel ( 0 , base + KIRKWOOD_AUDIO_WIN_BASE_REG ( win ) ) ; for ( i = 0 ; i < dram -> num_cs ; i ++ ) { const struct mbus_dram_window * cs = dram -> cs + i ; if ( ( cs -> base & 0xffff0000 ) < ( dma & 0xffff0000 ) ) { writel ( cs -> base & 0xffff0000 , base + KIRKWOOD_AUDIO_WIN_BASE_REG ( win ) ) ; } } } 