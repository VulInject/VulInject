static void lcs_remove_device ( struct ccwgroup_device * ccwgdev ) { struct lcs_card * card ; card = dev_get_drvdata ( & ccwgdev -> dev ) ; if ( ! card ) { return ; } LCS_DBF_TEXT ( 3 , setup , "remdev" ) ; LCS_DBF_HEX ( 3 , setup , & card , sizeof ( void * ) ) ; if ( ccwgdev -> state == CCWGROUP_ONLINE ) { lcs_shutdown_device ( ccwgdev ) ; } lcs_cleanup_card ( card ) ; lcs_free_card ( card ) ; dev_set_drvdata ( & ccwgdev -> dev , NULL ) ; put_device ( & ccwgdev -> dev ) ; } 