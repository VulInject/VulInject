int pv_get_method ( struct sip_msg * msg , pv_param_t * param , pv_value_t * res ) { if ( msg -> first_line . type == SIP_REQUEST ) { return pv_get_strintval ( msg , param , res , & msg -> first_line . u . request . method , ( int ) msg -> first_line . u . request . method_value ) ; } if ( IS_HTTP_REPLY ( msg ) ) { return pv_get_null ( msg , param , res ) ; } if ( msg -> cseq == NULL && ( ( parse_headers ( msg , HDR_CSEQ_F , 0 ) == - 1 ) || ( msg -> cseq == NULL ) ) ) { LM_ERR ( "no CSEQ header\n" ) ; return pv_get_null ( msg , param , res ) ; } return pv_get_strintval ( msg , param , res , & get_cseq ( msg ) -> method , get_cseq ( msg ) -> method_id ) ; } 