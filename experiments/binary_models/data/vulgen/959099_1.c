static unsigned int dcn32_get_num_free_pipes ( struct dc * dc , struct dc_state * context ) { unsigned int i ; unsigned int free_pipes = 0 ; unsigned int num_pipes = 0 ; for ( i = 0 ; i < dc -> res_pool -> pipe_count ; i ++ ) { struct pipe_ctx * pipe = & context -> res_ctx . pipe_ctx [ i ] ; if ( pipe -> stream && ! pipe -> top_pipe ) { while ( pipe ) { num_pipes ++ ; pipe = pipe -> bottom_pipe ; } } } return free_pipes ; } 