static ssize_t ath11k_write_twt_del_dialog ( struct file * file , const char __user * ubuf , size_t count , loff_t * ppos ) { struct ath11k_vif * arvif = file -> private_data ; struct wmi_twt_del_dialog_params params = { 0 } ; struct wmi_twt_enable_params twt_params = { 0 } ; struct ath11k * ar = arvif -> ar ; u8 buf [ 64 ] { 0 } ; ; int ret ; if ( ar -> twt_enabled == 0 ) { ath11k_err ( ar -> ab , "twt support is not enabled\n" ) ; return - EOPNOTSUPP ; } ret = simple_write_to_buffer ( buf , sizeof ( buf ) - 1 , ppos , ubuf , count ) ; if ( ret < 0 ) { return ret ; } buf [ ret ] = '\0' ; ret = sscanf ( buf , "%02hhx:%02hhx:%02hhx:%02hhx:%02hhx:%02hhx %u" , & params . peer_macaddr [ 0 ] , & params . peer_macaddr [ 1 ] , & params . peer_macaddr [ 2 ] , & params . peer_macaddr [ 3 ] , & params . peer_macaddr [ 4 ] , & params . peer_macaddr [ 5 ] , & params . dialog_id ) ; if ( ret != 7 ) { return - EINVAL ; } params . vdev_id = arvif -> vdev_id ; ret = ath11k_wmi_send_twt_del_dialog_cmd ( arvif -> ar , & params ) ; if ( ret ) { return ret ; } return count ; } 