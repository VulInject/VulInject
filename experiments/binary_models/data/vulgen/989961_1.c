int r8712_recv_indicatepkts_in_order ( struct _adapter * padapter , struct recv_reorder_ctrl * preorder_ctrl , int bforced ) { struct list_head * phead , * plist ; union recv_frame * prframe ; struct rx_pkt_attrib * pattrib ; int bPktInBuf = false ; phead = & ppending_recvframe_queue -> queue ; plist = phead -> next ; if ( bforced ) { if ( list_empty ( phead ) ) { return true ; } prframe = container_of ( plist , recv_frame , u . list ) ; pattrib = & prframe -> u . hdr . attrib ; preorder_ctrl -> indicate_seq = pattrib -> seq_num ; } while ( ! list_empty ( phead ) ) { prframe = container_of ( plist , recv_frame , u . list ) ; pattrib = & prframe -> u . hdr . attrib ; if ( ! SN_LESS ( preorder_ctrl -> indicate_seq , pattrib -> seq_num ) ) { plist = plist -> next ; list_del_init ( & prframe -> u . hdr . list ) ; if ( SN_EQUAL ( preorder_ctrl -> indicate_seq , pattrib -> seq_num ) ) { preorder_ctrl -> indicate_seq = ( preorder_ctrl -> indicate_seq + 1 ) % 4096 ; } if ( ! pattrib -> amsdu ) { if ( ! padapter -> driver_stopped && ! padapter -> surprise_removed ) { r8712_recv_indicatepkt ( padapter , prframe ) ; } } if ( pattrib -> amsdu == 1 ) { amsdu_to_msdu ( padapter , prframe ) ; } bPktInBuf = false ; } else { bPktInBuf = true ; break ; } } return bPktInBuf ; } 