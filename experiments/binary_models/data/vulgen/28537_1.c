struct inode * ovl_get_inode ( struct super_block * sb , struct inode * realinode ) { struct inode * inode ; inode = iget5_locked ( sb , ( unsigned long ) realinode , ovl_inode_test , ovl_inode_set , realinode ) ; if ( inode && inode -> i_state & I_NEW ) { ovl_fill_inode ( inode , realinode -> i_mode , realinode -> i_rdev ) ; set_nlink ( inode , realinode -> i_nlink ) ; } return inode ; } 