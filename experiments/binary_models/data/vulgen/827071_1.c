ssize_t nfs_file_read ( struct kiocb * iocb , struct iov_iter * to ) { struct inode * inode = file_inode ( iocb -> ki_filp ) ; ssize_t result ; if ( iocb -> ki_flags & IOCB_DIRECT ) { return nfs_file_direct_read ( iocb , to ) ; } dprintk ( "NFS: read(%pD2, %zu@%lu)\n" , iocb -> ki_filp , iov_iter_count ( to ) , ( unsigned long ) iocb -> ki_pos ) ; nfs_start_io_read ( inode ) ; result = nfs_revalidate_mapping ( inode , iocb -> ki_filp -> f_mapping ) ; if ( ! result ) { result = generic_file_read_iter ( iocb , to ) ; if ( result > 0 ) { nfs_add_stats ( inode , NFSIOS_NORMALREADBYTES , 0 ) ; } } nfs_end_io_read ( inode ) ; return result ; } 