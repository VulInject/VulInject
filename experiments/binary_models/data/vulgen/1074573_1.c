int ff_speedhq_mb_y_order_to_mb ( int mb_y_order , int mb_height , int * first_in_slice ) { int slice_num = 0 ; while ( mb_y_order >= ff_speedhq_mb_rows_in_slice ( slice_num , mb_height ) ) { mb_y_order -= ff_speedhq_mb_rows_in_slice ( slice_num , mb_height ) ; } * first_in_slice = ( mb_y_order == 0 ) ; return mb_y_order * 4 + slice_num ; } const FFCodec ff_speedhq_encoder = { . p . name = "speedhq" CODEC_LONG_NAME ( "NewTek SpeedHQ" ) . p . type = AVMEDIA_TYPE_VIDEO . p . id = AV_CODEC_ID_SPEEDHQ . p . priv_class = & ff_mpv_enc_class . p . capabilities = AV_CODEC_CAP_ENCODER_REORDERED_OPAQUE . priv_data_size = sizeof ( SpeedHQEncContext ) . init = ff_mpv_encode_init FF_CODEC_ENCODE_CB ( ff_mpv_encode_picture ) . close = ff_mpv_encode_end . caps_internal = FF_CODEC_CAP_INIT_CLEANUP . p . pix_fmts = ( const AVPixelFormat [ ] ) { AV_PIX_FMT_YUV420P AV_PIX_FMT_YUV422P AV_PIX_FMT_YUV444P AV_PIX_FMT_NONE } } ; 