static void nbio_v2_3_vcn_doorbell_range ( struct amdgpu_device * adev , bool use_doorbell , int doorbell_index , int instance ) { u32 reg = instance ?SOC15_REG_OFFSET ( NBIO , 0 , mmBIF_MMSCH1_DOORBELL_RANGE ) : SOC15_REG_OFFSET ( NBIO , 0 , mmBIF_MMSCH0_DOORBELL_RANGE ) ; u32 doorbell_range = RREG32 ( reg ) ; if ( use_doorbell ) { doorbell_range = REG_SET_FIELD ( doorbell_range , BIF_MMSCH0_DOORBELL_RANGE , OFFSET , doorbell_index ) ; doorbell_range = REG_SET_FIELD ( doorbell_range , BIF_MMSCH0_DOORBELL_RANGE , SIZE , 8 ) ; } else { doorbell_range = REG_SET_FIELD ( doorbell_range , BIF_MMSCH0_DOORBELL_RANGE , SIZE , 0 ) ; } } 