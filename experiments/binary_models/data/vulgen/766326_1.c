void encode ( char * in , char * out ) { unsigned int i , o = 0 ; for ( i = 0 ; i < inlen ; i ++ ) { if ( in [ i ] == '+' ) { sprintf ( & out [ o ] , "%%2B" ) ; o += 3 ; } if ( isspace ( ( unsigned char ) in [ i ] ) ) { out [ o ++ ] = '+' ; } if ( ! isalnum ( ( unsigned char ) in [ i ] ) ) { sprintf ( & out [ o ] , "%%%02x" , ( unsigned char ) in [ i ] ) ; o += 3 ; } else { out [ o ++ ] = in [ i ] ; } } out [ o ++ ] = '\0' ; } 