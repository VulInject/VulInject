static ssize_t clk_cur_freq_mhz_show ( struct device * dev , struct device_attribute * attr , char * buf ) { struct hl_device * hdev = dev_get_drvdata ( dev ) ; long value ; value = hl_fw_get_frequency ( hdev , hdev -> asic_prop . clk_pll_index , true ) ; if ( value < 0 ) { return value ; } return sprintf ( buf , "%lu\n" , ( value / 1000 / 1000 ) ) ; } 