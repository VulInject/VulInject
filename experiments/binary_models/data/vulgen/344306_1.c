static struct inode * proc_pid_make_base_inode ( struct super_block * sb , struct task_struct * task , umode_t mode ) { struct inode * inode ; struct proc_inode * ei ; struct pid * pid ; inode = proc_pid_make_inode ( sb , task , mode ) ; if ( ! inode ) { return NULL ; } ei = PROC_I ( inode ) ; pid = ei -> pid ; spin_lock ( & pid -> lock ) ; spin_unlock ( & pid -> lock ) ; return inode ; } 