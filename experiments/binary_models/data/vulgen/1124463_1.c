PHP_FUNCTION ( ) { zval * queue , * data ; sysvmsg_queue_t * mq = NULL ; struct msqid_ds stat ; RETVAL_FALSE ; mq = Z_SYSVMSG_QUEUE_P ( queue ) ; if ( msgctl ( mq -> id , IPC_STAT , & stat ) == 0 ) { zval * item ; if ( ( item = zend_hash_str_find ( Z_ARRVAL_P ( data ) , "msg_perm.uid" , sizeof ( "msg_perm.uid" ) - 1 ) ) != NULL ) { stat . msg_perm . uid = zval_get_long ( item ) ; } if ( ( item = zend_hash_str_find ( Z_ARRVAL_P ( data ) , "msg_perm.gid" , sizeof ( "msg_perm.gid" ) - 1 ) ) != NULL ) { stat . msg_perm . gid = zval_get_long ( item ) ; } if ( ( item = zend_hash_str_find ( Z_ARRVAL_P ( data ) , "msg_perm.mode" , sizeof ( "msg_perm.mode" ) - 1 ) ) != NULL ) { stat . msg_perm . mode = zval_get_long ( item ) ; } if ( ( item = zend_hash_str_find ( Z_ARRVAL_P ( data ) , "msg_qbytes" , sizeof ( "msg_qbytes" ) - 1 ) ) != NULL ) { stat . msg_qbytes = zval_get_long ( item ) ; } if ( msgctl ( mq -> id , IPC_SET , & stat ) == 0 ) { RETVAL_TRUE ; } } } 