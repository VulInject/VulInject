TEST_IMPL ( ) { uv_loop_t * loop ; int r ; const char * sys_drive = getenv ( "SystemDrive" ) ; char path [ ] "\\\\?\\X:\\bootsect.bak" ; ; ASSERT_NOT_NULL ( sys_drive ) ; loop = uv_default_loop ( ) ; r = uv_fs_event_init ( loop , & fs_event ) ; ASSERT ( r == 0 ) ; r = uv_fs_event_start ( & fs_event , fail_cb , path , 0 ) ; if ( r == UV_ENOENT ) { RETURN_SKIP ( "bootsect.bak doesn't exist in system root.\n" ) ; } ASSERT ( r == 0 ) ; uv_close ( ( uv_handle_t * ) & fs_event , NULL ) ; MAKE_VALGRIND_HAPPY ( ) ; return 0 ; } 