static int usba_device2dip ( uintptr_t usb_dev_addr , uintptr_t * dip_addr ) { usba_device_t usb_dev ; usba_device2devinfo_cbdata_t cb_data ; cb_data . u2d_target_usb_dev_p = usb_dev_addr ; cb_data . u2d_dip_addr = dip_addr ; cb_data . u2d_found = FALSE ; if ( mdb_vread ( & usb_dev , sizeof ( usba_device_t ) , usb_dev_addr ) == - 1 ) { mdb_warn ( "failed to read usba_device struct" ) ; return ( - 1 ) ; } if ( mdb_pwalk ( "devinfo_children" , find_dip , & cb_data , ( uintptr_t ) usb_dev . usb_root_hub_dip ) != 0 ) { mdb_warn ( "failed to walk devinfo_children" ) ; return ( - 1 ) ; } return ( 0 ) ; } 