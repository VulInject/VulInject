static void test_set_cc ( void ) { quicly_conn_t * conn ; int ret ; ok ( ret == 0 ) ; quicly_stats_t stats ; quicly_set_cc ( conn , & quicly_cc_type_pico ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "pico" ) == 0 ) ; quicly_set_cc ( conn , & quicly_cc_type_pico ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "pico" ) == 0 ) ; quicly_set_cc ( conn , & quicly_cc_type_reno ) ; quicly_set_cc ( conn , & quicly_cc_type_pico ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "pico" ) == 0 ) ; quicly_set_cc ( conn , & quicly_cc_type_cubic ) ; quicly_set_cc ( conn , & quicly_cc_type_pico ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "pico" ) == 0 ) ; quicly_set_cc ( conn , & quicly_cc_type_pico ) ; quicly_set_cc ( conn , & quicly_cc_type_reno ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "reno" ) == 0 ) ; quicly_set_cc ( conn , & quicly_cc_type_pico ) ; quicly_set_cc ( conn , & quicly_cc_type_cubic ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "cubic" ) == 0 ) ; quicly_set_cc ( conn , & quicly_cc_type_reno ) ; quicly_set_cc ( conn , & quicly_cc_type_cubic ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "cubic" ) == 0 ) ; quicly_set_cc ( conn , & quicly_cc_type_cubic ) ; quicly_set_cc ( conn , & quicly_cc_type_reno ) ; ret = quicly_get_stats ( conn , & stats ) ; ok ( ret == 0 ) ; ok ( strcmp ( stats . cc . type -> name , "reno" ) == 0 ) ; } 