static __maybe_unused int __cvdso_gettimeofday_data ( const struct vdso_data * vd , struct __kernel_old_timeval * tv , struct timezone * tz ) { if ( likely ( tv != NULL ) ) { struct __kernel_timespec ts ; if ( do_hres ( & vd [ CS_HRES_COARSE ] , CLOCK_REALTIME , & ts ) ) { return gettimeofday_fallback ( tv , tz ) ; } tv -> tv_sec = ts . tv_sec ; tv -> tv_usec = ( u32 ) ts . tv_nsec / NSEC_PER_USEC ; } return 0 ; } 