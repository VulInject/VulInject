static void node_init_cache_dev ( struct node * node ) { struct device * dev ; dev = kzalloc ( sizeof ( * dev ) , GFP_KERNEL ) ; if ( ! dev ) { return ; } device_initialize ( dev ) ; dev -> parent = & node -> dev ; dev -> release = node_cache_release ; if ( dev_set_name ( dev , "memory_side_cache" ) ) { put_device } if ( device_add ( dev ) ) { put_device } node -> cache_dev = dev ; return ; put_device put_device ( dev ) ; } 