static char * html_quote_s ( char * str ) { Str tmp = NULL ; char * p , * q ; int space = TRUE ; for ( p = str ; * p ; p ++ ) { if ( IS_SPACE ( * p ) ) { if ( space ) { continue ; } q = "&nbsp;" ; space = TRUE ; } else { q = html_quote_char ( * p ) ; space = FALSE ; } if ( q ) { Strcat_charp ( tmp , q ) ; } else { if ( tmp ) { Strcat_char ( tmp , * p ) ; } } } if ( tmp ) { return tmp -> ptr ; } return str ; } 