Static void parseNote ( Char * note_ , parsedNote * pnote ) { Char note [ 256 ] ; Char onlymidi [ 256 ] ; Char STR1 [ 256 ] ; Char STR2 [ 10 ] ; strcpy ( note , note_ ) ; * pnote -> shortcut = '\0' ; * pnote -> xtuplet = '\0' ; * pnote -> accidental = '\0' ; * pnote -> dotgroup = '\0' ; * pnote -> duration = '\0' ; * pnote -> octave = '\0' ; * onlymidi = '\0' ; extractFirst ( note , & pnote -> name ) ; extractAfter ( note , 'x' , pnote -> xtuplet ) ; extractAfter ( note , ',' , pnote -> shortcut ) ; if ( * pnote -> shortcut == '\0' ) { extractDotShortcut ( note , pnote -> shortcut ) ; } if ( pnote -> name != rest ) { extractGroup ( note , 's' , pnote -> accidental ) ; if ( * pnote -> accidental == '\0' ) { extractGroup ( note , 'f' , pnote -> accidental ) ; } if ( * pnote -> accidental == '\0' ) { extractGroup ( note , 'n' , pnote -> accidental ) ; } } if ( * pnote -> accidental != '\0' ) { extractOneOf ( note , "ic" , onlymidi ) ; strcat ( pnote -> accidental , onlymidi ) ; } extractGroup ( note , 'd' , pnote -> dotgroup ) ; if ( pnote -> name == rest ) { extractSignedNumber ( note , pnote -> accidental ) ; } extractOneOf ( note , durations , pnote -> duration ) ; sprintf ( STR1 , "%c" , rest ) ; if ( * note != '\0' && isdigit ( note [ 0 ] ) ) { sprintf ( STR2 , "%c%s" , note [ 0 ] , pnote -> octave ) ; strcpy ( pnote -> octave , STR2 ) ; delete1 ( note , 1 ) ; } strcpy ( pnote -> whatever , note ) ; } 