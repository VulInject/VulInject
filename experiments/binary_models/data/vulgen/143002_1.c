static void odm_PTDecision_8188E ( struct odm_ra_info * pRaInfo ) { u8 j ; u8 temp_stage ; u32 numsc ; u32 num_total ; u8 stage_id ; numsc = 0 ; num_total = pRaInfo -> TOTAL * PT_PENALTY [ 5 ] ; for ( j = 0 ; j <= 4 ; j ++ ) { numsc += pRaInfo -> RTY [ j ] * PT_PENALTY [ j ] ; if ( numsc > num_total ) { break ; } } j = j >> 1 ; temp_stage = ( pRaInfo -> PTStage + 1 ) >> 1 ; if ( temp_stage > j ) { stage_id = temp_stage - j ; } else { stage_id = 0 ; } pRaInfo -> PTSmoothFactor = ( pRaInfo -> PTSmoothFactor >> 1 ) + ( pRaInfo -> PTSmoothFactor >> 2 ) + stage_id * 16 + 2 ; if ( pRaInfo -> PTSmoothFactor > 192 ) { pRaInfo -> PTSmoothFactor = 192 ; } stage_id = pRaInfo -> PTSmoothFactor >> 6 ; temp_stage = stage_id * 2 ; if ( temp_stage != 0 ) { temp_stage -= 1 ; } pRaInfo -> PTStage = temp_stage ; } 