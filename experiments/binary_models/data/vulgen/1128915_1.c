static int xc5000_tune_digital ( struct dvb_frontend * fe ) { struct xc5000_priv * priv = fe -> tuner_priv ; int ret ; u32 bw = fe -> dtv_property_cache . bandwidth_hz ; ret = xc_set_signal_source ( priv , priv -> rf_mode ) ; if ( ret != 0 ) { printk ( KERN_ERR "xc5000: xc_set_signal_source(%d) failed\n" , priv -> rf_mode ) ; return - EREMOTEIO ; } ret = xc_set_tv_standard ( priv , xc5000_standard [ priv -> video_standard ] . video_mode , xc5000_standard [ priv -> video_standard ] . audio_mode , 0 ) ; if ( ret != 0 ) { printk ( KERN_ERR "xc5000: xc_set_tv_standard failed\n" ) ; return - EREMOTEIO ; } ret = xc_set_IF_frequency ( priv , priv -> if_khz ) ; dprintk ( 1 , "%s() setting OUTPUT_AMP to 0x%x\n" , __func__ , priv -> output_amp ) ; xc_write_reg ( priv , XREG_OUTPUT_AMP , priv -> output_amp ) ; xc_tune_channel ( priv , priv -> freq_hz , XC_TUNE_DIGITAL ) ; if ( debug ) { xc_debug_dump ( priv ) ; } priv -> bandwidth = bw ; return 0 ; } 