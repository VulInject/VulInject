static void usb_ac_free_all_units ( usb_ac_state_t * uacp ) { uint_t unit ; usb_ac_unit_list_t * unitp ; for ( unit = 0 ; unit < uacp -> usb_ac_max_unit ; unit ++ ) { unitp = & uacp -> usb_ac_units [ unit ] ; if ( unitp ) { if ( unitp -> acu_descriptor ) { kmem_free ( unitp -> acu_descriptor , unitp -> acu_descr_length ) ; } } } kmem_free ( uacp -> usb_ac_units , uacp -> usb_ac_max_unit * sizeof ( usb_ac_unit_list_t ) ) ; } 