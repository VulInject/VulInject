VOID VirtFsEvtDeviceContextCleanup ( IN WDFOBJECT DeviceObject ) { PDEVICE_CONTEXT context = GetDeviceContext ( DeviceObject ) ; PSINGLE_LIST_ENTRY iter ; TraceEvents ( TRACE_LEVEL_VERBOSE , DBG_INIT , "-->%!FUNC!" ) ; WdfSpinLockAcquire ( context -> RequestsLock ) ; iter = PopEntryList ( & context -> RequestsList ) ; while ( iter != NULL ) { PVIRTIO_FS_REQUEST fs_req = CONTAINING_RECORD ( iter , VIRTIO_FS_REQUEST , ListEntry ) ; iter = PopEntryList ( & context -> RequestsList ) ; } WdfSpinLockRelease ( context -> RequestsLock ) ; TraceEvents ( TRACE_LEVEL_VERBOSE , DBG_INIT , "<-- %!FUNC!" ) ; } 