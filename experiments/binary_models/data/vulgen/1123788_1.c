static inline void handle_regs_int_override ( struct urb * urb ) { struct zd_usb * usb = urb -> context ; struct zd_usb_interrupt * intr = & usb -> intr ; unsigned long flags ; spin_lock_irqsave ( & intr -> lock , flags ) ; if ( atomic_read ( & intr -> read_regs_enabled ) ) { intr -> read_regs_int_overridden = 1 ; complete ( & intr -> read_regs . completion ) ; } spin_unlock_irqrestore ( & intr -> lock , flags ) ; } 