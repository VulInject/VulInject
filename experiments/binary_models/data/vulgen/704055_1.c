void __init xen_init_spinlocks ( void ) { printk ( KERN_DEBUG "xen: PV spinlocks enabled\n" ) ; __pv_init_lock_hash ( ) ; pv_lock_ops . queued_spin_lock_slowpath = __pv_queued_spin_lock_slowpath ; pv_lock_ops . queued_spin_unlock = PV_CALLEE_SAVE ( __pv_queued_spin_unlock ) ; pv_lock_ops . wait = xen_qlock_wait ; pv_lock_ops . kick = xen_qlock_kick ; pv_lock_ops . vcpu_is_preempted = PV_CALLEE_SAVE ( xen_vcpu_stolen ) ; } 