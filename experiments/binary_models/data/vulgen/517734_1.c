static int clk_smd_rpm_handoff ( struct clk_smd_rpm * r ) { int ret ; struct clk_smd_rpm_req req = { . key = cpu_to_le32 ( r -> rpm_key ) . nbytes = cpu_to_le32 ( sizeof ( u32 ) ) . value = cpu_to_le32 ( r -> branch ? 1 : INT_MAX ) } ; ret = qcom_rpm_smd_write ( r -> rpm , QCOM_SMD_RPM_ACTIVE_STATE , r -> rpm_res_type , r -> rpm_clk_id , & req , sizeof ( req ) ) ; if ( ret ) { return ret ; } ret = qcom_rpm_smd_write ( r -> rpm , QCOM_SMD_RPM_SLEEP_STATE , r -> rpm_res_type , r -> rpm_clk_id , & req , sizeof ( req ) ) ; return 0 ; } 