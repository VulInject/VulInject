static int snd_usX2Y_usbpcm_open ( struct snd_pcm_substream * substream ) { struct snd_usX2Y_substream * subs = ( ( snd_usX2Y_substream * * ) snd_pcm_substream_chip ( substream ) ) [ substream -> stream ] ; struct snd_pcm_runtime * runtime = substream -> runtime ; runtime -> hw = SNDRV_PCM_STREAM_PLAYBACK == substream -> stream ?snd_usX2Y_2c : ( subs -> usX2Y -> subs [ 3 ] ?snd_usX2Y_4c : snd_usX2Y_2c ) ; runtime -> private_data = subs ; subs -> pcm_substream = substream ; snd_pcm_hw_constraint_minmax ( runtime , SNDRV_PCM_HW_PARAM_PERIOD_TIME , 1000 , 200000 ) ; return 0 ; } 