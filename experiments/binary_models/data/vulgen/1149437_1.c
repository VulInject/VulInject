static int ltdc_crtc_set_crc_source ( struct drm_crtc * crtc , const char * source ) { struct ltdc_device * ldev = crtc_to_ltdc ( crtc ) ; int ret ; DRM_DEBUG_DRIVER ( "\n" ) ; if ( source && strcmp ( source , "auto" ) == 0 ) { ldev -> crc_active = true ; ret = regmap_set_bits ( ldev -> regmap , LTDC_GCR , GCR_CRCEN ) ; } if ( ! source ) { ldev -> crc_active = false ; ret = regmap_clear_bits ( ldev -> regmap , LTDC_GCR , GCR_CRCEN ) ; } else { ret = - EINVAL ; } ldev -> crc_skip_count = 0 ; return ret ; } 