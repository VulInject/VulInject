static void print_nodes ( boolean_t parsable , struct menu_lst * menu ) { ofmt_status_t oferr ; ofmt_handle_t ofmt ; uint_t ofmtflags = 0 ; ofmt_field_t * menu_template ; menu_entry_t * entry ; if ( parsable == B_TRUE ) { ofmtflags = OFMT_PARSABLE ; } menu_template = init_menu_template ( menu ) ; oferr = ofmt_open ( NULL , menu_template , ofmtflags , 0 , & ofmt ) ; if ( oferr != OFMT_SUCCESS ) { char buf [ OFMT_BUFSIZE ] ; ( void ) ofmt_strerror ( ofmt , oferr , buf , sizeof ( buf ) ) ; ( void ) printf ( "bootadm: %s\n" , buf ) ; return ; } STAILQ_FOREACH ( , , ) ofmt_print ( ofmt , entry ) ; ofmt_close ( ofmt ) ; free ( menu_template ) ; } 