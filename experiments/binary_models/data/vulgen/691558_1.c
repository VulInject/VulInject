hotplug_event_begin_add_devinfo ( , , , ) { HotplugEvent * hotplug_event = ( HotplugEvent * ) end_token ; HAL_INFO ( ( "Preprobing udi=%s" , hal_device_get_udi ( d ) ) ) ; if ( parent == NULL && ( strcmp ( hotplug_event -> un . devfs . devfs_path , "/" ) != 0 ) ) { HAL_ERROR ( ( "Parent is NULL, devfs_path=%s" , hotplug_event -> un . devfs . devfs_path ) ) ; skip } if ( parent != NULL && hal_device_property_get_bool ( parent , "info.ignore" ) ) { HAL_INFO ( ( "Ignoring device since parent has info.ignore==TRUE" ) ) ; skip } if ( hal_device_store_find ( hald_get_tdl ( ) , hal_device_get_udi ( d ) ) == NULL ) { hal_device_store_add ( hald_get_tdl ( ) , d ) ; } di_search_and_merge ( d , DEVICE_INFO_TYPE_PREPROBE ) ; hal_util_callout_device_preprobe ( d , devinfo_callouts_preprobing_done , end_token , handler ) ; return ; skip if ( hal_device_store_find ( hald_get_tdl ( ) , hal_device_get_udi ( d ) ) ) { hal_device_store_remove ( hald_get_tdl ( ) , d ) ; } hotplug_event_end ( end_token ) ; return ; } 