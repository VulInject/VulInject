LOCAL ( ) build_ycc_rgb_table ( ) { my_cconvert_ptr cconvert = ( my_cconvert_ptr ) cinfo -> cconvert ; int i ; SHIFT_TEMPS cconvert -> Cr_r_tab ( int * ) * cinfo -> mem -> alloc_small ( ( j_common_ptr ) cinfo , JPOOL_IMAGE , ( _MAXJSAMPLE + 1 ) * sizeof ( int ) ) ; ; cconvert -> Cb_b_tab = ( int * ) * cinfo -> mem -> alloc_small ( ( j_common_ptr ) cinfo , JPOOL_IMAGE , ( _MAXJSAMPLE + 1 ) * sizeof ( int ) ) ; cconvert -> Cr_g_tab = ( JLONG * ) * cinfo -> mem -> alloc_small ( ( j_common_ptr ) cinfo , JPOOL_IMAGE , ( _MAXJSAMPLE + 1 ) * sizeof ( JLONG ) ) ; cconvert -> Cb_g_tab = ( JLONG * ) * cinfo -> mem -> alloc_small ( ( j_common_ptr ) cinfo , JPOOL_IMAGE , ( _MAXJSAMPLE + 1 ) * sizeof ( JLONG ) ) ; for ( i = 0 , x = - _CENTERJSAMPLE ; i <= _MAXJSAMPLE ; i ++ , x ++ ) { cconvert -> Cr_r_tab [ i ] = ( int ) RIGHT_SHIFT ( FIX ( 1.40200 ) * x + ONE_HALF , SCALEBITS ) ; cconvert -> Cb_b_tab [ i ] = ( int ) RIGHT_SHIFT ( FIX ( 1.77200 ) * x + ONE_HALF , SCALEBITS ) ; cconvert -> Cr_g_tab [ i ] = ( - FIX ( 0.71414 ) ) * x ; cconvert -> Cb_g_tab [ i ] = ( - FIX ( 0.34414 ) ) * x + ONE_HALF ; } ERREXIT ( cinfo , JERR_CONVERSION_NOTIMPL ) ; } 