void sa2addr ( struct sockaddr * sa , int * af , union eigrpd_addr * addr ) { struct sockaddr_in * sa_in = ( sockaddr_in * ) sa ; struct sockaddr_in6 * sa_in6 = ( sockaddr_in6 * ) sa ; switch ( sa -> sa_family ) { case AF_INET : * af = AF_INET ; addr -> v4 = sa_in -> sin_addr ; break ; case AF_INET6 : * af = AF_INET6 ; addr -> v6 = sa_in6 -> sin6_addr ; break ; default : fatalx ( "sa2addr: unknown af" ) ; } } 