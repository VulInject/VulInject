bool test_join ( void ) { RSkipList * l1 = r_skiplist_new ( NULL , ( RListComparator ) cmp_int ) ; r_skiplist_insert ( l1 , ( void * ) ( intptr_t ) 3 ) ; r_skiplist_insert ( l1 , ( void * ) ( intptr_t ) 1 ) ; r_skiplist_insert ( l1 , ( void * ) ( intptr_t ) 30 ) ; r_skiplist_insert ( l1 , ( void * ) ( intptr_t ) 40 ) ; RSkipList * l2 = r_skiplist_new ( NULL , ( RListComparator ) cmp_int ) ; r_skiplist_insert ( l2 , ( void * ) ( intptr_t ) 10 ) ; r_skiplist_insert ( l2 , ( void * ) ( intptr_t ) 4 ) ; r_skiplist_insert ( l2 , ( void * ) ( intptr_t ) 1 ) ; r_skiplist_join ( l1 , l2 ) ; mu_assert ( "10 is in l1" , r_skiplist_find ( l1 , ( void * ) ( intptr_t ) 10 ) ) ; mu_assert ( "4 is in l1" , r_skiplist_find ( l1 , ( void * ) ( intptr_t ) 4 ) ) ; mu_assert ( "1 is in l1" , r_skiplist_find ( l1 , ( void * ) ( intptr_t ) 1 ) ) ; mu_assert ( "3 is still in l1" , r_skiplist_find ( l1 , ( void * ) ( intptr_t ) 3 ) ) ; mu_assert_eq ( r_skiplist_length ( l1 ) , 6 , "no double elements when joining" ) ; r_skiplist_free ( l1 ) ; mu_end ; } 