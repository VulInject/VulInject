static int psp_v13_0_bootloader_load_component ( struct psp_context * psp , struct psp_bin_desc * bin_desc , enum psp_bootloader_cmd bl_cmd ) { int ret ; uint32_t psp_gfxdrv_command_reg = 0 ; struct amdgpu_device * adev = psp -> adev ; ret = psp_v13_0_wait_for_bootloader ( psp ) ; if ( ret ) { return ret ; } memset ( psp -> fw_pri_buf , 0 , PSP_1_MEG ) ; memcpy ( psp -> fw_pri_buf , bin_desc -> start_addr , bin_desc -> size_bytes ) ; WREG32_SOC15 ( MP0 , 0 , regMP0_SMN_C2PMSG_36 , ( uint32_t ) ( psp -> fw_pri_mc_addr >> 20 ) ) ; psp_gfxdrv_command_reg = bl_cmd ; WREG32_SOC15 ( MP0 , 0 , regMP0_SMN_C2PMSG_35 , psp_gfxdrv_command_reg ) ; ret = psp_v13_0_wait_for_bootloader ( psp ) ; return ret ; } 