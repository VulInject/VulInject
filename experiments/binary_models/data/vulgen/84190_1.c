static int mt7621_register_gates ( struct device * dev , struct clk_hw_onecell_data * clk_data , struct mt7621_clk_priv * priv ) { struct clk_hw * * hws = clk_data -> hws ; struct mt7621_gate * sclk ; int ret , i ; for ( i = 0 ; i < ARRAY_SIZE ( mt7621_gates ) ; i ++ ) { sclk = & mt7621_gates [ i ] ; sclk -> priv = priv ; ret = mt7621_gate_ops_init ( dev , sclk ) ; hws [ sclk -> idx ] = & sclk -> hw ; } return 0 ; err_clk_unreg while ( -- i >= 0 ) { sclk = & mt7621_gates [ i ] ; clk_hw_unregister ( & sclk -> hw ) ; } return ret ; } 