static isc_result_t isc_app_ctxrun ( isc_appctx_t * ctx ) { int result ; isc_event_t * event , * next_event ; isc_task_t * task ; if ( ! ctx -> running ) { ctx -> running = 1 ; for ( event = ISC_LIST_HEAD ( ctx -> on_run ) ; event != NULL ; event = next_event ) { next_event = ISC_LIST_NEXT ( event , ev_link ) ; ISC_LIST_UNLINK ( ctx -> on_run , event , ev_link ) ; task = event -> ev_sender ; event -> ev_sender = NULL ; isc_task_sendanddetach ( & task , & event ) ; } } result = evloop ( ctx ) ; return ( result ) ; } 