static void mlx4_en_cache_mclist ( struct net_device * dev ) { struct mlx4_en_priv * priv = netdev_priv ( dev ) ; struct netdev_hw_addr * ha ; struct mlx4_en_mc_list * tmp ; mlx4_en_clear_list ( dev ) ; netdev_for_each_mc_addr ( , ) { tmp = kzalloc ( sizeof ( mlx4_en_mc_list ) , GFP_ATOMIC ) ; if ( ! tmp ) { mlx4_en_clear_list ( dev ) ; return ; } list_add_tail ( & tmp -> list , & priv -> mc_list ) ; } } 