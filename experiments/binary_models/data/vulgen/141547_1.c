void unixdomainpr ( struct kinfo_file * kf ) { static int first = 1 ; if ( kf -> so_pcb == - 1 ) { kf -> so_pcb = 0 ; } if ( first ) { printf ( "Active UNIX domain sockets\n" ) ; printf ( "%-*.*s %-6.6s %-6.6s %-6.6s %*.*s %*.*s %*.*s %*.*s Addr\n" , PLEN , PLEN , "Address" , "Type" , "Recv-Q" , "Send-Q" , PLEN , PLEN , "Inode" , PLEN , PLEN , "Conn" , PLEN , PLEN , "Refs" , PLEN , PLEN , "Nextref" ) ; first = 0 ; } printf ( "%#*llx%s %-6.6s %6llu %6llu %#*llx%s %#*llx%s %#*llx%s %#*llx%s" , FAKE_PTR ( kf -> so_pcb ) , socktype [ kf -> so_type ] , kf -> so_rcv_cc , kf -> so_snd_cc , FAKE_PTR ( kf -> v_un ) , FAKE_PTR ( kf -> unp_conn ) , FAKE_PTR ( kf -> unp_refs ) , FAKE_PTR ( kf -> unp_nextref ) ) ; putchar ( '\n' ) ; } 