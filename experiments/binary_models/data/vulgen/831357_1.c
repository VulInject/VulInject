enum i40iw_status_code i40iw_vchnl_vf_get_pe_stats ( struct i40iw_sc_dev * dev , struct i40iw_dev_hw_stats * hw_stats ) { struct i40iw_virtchnl_req vchnl_req ; enum i40iw_status_code ret_code ; if ( ! i40iw_vf_clear_to_send ( dev ) ) { return I40IW_ERR_TIMEOUT ; } vchnl_req . dev = dev ; vchnl_req . parm = hw_stats ; vchnl_req . parm_len = sizeof ( * hw_stats ) ; vchnl_req . vchnl_msg = & dev -> vchnl_vf_msg_buf . vchnl_msg ; ret_code = vchnl_vf_send_get_pe_stats_req ( dev , & vchnl_req ) ; if ( ret_code ) { i40iw_debug ( dev , I40IW_DEBUG_VIRT , "%s Send message failed 0x%0x\n" , __func__ , ret_code ) ; return ret_code ; } ret_code = i40iw_vf_wait_vchnl_resp ( dev ) ; if ( ret_code ) { return ret_code ; } else { return vchnl_req . ret_code ; } } 