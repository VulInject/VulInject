void _cupsLangPrintError ( const char * prefix , const char * message ) { ssize_t bytes ; int last_errno ; char buffer [ 2048 ] , * bufptr , output [ 8192 ] ; _cups_globals_t * cg ; if ( ! message ) { return ; } last_errno = errno ; cg = _cupsGlobals ( ) ; if ( ! cg -> lang_default ) { cg -> lang_default = cupsLangDefault ( ) ; } if ( prefix ) { snprintf ( buffer , sizeof ( buffer ) , "%s:" , prefix ) ; bufptr = buffer + strlen ( buffer ) ; } else { bufptr = buffer ; } snprintf ( bufptr , sizeof ( buffer ) - ( size_t ) ( bufptr - buffer ) , _cupsLangString ( cg -> lang_default , _ ( "%s: %s" ) ) , _cupsLangString ( cg -> lang_default , message ) , strerror ( last_errno ) ) ; strlcat ( buffer , "\n" , sizeof ( buffer ) ) ; if ( bytes > 0 ) { fwrite ( output , 1 , ( size_t ) bytes , stderr ) ; } } 