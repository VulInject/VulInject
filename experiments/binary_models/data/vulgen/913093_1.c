int dm_platform_resync ( void ) { ipmi_cache_entry_t * entry ; int rv ; ( void ) pthread_mutex_lock ( & g_ipmi_mtx ) ; for ( entry = uu_list_first ( g_ipmi_cache ) ; entry != NULL ; entry = uu_list_next ( g_ipmi_cache , entry ) ) { if ( entry -> ic_type == IPMI_CACHE_FRU ) { rv |= ipmi_sunoem_update_fru ( g_ipmi_hdl , & entry -> ic_data . ic_fru ) ; } } for ( entry = uu_list_first ( g_ipmi_cache ) ; entry != NULL ; entry = uu_list_next ( g_ipmi_cache , entry ) ) { if ( entry -> ic_type == IPMI_CACHE_SENSOR ) { rv |= ipmi_set_sensor_reading ( g_ipmi_hdl , & entry -> ic_data . ic_sensor ) ; } } ( void ) pthread_mutex_unlock ( & g_ipmi_mtx ) ; return ( rv ) ; } 