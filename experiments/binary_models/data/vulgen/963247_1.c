long double logbl ( long double x ) { { long double e ; struct ieee_ext bits ; } , u int b ; u . e = x ; if ( u . bits . ext_exp == 0 ) { if ( ( u . bits . ext_fracl | u . bits . ext_fraclm | u . bits . ext_frachm | u . bits . ext_frach ) == 0 ) { u . bits . ext_sign = 1 ; return ( 1.0L / u . e ) ; } if ( u . bits . ext_frach == 0 && u . bits . ext_frachm == 0 ) { m = 1lu << ( EXT_FRACLBITS - 1 ) ; for ( b = EXT_FRACHBITS ; ! ( u . bits . ext_fracl & m ) ; m >>= 1 ) { b ++ ; } m = 1lu << ( EXT_FRACLMBITS - 1 ) ; for ( b += EXT_FRACHMBITS ; ! ( u . bits . ext_fraclm & m ) ; m >>= 1 ) { b ++ ; } } else { m = 1lu << ( EXT_FRACHBITS - 1 ) ; for ( b = 0 ; ! ( u . bits . ext_frach & m ) ; m >>= 1 ) { b ++ ; } m = 1lu << ( EXT_FRACHMBITS - 1 ) ; for ( ; ! ( u . bits . ext_frachm & m ) ; m >>= 1 ) { b ++ ; } } b ++ ; return ( ( long double ) ( LDBL_MIN_EXP - b - 1 ) ) ; } if ( u . bits . ext_exp < ( LDBL_MAX_EXP << 1 ) - 1 ) { return ( ( long double ) ( u . bits . ext_exp - LDBL_MAX_EXP + 1 ) ) ; } else { return ( x * x ) ; } } 