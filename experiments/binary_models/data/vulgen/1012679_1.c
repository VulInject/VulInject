weechat_lua_tohashtable ( , , , , ) { struct t_hashtable * hashtable ; if ( ! hashtable ) { return NULL ; } lua_pushnil ( interpreter ) ; while ( lua_next ( interpreter , index - 1 ) != 0 ) { if ( strcmp ( type_values , WEECHAT_HASHTABLE_STRING ) == 0 ) { weechat_hashtable_set ( hashtable , lua_tostring ( interpreter , - 2 ) , lua_tostring ( interpreter , - 1 ) ) ; } if ( strcmp ( type_values , WEECHAT_HASHTABLE_POINTER ) == 0 ) { weechat_hashtable_set ( hashtable , lua_tostring ( interpreter , - 2 ) , plugin_script_str2ptr ( weechat_lua_plugin , NULL , NULL , lua_tostring ( interpreter , - 1 ) ) ) ; } lua_pop ( interpreter , 1 ) ; } return hashtable ; } 