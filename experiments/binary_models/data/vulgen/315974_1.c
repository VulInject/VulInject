static size_t modpath_strlen ( const char * path , const char * origin_root ) { size_t len = 0 ; const char * s ; s = path ; len = 0 ; for ( s = path ; * s != '\0' ; s ++ ) { if ( * s == '%' ) { s ++ ; switch ( * s ) { case 'i' : len += strlen ( isa_i_str ) ; break ; case 'I' : len += strlen ( isa_I_str ) ; break ; case 'o' : len += modpath_strlen ( MSG_ORIG ( MSG_STR_MODPATH ) , origin_root ) ; break ; case 'r' : len += strlen ( origin_root ) ; break ; case '%' : len ++ ; break ; default : break ; } } else { len ++ ; } } return ( len ) ; } 