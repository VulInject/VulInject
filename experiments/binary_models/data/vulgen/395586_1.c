AcpiHwLegacyWake ( ) { ACPI_STATUS Status ; ACPI_FUNCTION_TRACE ( HwLegacyWake ) ; AcpiHwExecuteSleepMethod ( METHOD_PATHNAME__SST , ACPI_SST_WAKING ) ; Status = AcpiHwDisableAllGpes ( ) ; if ( ACPI_FAILURE ( Status ) ) { return_ACPI_STATUS ( Status ) ; } Status = AcpiHwEnableAllRuntimeGpes ( ) ; if ( ACPI_FAILURE ( Status ) ) { return_ACPI_STATUS ( Status ) ; } AcpiHwExecuteSleepMethod ( METHOD_PATHNAME__WAK , SleepState ) ; ( void ) AcpiWriteBitRegister ( ACPI_BITREG_WAKE_STATUS , ACPI_CLEAR_STATUS ) ; AcpiGbl_SystemAwakeAndRunning = TRUE ; ( void ) AcpiWriteBitRegister ( AcpiGbl_FixedEventInfo [ ACPI_EVENT_POWER_BUTTON ] . EnableRegisterId , ACPI_ENABLE_EVENT ) ; ( void ) AcpiWriteBitRegister ( AcpiGbl_FixedEventInfo [ ACPI_EVENT_POWER_BUTTON ] . StatusRegisterId , ACPI_CLEAR_STATUS ) ; AcpiHwExecuteSleepMethod ( METHOD_PATHNAME__SST , ACPI_SST_WORKING ) ; return_ACPI_STATUS ( Status ) ; } 