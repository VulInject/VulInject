int rcar_du_lvdsenc_init ( struct rcar_du_device * rcdu ) { struct platform_device * pdev = to_platform_device ( rcdu -> dev ) ; struct rcar_du_lvdsenc * lvds ; unsigned int i ; int ret ; for ( i = 0 ; i < rcdu -> info -> num_lvds ; ++ i ) { lvds = devm_kzalloc ( & pdev -> dev , sizeof ( * lvds ) , GFP_KERNEL ) ; lvds -> dev = rcdu ; lvds -> index = i ; lvds -> input = i ?RCAR_LVDS_INPUT_DU1 : RCAR_LVDS_INPUT_DU0 ; lvds -> enabled = false ; ret = rcar_du_lvdsenc_get_resources ( lvds , pdev ) ; if ( ret < 0 ) { return ret ; } rcdu -> lvds [ i ] = lvds ; } return 0 ; } 