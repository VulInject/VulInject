static int cdp_enable ( void ) { struct rdt_resource * r_l3data = & rdt_resources_all [ RDT_RESOURCE_L3DATA ] ; struct rdt_resource * r_l3code = & rdt_resources_all [ RDT_RESOURCE_L3CODE ] ; struct rdt_resource * r_l3 = & rdt_resources_all [ RDT_RESOURCE_L3 ] ; int ret ; ret = set_l3_qos_cfg ( r_l3 , true ) ; if ( ! ret ) { r_l3 -> enabled = false ; r_l3data -> enabled = true ; r_l3code -> enabled = true ; } return ret ; } 