static int pci_conf1_write ( unsigned int seg , unsigned int bus , unsigned int devfn , int reg , int len , u32 value ) { unsigned long flags ; raw_spin_lock_irqsave ( & pci_config_lock , flags ) ; outl ( PCI_CONF1_ADDRESS ( bus , devfn , reg ) , 0xCF8 ) ; switch ( len ) { case 1 : outb ( ( u8 ) value , 0xCFC + ( reg & 3 ) ) ; break ; case 2 : outw ( ( u16 ) value , 0xCFC + ( reg & 2 ) ) ; break ; case 4 : outl ( ( u32 ) value , 0xCFC ) ; break ; } raw_spin_unlock_irqrestore ( & pci_config_lock , flags ) ; return 0 ; } const struct pci_raw_ops pci_direct_conf1 = { . read = pci_conf1_read . write = pci_conf1_write } ; 