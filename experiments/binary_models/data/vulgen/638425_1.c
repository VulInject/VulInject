static int swap_points_list_off ( MountPoint * * head , bool * changed ) { int n_failed = 0 ; assert ( head ) ; assert ( changed ) ; LIST_FOREACH ( , , ) { log_info ( "Deactivating swap %s." , m -> path ) ; if ( swapoff ( m -> path ) < 0 ) { log_warning_errno ( errno , "Could not deactivate swap %s: %m" , m -> path ) ; n_failed ++ ; continue ; } * changed = true ; } return n_failed ; } 