static void brcmu_d11n_decchspec ( struct brcmu_chan * ch ) { u16 val ; ch -> control_ch_num = ch -> chnum ; switch ( ch -> chspec & BRCMU_CHSPEC_D11N_BW_MASK ) { case BRCMU_CHSPEC_D11N_BW_20 : ch -> bw = BRCMU_CHAN_BW_20 ; ch -> sb = BRCMU_CHAN_SB_NONE ; break ; case BRCMU_CHSPEC_D11N_BW_40 : ch -> bw = BRCMU_CHAN_BW_40 ; val = ch -> chspec & BRCMU_CHSPEC_D11N_SB_MASK ; if ( val == BRCMU_CHSPEC_D11N_SB_L ) { ch -> sb = BRCMU_CHAN_SB_L ; ch -> control_ch_num -= CH_10MHZ_APART ; } else { ch -> sb = BRCMU_CHAN_SB_U ; ch -> control_ch_num += CH_10MHZ_APART ; } break ; default : WARN_ON_ONCE ( 1 ) ; break ; } switch ( ch -> chspec & BRCMU_CHSPEC_D11N_BND_MASK ) { case BRCMU_CHSPEC_D11N_BND_5G : ch -> band = BRCMU_CHAN_BAND_5G ; break ; case BRCMU_CHSPEC_D11N_BND_2G : ch -> band = BRCMU_CHAN_BAND_2G ; break ; default : WARN_ON_ONCE ( 1 ) ; break ; } } 