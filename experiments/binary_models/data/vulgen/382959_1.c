void rtl92de_set_beacon_related_registers ( struct ieee80211_hw * hw ) { struct rtl_priv * rtlpriv = rtl_priv ( hw ) ; struct rtl_mac * mac = rtl_mac ( rtl_priv ( hw ) ) ; u16 bcn_interval , atim_window ; bcn_interval = mac -> beacon_interval ; atim_window = 2 ; rtl_write_word ( rtlpriv , REG_ATIMWND , atim_window ) ; rtl_write_word ( rtlpriv , REG_BCN_INTERVAL , bcn_interval ) ; rtl_write_word ( rtlpriv , REG_BCNTCFG , 0x660f ) ; rtl_write_byte ( rtlpriv , REG_RXTSF_OFFSET_CCK , 0x20 ) ; if ( rtlpriv -> rtlhal . current_bandtype == BAND_ON_5G ) { rtl_write_byte ( rtlpriv , REG_RXTSF_OFFSET_OFDM , 0x30 ) ; } else { rtl_write_byte ( rtlpriv , REG_RXTSF_OFFSET_OFDM , 0x20 ) ; } rtl_write_byte ( rtlpriv , 0x606 , 0x30 ) ; } 