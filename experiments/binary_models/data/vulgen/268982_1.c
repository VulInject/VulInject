void * thr_recvmsg ( void * arg ) { struct sockaddr_in sa ; struct msghdr msg ; struct iovec iov ; char buf ; int s ; bzero ( & sa , sizeof ( sa ) ) ; sa . sin_family = AF_INET ; sa . sin_port = htons ( 6543 ) ; CHECKe ( bind ( s , ( const void * ) & sa , sizeof ( sa ) ) ) ; bzero ( & msg , sizeof ( msg ) ) ; iov . iov_base = & buf ; iov . iov_len = 1 ; msg . msg_iov = & iov ; msg . msg_iovlen = 1 ; ASSERT ( recvmsg ( s , & msg , 0 ) == - 1 ) ; return ( ( caddr_t ) NULL + errno ) ; } 