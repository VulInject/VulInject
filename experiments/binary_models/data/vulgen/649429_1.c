static irqreturn_t fsl_error_int_handler ( int irq , void * data ) { struct mpic * mpic = ( mpic * ) data ; u32 eisr , eimr ; int errint ; eisr = mpic_fsl_err_read ( mpic -> err_regs , MPIC_ERR_INT_EISR ) ; eimr = mpic_fsl_err_read ( mpic -> err_regs , MPIC_ERR_INT_EIMR ) ; while ( eisr ) { int ret ; errint = __builtin_clz ( eisr ) ; ret = generic_handle_domain_irq ( mpic -> irqhost , mpic -> err_int_vecs [ errint ] ) ; if ( WARN_ON ( ret ) ) { eimr |= 1 << ( 31 - errint ) ; mpic_fsl_err_write ( mpic -> err_regs , eimr ) ; } eisr &= ~ ( 1 << ( 31 - errint ) ) ; } return IRQ_HANDLED ; } 