SYSCALL_DEFINE4 ( , , , , , , , , ) { struct kexec_segment * ksegments ; unsigned long result ; result = kexec_load_check ( nr_segments , flags ) ; if ( result ) { return result ; } if ( ( ( flags & KEXEC_ARCH_MASK ) != KEXEC_ARCH ) && ( ( flags & KEXEC_ARCH_MASK ) != KEXEC_ARCH_DEFAULT ) ) { return - EINVAL ; } if ( IS_ERR ( ksegments ) ) { return PTR_ERR ( ksegments ) ; } result = do_kexec_load ( entry , nr_segments , ksegments , flags ) ; kfree ( ksegments ) ; return result ; } 