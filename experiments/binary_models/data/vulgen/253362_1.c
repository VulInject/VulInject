static void wd719x_finish_cmd ( struct scsi_cmnd * cmd , int result ) { struct wd719x * wd = shost_priv ( cmd -> device -> host ) ; struct wd719x_scb * scb = ( wd719x_scb * ) cmd -> host_scribble ; if ( scb ) { list_move ( & scb -> list , & wd -> free_scbs ) ; dma_unmap_single ( & wd -> pdev -> dev , cmd -> SCp . dma_handle , SCSI_SENSE_BUFFERSIZE , DMA_FROM_DEVICE ) ; } cmd -> result = result << 16 ; cmd -> scsi_done ( cmd ) ; } 