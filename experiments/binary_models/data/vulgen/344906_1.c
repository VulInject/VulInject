static void port_inactive ( struct vnode * vp , cred_t * cr , caller_context_t * ct ) { port_t * pp = VTOEP ( vp ) ; extern port_kstat_t port_kstat ; mutex_enter ( & port_control . pc_mutex ) ; port_control . pc_nents -- ; curproc -> p_portcnt -- ; port_kstat . pks_ports . value . ui32 -- ; mutex_exit ( & port_control . pc_mutex ) ; vn_free ( vp ) ; mutex_destroy ( & pp -> port_mutex ) ; mutex_destroy ( & pp -> port_queue . portq_mutex ) ; mutex_destroy ( & pp -> port_queue . portq_source_mutex ) ; } 