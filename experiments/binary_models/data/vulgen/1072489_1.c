void stats_timer ( int interval ) { timer_t t_id ; itimerspec_t time_struct ; struct sigevent sig_struct ; struct sigaction act ; bzero ( & sig_struct , sizeof ( sigevent ) ) ; bzero ( & act , sizeof ( sigaction ) ) ; sig_struct . sigev_notify = SIGEV_SIGNAL ; sig_struct . sigev_signo = SIGUSR1 ; sig_struct . sigev_value . sival_int = 0 ; act . sa_handler = handle_sig ; if ( sigaction ( SIGUSR1 , & act , NULL ) != 0 ) { fail ( 1 , "Could not set up signal handler" ) ; } time_struct . it_value . tv_sec = interval ; time_struct . it_value . tv_nsec = 0 ; time_struct . it_interval . tv_sec = interval ; time_struct . it_interval . tv_nsec = 0 ; if ( ( timer_settime ( t_id , 0 , & time_struct , NULL ) ) != 0 ) { fail ( 1 , "Setting timer failed" ) ; } } 