static void abrt_journal_watch_extract_kernel_oops ( abrt_journal_watch_t * watch , void * data ) { const struct watch_journald_settings * conf = ( const watch_journald_settings * ) data ; abrt_journal_t * journal = abrt_journal_watch_get_journal ( watch ) ; if ( abrt_oops_signaled_sleep ( 1 ) > 0 ) { abrt_journal_watch_stop ( watch ) ; return ; } GList * oopses = abrt_journal_extract_kernel_oops ( journal ) ; abrt_oops_process_list ( oopses , conf -> dump_location , ABRT_JOURNAL_KOOPS_ANALYZER , conf -> oops_utils_flags ) ; g_list_free_full ( oopses , ( GDestroyNotify ) free ) ; if ( abrt_journal_seek_tail ( journal ) < 0 ) { error_msg_and_die ( _ ( "Cannot seek to the end of journal" ) ) ; } abrt_journal_save_current_position ( journal , ABRT_JOURNAL_WATCH_STATE_FILE ) ; } 