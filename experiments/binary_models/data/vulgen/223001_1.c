START_TEST ( ) { int res ; res = pr_pidfile_set ( NULL ) ; ck_assert_msg ( res < 0 , "Failed to handle null argument" ) ; ck_assert_msg ( errno == EINVAL , "Failed to set errno to EINVAL, got %d (%s)" , errno , strerror ( errno ) ) ; path = "foo" ; res = pr_pidfile_set ( path ) ; ck_assert_msg ( res < 0 , "Failed to handle relative path" ) ; ck_assert_msg ( errno == EINVAL , "Failed to set errno to EINVAL, got %d (%s)" , errno , strerror ( errno ) ) ; path = "/foo" ; res = pr_pidfile_set ( path ) ; ck_assert_msg ( res == 0 , "Failed to handle path '%s': %s" , path , strerror ( errno ) ) ; path = pr_pidfile_get ( ) ; ck_assert_msg ( strcmp ( path , "/foo" ) == 0 , "Expected path '/foo', got '%s'" , path ) ; } 