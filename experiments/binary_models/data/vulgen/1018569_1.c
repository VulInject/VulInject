struct group * xgetgrnam ( const char * groupname , char * * grpbuf ) { struct group * grp = NULL , * res = NULL ; int rc ; assert ( grpbuf ) ; assert ( groupname ) ; * grpbuf = xmalloc ( UL_GETPW_BUFSIZ ) ; grp = xcalloc ( 1 , sizeof ( group ) ) ; errno = 0 ; rc = getgrnam_r ( groupname , grp , * grpbuf , UL_GETPW_BUFSIZ , & res ) ; if ( rc != 0 ) { errno = rc ; failed } if ( ! res ) { errno = EINVAL ; failed } return grp ; failed free ( grp ) ; return NULL ; } 