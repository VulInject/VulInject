static void _del_resv_rec ( void * x ) { int i ; slurmctld_resv_t * resv_ptr = ( slurmctld_resv_t * ) x ; if ( resv_ptr ) { if ( magnetic_resv_list && ( resv_ptr -> flags & RESERVE_FLAG_MAGNETIC ) ) { int cnt ; cnt = list_delete_all ( magnetic_resv_list , _find_resv_ptr , resv_ptr ) ; if ( cnt > 1 ) { error ( "%s: magnetic_resv_list contained %d references to %s" , __func__ , cnt , resv_ptr -> name ) ; } } xassert ( resv_ptr -> magic == RESV_MAGIC ) ; resv_ptr -> magic = 0 ; xfree ( resv_ptr -> accounts ) ; for ( i = 0 ; i < resv_ptr -> account_cnt ; i ++ ) { xfree ( resv_ptr -> account_list [ i ] ) ; } xfree ( resv_ptr -> account_list ) ; xfree ( resv_ptr -> burst_buffer ) ; FREE_NULL_BITMAP ( resv_ptr -> core_bitmap ) ; free_job_resources ( & resv_ptr -> core_resrcs ) ; xfree ( resv_ptr -> features ) ; xfree ( resv_ptr -> groups ) ; FREE_NULL_LIST ( resv_ptr -> license_list ) ; xfree ( resv_ptr -> licenses ) ; xfree ( resv_ptr -> name ) ; FREE_NULL_BITMAP ( resv_ptr -> node_bitmap ) ; xfree ( resv_ptr -> node_list ) ; xfree ( resv_ptr -> partition ) ; xfree ( resv_ptr -> tres_str ) ; xfree ( resv_ptr -> tres_fmt_str ) ; xfree ( resv_ptr -> users ) ; xfree ( resv_ptr -> user_list ) ; xfree ( resv_ptr ) ; } } 