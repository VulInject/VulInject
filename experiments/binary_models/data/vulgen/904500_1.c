static void connect_cb ( uv_connect_t * _ , int status ) { int r ; uv_buf_t buf ; size_t write_queue_size0 , write_queue_size1 ; ASSERT_EQ ( 0 , status ) ; connect_cb_called ++ ; buf = uv_buf_init ( data , sizeof ( data ) ) ; r = uv_write ( & small_write , ( uv_stream_t * ) & client , & buf , 1 , write_cb ) ; ASSERT_EQ ( 0 , r ) ; write_queue_size0 = uv_stream_get_write_queue_size ( ( uv_stream_t * ) & client ) ; ASSERT_GT ( write_queue_size0 , 0 ) ; r = uv_write ( & big_write , ( uv_stream_t * ) & client , & buf , 1 , write_cb ) ; ASSERT_EQ ( 0 , r ) ; write_queue_size1 = uv_stream_get_write_queue_size ( ( uv_stream_t * ) & client ) ; ASSERT_EQ ( write_queue_size1 , write_queue_size0 + 1 ) ; } 