static int ft_lzwstate_refill ( FT_LzwState state ) { FT_ULong count ; if ( state -> in_eof ) { return - 1 ; } count = FT_Stream_TryRead ( state -> source , state -> buf_tab , state -> num_bits ) ; state -> buf_size = ( FT_UInt ) count ; state -> buf_total += count ; state -> in_eof = FT_BOOL ( count < state -> num_bits ) ; state -> buf_size <<= 3 ; if ( state -> buf_size > state -> num_bits ) { state -> buf_size -= state -> num_bits - 1 ; } else { return - 1 ; } if ( count == 0 ) { return - 1 ; } return 0 ; } static FT_Int32 ft_lzwstate_get_code ( FT_LzwState state ) { FT_UInt num_bits = state -> num_bits ; FT_UInt offset = state -> buf_offset ; FT_Byte * p ; FT_Int result ; } 