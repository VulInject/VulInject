void siop_update_xfer_mode ( struct siop_common_softc * sc , int target ) { struct siop_common_target * siop_target ; siop_target = sc -> targets [ target ] ; printf ( "%s: target %d now using %s%s%d bit " , sc -> sc_dev . dv_xname , target , ( siop_target -> flags & TARF_TAG ) ?"tagged " : "" , ( siop_target -> flags & TARF_ISDT ) ?"DT " : "" , ( siop_target -> flags & TARF_ISWIDE ) ?16 : 8 ) ; if ( siop_target -> offset == 0 ) { printf ( "async " ) ; } else { switch ( siop_target -> period ) { case 9 : printf ( "80.0" ) ; break ; case 10 : printf ( "40.0" ) ; break ; case 12 : printf ( "20.0" ) ; break ; case 18 : printf ( "13.3" ) ; break ; case 25 : printf ( "10.0" ) ; break ; case 37 : printf ( "6.67" ) ; break ; case 50 : printf ( "5.0" ) ; break ; case 75 : printf ( "3.33" ) ; break ; default : printf ( "??" ) ; break ; } printf ( " MHz %d REQ/ACK offset " , siop_target -> offset ) ; } printf ( "xfers\n" ) ; } 