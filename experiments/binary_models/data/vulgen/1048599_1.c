static void pvr2_i2c_register_ir ( struct pvr2_hdw * hdw ) { struct i2c_board_info info ; struct IR_i2c_init_data * init_data = & hdw -> ir_init_data ; memset ( & info , 0 , sizeof ( i2c_board_info ) ) ; switch ( hdw -> ir_scheme_active ) { case PVR2_IR_SCHEME_24XXX : case PVR2_IR_SCHEME_29XXX : init_data -> ir_codes = RC_MAP_HAUPPAUGE ; init_data -> internal_get_key_func = IR_KBD_GET_KEY_HAUP ; init_data -> type = RC_PROTO_BIT_RC5 ; init_data -> name = hdw -> hdw_desc -> description ; init_data -> polling_interval = 100 ; info . addr = 0x18 ; info . platform_data = init_data ; strscpy ( info . type , "ir_video" , I2C_NAME_SIZE ) ; pvr2_trace ( PVR2_TRACE_INFO , "Binding %s to i2c address 0x%02x." , info . type , info . addr ) ; i2c_new_client_device ( & hdw -> i2c_adap , & info ) ; break ; case PVR2_IR_SCHEME_ZILOG : case PVR2_IR_SCHEME_24XXX_MCE : init_data -> ir_codes = RC_MAP_HAUPPAUGE ; init_data -> internal_get_key_func = IR_KBD_GET_KEY_HAUP_XVR ; init_data -> type = RC_PROTO_BIT_RC5 | RC_PROTO_BIT_RC6_MCE | RC_PROTO_BIT_RC6_6A_32 ; init_data -> name = hdw -> hdw_desc -> description ; info . addr = 0x71 ; info . platform_data = init_data ; strscpy ( info . type , "ir_z8f0811_haup" , I2C_NAME_SIZE ) ; pvr2_trace ( PVR2_TRACE_INFO , "Binding %s to i2c address 0x%02x." , info . type , info . addr ) ; i2c_new_client_device ( & hdw -> i2c_adap , & info ) ; break ; default : break ; } } 