exchange ( ) { int bottom = first_nonopt ; int middle = last_nonopt ; int top = optind ; char * tem ; if ( nonoption_flags_len > 0 && top >= nonoption_flags_max_len ) { char * new_str = malloc ( top + 1 ) ; if ( new_str == NULL ) { nonoption_flags_len = nonoption_flags_max_len = 0 ; } else { nonoption_flags_max_len = top + 1 ; __getopt_nonoption_flags = new_str ; } } while ( top > middle && middle > bottom ) { if ( top - middle > middle - bottom ) { int len = middle - bottom ; register int i ; for ( i = 0 ; i < len ; i ++ ) { tem = argv [ bottom + i ] ; argv [ bottom + i ] = argv [ top - ( middle - bottom ) + i ] ; argv [ top - ( middle - bottom ) + i ] = tem ; SWAP_FLAGS ( bottom + i , top - ( middle - bottom ) + i ) ; } top -= len ; } else { int len = top - middle ; register int i ; for ( i = 0 ; i < len ; i ++ ) { tem = argv [ bottom + i ] ; argv [ bottom + i ] = argv [ middle + i ] ; argv [ middle + i ] = tem ; SWAP_FLAGS ( bottom + i , middle + i ) ; } bottom += len ; } } first_nonopt += ( optind - last_nonopt ) ; last_nonopt = optind ; } 