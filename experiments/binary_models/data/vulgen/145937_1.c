crack_operand ( str , opP ) register char * str ; register struct m68k_op * opP ; { register int parens ; register int c ; register char * beg_str ; int inquote = 0 ; if ( ! str ) { return str ; } beg_str = str ; for ( parens = 0 ; * str && ( parens > 0 || inquote || notend ( str ) ) ; str ++ ) { if ( ! inquote ) { if ( * str == '(' ) { parens ++ ; } if ( * str == ')' ) { if ( ! parens ) { opP -> error = _ ( "Extra )" ) ; return str ; } -- parens ; } } if ( flag_mri && * str == '\'' ) { inquote = ! inquote ; } } if ( ! * str && parens ) { opP -> error = _ ( "Missing )" ) ; return str ; } c = * str ; * str = '\0' ; if ( m68k_ip_op ( beg_str , opP ) != 0 ) { * str = c ; return str ; } * str = c ; if ( c ) { c = * ++ str ; if ( ! c ) { as_bad ( _ ( "Missing operand" ) ) ; } } if ( opP -> mode == CONTROL && ( int ) opP -> reg < 0 ) { opP -> mode = REGLST ; opP -> mask = ~ ( int ) opP -> reg ; opP -> reg = 0 ; } return str ; } 