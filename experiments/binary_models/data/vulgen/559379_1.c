static char * get_toplevel_name ( struct expression * array ) { char * name ; char buf [ 128 ] ; if ( is_array ( array ) ) { array = get_array_base ( array ) ; } if ( ! array || array -> type != EXPR_SYMBOL ) { return NULL ; } if ( ! is_file_local ( array ) ) { return NULL ; } name = expr_to_str ( array ) ; snprintf ( buf , sizeof ( buf ) , "%s[]" , name ) ; return alloc_sname ( buf ) ; } 