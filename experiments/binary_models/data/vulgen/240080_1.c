static u32 iwl_dump_ini_imr_get_size ( struct iwl_fw_runtime * fwrt , struct iwl_dump_ini_region_data * reg_data ) { u32 ranges ; u32 ranges = 0 ; u32 imr_enable = fwrt -> trans -> dbg . imr_data . imr_enable ; u32 imr_size = fwrt -> trans -> dbg . imr_data . imr_size ; u32 sram_size = fwrt -> trans -> dbg . imr_data . sram_size ; if ( imr_enable == 0 || imr_size == 0 || sram_size == 0 ) { IWL_DEBUG_INFO ( fwrt , "WRT: Invalid imr data enable: %d, imr_size: %d, sram_size: %d\n" , imr_enable , imr_size , sram_size ) ; return size ; } size = imr_size ; ranges = iwl_dump_ini_imr_ranges ( fwrt , reg_data ) ; if ( ! size && ! ranges ) { IWL_ERR ( fwrt , "WRT: imr_size :=%d, ranges :=%d\n" , size , ranges ) ; return 0 ; } size += sizeof ( iwl_fw_ini_error_dump ) + ranges * sizeof ( iwl_fw_ini_error_dump_range ) ; return size ; } iwl_dump_ini_mem_ops { u32 * get_num_of_ranges ( struct iwl_fw_runtime * fwrt , struct iwl_dump_ini_region_data * reg_data ) u32 * get_size ( struct iwl_fw_runtime * fwrt , struct iwl_dump_ini_region_data * reg_data ) void * * fill_mem_hdr ( struct iwl_fw_runtime * fwrt , struct iwl_dump_ini_region_data * reg_data , void * data , u32 data_len ) int * fill_range ( struct iwl_fw_runtime * fwrt , struct iwl_dump_ini_region_data * reg_data , void * range , u32 range_len , int idx ) } 