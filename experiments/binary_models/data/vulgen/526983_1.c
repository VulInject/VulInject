extern int bb_p_job_try_stage_in ( List job_queue ) { List job_candidates ; slurm_mutex_lock ( & bb_state . bb_mutex ) ; log_flag ( BURST_BUF , "Mutex locked" ) ; if ( bb_state . last_load_time == 0 ) { slurm_mutex_unlock ( & bb_state . bb_mutex ) ; return SLURM_SUCCESS ; } job_candidates = list_create ( xfree_ptr ) ; list_for_each ( job_queue , _identify_bb_candidate , job_candidates ) ; list_for_each ( job_candidates , _try_alloc_job_bb , NULL ) ; slurm_mutex_unlock ( & bb_state . bb_mutex ) ; FREE_NULL_LIST ( job_candidates ) ; return SLURM_SUCCESS ; } 