static ssize_t summary_show ( struct usnic_ib_qp_grp * qp_grp , char * buf ) { int i , j ; struct usnic_vnic_res_chunk * res_chunk ; struct usnic_vnic_res * vnic_res ; int len ; len = sysfs_emit ( buf , "QPN: %d State: (%s) PID: %u VF Idx: %hu" , qp_grp -> ibqp . qp_num , usnic_ib_qp_grp_state_to_string ( qp_grp -> state ) , qp_grp -> owner_pid , usnic_vnic_get_index ( qp_grp -> vf -> vnic ) ) ; for ( i = 0 ; qp_grp -> res_chunk_list [ i ] ; i ++ ) { res_chunk = qp_grp -> res_chunk_list [ i ] ; for ( j = 0 ; j < res_chunk -> cnt ; j ++ ) { vnic_res = res_chunk -> res [ j ] ; len += sysfs_emit_at ( buf , len , " %s[%d]" , usnic_vnic_res_type_to_str ( vnic_res -> type ) , vnic_res -> vnic_idx ) ; } } return len ; } 