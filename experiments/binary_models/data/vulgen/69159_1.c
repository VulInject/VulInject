http_request_state_append ( , ) { static const sn { const char * s ; uint32_t n ; } , states [ ] { { CONST_STR_LEN ( "connect" ) } { CONST_STR_LEN ( "req-start" ) } { CONST_STR_LEN ( "read" ) } { CONST_STR_LEN ( "req-end" ) } { CONST_STR_LEN ( "readpost" ) } { CONST_STR_LEN ( "handle-req" ) } { CONST_STR_LEN ( "resp-start" ) } { CONST_STR_LEN ( "write" ) } { CONST_STR_LEN ( "resp-end" ) } { CONST_STR_LEN ( "error" ) } { CONST_STR_LEN ( "close" ) } { CONST_STR_LEN ( "(unknown)" ) } } ; const struct sn * const p = states + ( ( uint32_t ) state <= CON_STATE_CLOSE ?state : CON_STATE_CLOSE + 1 ) ; } 