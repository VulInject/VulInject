static int __init drm_core_init ( void ) { int ret ; drm_connector_ida_init ( ) ; idr_init ( & drm_minors_idr ) ; ret = drm_sysfs_init ( ) ; if ( ret < 0 ) { DRM_ERROR ( "Cannot create DRM class: %d\n" , ret ) ; error } drm_debugfs_root = debugfs_create_dir ( "dri" , NULL ) ; ret = register_chrdev ( DRM_MAJOR , "drm" , & drm_stub_fops ) ; if ( ret < 0 ) { error } drm_privacy_screen_lookup_init ( ) ; drm_core_init_complete = true ; DRM_DEBUG ( "Initialized\n" ) ; return 0 ; error drm_core_exit ( ) ; return ret ; } 