DUK_INTERNAL duk_ret_t duk_bi_proxy_constructor ( duk_context * ctx ) { duk_hobject * h_target ; duk_hobject * h_handler ; h_target = duk_require_hobject_or_lfunc_coerce ( ctx , 0 ) ; DUK_ASSERT ( h_target != NULL ) ; if ( DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ ( h_target ) ) { return DUK_RET_TYPE_ERROR ; } h_handler = duk_require_hobject_or_lfunc_coerce ( ctx , 1 ) ; DUK_ASSERT ( h_handler != NULL ) ; if ( DUK_HOBJECT_HAS_EXOTIC_PROXYOBJ ( h_handler ) ) { return DUK_RET_TYPE_ERROR ; } ( void ) duk_push_object_helper_proto ( ctx , DUK_HOBJECT_FLAG_EXTENSIBLE | DUK_HOBJECT_FLAG_EXOTIC_PROXYOBJ | DUK_HOBJECT_CLASS_AS_FLAGS ( DUK_HOBJECT_CLASS_OBJECT ) , NULL ) ; DUK_ASSERT_TOP ( ctx , 3 ) ; duk_dup ( ctx , 0 ) ; duk_xdef_prop_stridx ( ctx , - 2 , DUK_STRIDX_INT_TARGET , DUK_PROPDESC_FLAGS_NONE ) ; duk_dup ( ctx , 1 ) ; duk_xdef_prop_stridx ( ctx , - 2 , DUK_STRIDX_INT_HANDLER , DUK_PROPDESC_FLAGS_NONE ) ; return 1 ; } 