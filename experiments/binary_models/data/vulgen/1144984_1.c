static dladm_status_t set_resource ( dladm_handle_t handle , prop_desc_t * pdp __unused , datalink_id_t linkid , val_desc_t * vdp , uint_t val_cnt , uint_t flags , datalink_media_t media __unused ) { mac_resource_props_t mrp ; dladm_status_t status = DLADM_STATUS_OK ; dld_ioc_macprop_t * dip ; int i ; dip = i_dladm_buf_alloc_by_name ( 0 , linkid , "resource" , flags , & status ) ; if ( dip == NULL ) { return ( status ) ; } for ( i = 0 ; i < DLADM_MAX_RSRC_PROP ; i ++ ) { resource_prop_t * rp = & rsrc_prop_table [ i ] ; if ( strcmp ( pdp -> pd_name , rp -> rp_name ) != 0 ) { continue ; } status = rp -> rp_extract ( vdp , val_cnt , & mrp ) ; if ( status != DLADM_STATUS_OK ) { done } break ; } ( void ) memcpy ( dip -> pr_val , & mrp , dip -> pr_valsize ) ; status = i_dladm_macprop ( handle , dip , B_TRUE ) ; done free ( dip ) ; return ( status ) ; } 