static void window_copy_scroll_to ( struct window_mode_entry * wme , u_int px , u_int py , int no_redraw ) { struct window_copy_mode_data * data = wme -> data ; struct grid * gd = data -> backing -> grid ; u_int offset , gap ; data -> cx = px ; if ( py >= gd -> hsize - data -> oy && py < gd -> hsize - data -> oy + gd -> sy ) { data -> cy = py - ( gd -> hsize - data -> oy ) ; } else { gap = gd -> sy / 4 ; if ( py < gd -> sy ) { offset = 0 ; data -> cy = py ; } if ( py > gd -> hsize + gd -> sy - gap ) { offset = gd -> hsize ; data -> cy = py - gd -> hsize ; } else { offset = py + gap - gd -> sy ; data -> cy = py - offset ; } data -> oy = gd -> hsize - offset ; } window_copy_update_selection ( wme , 1 , 0 ) ; if ( ! no_redraw ) { window_copy_redraw_screen ( wme ) ; } } 