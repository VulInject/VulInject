static void fsl_qspi_init_abh_read ( struct fsl_qspi * q ) { void __iomem * base = q -> iobase ; int seqid ; qspi_writel ( q , QUADSPI_BUFXCR_INVALID_MSTRID , base + QUADSPI_BUF1CR ) ; qspi_writel ( q , QUADSPI_BUFXCR_INVALID_MSTRID , base + QUADSPI_BUF2CR ) ; qspi_writel ( q , QUADSPI_BUF3CR_ALLMST_MASK | ( ( q -> devtype_data -> ahb_buf_size / 8 ) << QUADSPI_BUF3CR_ADATSZ_SHIFT ) , base + QUADSPI_BUF3CR ) ; qspi_writel ( q , 0 , base + QUADSPI_BUF0IND ) ; qspi_writel ( q , 0 , base + QUADSPI_BUF1IND ) ; qspi_writel ( q , 0 , base + QUADSPI_BUF2IND ) ; seqid = fsl_qspi_get_seqid ( q , q -> nor [ 0 ] . read_opcode ) ; qspi_writel ( q , seqid << QUADSPI_BFGENCR_SEQID_SHIFT , q -> iobase + QUADSPI_BFGENCR ) ; } 