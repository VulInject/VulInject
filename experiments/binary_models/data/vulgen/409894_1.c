aff_element_draw ( , , , , , , ) { PangoRectangle rect ; gint i ; pango_layout_set_text ( layout , elem -> name , - 1 ) ; pango_layout_get_pixel_extents ( layout , NULL , & rect ) ; gdk_cairo_set_source_rgba ( cr , color ) ; cairo_move_to ( cr , elem -> v . x * width - rect . width / 2 , elem -> v . y * width + rect . height / 2 ) ; pango_cairo_show_layout ( cr , layout ) ; cairo_set_line_width ( cr , 1.0 ) ; if ( elem -> click_boundary != elem -> draw_boundary ) { cairo_move_to ( cr , elem -> click_boundary -> points [ 0 ] . x , elem -> click_boundary -> points [ 0 ] . y ) ; for ( i = 1 ; i < elem -> click_boundary -> npoints ; i ++ ) { cairo_line_to ( cr , elem -> click_boundary -> points [ i ] . x , elem -> click_boundary -> points [ i ] . y ) ; } cairo_close_path ( cr ) ; cairo_stroke ( cr ) ; } if ( selected ) { cairo_set_line_width ( cr , 3.0 ) ; } cairo_move_to ( cr , elem -> draw_boundary -> points [ 0 ] . x , elem -> draw_boundary -> points [ 0 ] . y ) ; for ( i = 1 ; i < elem -> draw_boundary -> npoints ; i ++ ) { cairo_line_to ( cr , elem -> draw_boundary -> points [ i ] . x , elem -> draw_boundary -> points [ i ] . y ) ; } cairo_close_path ( cr ) ; cairo_stroke ( cr ) ; } 