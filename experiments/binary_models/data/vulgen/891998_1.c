static void gtkui_create_plug_array ( void ) { GtkTreeIter iter ; int res ; static int blocked ; DEBUG_MSG ( "gtk_create_plug_array" ) ; if ( ls_plugins ) { gtk_list_store_clear ( GTK_LIST_STORE ( ls_plugins ) ) ; } else { ls_plugins = gtk_list_store_new ( 4 , G_TYPE_STRING , G_TYPE_STRING , G_TYPE_STRING , G_TYPE_STRING ) ; } res = plugin_list_walk ( PLP_MIN , PLP_MAX , & gtkui_add_plugin ) ; if ( res == - E_NOTFOUND ) { blocked = g_signal_handlers_block_by_func ( G_OBJECT ( treeview ) , G_CALLBACK ( gtkui_select_plugin_treeview ) , NULL ) ; gtk_list_store_append ( ls_plugins , & iter ) ; gtk_list_store_set ( ls_plugins , & iter , 0 , " " , 1 , "No Plugins Loaded" , - 1 ) ; } if ( blocked > 0 ) { g_signal_handlers_unblock_by_func ( G_OBJECT ( treeview ) , G_CALLBACK ( gtkui_select_plugin_treeview ) , NULL ) ; blocked = 0 ; } } 