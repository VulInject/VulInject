void mpc3_set_output_csc ( struct mpc * mpc , int opp_id , const uint16_t * regval , enum mpc_output_csc_mode ocsc_mode ) { struct dcn30_mpc * mpc30 = TO_DCN30_MPC ( mpc ) ; struct color_matrices_reg ocsc_regs ; REG_WRITE ( MPC_OUT_CSC_COEF_FORMAT , 0 ) ; REG_SET ( CSC_MODE [ opp_id ] , 0 , MPC_OCSC_MODE , ocsc_mode ) ; if ( ocsc_mode == MPC_OUTPUT_CSC_DISABLE ) { return ; } if ( regval == NULL ) { return ; } ocsc_regs . shifts . csc_c11 = mpc30 -> mpc_shift -> MPC_OCSC_C11_A ; ocsc_regs . masks . csc_c11 = mpc30 -> mpc_mask -> MPC_OCSC_C11_A ; ocsc_regs . shifts . csc_c12 = mpc30 -> mpc_shift -> MPC_OCSC_C12_A ; ocsc_regs . masks . csc_c12 = mpc30 -> mpc_mask -> MPC_OCSC_C12_A ; if ( ocsc_mode == MPC_OUTPUT_CSC_COEF_A ) { ocsc_regs . csc_c11_c12 = REG ( CSC_C11_C12_A [ opp_id ] ) ; ocsc_regs . csc_c33_c34 = REG ( CSC_C33_C34_A [ opp_id ] ) ; } else { ocsc_regs . csc_c11_c12 = REG ( CSC_C11_C12_B [ opp_id ] ) ; ocsc_regs . csc_c33_c34 = REG ( CSC_C33_C34_B [ opp_id ] ) ; } cm_helper_program_color_matrices ( mpc30 -> base . ctx , regval , & ocsc_regs ) ; } 