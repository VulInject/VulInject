void iospc_kstat_detach ( iospc_t * iospc_p ) { iospc_grp_t * * grp_pp ; iospc_grp_t * grp_p ; int i ; IOSPC_DBG2 ( "iospc_kstat_detach called\n" ) ; for ( i = 0 , grp_pp = iospc_leaf_grps ; * grp_pp != NULL ; i ++ , grp_pp ++ ) { grp_p = * grp_pp ; if ( iospc_p -> iospc_ksinfo_p [ i ] != NULL ) { grp_p -> access_fini ( iospc_p , iospc_p -> iospc_ksinfo_p [ i ] ) ; if ( iospc_p -> iospc_ksinfo_p [ i ] -> cntr_ksp != NULL ) { kstat_delete ( iospc_p -> iospc_ksinfo_p [ i ] -> cntr_ksp ) ; } kmem_free ( iospc_p -> iospc_ksinfo_p [ i ] , sizeof ( iospc_ksinfo_t ) ) ; } } } 