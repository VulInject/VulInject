static irqreturn_t lpass_platform_lpaif_irq ( int irq , void * data ) { struct lpass_data * drvdata = data ; struct lpass_variant * v = drvdata -> variant ; unsigned int irqs ; int rv , chan ; if ( rv ) { pr_err ( "error reading from irqstat reg: %d\n" , rv ) ; return IRQ_NONE ; } for ( chan = 0 ; chan < LPASS_MAX_DMA_CHANNELS ; chan ++ ) { if ( irqs & LPAIF_IRQ_ALL ( chan ) && drvdata -> substream [ chan ] ) { rv = lpass_dma_interrupt_handler ( drvdata -> substream [ chan ] , drvdata , chan , irqs ) ; if ( rv != IRQ_HANDLED ) { return rv ; } } } return IRQ_HANDLED ; } 