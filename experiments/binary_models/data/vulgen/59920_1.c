static int cx24117_cmd_execute_nolock ( struct dvb_frontend * fe , struct cx24117_cmd * cmd ) { struct cx24117_state * state = fe -> demodulator_priv ; int i , ret ; dev_dbg ( & state -> priv -> i2c -> dev , "%s() demod%d\n" , __func__ , state -> demod ) ; ret = cx24117_firmware_ondemand ( fe ) ; cx24117_writecmd ( state , cmd ) ; cx24117_writereg ( state , CX24117_REG_EXECUTE , 0x01 ) ; i = 0 ; while ( cx24117_readreg ( state , CX24117_REG_EXECUTE ) ) { msleep ( 20 ) ; if ( i ++ > 40 ) { dev_warn ( & state -> priv -> i2c -> dev , "%s() Firmware not responding\n" , __func__ ) ; return - EIO ; } } return 0 ; } 