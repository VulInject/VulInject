START_TEST ( ) { int local_errno = 0 ; fail_unless ( PBSD_rdrpy ( NULL , - 1 ) == NULL ) ; fail_unless ( PBSD_rdrpy ( NULL , PBS_NET_MAX_CONNECTIONS ) == NULL ) ; setup_fail = true ; fail_unless ( PBSD_rdrpy ( & local_errno , 1 ) == NULL ) ; setup_fail = false ; decode_rc = - 1 ; timeout = true ; fail_unless ( PBSD_rdrpy ( & local_errno , 1 ) == NULL ) ; fail_unless ( ! strcmp ( "We timed out!" , connection [ 1 ] . ch_errtxt ) , "message: %s" , connection [ 1 ] . ch_errtxt ) ; fail_unless ( connection [ 1 ] . ch_errno == PBSE_TIMEOUT ) ; decode_rc = DIS_OVERFLOW ; fail_unless ( PBSD_rdrpy ( & local_errno , 1 ) == NULL ) ; fail_unless ( 1 , "message: %s" ) } 