static void r8152b_get_version ( struct r8152 * tp ) { u32 ocp_data ; u16 tcr ; int i ; tcr = ( u16 ) ( ocp_data & VERSION_MASK ) ; for ( i = 0 ; i < ARRAY_SIZE ( r8152_versions ) ; i ++ ) { if ( tcr == r8152_versions [ i ] . tcr ) { tp -> version = r8152_versions [ i ] . version ; tp -> supports_gmii = r8152_versions [ i ] . gmii ; break ; } } if ( tp -> version == RTL_VER_UNKNOWN ) { debug ( "r8152 Unknown tcr version 0x%04x\n" , tcr ) ; } } 