static int fintek_wdt_keepalive ( struct watchdog_device * wdd ) { struct fintek_wdt * wd = watchdog_get_drvdata ( wdd ) ; int err ; err = superio_enter ( wd -> sioaddr ) ; if ( err ) { return err ; } superio_select ( wd -> sioaddr , SIO_F71808FG_LD_WDT ) ; if ( wd -> minutes_mode ) { superio_set_bit ( wd -> sioaddr , F71808FG_REG_WDT_CONF , F71808FG_FLAG_WD_UNIT ) ; } else { superio_clear_bit ( wd -> sioaddr , F71808FG_REG_WDT_CONF , 0 ) ; } superio_outb ( wd -> sioaddr , F71808FG_REG_WD_TIME , wd -> timer_val ) ; superio_exit ( wd -> sioaddr ) ; return 0 ; } 