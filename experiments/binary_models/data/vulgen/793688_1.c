static void tg_service_queue_add ( struct throtl_grp * tg ) { struct throtl_service_queue * parent_sq = tg -> service_queue . parent_sq ; struct rb_node * * node = & parent_sq -> pending_tree . rb_node ; struct rb_node * parent = NULL ; struct throtl_grp * __tg ; int left = 1 ; while ( * node != NULL ) { parent = * node ; __tg = rb_entry_tg ( parent ) ; if ( time_before ( key , __tg -> disptime ) ) { node = & parent -> rb_left ; } else { node = & parent -> rb_right ; left = 0 ; } } if ( left ) { parent_sq -> first_pending = & tg -> rb_node ; } rb_link_node ( & tg -> rb_node , parent , node ) ; rb_insert_color ( & tg -> rb_node , & parent_sq -> pending_tree ) ; } 