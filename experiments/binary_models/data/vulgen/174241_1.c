static int mixer_bass_treble_put ( struct snd_kcontrol * kcontrol , struct snd_ctl_elem_value * ucontrol ) { struct snd_emu8000 * emu = snd_kcontrol_chip ( kcontrol ) ; unsigned long flags ; int change ; val1 = ucontrol -> value . integer . value [ 0 ] % 12 ; spin_lock_irqsave ( & emu -> control_lock , flags ) ; if ( kcontrol -> private_value ) { change = val1 != emu -> treble_level ; emu -> treble_level = val1 ; } else { change = val1 != emu -> bass_level ; emu -> bass_level = val1 ; } spin_unlock_irqrestore ( & emu -> control_lock , flags ) ; snd_emu8000_update_equalizer ( emu ) ; return change ; } 