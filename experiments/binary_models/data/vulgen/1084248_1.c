static void zynqmp_dpsub_plane_atomic_disable ( struct drm_plane * plane , struct drm_atomic_state * state ) { struct drm_plane_state * old_state = drm_atomic_get_old_plane_state ( state , plane ) ; struct zynqmp_dpsub * dpsub = to_zynqmp_dpsub ( plane -> dev ) ; struct zynqmp_disp_layer * layer = dpsub -> layers [ plane -> index ] ; zynqmp_disp_layer_disable ( layer ) ; if ( plane -> index == ZYNQMP_DPSUB_LAYER_GFX ) { zynqmp_disp_blend_set_global_alpha ( dpsub -> disp , false , plane -> state -> alpha >> 8 ) ; } } 