static void S_more_refcounted_fds ( pTHX_ const int new_fd ) PERL_TSA_REQUIRES ( PL_perlio_mutex ) ( const int old_max = PL_perlio_fd_refcnt_size , const int new_max = 16 + ( new_fd & ~ 15 ) , int * new_array , PERL_UNUSED_CONTEXT , DEBUG_i ( PerlIO_debug ( "More fds - old=%d, need %d, new=%d\n" , old_max , new_fd , new_max ) ) , ( new_fd < old_max ) { return ; } assert ( new_max > new_fd ) , new_array = ( int * ) realloc ( PL_perlio_fd_refcnt , new_max * sizeof ( int ) ) , ( ! new_array ) { MUTEX_UNLOCK ( & PL_perlio_mutex ) croak_no_mem ( ) } PL_perlio_fd_refcnt_size = new_max , PL_perlio_fd_refcnt = new_array , DEBUG_i ( PerlIO_debug ( "Zeroing %p, %d\n" , ( void * ) ( new_array + old_max ) , new_max - old_max ) ) , Zero ( new_array , new_max - old_max , int ) ) ; 