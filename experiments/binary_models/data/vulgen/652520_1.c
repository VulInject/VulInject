static void s5m8767_data_to_tm ( u8 * data , struct rtc_time * tm , int rtc_24hr_mode ) { tm -> tm_sec = data [ RTC_SEC ] & 0x7f ; tm -> tm_min = data [ RTC_MIN ] & 0x7f ; if ( rtc_24hr_mode ) { tm -> tm_hour = data [ RTC_HOUR ] & 0x1f ; } else { tm -> tm_hour = data [ RTC_HOUR ] & 0x0f ; } tm -> tm_wday = ffs ( data [ RTC_WEEKDAY ] & 0x7f ) ; tm -> tm_mday = data [ RTC_DATE ] & 0x1f ; tm -> tm_mon = ( data [ RTC_MONTH ] & 0x0f ) - 1 ; tm -> tm_year = ( data [ RTC_YEAR1 ] & 0x7f ) + 100 ; tm -> tm_yday = 0 ; tm -> tm_isdst = 0 ; } 