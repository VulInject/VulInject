static int cdce706_register_clkouts ( struct cdce706_dev_data * cdce ) { struct clk_init_data init = { . ops = & cdce706_clkout_ops . parent_names = cdce706_divider_name . num_parents = ARRAY_SIZE ( cdce706_divider_name ) . flags = CLK_SET_RATE_PARENT } ; unsigned i ; int ret ; for ( i = 0 ; i < ARRAY_SIZE ( cdce -> clkout ) ; ++ i ) { unsigned val ; ret = cdce706_reg_read ( cdce , CDCE706_CLKOUT ( i ) , & val ) ; cdce -> clkout [ i ] . parent = val & CDCE706_CLKOUT_DIVIDER_MASK ; dev_dbg ( & cdce -> client -> dev , "%s: i: %u, parent: %u\n" , __func__ , i , cdce -> clkout [ i ] . parent ) ; } return cdce706_register_hw ( cdce , cdce -> clkout , ARRAY_SIZE ( cdce -> clkout ) , cdce706_clkout_name , & init ) ; } 