static void __init tegra_cpu_reset_handler_enable ( void ) { void __iomem * iram_base = IO_ADDRESS ( TEGRA_IRAM_RESET_BASE ) ; const u32 reset_address = TEGRA_IRAM_RESET_BASE + tegra_cpu_reset_handler_offset ; int err ; BUG_ON ( is_enabled ) ; BUG_ON ( tegra_cpu_reset_handler_size > TEGRA_IRAM_RESET_HANDLER_SIZE ) ; memcpy ( iram_base , ( void * ) __tegra_cpu_reset_handler_start , tegra_cpu_reset_handler_size ) ; err = call_firmware_op ( set_cpu_boot_addr , 0 , reset_address ) ; switch ( err ) { case - ENOSYS : tegra_cpu_reset_handler_set ( reset_address ) ; case 0 : break ; default : pr_crit ( "Cannot set CPU reset handler: %d\n" , err ) ; BUG ( ) ; } } 