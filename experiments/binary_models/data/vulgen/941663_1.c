static int set_txidle ( SLMP_INFO * info , int idle_mode ) static int tx_enable ( SLMP_INFO * info , int enable ) static int tx_abort ( SLMP_INFO * info ) static int rx_enable ( SLMP_INFO * info , int enable ) static int modem_input_wait ( SLMP_INFO * info , int arg ) static int wait_mgsl_event ( SLMP_INFO * info , int __user * mask_ptr ) static int tiocmget ( struct tty_struct * tty ) static int tiocmset ( struct tty_struct * tty , unsigned int set , unsigned int clear ) static int set_break ( struct tty_struct * tty , int break_state ) static int add_device ( SLMP_INFO * info ) static int device_init ( int adapter_num , struct pci_dev * pdev ) static int claim_resources ( SLMP_INFO * info ) static void release_resources ( SLMP_INFO * info ) static int startup ( SLMP_INFO * info ) static int block_til_ready ( struct tty_struct * tty , struct file * filp , SLMP_INFO * info ) static int carrier_raised ( struct tty_port * port ) static void shutdown ( SLMP_INFO * info ) static void program_hw ( SLMP_INFO * info ) static void change_params ( SLMP_INFO * info ) static bool init_adapter ( SLMP_INFO * info ) static bool register_test ( SLMP_INFO * info ) static bool irq_test ( SLMP_INFO * info ) static bool loopback_test ( SLMP_INFO * info ) static int adapter_test ( SLMP_INFO * info ) static bool memory_test ( SLMP_INFO * info ) static void reset_adapter ( SLMP_INFO * info ) static void reset_port ( SLMP_INFO * info ) static void async_mode ( SLMP_INFO * info ) static void hdlc_mode ( SLMP_INFO * info ) static void rx_stop ( SLMP_INFO * info ) static void rx_start ( SLMP_INFO * info ) static void rx_reset_buffers ( SLMP_INFO * info ) static void rx_free_frame_buffers ( SLMP_INFO * info , unsigned int first , unsigned int last ) static bool rx_get_frame ( SLMP_INFO * info ) static void tx_start ( SLMP_INFO * info ) static void tx_stop ( SLMP_INFO * info ) static void tx_load_fifo ( SLMP_INFO * info ) static void tx_set_idle ( SLMP_INFO * info ) static void tx_load_dma_buffer ( SLMP_INFO * info , const char * buf , unsigned int count ) static void get_signals ( SLMP_INFO * info ) static void set_signals ( SLMP_INFO * info ) static void enable_loopback ( SLMP_INFO * info , int enable ) static void set_rate ( SLMP_INFO * info , u32 data_rate ) static int bh_action ( SLMP_INFO * info ) static void bh_handler ( struct work_struct * work ) static void bh_receive ( SLMP_INFO * info ) static void bh_transmit ( SLMP_INFO * info ) static void bh_status ( SLMP_INFO * info ) static void isr_timer ( SLMP_INFO * info ) static void isr_rxint ( SLMP_INFO * info ) static void isr_rxrdy ( SLMP_INFO * info ) static void isr_txint ( SLMP_INFO * info ) static void isr_txrdy ( SLMP_INFO * info ) static void isr_rxdmaok ( SLMP_INFO * info ) static void isr_rxdmaerror ( SLMP_INFO * info ) static void isr_txdmaok ( SLMP_INFO * info ) static void isr_txdmaerror ( SLMP_INFO * info ) static void isr_io_pin ( SLMP_INFO * info , u16 status ) static int alloc_dma_bufs ( SLMP_INFO * info ) static void free_dma_bufs ( SLMP_INFO * info ) static int alloc_buf_list ( SLMP_INFO * info ) static int alloc_frame_bufs ( SLMP_INFO * info , SCADESC * list , SCADESC_EX * list_ex , int count ) static int alloc_tmp_rx_buf ( SLMP_INFO * info ) static void free_tmp_rx_buf ( SLMP_INFO * info ) static void load_pci_memory ( SLMP_INFO * info , char * dest , const char * src , unsigned short count ) static void trace_block ( SLMP_INFO * info , const char * data , int count , int xmit ) static void tx_timeout ( unsigned long context ) static void status_timeout ( unsigned long context ) static unsigned char read_reg ( SLMP_INFO * info , unsigned char addr ) static void write_reg ( SLMP_INFO * info , unsigned char addr , unsigned char val ) static u16 read_reg16 ( SLMP_INFO * info , unsigned char addr ) static void write_reg16 ( SLMP_INFO * info , unsigned char addr , u16 val ) static unsigned char read_status_reg ( SLMP_INFO * info ) static void write_control_reg ( SLMP_INFO * info ) static unsigned char rx_active_fifo_level = 16 ; static unsigned char tx_active_fifo_level = 16 ; static unsigned char tx_negate_fifo_level = 32 ; static u32 misc_ctrl_value = 0x007e4040 ; static u32 lcr1_brdr_value = 0x00800028 ; static u32 read_ahead_count = 8 ; static unsigned char dma_priority = 0x04 ; static u32 sca_pci_load_interval = 64 ; static void * synclinkmp_get_text_ptr ( void ) static void * synclinkmp_get_text_ptr ( void ) { return synclinkmp_get_text_ptr ; } static inline int sanity_check ( SLMP_INFO * info , char * name , const char * routine ) { static const char * badmagic = "Warning: bad magic number for synclinkmp_struct (%s) in %s\n" ; static const char * badinfo = "Warning: null synclinkmp_struct for (%s) in %s\n" ; if ( ! info ) { printk ( badinfo , name , routine ) ; return 1 ; } if ( ! info ) { return 1 ; } return 0 ; } 