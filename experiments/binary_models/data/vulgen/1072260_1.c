int dram_init ( void ) { if ( IS_ENABLED ( CONFIG_RAM_OCTEON ) ) { struct ram_info ram ; struct udevice * dev ; int ret ; if ( ret ) { debug ( "DRAM init failed: %d\n" , ret ) ; return ret ; } ret = ram_get_info ( dev , & ram ) ; if ( ret ) { debug ( "Cannot get DRAM size: %d\n" , ret ) ; return ret ; } gd -> ram_size = ram . size ; debug ( "SDRAM base=%lx, size=%lx\n" , ( unsigned long ) ram . base , ( unsigned long ) ram . size ) ; } else { gd -> ram_size = ( 4 << 20 ) ; gd -> bd -> bi_dram [ 0 ] . size = gd -> ram_size ; gd -> bd -> bi_dram [ 1 ] . size = 0 ; } return 0 ; } 