static int __init gserial_init ( void ) { if ( use_acm ) { serial_config_driver . label = "CDC ACM config" ; serial_config_driver . bConfigurationValue = 2 ; device_desc . bDeviceClass = USB_CLASS_COMM ; device_desc . idProduct = cpu_to_le16 ( GS_CDC_PRODUCT_ID ) ; } if ( use_obex ) { serial_config_driver . label = "CDC OBEX config" ; serial_config_driver . bConfigurationValue = 3 ; device_desc . bDeviceClass = USB_CLASS_COMM ; device_desc . idProduct = cpu_to_le16 ( GS_CDC_OBEX_PRODUCT_ID ) ; } else { serial_config_driver . label = "Generic Serial config" ; serial_config_driver . bConfigurationValue = 1 ; device_desc . bDeviceClass = USB_CLASS_VENDOR_SPEC ; device_desc . idProduct = cpu_to_le16 ( GS_PRODUCT_ID ) ; } strings_dev [ STRING_DESCRIPTION_IDX ] . s = serial_config_driver . label ; return usb_composite_probe ( & gserial_driver ) ; } 