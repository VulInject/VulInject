static int nfs4_callback_svc ( void * vrqstp ) { int err ; struct svc_rqst * rqstp = vrqstp ; set_freezable ( ) ; while ( ! kthread_freezable_should_stop ( NULL ) ) { if ( signal_pending ( current ) ) { flush_signals ( current ) ; } err = svc_recv ( rqstp , MAX_SCHEDULE_TIMEOUT ) ; if ( err == - EAGAIN || err == - EINTR ) { continue ; } svc_process ( rqstp ) ; } svc_exit_thread ( rqstp ) ; return 0 ; } 