static struct esp_cmd_entry * find_and_prep_issuable_command ( struct esp * esp ) { struct esp_cmd_entry * ent ; list_for_each_entry ( , , ) { struct scsi_cmnd * cmd = ent -> cmd ; struct scsi_device * dev = cmd -> device ; struct esp_lun_data * lp = dev -> hostdata ; if ( ent -> flags & ESP_CMD_FLAG_AUTOSENSE ) { ent -> tag [ 0 ] = 0 ; ent -> tag [ 1 ] = 0 ; return ent ; } if ( ! spi_populate_tag_msg ( & ent -> tag [ 0 ] , cmd ) ) { ent -> tag [ 0 ] = 0 ; ent -> tag [ 1 ] = 0 ; } ent -> orig_tag [ 0 ] = ent -> tag [ 0 ] ; ent -> orig_tag [ 1 ] = ent -> tag [ 1 ] ; return ent ; } return NULL ; } 