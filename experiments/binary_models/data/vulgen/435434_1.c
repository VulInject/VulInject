static kthread_t * lwp_queue_waiter ( lwpchan_t * lwpchan ) { sleepq_head_t * sqh ; kthread_t * tp ; sqh = lwpsqhash ( lwpchan ) ; for ( tp = sqh -> sq_queue . sq_first ; tp != NULL ; tp = tp -> t_link ) { if ( tp -> t_lwpchan . lc_wchan0 == lwpchan -> lc_wchan0 && tp -> t_lwpchan . lc_wchan == lwpchan -> lc_wchan ) { break ; } } disp_lock_exit ( & sqh -> sq_lock ) ; return ( tp ) ; } 