test_exception_backtrace ( ) { jerry_init ( JERRY_INIT_EMPTY ) ; const char * source = ( "function f() {\n" "  undef_reference;\n" "}\n" "\n" "function g() {\n" "  return f();\n" "}\n" "\n" "g();\n" ) ; jerry_value_t error = run ( "bad.js" , source ) ; TEST_ASSERT ( jerry_value_is_error ( error ) ) ; error = jerry_get_value_from_error ( error , true ) ; TEST_ASSERT ( jerry_value_is_object ( error ) ) ; jerry_value_t name = jerry_create_string ( ( const jerry_char_t * ) "stack" ) ; jerry_value_t backtrace = jerry_get_property ( error , name ) ; jerry_release_value ( name ) ; jerry_release_value ( error ) ; TEST_ASSERT ( ! jerry_value_is_error ( backtrace ) && jerry_value_is_array ( backtrace ) ) ; TEST_ASSERT ( jerry_get_array_length ( backtrace ) == 3 ) ; compare ( backtrace , 0 , "bad.js:2:3" ) ; compare ( backtrace , 1 , "bad.js:6:3" ) ; compare ( backtrace , 2 , "bad.js:9:1" ) ; jerry_release_value ( backtrace ) ; } 