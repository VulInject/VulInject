ApDumpTableByName ( ) { char LocalSignature [ ACPI_NAMESEG_SIZE + 1 ] ; UINT32 Instance ; ACPI_TABLE_HEADER * Table ; ACPI_PHYSICAL_ADDRESS Address ; ACPI_STATUS Status ; int TableStatus ; if ( strlen ( Signature ) != ACPI_NAMESEG_SIZE ) { fprintf ( stderr , "Invalid table signature [%s]: must be exactly 4 characters\n" , Signature ) ; return ( - 1 ) ; } strcpy ( LocalSignature , Signature ) ; AcpiUtStrupr ( LocalSignature ) ; if ( ACPI_COMPARE_NAMESEG ( LocalSignature , "FADT" ) ) { strcpy ( LocalSignature , ACPI_SIG_FADT ) ; } if ( ACPI_COMPARE_NAMESEG ( LocalSignature , "MADT" ) ) { strcpy ( LocalSignature , ACPI_SIG_MADT ) ; } for ( Instance = 0 ; Instance < AP_MAX_ACPI_FILES ; Instance ++ ) { Status = AcpiOsGetTableByName ( LocalSignature , Instance , & Table , & Address ) ; if ( ACPI_FAILURE ( Status ) ) { fprintf ( stderr , "Could not get ACPI table with signature [%s], %s\n" , LocalSignature , AcpiFormatException ( Status ) ) ; return ( - 1 ) ; } TableStatus = ApDumpTableBuffer ( Table , Instance , Address ) ; ACPI_FREE ( Table ) ; if ( TableStatus ) { break ; } } return ( - 1 ) ; } 