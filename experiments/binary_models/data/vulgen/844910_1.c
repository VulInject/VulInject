_ev_dir_ensure_exists ( , , ) { int errsv ; char * display_name ; errno = 0 ; if ( g_mkdir_with_parents ( dir , mode ) == 0 ) { return TRUE ; } errsv = errno ; if ( errsv == EEXIST && g_file_test ( dir , G_FILE_TEST_IS_DIR ) ) { return TRUE ; } display_name = g_filename_display_name ( dir ) ; g_set_error ( error , G_IO_ERROR , g_io_error_from_errno ( errsv ) , "Failed to create directory '%s': %s" , display_name , g_strerror ( errsv ) ) ; g_free ( display_name ) ; return FALSE ; } 