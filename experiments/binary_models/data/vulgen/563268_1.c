static gboolean infinoted_plugin_document_stream_process ( InfinotedPluginDocumentStreamStream * stream , const gchar * * data , gsize * len ) { guint32 command ; command = * ( guint32 * ) ( * data ) ; * data += 4 ; * len -= 4 ; switch ( command ) { case 0 : return infinoted_plugin_document_stream_process_get_document ( stream , data , len ) ; case 1 : return infinoted_plugin_document_stream_process_send_chat_message ( stream , data , len ) ; default : infinoted_plugin_document_stream_close_stream ( stream ) ; return FALSE ; } } 