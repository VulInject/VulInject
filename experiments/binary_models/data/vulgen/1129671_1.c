START_TEST ( ) { pbs_attribute f ; pbs_attribute t ; memset ( & f , 0 , sizeof ( f ) ) ; decode_size ( & f , NULL , NULL , "1G" , 0 ) ; memset ( & t , 0 , sizeof ( t ) ) ; decode_size ( & t , NULL , NULL , "1024M" , 0 ) ; memset ( & f , 0 , sizeof ( f ) ) ; decode_size ( & f , NULL , NULL , "11G" , 0 ) ; memset ( & t , 0 , sizeof ( t ) ) ; decode_size ( & t , NULL , NULL , "10000M" , 0 ) ; fail_unless ( comp_size ( & t , & f ) == - 1 ) ; fail_unless ( comp_size ( & f , & t ) == 1 ) ; set_size ( & f , & t , SET ) ; fail_unless ( comp_size ( & t , & f ) == 0 ) ; memset ( & f , 0 , sizeof ( f ) ) ; decode_size ( & f , NULL , NULL , "1G" , 0 ) ; memset ( & t , 0 , sizeof ( t ) ) ; decode_size ( & t , NULL , NULL , "1g" , 0 ) ; set_size ( & f , & t , INCR ) ; fail_unless ( f . at_val . at_size . atsv_num == 2 ) ; fail_unless ( f . at_val . at_size . atsv_shift == 30 ) ; memset ( & f , 0 , sizeof ( f ) ) ; decode_size ( & f , NULL , NULL , "2G" , 0 ) ; memset ( & t , 0 , sizeof ( t ) ) ; decode_size ( & t , NULL , NULL , "1024M" , 0 ) ; } 