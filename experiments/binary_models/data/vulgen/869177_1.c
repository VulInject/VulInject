pid_t getppid_tm ( bool scv , bool suspend ) { int i ; pid_t pid ; for ( i = 0 ; i < TM_RETRIES ; i ++ ) { if ( suspend ) { if ( scv ) { pid = getppid_scv_tm_suspended ( ) ; } else { pid = getppid_tm_suspended ( ) ; } } else { if ( scv ) { pid = getppid_scv_tm_active ( ) ; } else { pid = getppid_tm_active ( ) ; } } if ( pid >= 0 ) { return pid ; } if ( failure_is_persistent ( ) ) { printf ( "Unexpected persistent transaction failure.\n" ) ; printf ( "TEXASR 0x%016lx, TFIAR 0x%016lx.\n" , __builtin_get_texasr ( ) , __builtin_get_tfiar ( ) ) ; exit ( - 1 ) ; } retries ++ ; } printf ( "Exceeded limit of %d temporary transaction failures.\n" , TM_RETRIES ) ; printf ( "TEXASR 0x%016lx, TFIAR 0x%016lx.\n" , __builtin_get_texasr ( ) , __builtin_get_tfiar ( ) ) ; exit ( - 1 ) ; } 