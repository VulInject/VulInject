void igb_update_mc_addr_list ( struct e1000_hw * hw , u8 * mc_addr_list , u32 mc_addr_count ) { u32 hash_value , hash_bit , hash_reg ; int i ; for ( i = 0 ; ( u32 ) i < mc_addr_count ; i ++ ) { hash_value = igb_hash_mc_addr ( hw , mc_addr_list ) ; hash_reg = ( hash_value >> 5 ) & ( hw -> mac . mta_reg_count - 1 ) ; hash_bit = hash_value & 0x1F ; hw -> mac . mta_shadow [ hash_reg ] |= BIT ( hash_bit ) ; mc_addr_list += ( ETH_ALEN ) ; } for ( i = hw -> mac . mta_reg_count - 1 ; i >= 0 ; i -- ) { array_wr32 ( E1000_MTA , i , hw -> mac . mta_shadow [ i ] ) ; } wrfl ( ) ; } 