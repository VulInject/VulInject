void sendcmdto_one ( struct Client * from , const char * cmd , const char * tok , struct Client * to , const char * pattern , ... ) { struct VarData vd ; struct MsgBuf * mb ; to = cli_from ( to ) ; vd . vd_format = pattern ; va_start ( vd . vd_args , pattern ) ; mb = msgq_make ( to , "%:#C %s %v" , from , IsServer ( to ) || IsMe ( to ) ?tok : cmd , & vd ) ; send_buffer ( to , mb , 0 ) ; msgq_clean ( mb ) ; } 