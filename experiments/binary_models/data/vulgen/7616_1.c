static int hdac_hdmi_add_ports ( struct hdac_hdmi_priv * hdmi , struct hdac_hdmi_pin * pin ) { struct hdac_hdmi_port * ports ; int max_ports = HDA_MAX_PORTS ; int i ; ports = kcalloc ( max_ports , sizeof ( * ports ) , GFP_KERNEL ) ; for ( i = 0 ; i < max_ports ; i ++ ) { ports [ i ] . id = i ; ports [ i ] . pin = pin ; } pin -> ports = ports ; pin -> num_ports = max_ports ; return 0 ; } 