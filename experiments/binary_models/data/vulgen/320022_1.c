static int visl_s_fmt_vid_cap ( struct file * file , void * priv , struct v4l2_format * f ) { struct visl_ctx * ctx = visl_file_to_ctx ( file ) ; int ret ; dprintk ( ctx -> dev , "Trying to set the CAPTURE format to:\n" ) ; visl_print_fmt ( ctx , f ) ; if ( ret ) { return ret ; } ctx -> decoded_fmt = * f ; dprintk ( ctx -> dev , "CAPTURE format was set to:\n" ) ; visl_print_fmt ( ctx , & ctx -> decoded_fmt ) ; visl_tpg_init ( ctx ) ; return 0 ; } 