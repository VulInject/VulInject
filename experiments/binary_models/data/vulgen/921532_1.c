static void es1370_realize ( PCIDevice * dev , Error * * errp ) { ES1370State * s = ES1370 ( dev ) ; uint8_t * c = s -> dev . config ; c [ PCI_CAPABILITY_LIST ] = 0xdc ; c [ PCI_INTERRUPT_LINE ] = 10 ; c [ 0xdc ] = 0x00 ; c [ PCI_INTERRUPT_PIN ] = 1 ; c [ PCI_MIN_GNT ] = 0x0c ; c [ PCI_MAX_LAT ] = 0x80 ; memory_region_init_io ( & s -> io , OBJECT ( s ) , & es1370_io_ops , s , "es1370" , 256 ) ; pci_register_bar ( & s -> dev , 0 , PCI_BASE_ADDRESS_SPACE_IO , & s -> io ) ; AUD_register_card ( "es1370" , & s -> card ) ; es1370_reset ( s ) ; } 