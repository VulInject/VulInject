decNumber * decimal128ToNumber ( const decimal128 * d128 , decNumber * dn ) { uInt msd ; uInt exp ; uInt comb ; const uInt * pu ; Int need ; uInt sourar [ 4 ] ; pu = ( const uInt * ) d128 -> bytes ; if ( DECLITEND ) { sourlo = pu [ 0 ] ; sourml = pu [ 1 ] ; sourmh = pu [ 2 ] ; sourhi = pu [ 3 ] ; } else { sourhi = pu [ 0 ] ; sourmh = pu [ 1 ] ; sourml = pu [ 2 ] ; sourlo = pu [ 3 ] ; } comb = ( sourhi >> 26 ) & 0x1f ; decNumberZero ( dn ) ; msd = COMBMSD [ comb ] ; exp = COMBEXP [ comb ] ; if ( exp == 3 ) { if ( msd == 0 ) { dn -> bits |= DECINF ; return dn ; } if ( sourhi & 0x02000000 ) { dn -> bits |= DECSNAN ; } else { dn -> bits |= DECNAN ; } msd = 0 ; } else { dn -> exponent = ( exp << 12 ) + ( ( sourhi >> 14 ) & 0xfff ) - DECIMAL128_Bias ; } sourhi &= 0x00003fff ; if ( msd ) { sourhi |= msd << 14 ; need = 12 ; } else { if ( sourhi ) { need = 11 ; } if ( sourmh ) { need = 10 ; } if ( sourml ) { need = 7 ; } if ( sourlo ) { need = 4 ; } else { return dn ; } } decDigitsFromDPD ( dn , sourar , need ) ; return dn ; } char * decimal128ToEngString ( const decimal128 * d128 , char * string ) { decNumber dn ; decimal128ToNumber ( d128 , & dn ) ; decNumberToEngString ( & dn , string ) ; } 