save_replacement_text ( , , ) cpp_reader * pfile ; cpp_macro * macro ; unsigned int arg_index ; { size_t len = pfile -> out . cur - pfile -> out . base ; uchar * exp ; if ( macro -> paramc == 0 ) { exp = _cpp_unaligned_alloc ( pfile , len + 1 ) ; memcpy ( exp , pfile -> out . base , len ) ; exp [ len ] = '\0' ; macro -> exp . text = exp ; macro -> count = len ; } else { size_t blen = BLOCK_LEN ( len ) ; struct block * block ; exp = BUFF_FRONT ( pfile -> a_buff ) ; block = ( block * ) ( exp + macro -> count ) ; macro -> exp . text = exp ; block -> text_len = len ; block -> arg_index = arg_index ; memcpy ( block -> text , pfile -> out . base , len ) ; pfile -> out . cur = pfile -> out . base ; macro -> count += blen ; if ( arg_index == 0 ) { BUFF_FRONT ( pfile -> a_buff ) += macro -> count ; } } } 