const char * get_fmri ( void ) { static char * fmri = NULL ; static char buf [ 60 ] ; char * s ; s = fmri ; if ( s != NULL && * s == '\0' ) { return ( NULL ) ; } if ( s != NULL ) { return ( s ) ; } if ( ( s = getenv ( "SMF_FMRI" ) ) == NULL || strlen ( s ) >= sizeof ( buf ) ) { buf [ 0 ] = '\0' ; } else { ( void ) strlcpy ( buf , s , sizeof ( buf ) ) ; } membar_producer ( ) ; fmri = buf ; return ( get_fmri ( ) ) ; } 