static char * * realloc_argv ( unsigned int * size , char * * old_argv ) { char * * argv ; unsigned int new_size ; gfp_t gfp ; if ( * size ) { new_size = * size * 2 ; gfp = GFP_KERNEL ; } else { new_size = 8 ; gfp = GFP_NOIO ; } argv = kmalloc_array ( new_size , sizeof ( * argv ) , gfp ) ; if ( argv && old_argv ) { memcpy ( argv , old_argv , * size * sizeof ( * argv ) ) ; * size = new_size ; } return argv ; } 