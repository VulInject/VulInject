if ( tag == TAG_ProtoNode ) { return NULL ; } if ( tag == TAG_UndefinedNode ) { node = gf_sg_new_base_node ( ) ; } if ( tag <= GF_NODE_RANGE_LAST_MPEG4 ) { node = gf_sg_mpeg4_node_new ( tag ) ; } if ( tag <= GF_NODE_RANGE_LAST_X3D ) { node = gf_sg_x3d_node_new ( tag ) ; } if ( tag == TAG_DOMText ) { GF_DOMText * n ; GF_SAFEALLOC ( n , GF_DOMText ) ; if ( ! n ) { return NULL ; } node = ( GF_Node * ) n ; gf_node_setup ( node , TAG_DOMText ) ; } if ( tag == TAG_DOMFullNode ) { GF_DOMFullNode * n ; GF_SAFEALLOC ( n , GF_DOMFullNode ) ; if ( ! n ) { return NULL ; } node = ( GF_Node * ) n ; gf_node_setup ( node , TAG_DOMFullNode ) ; } else { node = NULL ; } if ( node ) { node -> sgprivate -> scenegraph = inScene ; } switch ( tag ) { case TAG_MPEG4_Script : case TAG_X3D_Script : gf_sg_script_init ( node ) ; break ; } return node ; 