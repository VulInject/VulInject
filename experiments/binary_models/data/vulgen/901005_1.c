static void gf_mpd_print_dasher_context ( FILE * out , GF_DASH_SegmenterContext * dasher , s32 indent ) { gf_mpd_nl ( out , indent ) ; gf_fprintf ( out , "<gpac:dasher " ) ; gf_fprintf ( out , "done=\"%s\" " , dasher -> done ?"true" : "false" ) ; gf_fprintf ( out , "init=\"%s\" " , dasher -> init_seg ) ; gf_fprintf ( out , "template=\"%s\" " , dasher -> template_seg ) ; if ( dasher -> template_idx ) { gf_fprintf ( out , "index=\"%s\" " , dasher -> template_idx ) ; } gf_fprintf ( out , "segNumber=\"%d\" " , dasher -> seg_number ) ; gf_fprintf ( out , "url=\"%s\" " , dasher -> src_url ) ; gf_fprintf ( out , "lastPacketIdx=\"" LLU "\" " , dasher -> last_pck_idx ) ; gf_fprintf ( out , "pidID=\"%d\" " , dasher -> pid_id ) ; if ( dasher -> dep_pid_id ) { gf_fprintf ( out , "depID=\"%d\" " , dasher -> dep_pid_id ) ; } if ( dasher -> period_id ) { gf_fprintf ( out , "periodID=\"%s\" " , dasher -> period_id ) ; } if ( dasher -> period_duration . num && dasher -> period_duration . den ) { gf_fprintf ( out , "periodDuration=\"" LLD "/" LLU "\" " , dasher -> period_duration . num , dasher -> period_duration . den ) ; } gf_fprintf ( out , "multiPIDInit=\"%s\" " , dasher -> multi_pids ?"true" : "false" ) ; gf_fprintf ( out , "dashDuration=\"%d/%d\" " , dasher -> dash_dur . num , dasher -> dash_dur . den ) ; gf_fprintf ( out , "nextSegmentStart=\"" LLU "\" " , dasher -> next_seg_start ) ; gf_fprintf ( out , "firstCTS=\"" LLU "\" " , dasher -> first_cts ) ; gf_fprintf ( out , "firstDTS=\"" LLU "\" " , dasher -> first_dts ) ; gf_fprintf ( out , "mpdTimescale=\"%d\" " , dasher -> mpd_timescale ) ; gf_fprintf ( out , "sourcePID=\"%d\" " , dasher -> source_pid ) ; gf_fprintf ( out , "estimatedNextDTS=\"" LLU "\" " , dasher -> est_next_dts ) ; gf_fprintf ( out , "cumulatedDur=\"%g\" " , dasher -> cumulated_dur ) ; gf_fprintf ( out , "cumulatedSubdur=\"%g\" " , dasher -> cumulated_subdur ) ; gf_fprintf ( out , "moofSN=\"%d\" " , dasher -> moof_sn ) ; gf_fprintf ( out , "moofInc=\"%d\" " , dasher -> moof_sn_inc ) ; if ( dasher -> segs_purged ) { gf_fprintf ( out , "segsPurged=\"%d\" " , dasher -> segs_purged ) ; } if ( dasher -> dur_purged ) { gf_fprintf ( out , "durPurged=\"%g\" " , dasher -> dur_purged ) ; } if ( dasher -> nb_repeat ) { gf_fprintf ( out , "nbRepeat=\"%d\" " , dasher -> nb_repeat ) ; } if ( dasher -> ts_offset ) { gf_fprintf ( out , "tsOffset=\"" LLU "\" " , dasher -> ts_offset ) ; } if ( dasher -> mux_pids ) { gf_fprintf ( out , "muxPIDs=\"%s\" " , dasher -> mux_pids ) ; } if ( dasher -> last_dyn_period_id ) { gf_fprintf ( out , "lastDynPeriodID=\"%d\" " , dasher -> last_dyn_period_id ) ; } if ( dasher -> subdur_forced ) { gf_fprintf ( out , "subdurForced=\"true\" " ) ; } gf_fprintf ( out , "ownsSet=\"%s\"/>" , dasher -> owns_set ?"true" : "false" ) ; gf_mpd_lf ( out , indent ) ; } 