static int jz4740_i2s_probe ( struct snd_soc_component * component ) { struct jz4740_i2s * i2s = snd_soc_component_get_drvdata ( component ) ; int ret ; ret = clk_prepare_enable ( i2s -> clk_aic ) ; regmap_write ( i2s -> regmap , JZ_REG_AIC_CONF , JZ_AIC_CONF_RESET ) ; regmap_write ( i2s -> regmap , JZ_REG_AIC_CONF , JZ_AIC_CONF_OVERFLOW_PLAY_LAST | JZ_AIC_CONF_I2S | JZ_AIC_CONF_INTERNAL_CODEC ) ; regmap_field_write ( i2s -> field_rx_fifo_thresh , 7 ) ; regmap_field_write ( i2s -> field_tx_fifo_thresh , 8 ) ; return 0 ; } 