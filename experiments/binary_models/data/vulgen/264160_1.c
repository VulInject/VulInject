static void subpage_mark_vma_nohuge ( struct mm_struct * mm , unsigned long addr , unsigned long len ) { struct vm_area_struct * vma ; struct mm_walk subpage_proto_walk = { . mm = mm . pmd_entry = subpage_walk_pmd_entry } ; vma = find_vma ( mm , addr ) ; if ( vma && ( ( addr + len ) <= vma -> vm_start ) ) { return ; } while ( vma ) { if ( vma -> vm_start >= ( addr + len ) ) { break ; } walk_page_vma ( vma , & subpage_proto_walk ) ; vma = vma -> vm_next ; } } 