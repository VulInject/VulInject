static void check_nth_terminal ( char * nterm , int n ) { register char boolval ; register short numval ; register char * strval ; register int i ; if ( use ) { used [ n ] = FALSE ; } if ( verbose ) { ( void ) fprintf ( trace , "adding in terminal type '%s'.\n" , nterm ) ; } ( void ) setupterm ( nterm , devnull , ( int * ) 0 ) ; if ( printing != pr_none ) { pr_heading ( nterm , ttytype ) ; pr_bheading ( ) ; } if ( diff || common || neither ) { if ( Aflag && Bflag ) { ( void ) printf ( "comparing %s (TERMINFO=%s) to %s " "(TERMINFO=%s).\n" , firstterm , term1info , nterm , term2info ) ; } if ( Aflag ) { ( void ) printf ( "comparing %s (TERMINFO=%s) to %s.\n" , firstterm , term1info , nterm ) ; } if ( Bflag ) { ( void ) printf ( "comparing %s to %s (TERMINFO=%s).\n" , firstterm , nterm , term2info ) ; } else { ( void ) printf ( "comparing %s to %s.\n" , firstterm , nterm ) ; } ( void ) printf ( "    comparing booleans.\n" ) ; } for ( i = 0 ; i < numbools ; i ++ ) { boolval = tgetflag ( ibool [ i ] . capname ) ; if ( use ) { if ( ibool [ i ] . seenagain ) { } else { if ( boolval == TRUE ) { ibool [ i ] . seenagain = TRUE ; ibool [ i ] . secondval = boolval ; ibool [ i ] . secondname = nterm ; if ( ibool [ i ] . val != boolval ) { ibool [ i ] . changed = TRUE ; } else { used [ n ] = TRUE ; } } } } if ( boolval ) { if ( printing != pr_none ) { pr_boolean ( ibool [ i ] . infoname , ibool [ i ] . capname , ibool [ i ] . fullname , 1 ) ; } if ( common && ( ibool [ i ] . val == boolval ) ) { ( void ) printf ( "\t%s= T.\n" , ibool [ i ] . infoname ) ; } } if ( neither && ! ibool [ i ] . val ) { ( void ) printf ( "\t!%s.\n" , ibool [ i ] . infoname ) ; } if ( diff && ( ibool [ i ] . val != boolval ) ) { ( void ) printf ( "\t%s: %c:%c.\n" , ibool [ i ] . infoname , ibool [ i ] . val ?'T' : 'F' , boolval ?'T' : 'F' ) ; } if ( verbose ) { ( void ) fprintf ( trace , "%s: %d:%d, changed=%d, " "seen=%d.\n" , ibool [ i ] . infoname , ibool [ i ] . val , boolval , ibool [ i ] . changed , ibool [ i ] . seenagain ) ; } } if ( printing != pr_none ) { if ( printing == pr_cap ) { pr_bcaps ( ) ; } pr_bfooting ( ) ; pr_nheading ( ) ; } if ( diff || common || neither ) { ( void ) printf ( "    comparing numbers.\n" ) ; } for ( i = 0 ; i < numnums ; i ++ ) { numval = tgetnum ( num [ i ] . capname ) ; if ( use ) { if ( num [ i ] . seenagain ) { if ( ( numval > - 1 ) && ( numval != num [ i ] . secondval ) ) { ( void ) fprintf ( stderr , "%s: use = order dependency " "found:\n" , progname ) ; ( void ) fprintf ( stderr , "    %s: %s " "has %d, %s has %d.\n" , num [ i ] . capname , num [ i ] . secondname , num [ i ] . secondval , nterm , numval ) ; } } else { if ( numval > - 1 ) { num [ i ] . seenagain = TRUE ; num [ i ] . secondval = numval ; num [ i ] . secondname = nterm ; if ( ( numval > - 1 ) && ( num [ i ] . val != numval ) ) { num [ i ] . changed = TRUE ; } else { used [ n ] = TRUE ; } } } } if ( numval > - 1 ) { if ( printing != pr_none ) { pr_number ( num [ i ] . infoname , num [ i ] . capname , num [ i ] . fullname , numval ) ; } if ( common && ( num [ i ] . val == numval ) ) { ( void ) printf ( "\t%s= %d.\n" , num [ i ] . infoname , numval ) ; } } if ( neither && ( num [ i ] . val == - 1 ) ) { ( void ) printf ( "\t!%s.\n" , num [ i ] . infoname ) ; } if ( diff && ( num [ i ] . val != numval ) ) { ( void ) printf ( "\t%s: %d:%d.\n" , num [ i ] . infoname , num [ i ] . val , numval ) ; } if ( verbose ) { ( void ) fprintf ( trace , "%s: %d:%d, " "changed = %d, seen = %d.\n" , num [ i ] . infoname , num [ i ] . val , numval , num [ i ] . changed , num [ i ] . seenagain ) ; } } if ( printing != pr_none ) { if ( printing == pr_cap ) { pr_ncaps ( ) ; } pr_nfooting ( ) ; pr_sheading ( ) ; } if ( diff || common || neither ) { ( void ) printf ( "    comparing strings.\n" ) ; } for ( i = 0 ; i < numstrs ; i ++ ) { strval = tgetstr ( str [ i ] . capname , ( char * * ) 0 ) ; if ( use ) { if ( str [ i ] . seenagain && ( strval != NULL ) ) { if ( ! EQUAL ( strval , str [ i ] . secondval ) ) { ( void ) fprintf ( stderr , "use= order dependency" "  found:\n" ) ; ( void ) fprintf ( stderr , "    %s: %s has '" , str [ i ] . capname , str [ i ] . secondname ) ; PR ( stderr , str [ i ] . secondval ) ; ( void ) fprintf ( stderr , "', %s has '" , nterm ) ; PR ( stderr , strval ) ; ( void ) fprintf ( stderr , "'.\n" ) ; } } else { if ( strval != NULL ) { str [ i ] . seenagain = TRUE ; str [ i ] . secondval = strval ; str [ i ] . secondname = nterm ; if ( ! EQUAL ( str [ i ] . val , strval ) ) { str [ i ] . changed = TRUE ; } else { used [ n ] = TRUE ; } } } } if ( strval != NULL ) { if ( printing != pr_none ) { pr_string ( str [ i ] . infoname , str [ i ] . capname , str [ i ] . fullname , strval ) ; } if ( common && EQUAL ( str [ i ] . val , strval ) ) { ( void ) printf ( "\t%s= '" , str [ i ] . infoname ) ; PR ( stdout , strval ) ; ( void ) printf ( "'.\n" ) ; } } if ( neither && ( str [ i ] . val == NULL ) ) { ( void ) printf ( "\t!%s.\n" , str [ i ] . infoname ) ; } if ( diff && ! EQUAL ( str [ i ] . val , strval ) ) { ( void ) printf ( "\t%s: '" , str [ i ] . infoname ) ; PR ( stdout , str [ i ] . val ) ; ( void ) printf ( "','" ) ; PR ( stdout , strval ) ; ( void ) printf ( "'.\n" ) ; } if ( verbose ) { ( void ) fprintf ( trace , "%s: '" , str [ i ] . infoname ) ; PR ( trace , str [ i ] . val ) ; ( void ) fprintf ( trace , "':'" ) ; PR ( trace , strval ) ; ( void ) fprintf ( trace , "',changed=%d,seen=%d.\n" , str [ i ] . changed , str [ i ] . seenagain ) ; } } if ( printing == pr_cap ) { pr_scaps ( ) ; } return ; } 