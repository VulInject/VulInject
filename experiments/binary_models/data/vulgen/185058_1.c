static int ti_sci_proc_of_to_priv ( struct udevice * dev , struct ti_sci_proc * tsp ) { u32 ids [ 2 ] ; int ret ; dev_dbg ( dev , "%s\n" , __func__ ) ; tsp -> sci = ti_sci_get_by_phandle ( dev , "ti,sci" ) ; if ( IS_ERR ( tsp -> sci ) ) { dev_err ( dev , "ti_sci get failed: %ld\n" , PTR_ERR ( tsp -> sci ) ) ; return PTR_ERR ( tsp -> sci ) ; } ret = dev_read_u32_array ( dev , "ti,sci-proc-ids" , ids , 2 ) ; if ( ret ) { dev_err ( dev , "Proc IDs not populated %d\n" , ret ) ; return ret ; } tsp -> ops = & tsp -> sci -> ops . proc_ops ; tsp -> proc_id = ids [ 0 ] ; tsp -> host_id = ids [ 1 ] ; tsp -> dev_id = dev_read_u32_default ( dev , "ti,sci-dev-id" , TI_SCI_RESOURCE_NULL ) ; return 0 ; } 