module_param_hw_array ( irq , int , irq , NULL , 0 ) ; MODULE_PARM_DESC ( io , "I/O base address(es)" ) ; MODULE_PARM_DESC ( irq , "IRQ number(s) (assigned)" ) ; MODULE_PARM_DESC ( msg_enable , "Debug message level (see linux/netdevice.h for bitmap)" ) ; MODULE_DESCRIPTION ( "SMC Ultra/EtherEZ ISA/PnP Ethernet driver" ) ; MODULE_LICENSE ( "GPL" ) ; int __init init_module ( void ) { struct net_device * dev ; int this_dev , found = 0 ; for ( this_dev = 0 ; this_dev < MAX_ULTRA_CARDS ; this_dev ++ ) { if ( io [ this_dev ] == 0 ) { if ( this_dev != 0 ) { break ; } printk ( KERN_NOTICE "smc-ultra.c: Presently autoprobing (not recommended) for a single card.\n" ) ; } dev = alloc_ei_netdev ( ) ; if ( ! dev ) { break ; } dev -> irq = irq [ this_dev ] ; dev -> base_addr = io [ this_dev ] ; if ( do_ultra_probe ( dev ) == 0 ) { dev_ultra [ found ++ ] = dev ; continue ; } free_netdev ( dev ) ; printk ( KERN_WARNING "smc-ultra.c: No SMC Ultra card found (i/o = 0x%x).\n" , io [ this_dev ] ) ; break ; } if ( found ) { return 0 ; } return - ENXIO ; } 