int dump_vga_bios ( void ) { void * bios ; int fd ; fd = open ( _PATH_MEM , O_RDONLY ) ; if ( fd == - 1 ) { err ( 1 , "%s" , _PATH_MEM ) ; } bios = malloc ( VGA_BIOS_LEN ) ; if ( bios == NULL ) { return ( ENOMEM ) ; } if ( pread ( fd , bios , VGA_BIOS_LEN , VGA_BIOS_ADDR ) == - 1 ) { err ( 1 , "%s" , _PATH_MEM ) ; } if ( write ( romfd , bios , VGA_BIOS_LEN ) == - 1 ) { return ( errno ) ; } free ( bios ) ; return ( 0 ) ; return ( ENODEV ) ; } 