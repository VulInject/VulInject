static int nl802154_get_wpan_phy ( struct sk_buff * skb , struct genl_info * info ) { struct sk_buff * msg ; struct cfg802154_registered_device * rdev = info -> user_ptr [ 0 ] ; msg = nlmsg_new ( NLMSG_DEFAULT_SIZE , GFP_KERNEL ) ; if ( ! msg ) { return - ENOMEM ; } if ( nl802154_send_wpan_phy ( rdev , NL802154_CMD_NEW_WPAN_PHY , msg , info -> snd_portid , info -> snd_seq , 0 ) < 0 ) { return - ENOBUFS ; } return genlmsg_reply ( msg , info ) ; } 