static bool __init kexec_free_initrd ( void ) { unsigned long crashk_start = ( unsigned long ) __va ( crashk_res . start ) ; unsigned long crashk_end = ( unsigned long ) __va ( crashk_res . end ) ; if ( initrd_start >= crashk_end || initrd_end <= crashk_start ) { return false ; } if ( initrd_start < crashk_start ) { free_initrd_mem ( initrd_start , crashk_start ) ; } if ( initrd_end > crashk_end ) { free_initrd_mem ( crashk_end , initrd_end ) ; } return true ; } 