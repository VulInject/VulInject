static int lcs_startlan ( struct lcs_card * card ) { int rc , i ; LCS_DBF_TEXT ( 2 , trace , "startlan" ) ; rc = 0 ; if ( card -> portno != LCS_INVALID_PORT_NO ) { if ( card -> lan_type == LCS_FRAME_TYPE_AUTO ) { rc = lcs_startlan_auto ( card ) ; } else { rc = lcs_send_startlan ( card , LCS_INITIATOR_TCPIP ) ; } } else { for ( i = 0 ; i <= 16 ; i ++ ) { card -> portno = i ; if ( card -> lan_type != LCS_FRAME_TYPE_AUTO ) { rc = lcs_send_startlan ( card , LCS_INITIATOR_TCPIP ) ; } else { rc = lcs_startlan_auto ( card ) ; } if ( rc == 0 ) { break ; } } } return rc ; } 