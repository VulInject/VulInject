static idm_status_t iser_ini_conn_connect ( idm_conn_t * ic ) { iser_conn_t * iser_conn ; iser_status_t status ; iser_conn = ( iser_conn_t * ) ic -> ic_transport_private ; status = iser_channel_open ( iser_conn -> ic_chan ) ; if ( status != ISER_STATUS_SUCCESS ) { ISER_LOG ( CE_WARN , "iser: failed to open channel" ) ; return ( IDM_STATUS_FAIL ) ; } iser_ib_conv_ibtaddr2sockaddr ( & ic -> ic_laddr , & iser_conn -> ic_chan -> ic_localip , iser_conn -> ic_chan -> ic_lport ) ; iser_ib_conv_ibtaddr2sockaddr ( & ic -> ic_raddr , & iser_conn -> ic_chan -> ic_remoteip , iser_conn -> ic_chan -> ic_rport ) ; mutex_enter ( & iser_conn -> ic_lock ) ; idm_conn_hold ( ic ) ; mutex_exit ( & iser_conn -> ic_lock ) ; return ( IDM_STATUS_SUCCESS ) ; } 