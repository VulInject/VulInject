unsigned long tpm_calc_ordinal_duration ( struct tpm_chip * chip , u32 ordinal ) { int duration_idx = TPM_UNDEFINED ; int duration ; if ( ordinal < TPM_MAX_ORDINAL ) { duration_idx = tpm_ordinal_duration [ ordinal ] ; } if ( duration_idx != TPM_UNDEFINED ) { duration = chip -> duration [ duration_idx ] ; } if ( duration <= 0 ) { return 2 * 60 * HZ ; } else { return duration ; } } 