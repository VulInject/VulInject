static void tcp_chr_connect_client_async ( Chardev * chr ) { SocketChardev * s = SOCKET_CHARDEV ( chr ) ; QIOChannelSocket * sioc ; tcp_chr_change_state ( s , TCP_CHARDEV_STATE_CONNECTING ) ; sioc = qio_channel_socket_new ( ) ; tcp_chr_set_client_ioc_name ( chr , sioc ) ; if ( s -> registered_yank ) { yank_register_function ( CHARDEV_YANK_INSTANCE ( chr -> label ) , char_socket_yank_iochannel , 0 ) ; } s -> connect_task = qio_task_new ( OBJECT ( sioc ) , qemu_chr_socket_connected , object_ref ( OBJECT ( chr ) ) , ( GDestroyNotify ) object_unref ) ; qio_task_run_in_thread ( s -> connect_task , tcp_chr_connect_client_task , s -> addr , NULL , chr -> gcontext ) ; } 