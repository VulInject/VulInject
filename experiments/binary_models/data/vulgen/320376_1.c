struct clk_hw * imx_clk_hw_busy_divider ( const char * name , const char * parent_name , void __iomem * reg , u8 shift , u8 width , void __iomem * busy_reg , u8 busy_shift ) { struct clk_busy_divider * busy ; struct clk_hw * hw ; struct clk_init_data init ; int ret ; busy = kzalloc ( sizeof ( * busy ) , GFP_KERNEL ) ; if ( ! busy ) { return ERR_PTR ( - ENOMEM ) ; } busy -> reg = busy_reg ; busy -> shift = busy_shift ; busy -> div . reg = reg ; busy -> div . shift = shift ; busy -> div . width = width ; busy -> div . lock = & imx_ccm_lock ; busy -> div_ops = & clk_divider_ops ; init . name = name ; init . ops = & clk_busy_divider_ops ; init . flags = CLK_SET_RATE_PARENT | CLK_IS_CRITICAL ; init . parent_names = & parent_name ; init . num_parents = 1 ; busy -> div . hw . init = & init ; hw = & busy -> div . hw ; ret = clk_hw_register ( NULL , hw ) ; if ( ret ) { return ERR_PTR ( ret ) ; } return hw ; } clk_busy_mux { struct clk_mux mux ; const struct clk_ops * mux_ops ; void __iomem * reg ; u8 shift ; } 