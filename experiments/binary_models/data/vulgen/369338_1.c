int wdg_destroy_object ( struct wdg_object * * wo ) { struct wdg_obj_list * wl ; WDG_DEBUG_MSG ( "wdg_destroy_object (%p)" , * wo ) ; TAILQ_FOREACH ( , , ) { if ( wl -> wo == * wo ) { if ( ( * wo ) -> flags & WDG_OBJ_ROOT_OBJECT ) { wdg_root_obj = NULL ; } if ( wdg_focused_obj && wdg_focused_obj -> wo == * wo ) { ( * wo ) -> flags &= ~ WDG_OBJ_FOCUS_MODAL ; wdg_switch_focus ( SWITCH_BACKWARD ) ; } if ( wl == wdg_focused_obj ) { wdg_focused_obj = NULL ; } TAILQ_REMOVE ( & wdg_objects_list , wl , next ) ; WDG_SAFE_FREE ( wl ) ; WDG_BUG_IF ( ( * wo ) -> destroy == NULL ) ; WDG_EXECUTE ( ( * wo ) -> destroy , * wo ) ; WDG_SAFE_FREE ( ( * wo ) -> title ) ; WDG_SAFE_FREE ( * wo ) ; return WDG_E_SUCCESS ; } } return - WDG_E_NOTHANDLED ; } 