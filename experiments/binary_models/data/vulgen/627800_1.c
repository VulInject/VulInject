ps_document_load ( , , ) { PSDocument * ps = PS_DOCUMENT ( document ) ; gchar * filename ; filename = g_filename_from_uri ( uri , NULL , error ) ; if ( ! filename ) { return FALSE ; } ps -> doc = spectre_document_new ( ) ; spectre_document_load ( ps -> doc , filename ) ; if ( spectre_document_status ( ps -> doc ) ) { gchar * filename_dsp ; filename_dsp = g_filename_display_name ( filename ) ; g_set_error ( error , G_FILE_ERROR , G_FILE_ERROR_FAILED , _ ( "Failed to load document â%sâ" ) , filename_dsp ) ; g_free ( filename_dsp ) ; return FALSE ; } g_free ( filename ) ; return TRUE ; } 