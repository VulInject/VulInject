( iommufd_device_unbind , IOMMUFD ) ; static int iommufd_device_setup_msi ( struct iommufd_device * idev , struct iommufd_hw_pagetable * hwpt , phys_addr_t sw_msi_start ) { int rc ; if ( sw_msi_start != PHYS_ADDR_MAX && ! hwpt -> msi_cookie ) { rc = iommu_get_msi_cookie ( hwpt -> domain , sw_msi_start ) ; if ( rc ) { return rc ; } hwpt -> msi_cookie = true ; } if ( ! iommu_group_has_isolated_msi ( idev -> group ) ) { dev_warn ( idev -> dev , "MSI interrupts are not secure, they cannot be isolated by the platform. " "Check that platform features like interrupt remapping are enabled. " "Use the \"allow_unsafe_interrupts\" module parameter to override\n" ) ; } return 0 ; } 