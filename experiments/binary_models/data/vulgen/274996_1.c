static void amdgpu_sa_bo_try_free ( struct amdgpu_sa_manager * sa_manager ) int amdgpu_sa_bo_manager_init ( struct amdgpu_device * adev , struct amdgpu_sa_manager * sa_manager , unsigned size , u32 align , u32 domain ) { int i , r ; init_waitqueue_head ( & sa_manager -> wq ) ; sa_manager -> bo = NULL ; sa_manager -> size = size ; sa_manager -> domain = domain ; sa_manager -> align = align ; sa_manager -> hole = & sa_manager -> olist ; INIT_LIST_HEAD ( & sa_manager -> olist ) ; for ( i = 0 ; i < AMDGPU_SA_NUM_FENCE_LISTS ; ++ i ) { INIT_LIST_HEAD ( & sa_manager -> flist [ i ] ) ; } if ( r ) { dev_err ( adev -> dev , "(%d) failed to allocate bo for manager\n" , r ) ; return r ; } return r ; } 