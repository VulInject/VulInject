static int __init palmld_pcmcia_init ( void ) { int ret ; palmld_pcmcia_device = platform_device_alloc ( "pxa2xx-pcmcia" , - 1 ) ; if ( ! palmld_pcmcia_device ) { return - ENOMEM ; } ret = platform_device_add_data ( palmld_pcmcia_device , & palmld_pcmcia_ops , sizeof ( palmld_pcmcia_ops ) ) ; if ( ! ret ) { ret = platform_device_add ( palmld_pcmcia_device ) ; } if ( ret ) { platform_device_put ( palmld_pcmcia_device ) ; } return ret ; } 