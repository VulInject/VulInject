static void kfd_process_wq_release ( struct work_struct * work ) { struct kfd_process * p = container_of ( work , kfd_process , release_work ) ; kfd_process_dequeue_from_all_devices ( p ) ; pqm_uninit ( & p -> pqm ) ; dma_fence_signal ( p -> ef ) ; kfd_process_remove_sysfs ( p ) ; kfd_iommu_unbind_process ( p ) ; kfd_process_kunmap_signal_bo ( p ) ; kfd_process_free_outstanding_kfd_bos ( p ) ; svm_range_list_fini ( p ) ; kfd_process_destroy_pdds ( p ) ; dma_fence_put ( p -> ef ) ; kfd_event_free_process ( p ) ; kfd_pasid_free ( p -> pasid ) ; put_task_struct ( p -> lead_thread ) ; kfree ( p ) ; } 