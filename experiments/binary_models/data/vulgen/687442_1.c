static int ingenic_usb_phy_init ( struct phy * phy ) { struct ingenic_usb_phy * priv = phy_get_drvdata ( phy ) ; int err ; u32 reg ; err = clk_prepare_enable ( priv -> clk ) ; if ( err ) { dev_err ( & phy -> dev , "Unable to start clock: %d\n" , err ) ; return err ; } priv -> soc_info -> usb_phy_init ( phy ) ; usleep_range ( 30 , 300 ) ; writel ( reg & ~ USBPCR_POR , priv -> base + REG_USBPCR_OFFSET ) ; usleep_range ( 300 , 1000 ) ; return 0 ; } 