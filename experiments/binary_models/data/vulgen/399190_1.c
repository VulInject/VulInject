static int unit_start_or_stop ( UnitStatusInfo * u , sd_bus * bus , sd_bus_error * error , bool start ) { _cleanup_ ( ) const char * path ; int r ; assert ( u ) ; assert ( bus ) ; assert ( error ) ; r = bus_call_method ( bus , bus_systemd_mgr , start ?"StartUnit" : "StopUnit" , error , & reply , "ss" , u -> name , "replace" ) ; log_unit_full_errno_zerook ( u , r < 0 ?LOG_WARNING : LOG_DEBUG , r , "%s unit: %m" , start ?"Starting" : "Stopping" ) ; if ( r < 0 ) { return r ; } r = sd_bus_message_read ( reply , "o" , & path ) ; if ( r < 0 ) { return bus_log_parse_error ( r ) ; } r = free_and_strdup ( & u -> path , path ) ; if ( r < 0 ) { return log_oom ( ) ; } return 0 ; } 