static unsigned long long sysfs_idlestate_get_one_value ( unsigned int cpu , unsigned int idlestate , enum idlestate_value which ) { unsigned long long value ; unsigned int len ; char linebuf [ MAX_LINE_LEN ] ; char * endp ; len = sysfs_idlestate_read_file ( cpu , idlestate , idlestate_value_files [ which ] , linebuf , sizeof ( linebuf ) ) ; if ( len == 0 ) { return 0 ; } value = strtoull ( linebuf , & endp , 0 ) ; if ( endp == linebuf || errno == ERANGE ) { return 0 ; } return value ; } 