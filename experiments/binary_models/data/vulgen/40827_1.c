void vs_log_output_memory ( uint32_t sev , uint32_t modid , const char * function , const char * vf , const char * prefix , const void * addr , uint32_t len ) { char hex_buffer [ 80 ] ; unsigned hex_offset = 0 ; char char_buffer [ 80 ] ; unsigned char_offset = 0 ; unsigned offset ; const uint8_t * p = ( uint8_t * ) addr ; if ( ! len ) { vs_log_output ( sev , modid , function , vf , "%s: length is 0" , prefix ) ; return ; } for ( offset = 0 ; offset < len ; offset ++ ) { if ( ( offset & 15 ) == 0 && offset != 0 ) { vs_log_output ( sev , modid , function , vf , "%s: 0x%4.4x%s %s" , prefix , offset - 16 , hex_buffer , char_buffer ) ; hex_offset = char_offset = 0 ; } hex_offset += sprintf ( & hex_buffer [ hex_offset ] , " %2.2x" , p [ offset ] ) ; if ( p [ offset ] >= ' ' && p [ offset ] <= '~' ) { char_offset += sprintf ( & char_buffer [ char_offset ] , "%c" , p [ offset ] ) ; } else { char_offset += sprintf ( & char_buffer [ char_offset ] , "." ) ; } } if ( offset & 15 ) { uint32 pad = 16 - ( offset & 15 ) ; vs_log_output ( sev , modid , function , vf , "%s: 0x%4.4x%s %s" , prefix , offset & ~ 15 , hex_buffer , char_buffer ) ; } } 