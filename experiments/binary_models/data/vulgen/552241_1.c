int namespace_flags_from_string ( const char * name , unsigned long * ret ) { unsigned long flags = 0 ; int r ; assert_se ( ret ) ; for ( ; ; ) { _cleanup_free_ char * word = NULL ; unsigned long f = 0 ; unsigned i ; r = extract_first_word ( & name , & word , NULL , 0 ) ; if ( r < 0 ) { return r ; } for ( i = 0 ; namespace_info [ i ] . proc_name ; i ++ ) { if ( streq ( word , namespace_info [ i ] . proc_name ) ) { f = namespace_info [ i ] . clone_flag ; break ; } } if ( f == 0 ) { return - EINVAL ; } flags |= f ; } * ret = flags ; return 0 ; } 