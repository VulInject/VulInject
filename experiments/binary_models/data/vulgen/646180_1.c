static void annotate_browser__write ( struct ui_browser * browser , void * entry , int row ) { struct annotate_browser * ab = container_of ( browser , annotate_browser , b ) ; struct annotation * notes = browser__annotation ( browser ) ; struct annotation_line * al = list_entry ( entry , annotation_line , node ) ; const bool is_current_entry = ui_browser__is_current_entry ( browser , row ) ; struct annotation_write_ops ops = { . first_line = row == 0 . current_entry = is_current_entry . change_color = ( ! notes -> options -> hide_src_code && ( ! is_current_entry || ( browser -> use_navkeypressed && ! browser -> navkeypressed ) ) ) . width = browser -> width . obj = browser . set_color = annotate_browser__set_color . set_percent_color = annotate_browser__set_percent_color . set_jumps_percent_color = ui_browser__set_jumps_percent_color . printf = annotate_browser__printf . write_graph = annotate_browser__write_graph } ; annotation_line__write ( al , notes , & ops , ab -> opts ) ; if ( ops . current_entry ) { ab -> selection = al ; } } 