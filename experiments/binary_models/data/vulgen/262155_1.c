FT_LOCAL_DEF ( ) cid_parser_new ( , , , ) { FT_Error error ; FT_ULong base_offset , offset , ps_len ; FT_Byte * cur , * limit ; FT_Byte * arg1 , * arg2 ; FT_ZERO ( parser ) ; psaux -> ps_parser_funcs -> init ( & parser -> root , 0 , 0 , memory ) ; parser -> stream = stream ; base_offset = FT_STREAM_POS ( ) ; if ( FT_FRAME_ENTER ( 31 ) ) { Exit } if ( ft_strncmp ( ( char * ) stream -> cursor , "%!PS-Adobe-3.0 Resource-CIDFont" , 31 ) ) { FT_TRACE2 ( ( "  not a CID-keyed font\n" ) ) ; error = FT_THROW ( Unknown_File_Format ) ; } FT_FRAME_EXIT ( ) ; if ( error ) { Exit } Again { FT_Byte buffer [ 256 + STARTDATA_LEN + 1 ] ; FT_ULong read_len = 256 + STARTDATA_LEN ; FT_ULong read_offset = 0 ; FT_Byte * p = buffer ; for ( offset = FT_STREAM_POS ( ) ; ; offset += 256 ) { FT_ULong stream_len ; stream_len = stream -> size - FT_STREAM_POS ( ) ; read_len = FT_MIN ( read_len , stream_len ) ; p [ read_len ] = '\0' ; } } } 