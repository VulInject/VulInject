ecma_builtin_object_prototype_define_getter_setter ( , , , ) { ecma_value_t to_obj = ecma_op_to_object ( this_arg ) ; if ( ECMA_IS_VALUE_ERROR ( to_obj ) ) { return to_obj ; } ecma_object_t * obj_p = ecma_get_object_from_value ( to_obj ) ; if ( ! ecma_op_is_callable ( accessor ) ) { return ecma_raise_type_error ( ECMA_ERR_MSG ( "Getter is not callable" ) ) ; } ecma_object_t * accessor_obj_p = ecma_get_object_from_value ( accessor ) ; ecma_property_descriptor_t desc = ecma_make_empty_property_descriptor ( ) ; desc . flags |= ( JERRY_PROP_IS_ENUMERABLE | JERRY_PROP_IS_CONFIGURABLE | JERRY_PROP_IS_ENUMERABLE_DEFINED | JERRY_PROP_IS_CONFIGURABLE_DEFINED | JERRY_PROP_SHOULD_THROW ) ; if ( define_getter ) { desc . get_p = accessor_obj_p ; desc . flags |= JERRY_PROP_IS_GET_DEFINED ; } else { desc . set_p = accessor_obj_p ; desc . flags |= JERRY_PROP_IS_SET_DEFINED ; } ecma_string_t * prop_name_p = ecma_op_to_property_key ( prop ) ; if ( JERRY_UNLIKELY ( prop_name_p == NULL ) ) { ecma_deref_object ( obj_p ) ; return ECMA_VALUE_ERROR ; } ecma_value_t define_prop = ecma_op_object_define_own_property ( obj_p , prop_name_p , & desc ) ; ecma_deref_object ( obj_p ) ; ecma_deref_ecma_string ( prop_name_p ) ; if ( ECMA_IS_VALUE_ERROR ( define_prop ) ) { return define_prop ; } return ECMA_VALUE_UNDEFINED ; } 