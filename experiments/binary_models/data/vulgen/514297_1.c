static int __maybe_unused gp2a_suspend ( struct device * dev ) { struct i2c_client * client = to_i2c_client ( dev ) ; struct gp2a_data * dt = i2c_get_clientdata ( client ) ; int retval ; if ( device_may_wakeup ( & client -> dev ) ) { enable_irq_wake ( client -> irq ) ; } else { mutex_lock ( & dt -> input -> mutex ) ; if ( dt -> input -> users ) { retval = gp2a_disable ( dt ) ; } mutex_unlock ( & dt -> input -> mutex ) ; } return retval ; } 