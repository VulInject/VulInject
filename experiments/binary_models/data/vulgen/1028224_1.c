static void bcm63xx_external_irq_mask ( struct irq_data * d ) { unsigned int irq = d -> irq - IRQ_EXTERNAL_BASE ; u32 reg , regaddr ; unsigned long flags ; regaddr = get_ext_irq_perf_reg ( irq ) ; spin_lock_irqsave ( & epic_lock , flags ) ; reg = bcm_perf_readl ( regaddr ) ; if ( BCMCPU_IS_6348 ( ) ) { reg &= ~ EXTIRQ_CFG_MASK_6348 ( irq % 4 ) ; } else { reg &= ~ EXTIRQ_CFG_MASK ( irq % 4 ) ; } bcm_perf_writel ( reg , regaddr ) ; spin_unlock_irqrestore ( & epic_lock , flags ) ; } 