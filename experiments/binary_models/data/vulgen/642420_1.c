static RDebugReasonType r_debug_gdb_wait ( RDebug * dbg , int pid ) { if ( ! desc ) { return R_DEBUG_REASON_UNKNOWN ; } if ( ! desc -> stop_reason . is_valid ) { if ( gdbr_stop_reason ( desc ) < 0 ) { dbg -> reason . type = R_DEBUG_REASON_UNKNOWN ; return R_DEBUG_REASON_UNKNOWN ; } } if ( desc -> stop_reason . thread . present ) { dbg -> reason . tid = desc -> stop_reason . thread . tid ; dbg -> pid = desc -> stop_reason . thread . pid ; dbg -> tid = desc -> stop_reason . thread . tid ; if ( dbg -> pid != desc -> pid || dbg -> tid != desc -> tid ) { gdbr_select ( desc , dbg -> pid , dbg -> tid ) ; } } dbg -> reason . signum = desc -> stop_reason . signum ; dbg -> reason . type = desc -> stop_reason . reason ; return desc -> stop_reason . reason ; } 