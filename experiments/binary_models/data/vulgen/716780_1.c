int manager_enqueue_nscd_cache_flush ( Manager * m ) { int r ; assert ( m ) ; if ( ! m -> nscd_cache_flush_event ) { r = sd_event_add_defer ( m -> event , & m -> nscd_cache_flush_event , on_nscd_cache_flush_event , m ) ; if ( r < 0 ) { return log_error_errno ( r , "Failed to allocate NSCD cache flush event: %m" ) ; } sd_event_source_set_description ( m -> nscd_cache_flush_event , "nscd-cache-flush" ) ; } r = sd_event_source_set_enabled ( m -> nscd_cache_flush_event , SD_EVENT_ONESHOT ) ; if ( r < 0 ) { return log_error_errno ( r , "Failed to enable NSCD cache flush event: %m" ) ; } return 0 ; } 