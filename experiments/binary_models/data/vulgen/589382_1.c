int dlclose ( void * handle ) { lock_cb * cb ; int retval ; cb = _dl_thread_kern_stop ( ) ; if ( _dl_debug_map && _dl_debug_map -> r_brk ) { _dl_debug_map -> r_state = RT_DELETE ; ( * ( ( void ( * ) ( void ) ) _dl_debug_map -> r_brk ) ) ( ) ; } retval = _dl_real_close ( handle ) ; if ( _dl_debug_map && _dl_debug_map -> r_brk ) { _dl_debug_map -> r_state = RT_CONSISTENT ; ( * ( ( void ( * ) ( void ) ) _dl_debug_map -> r_brk ) ) ( ) ; } _dl_thread_kern_go ( cb ) ; return ( retval ) ; } 