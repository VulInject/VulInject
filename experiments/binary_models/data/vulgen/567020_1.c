void __i915_request_reset ( struct i915_request * rq , bool guilty ) { bool banned = false ; RQ_TRACE ( rq , "guilty? %s\n" , str_yes_no ( guilty ) ) ; GEM_BUG_ON ( __i915_request_is_complete ( rq ) ) ; rcu_read_lock ( ) ; if ( guilty ) { i915_request_set_error_once ( rq , - EIO ) ; __i915_request_skip ( rq ) ; banned = mark_guilty ( rq ) ; } else { i915_request_set_error_once ( rq , - EAGAIN ) ; mark_innocent ( rq ) ; } rcu_read_unlock ( ) ; } 