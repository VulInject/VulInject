static irqreturn_t ti_adc_trigger_handler ( int irq , void * private ) { struct iio_poll_func * pf = private ; struct iio_dev * indio_dev = pf -> indio_dev ; struct ti_adc_data * data = iio_priv ( indio_dev ) ; int ret ; ret = ti_adc_read_measurement ( data , & indio_dev -> channels [ 0 ] , ( int * ) & data -> buffer ) ; iio_trigger_notify_done ( indio_dev -> trig ) ; return IRQ_HANDLED ; } 