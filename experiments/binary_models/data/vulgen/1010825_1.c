static void arasan_phy_dll_set_freq ( struct sdhci_host * host , int clock ) { u32 reg , freq_sel , freq ; freq = DIV_ROUND_CLOSEST ( clock , 1000000 ) ; if ( freq <= 200 && freq > 170 ) { freq_sel = FREQSEL_200M_170M ; } if ( freq <= 170 && freq > 140 ) { freq_sel = FREQSEL_170M_140M ; } if ( freq <= 140 && freq > 110 ) { freq_sel = FREQSEL_140M_110M ; } if ( freq <= 110 && freq > 80 ) { freq_sel = FREQSEL_110M_80M ; } else { freq_sel = FREQSEL_80M_50M ; } reg = sdhci_readw ( host , PHY_CTRL_REG2 ) ; reg &= ~ PHY_CTRL_FREQ_SEL_MASK ; sdhci_writew ( host , reg , PHY_CTRL_REG2 ) ; } 