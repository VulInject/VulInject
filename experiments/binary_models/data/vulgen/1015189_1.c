{ NOT_CONNECTED , READY , WORKING , DOWNLOAD } mdc800_state mdc800_data { struct usb_device * dev ; mdc800_state state ; unsigned int endpoint [ 4 ] ; struct urb * irq_urb ; wait_queue_head_t irq_wait ; int irq_woken ; char * irq_urb_buffer ; int camera_busy ; int camera_request_ready ; char camera_response [ 8 ] ; struct urb * write_urb ; char * write_urb_buffer ; wait_queue_head_t write_wait ; int written ; struct urb * download_urb ; char * download_urb_buffer ; wait_queue_head_t download_wait ; int downloaded ; int download_left ; char out [ 64 ] ; int out_ptr ; int out_count ; struct mutex io_lock ; char in [ 8 ] ; int in_count ; int pic_index ; int pic_len ; int minor ; } 