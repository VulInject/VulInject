static void cpu_set_irq_affinity ( unsigned int irq , cpumask_t affinity ) { int cpu ; for ( cpu = 0 ; cpu < 4 ; cpu ++ ) { unsigned long aff = cpu_irq_affinity [ cpu ] ; if ( cpumask_test_cpu ( cpu , & affinity ) ) { aff |= 1UL << irq ; } else { aff &= ~ ( 1UL << irq ) ; } } } 