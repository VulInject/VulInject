static void bad_page ( struct page * page , const char * reason ) { static unsigned long resume ; static unsigned long nr_shown ; static unsigned long nr_unshown ; if ( nr_shown == 60 ) { if ( time_before ( jiffies , resume ) ) { nr_unshown ++ ; out } if ( nr_unshown ) { pr_alert ( "BUG: Bad page state: %lu messages suppressed\n" , nr_unshown ) ; nr_unshown = 0 ; } nr_shown = 0 ; } if ( nr_shown ++ == 0 ) { resume = jiffies + 60 * HZ ; } pr_alert ( "BUG: Bad page state in process %s  pfn:%05lx\n" , current -> comm , page_to_pfn ( page ) ) ; dump_page ( page , reason ) ; dump_stack ( ) ; out page_mapcount_reset ( page ) ; add_taint ( TAINT_BAD_PAGE , LOCKDEP_NOW_UNRELIABLE ) ; } 