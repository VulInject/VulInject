static inline void host_to_target_siginfo_noswap ( target_siginfo_t * tinfo , const siginfo_t * info ) { int sig = host_to_target_signal ( info -> si_signo ) ; int si_code = info -> si_code ; int si_type ; tinfo -> si_signo = sig ; tinfo -> si_errno = 0 ; tinfo -> si_code = info -> si_code ; memset ( tinfo -> _sifields . _pad , 0 , sizeof ( tinfo -> _sifields . _pad ) ) ; switch ( si_code ) { case SI_USER : case SI_TKILL : case SI_KERNEL : tinfo -> _sifields . _kill . _pid = info -> si_pid ; tinfo -> _sifields . _kill . _uid = info -> si_uid ; si_type = QEMU_SI_KILL ; break ; default : switch ( sig ) { case TARGET_SIGCHLD : tinfo -> _sifields . _sigchld . _pid = info -> si_pid ; tinfo -> _sifields . _sigchld . _uid = info -> si_uid ; else { tinfo -> _sifields . _sigchld . _status = host_to_target_signal ( info -> si_status & 0x7f ) | ( info -> si_status & ~ 0x7f ) ; } tinfo -> _sifields . _sigchld . _utime = info -> si_utime ; tinfo -> _sifields . _sigchld . _stime = info -> si_stime ; si_type = QEMU_SI_CHLD ; break ; case TARGET_SIGIO : tinfo -> _sifields . _sigpoll . _band = info -> si_band ; tinfo -> _sifields . _sigpoll . _fd = info -> si_fd ; si_type = QEMU_SI_POLL ; break ; default : tinfo -> _sifields . _rt . _pid = info -> si_pid ; tinfo -> _sifields . _rt . _uid = info -> si_uid ; tinfo -> _sifields . _rt . _sigval . sival_ptr = ( abi_ulong ) ( unsigned long ) info -> si_value . sival_ptr ; si_type = QEMU_SI_RT ; break ; } break ; } tinfo -> si_code = deposit32 ( si_code , 16 , 16 , si_type ) ; } 