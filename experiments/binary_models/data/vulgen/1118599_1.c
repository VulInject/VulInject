static void direct_access ( struct fsl_iim * regs , u32 bank , u32 word , u32 bit , u32 fctl , u32 * stat , u32 * err ) { iim_write32 ( & regs -> ua , bank << 3 | word >> 5 ) ; iim_write32 ( & regs -> la , ( word << 3 | bit ) & 0xff ) ; if ( fctl == FCTL_PRG ) { iim_write32 ( & regs -> prg_p , 0xaa ) ; } iim_setbits32 ( & regs -> fctl , fctl ) ; while ( iim_read32 ( & regs -> stat ) & STAT_BUSY ) { udelay ( 20 ) ; } } 