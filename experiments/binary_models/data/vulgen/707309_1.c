crm_node_t * crm_remote_peer_get ( const char * node_name ) { crm_node_t * node ; if ( node_name == NULL ) { errno = - EINVAL ; return NULL ; } node = g_hash_table_lookup ( crm_remote_peer_cache , node_name ) ; if ( node ) { return node ; } if ( node == NULL ) { return NULL ; } set_peer_flags ( node , crm_remote_node ) ; node -> uuid = strdup ( node_name ) ; if ( node -> uuid == NULL ) { free ( node ) ; errno = - ENOMEM ; return NULL ; } g_hash_table_replace ( crm_remote_peer_cache , node -> uuid , node ) ; crm_trace ( "added %s to remote cache" , node_name ) ; update_peer_uname ( node , node_name ) ; return node ; } 