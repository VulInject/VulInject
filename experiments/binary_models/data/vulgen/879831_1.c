Datum jsonb_build_array ( PG_FUNCTION_ARGS ) { int nargs ; int i ; JsonbInState result ; Datum * args ; bool * nulls ; Oid * types ; nargs = extract_variadic_args ( fcinfo , 0 , true , & args , & types , & nulls ) ; memset ( & result , 0 , sizeof ( JsonbInState ) ) ; result . res = pushJsonbValue ( & result . parseState , WJB_BEGIN_ARRAY , NULL ) ; for ( i = 0 ; i < nargs ; i ++ ) { add_jsonb ( args [ i ] , nulls [ i ] , & result , types [ i ] , false ) ; } result . res = pushJsonbValue ( & result . parseState , WJB_END_ARRAY , NULL ) ; PG_RETURN_POINTER ( JsonbValueToJsonb ( result . res ) ) ; } 