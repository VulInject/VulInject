static void pcmu_ecc_ereport_post ( dev_info_t * dip , pcmu_ecc_errstate_t * ecc_err ) void pcmu_ecc_create ( pcmu_t * pcmu_p ) { uint64_t pcb_base_pa = pcmu_p -> pcmu_cb_p -> pcb_base_pa ; pcmu_ecc_t * pecc_p ; dev_info_t * dip = pcmu_p -> pcmu_dip ; pecc_p = ( pcmu_ecc_t * ) kmem_zalloc ( sizeof ( pcmu_ecc_t ) , KM_SLEEP ) ; pecc_p -> pecc_pcmu_p = pcmu_p ; pcmu_p -> pcmu_pecc_p = pecc_p ; pecc_p -> pecc_ue . pecc_p = pecc_p ; pecc_p -> pecc_ue . pecc_type = CBNINTR_UE ; pcmu_ecc_setup ( pecc_p ) ; pecc_p -> pecc_csr_pa = pcb_base_pa + PCMU_ECC_CSR_OFFSET ; pecc_p -> pecc_ue . pecc_afsr_pa = pcb_base_pa + PCMU_UE_AFSR_OFFSET ; pecc_p -> pecc_ue . pecc_afar_pa = pcb_base_pa + PCMU_UE_AFAR_OFFSET ; PCMU_DBG1 ( PCMU_DBG_ATTACH , dip , "pcmu_ecc_create: csr=%x\n" , pecc_p -> pecc_csr_pa ) ; PCMU_DBG2 ( PCMU_DBG_ATTACH , dip , "pcmu_ecc_create: ue_afsr=%x, ue_afar=%x\n" , pecc_p -> pecc_ue . pecc_afsr_pa , pecc_p -> pecc_ue . pecc_afar_pa ) ; pcmu_ecc_configure ( pcmu_p ) ; bus_func_register ( BF_TYPE_ERRDIS , ( busfunc_t ) pcmu_ecc_disable_nowait , pecc_p ) ; } 