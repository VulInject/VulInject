void mlphy_status ( struct mii_softc * sc ) { struct mlphy_softc * msc = ( mlphy_softc * ) sc ; struct mii_data * mii = sc -> mii_pdata ; struct mii_softc * other = NULL ; LIST_FOREACH ( , , ) if ( other != sc ) { break ; } ukphy_status ( sc ) ; if ( IFM_SUBTYPE ( mii -> mii_media_active ) != IFM_10_T ) { msc -> ml_state = ML_STATE_AUTO_SELF ; if ( other != NULL ) { mii_phy_reset ( other ) ; PHY_WRITE ( other , MII_BMCR , BMCR_ISO ) ; } } if ( IFM_SUBTYPE ( mii -> mii_media_active ) == IFM_10_T ) { msc -> ml_state = ML_STATE_AUTO_OTHER ; mlphy_reset ( & msc -> ml_mii ) ; PHY_WRITE ( & msc -> ml_mii , MII_BMCR , BMCR_ISO ) ; if ( other != NULL ) { mii_phy_reset ( other ) ; } } } 