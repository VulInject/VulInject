for ( node_t , n , & node_tree ; ) { n -> status . visited = false ; } for ( edge_t , e , & edge_weight_tree ; ) { if ( e -> from -> status . reachable ) { e -> from -> status . visited = true ; break ; } } bool skipped = false ; for ( edge_t , e , & edge_weight_tree ; ) { if ( ! e -> reverse || ( e -> from -> status . visited == e -> to -> status . visited ) ) { continue ; } e -> from -> status . visited = true ; e -> to -> status . visited = true ; if ( e -> connection ) { e -> connection -> status . mst = true ; } if ( e -> reverse -> connection ) { e -> reverse -> connection -> status . mst = true ; } logger ( DEBUG_SCARY_THINGS , LOG_DEBUG , " Adding edge %s - %s weight %d" , e -> from -> name , e -> to -> name , e -> weight ) ; if ( skipped ) { skipped = false ; next = edge_weight_tree . head ; } } 