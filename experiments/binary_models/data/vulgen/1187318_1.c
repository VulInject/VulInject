static ssize_t iwl_dbgfs_quota_min_write ( struct ieee80211_vif * vif , char * buf , size_t count , loff_t * ppos ) { struct iwl_mvm_vif * mvmvif = iwl_mvm_vif_from_mac80211 ( vif ) ; struct iwl_mvm * mvm = mvmvif -> mvm ; u16 value ; int ret ; ret = kstrtou16 ( buf , 0 , & value ) ; if ( ret ) { return ret ; } mutex_lock ( & mvm -> mutex ) ; mvmvif -> dbgfs_quota_min = 0 ; ieee80211_iterate_interfaces ( mvm -> hw , IEEE80211_IFACE_ITER_NORMAL , iwl_dbgfs_quota_check , & ret ) ; if ( ret == 0 ) { mvmvif -> dbgfs_quota_min = value ; iwl_mvm_update_quotas ( mvm , false , NULL ) ; } mutex_unlock ( & mvm -> mutex ) ; return ret ?: count ; } 