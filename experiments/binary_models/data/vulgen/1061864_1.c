void __init default_get_smp_config ( unsigned int early ) { struct mpf_intel * mpf ; if ( ! smp_found_config ) { return ; } if ( ! mpf_found ) { return ; } if ( acpi_lapic && early ) { return ; } if ( acpi_lapic && acpi_ioapic ) { return ; } mpf = early_memremap ( mpf_base , sizeof ( * mpf ) ) ; if ( ! mpf ) { pr_err ( "MPTABLE: error mapping MP table\n" ) ; return ; } pr_info ( "Intel MultiProcessor Specification v1.%d\n" , mpf -> specification ) ; if ( mpf -> feature2 & ( 1 << 7 ) ) { pr_info ( "    IMCR and PIC compatibility mode.\n" ) ; pic_mode = 1 ; } else { pr_info ( "    Virtual Wire compatibility mode.\n" ) ; pic_mode = 0 ; } if ( mpf -> feature1 ) { if ( early ) { out } pr_info ( "Default MP configuration #%d\n" , mpf -> feature1 ) ; construct_default_ISA_mptable ( mpf -> feature1 ) ; } if ( mpf -> physptr ) { if ( check_physptr ( mpf , early ) ) { out } } else { BUG ( ) ; } if ( ! early ) { pr_info ( "Processors: %d\n" , num_processors ) ; } out early_memunmap ( mpf , sizeof ( * mpf ) ) ; } 