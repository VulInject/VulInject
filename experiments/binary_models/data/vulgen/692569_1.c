lt_dlloader_add ( ) { SList * item ; if ( ( vtable == 0 ) || ( vtable -> module_open == 0 ) || ( vtable -> module_close == 0 ) || ( vtable -> find_sym == 0 ) || ( ( vtable -> priority != LT_DLLOADER_PREPEND ) && ( vtable -> priority != LT_DLLOADER_APPEND ) ) ) { return RETURN_FAILURE ; } item = slist_box ( vtable ) ; if ( ! item ) { * lt__alloc_die ( ) ; return RETURN_FAILURE ; } if ( vtable -> priority == LT_DLLOADER_PREPEND ) { loaders = slist_cons ( item , loaders ) ; } else { assert ( vtable -> priority == LT_DLLOADER_APPEND ) ; loaders = slist_concat ( loaders , item ) ; } return RETURN_SUCCESS ; } 