asmlinkage void start_secondary ( void ) { unsigned int cpu ; cpu_probe ( ) ; per_cpu_trap_init ( false ) ; mips_clockevent_init ( ) ; mp_ops -> init_secondary ( ) ; maar_init ( ) ; calibrate_delay ( ) ; cpu = smp_processor_id ( ) ; cpu_data [ cpu ] . udelay_val = loops_per_jiffy ; set_cpu_sibling_map ( cpu ) ; set_cpu_core_map ( cpu ) ; cpumask_set_cpu ( cpu , & cpu_coherent_mask ) ; notify_cpu_starting ( cpu ) ; complete ( & cpu_starting ) ; synchronise_count_slave ( cpu ) ; set_cpu_online ( cpu , true ) ; calculate_cpu_foreign_map ( ) ; complete ( & cpu_running ) ; WARN_ON_ONCE ( ! irqs_disabled ( ) ) ; mp_ops -> smp_finish ( ) ; cpu_startup_entry ( CPUHP_AP_ONLINE_IDLE ) ; } 