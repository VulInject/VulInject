static int ibmpex_ver_check ( struct ibmpex_bmc_data * data ) { data -> tx_msg_data [ 0 ] = PEX_GET_VERSION ; data -> tx_message . data_len = 1 ; ibmpex_send_message ( data ) ; if ( data -> rx_result || data -> rx_msg_len != 6 ) { return - ENOENT ; } data -> sensor_major = data -> rx_msg_data [ 0 ] ; data -> sensor_minor = data -> rx_msg_data [ 1 ] ; dev_info ( data -> bmc_device , "Found BMC with sensor interface v%d.%d %d-%02d-%02d on interface %d\n" , data -> sensor_major , data -> sensor_minor , extract_value ( data -> rx_msg_data , 2 ) , data -> rx_msg_data [ 4 ] , data -> rx_msg_data [ 5 ] , data -> interface ) ; return 0 ; } 