static void sfp_hwmon_remove ( struct sfp * sfp ) { cancel_delayed_work_sync ( & sfp -> hwmon_probe ) ; if ( ! IS_ERR_OR_NULL ( sfp -> hwmon_dev ) ) { hwmon_device_unregister ( sfp -> hwmon_dev ) ; sfp -> hwmon_dev = NULL ; } } 