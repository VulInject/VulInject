static OPJ_OFF_T j2kdec_stream_skip ( OPJ_OFF_T nb_bytes , void * user_data ) { OJP2Frame * frame = user_data ; if ( nb_bytes < 0 ) { if ( frame -> pos == 0 ) { return ( OPJ_SIZE_T ) - 1 ; } if ( nb_bytes + ( s32 ) frame -> pos < 0 ) { nb_bytes = - frame -> pos ; } } else { u32 remain ; if ( frame -> pos == frame -> len ) { return ( OPJ_SIZE_T ) - 1 ; } remain = frame -> len - frame -> pos ; if ( nb_bytes > remain ) { nb_bytes = remain ; } } frame -> pos += ( u32 ) nb_bytes ; return nb_bytes ; } 