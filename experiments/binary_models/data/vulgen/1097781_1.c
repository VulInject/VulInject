void eib_svc_enqueue_event ( eib_t * ss , eib_event_t * evi ) { eib_event_t * elem = NULL ; eib_event_t * tail = NULL ; mutex_enter ( & ss -> ei_ev_lock ) ; if ( evi -> ev_code == EIB_EV_SHUTDOWN ) { evi -> ev_next = ss -> ei_event ; ss -> ei_event = evi ; } else { for ( elem = ss -> ei_event ; elem ; elem = elem -> ev_next ) { tail = elem ; } if ( tail ) { tail -> ev_next = evi ; } else { ss -> ei_event = evi ; } } cv_signal ( & ss -> ei_ev_cv ) ; } 