md_begin ( ) { const struct i370_opcode * op ; const struct i370_opcode * op_end ; const struct i370_macro * macro ; const struct i370_macro * macro_end ; bfd_boolean dup_insn = FALSE ; i370_set_cpu ( ) ; i370_hash = hash_new ( ) ; op_end = i370_opcodes + i370_num_opcodes ; for ( op = i370_opcodes ; op < op_end ; op ++ ) { know ( ( op -> opcode . i [ 0 ] & op -> mask . i [ 0 ] ) == op -> opcode . i [ 0 ] && ( op -> opcode . i [ 1 ] & op -> mask . i [ 1 ] ) == op -> opcode . i [ 1 ] ) ; if ( ( op -> flags & i370_cpu ) != 0 ) { const char * retval ; retval = hash_insert ( i370_hash , op -> name , ( void * ) op ) ; if ( retval != ( const char * ) NULL ) { as_bad ( "Internal assembler error for instruction %s" , op -> name ) ; dup_insn = TRUE ; } } } i370_macro_hash = hash_new ( ) ; macro_end = i370_macros + i370_num_macros ; for ( macro = i370_macros ; macro < macro_end ; macro ++ ) { if ( ( macro -> flags & i370_cpu ) != 0 ) { const char * retval ; retval = hash_insert ( i370_macro_hash , macro -> name , ( void * ) macro ) ; if ( retval != ( const char * ) NULL ) { as_bad ( "Internal assembler error for macro %s" , macro -> name ) ; dup_insn = TRUE ; } } } if ( dup_insn ) { abort ( ) ; } } 