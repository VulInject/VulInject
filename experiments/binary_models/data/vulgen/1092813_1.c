static void mmci_pre_request ( struct mmc_host * mmc , struct mmc_request * mrq ) { struct mmci_host * host = mmc_priv ( mmc ) ; struct mmc_data * data = mrq -> data ; struct mmci_host_next * nd = & host -> next_data ; if ( ! data ) { return ; } BUG_ON ( data -> host_cookie ) ; if ( ! mmci_dma_prep_next ( host , data ) ) { data -> host_cookie = ++ nd -> cookie < 0 ?1 : nd -> cookie ; } } 