static void post_process_object_config ( void ) { objectlist * list ; unsigned int i , slot ; if ( hostdependency_ary ) { free ( hostdependency_ary ) ; } if ( servicedependency_ary ) { qsort ( serviceescalation_ary , num_objects . serviceescalations , sizeof ( serviceescalation * ) , 0 ) ; } hostdependency_ary = calloc ( num_objects . hostdependencies , sizeof ( void * ) ) ; servicedependency_ary = calloc ( num_objects . servicedependencies , sizeof ( void * ) ) ; slot = 0 ; for ( i = 0 ; slot < num_objects . servicedependencies && i < num_objects . services ; i ++ ) { service * s = service_ary [ i ] ; for ( list = s -> notify_deps ; list ; list = list -> next ) { servicedependency_ary [ slot ++ ] = ( servicedependency * ) list -> object_ptr ; } for ( list = s -> exec_deps ; list ; list = list -> next ) { servicedependency_ary [ slot ++ ] = ( servicedependency * ) list -> object_ptr ; } } timing_point ( "Done post-processing servicedependencies\n" ) ; slot = 0 ; for ( i = 0 ; slot < num_objects . hostdependencies && i < num_objects . hosts ; i ++ ) { host * h = host_ary [ i ] ; for ( list = h -> notify_deps ; list ; list = list -> next ) { hostdependency_ary [ slot ++ ] = ( hostdependency * ) list -> object_ptr ; } for ( list = h -> exec_deps ; list ; list = list -> next ) { hostdependency_ary [ slot ++ ] = ( hostdependency * ) list -> object_ptr ; } } timing_point ( "Done post-processing host dependencies\n" ) ; if ( servicedependency_ary ) { qsort ( servicedependency_ary , num_objects . servicedependencies , sizeof ( servicedependency * ) , cmp_sdep ) ; } if ( hostdependency_ary ) { qsort ( hostdependency_ary , num_objects . hostdependencies , sizeof ( hostdependency * ) , cmp_hdep ) ; } if ( hostescalation_ary ) { qsort ( hostescalation_ary , num_objects . hostescalations , sizeof ( hostescalation * ) , cmp_hostesc ) ; } if ( serviceescalation_ary ) { qsort ( serviceescalation_ary , num_objects . serviceescalations , sizeof ( serviceescalation * ) , cmp_serviceesc ) ; } timing_point ( "Done post-sorting slave objects\n" ) ; timeperiod_list = timeperiod_ary ?* timeperiod_ary : NULL ; command_list = command_ary ?* command_ary : NULL ; hostgroup_list = hostgroup_ary ?* hostgroup_ary : NULL ; contactgroup_list = contactgroup_ary ?* contactgroup_ary : NULL ; servicegroup_list = servicegroup_ary ?* servicegroup_ary : NULL ; contact_list = contact_ary ?* contact_ary : NULL ; host_list = host_ary ?* host_ary : NULL ; service_list = service_ary ?* service_ary : NULL ; hostescalation_list = hostescalation_ary ?* hostescalation_ary : NULL ; serviceescalation_list = serviceescalation_ary ?* serviceescalation_ary : NULL ; } 