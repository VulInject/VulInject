int sock_addr_is_addr_eq ( const sock_addr * saddr1 , const sock_addr * saddr2 ) { switch ( saddr1 -> plain . sa_family ) { case AF_INET : return saddr1 -> ipv4 . sin_addr . s_addr == saddr2 -> ipv4 . sin_addr . s_addr ; case AF_INET6 : return 0 == memcmp ( & saddr1 -> ipv6 . sin6_addr , & saddr2 -> ipv6 . sin6_addr , sizeof ( in6_addr ) ) ; case AF_UNIX : return 0 == strcmp ( saddr1 -> un . sun_path , saddr2 -> un . sun_path ) ; default : return 0 ; } } 