static int __init test_hexdump_init ( void ) { unsigned int i ; int rowsize ; rowsize = ( get_random_int ( ) % 2 + 1 ) * 16 ; for ( i = 0 ; i < 16 ; i ++ ) { test_hexdump_set ( rowsize , false ) ; } rowsize = ( get_random_int ( ) % 2 + 1 ) * 16 ; for ( i = 0 ; i < 16 ; i ++ ) { test_hexdump_set ( rowsize , true ) ; } for ( i = 0 ; i <= TEST_HEXDUMP_BUF_SIZE ; i ++ ) { test_hexdump_overflow_set ( i , false ) ; } for ( i = 0 ; i <= TEST_HEXDUMP_BUF_SIZE ; i ++ ) { pr_err ( "failed %u out of %u tests\n" , failed_tests , 0 ) ; } if ( failed_tests == 0 ) { pr_info ( "all %u tests passed\n" , total_tests ) ; } else { pr_err ( "failed %u out of %u tests\n" , failed_tests , total_tests ) ; } return failed_tests ?- EINVAL : 0 ; } 