void netxen_setup_hwops ( struct netxen_adapter * adapter ) { adapter -> init_port = netxen_niu_xg_init_port ; adapter -> stop_port = netxen_niu_disable_xg_port ; if ( NX_IS_REVISION_P2 ( adapter -> ahw . revision_id ) ) { adapter -> crb_read = netxen_nic_hw_read_wx_128M , adapter -> crb_write = netxen_nic_hw_write_wx_128M , adapter -> pci_set_window = netxen_nic_pci_set_window_128M , adapter -> pci_mem_read = netxen_nic_pci_mem_read_128M , adapter -> pci_mem_write = netxen_nic_pci_mem_write_128M , adapter -> io_read = netxen_nic_io_read_128M , adapter -> io_write = netxen_nic_io_write_128M , adapter -> macaddr_set = netxen_p2_nic_set_mac_addr ; adapter -> set_multi = netxen_p2_nic_set_multi ; adapter -> set_promisc = netxen_p2_nic_set_promisc ; } else { adapter -> crb_read = netxen_nic_hw_read_wx_2M , adapter -> crb_write = netxen_nic_hw_write_wx_2M , adapter -> pci_set_window = netxen_nic_pci_set_window_2M , adapter -> pci_mem_read = netxen_nic_pci_mem_read_2M , adapter -> pci_mem_write = netxen_nic_pci_mem_write_2M , adapter -> io_read = netxen_nic_io_read_2M , adapter -> io_write = netxen_nic_io_write_2M , adapter -> set_mtu = nx_fw_cmd_set_mtu ; adapter -> set_promisc = netxen_p3_nic_set_promisc ; adapter -> macaddr_set = netxen_p3_nic_set_mac_addr ; adapter -> set_multi = netxen_p3_nic_set_multi ; adapter -> phy_read = nx_fw_cmd_query_phy ; adapter -> phy_write = nx_fw_cmd_set_phy ; } } 