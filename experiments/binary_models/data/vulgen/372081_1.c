EXPORTED void search_build_query ( search_builder_t * bx , search_expr_t * e ) { search_expr_t * child ; int bop = - 1 ; switch ( e -> op ) { case SEOP_NOT : bop = SEARCH_OP_NOT ; break ; case SEOP_AND : bop = SEARCH_OP_AND ; break ; case SEOP_OR : bop = SEARCH_OP_OR ; break ; case SEOP_TRUE : bop = SEARCH_OP_TRUE ; break ; case SEOP_FALSE : bop = SEARCH_OP_FALSE ; break ; case SEOP_MATCH : case SEOP_FUZZYMATCH : return ; default : return ; } if ( bop != - 1 ) { bx -> begin_boolean ( bx , bop ) ; for ( child = e -> children ; child ; child = child -> next ) { search_build_query ( bx , child ) ; } bx -> end_boolean ( bx , bop ) ; } } 