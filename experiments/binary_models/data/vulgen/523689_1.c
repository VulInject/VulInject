static void _setup_postsetup ( struct omap_hwmod * oh ) { u8 postsetup_state ; postsetup_state = oh -> _postsetup_state ; if ( postsetup_state == _HWMOD_STATE_UNKNOWN ) { postsetup_state = _HWMOD_STATE_ENABLED ; } if ( ( oh -> flags & ( HWMOD_INIT_NO_IDLE | HWMOD_NO_IDLE ) ) && ( postsetup_state == _HWMOD_STATE_IDLE ) ) { oh -> _int_flags |= _HWMOD_SKIP_ENABLE ; postsetup_state = _HWMOD_STATE_ENABLED ; } if ( postsetup_state == _HWMOD_STATE_IDLE ) { _idle ( oh ) ; } if ( postsetup_state == _HWMOD_STATE_DISABLED ) { _shutdown ( oh ) ; } if ( postsetup_state != _HWMOD_STATE_ENABLED ) { WARN ( 1 , "hwmod: %s: unknown postsetup state %d! defaulting to enabled\n" , oh -> name , postsetup_state ) ; } return ; } 