static void prime_ref_dir ( struct ref_dir * dir , const char * prefix ) { int i ; for ( i = 0 ; i < dir -> nr ; i ++ ) { struct ref_entry * entry = dir -> entries [ i ] ; if ( ! prefix ) { prime_ref_dir ( get_ref_dir ( entry ) , NULL ) ; } else { switch ( overlaps_prefix ( entry -> name , prefix ) ) { case PREFIX_CONTAINS_DIR : prime_ref_dir ( get_ref_dir ( entry ) , NULL ) ; break ; case PREFIX_WITHIN_DIR : prime_ref_dir ( get_ref_dir ( entry ) , prefix ) ; break ; case PREFIX_EXCLUDES_DIR : break ; } } } } 