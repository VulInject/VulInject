u32 ath12k_dp_tx_get_vdev_bank_config ( struct ath12k_base * ab , struct ath12k_vif * arvif ) { u32 bank_config = 0 ; bank_config |= u32_encode_bits ( arvif -> tx_encap_type , HAL_TX_BANK_CONFIG_ENCAP_TYPE ) ; bank_config |= u32_encode_bits ( 0 , HAL_TX_BANK_CONFIG_SRC_BUFFER_SWAP ) | u32_encode_bits ( 0 , HAL_TX_BANK_CONFIG_LINK_META_SWAP ) | u32_encode_bits ( 0 , HAL_TX_BANK_CONFIG_EPD ) ; bank_config |= u32_encode_bits ( 0 , HAL_TX_BANK_CONFIG_INDEX_LOOKUP_EN ) ; bank_config |= u32_encode_bits ( arvif -> hal_addr_search_flags & HAL_TX_ADDRX_EN , HAL_TX_BANK_CONFIG_ADDRX_EN ) | u32_encode_bits ( ! ! ( arvif -> hal_addr_search_flags & HAL_TX_ADDRY_EN ) , HAL_TX_BANK_CONFIG_ADDRY_EN ) ; bank_config |= u32_encode_bits ( ieee80211_vif_is_mesh ( arvif -> vif ) ?3 : 0 , HAL_TX_BANK_CONFIG_MESH_EN ) | u32_encode_bits ( arvif -> vdev_id_check_en , HAL_TX_BANK_CONFIG_VDEV_ID_CHECK_EN ) ; bank_config |= u32_encode_bits ( 0 , HAL_TX_BANK_CONFIG_DSCP_TIP_MAP_ID ) ; return bank_config ; } 