static void osc_page_touch_at ( const struct lu_env * env , struct cl_object * obj , pgoff_t idx , size_t to ) { struct lov_oinfo * loi = cl2osc ( obj ) -> oo_oinfo ; struct cl_attr * attr = & osc_env_info ( env ) -> oti_attr ; int valid ; __u64 kms ; kms = cl_offset ( obj , idx ) + to ; cl_object_attr_lock ( obj ) ; CDEBUG ( D_INODE , "stripe KMS %sincreasing %llu->%llu %llu\n" , kms > loi -> loi_kms ?"" : "not " , loi -> loi_kms , kms , loi -> loi_lvb . lvb_size ) ; attr -> cat_ctime = ktime_get_real_seconds ( ) ; attr -> cat_mtime = attr -> cat_ctime ; valid = CAT_MTIME | CAT_CTIME ; if ( kms > loi -> loi_kms ) { attr -> cat_kms = kms ; valid |= CAT_KMS ; } cl_object_attr_update ( env , obj , attr , valid ) ; cl_object_attr_unlock ( obj ) ; } 