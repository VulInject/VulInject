if ( 0 ) { sprintf ( avifFilename , "%s.avif" , filenames [ i ] ) ; fp = gdTestFileOpen2 ( "avif" , avifFilename ) ; imFromAvif = gdImageCreateFromAvif ( fp ) ; fclose ( fp ) ; strcat ( strcpy ( errMsg , filenames [ i ] ) , ".avif: gdImageCreateFromAvif failed\n" ) ; if ( ! gdTestAssertMsg ( imFromAvif != NULL , errMsg ) ) { continue ; } strcat ( strcpy ( errMsg , filenames [ i ] ) , ".avif: Encoded PNG image did not match original AVIF\n" ) ; pngFilePath = gdTestFilePath2 ( "avif" , pngFilename ) ; gdTestAssertMsg ( gdAssertImageEqualsToFile ( pngFilePath , imFromAvif ) , errMsg ) ; } ( imFromPng ) gdImageDestroy ( imFromPng ) ; if ( imFromAvif ) { gdImageDestroy ( imFromAvif ) ; } if ( avifImDataPtr ) { gdFree ( avifImDataPtr ) ; } if ( pngImDataPtr ) { gdFree ( pngImDataPtr ) ; } return gdNumFailures ( ) ; 