string * s_tok ( string * from , char * split ) { char * splitend = strpbrk ( from -> ptr , split ) ; if ( splitend ) { string * to = s_new ( ) ; for ( ; from -> ptr < splitend ; ) { s_putc ( to , ( int ) ( unsigned int ) * from -> ptr ) ; from -> ptr ++ ; } s_terminate ( to ) ; s_restart ( to ) ; from -> ptr += strspn ( from -> ptr , split ) ; return ( to ) ; } if ( from -> ptr [ 0 ] ) { while ( * from -> ptr ) { from -> ptr ++ ; } return ( to ) ; } else { return ( NULL ) ; } } 