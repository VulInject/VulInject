static int cpcap_charger_battery_temperature ( struct cpcap_battery_ddata * ddata , int * value ) { struct iio_channel * channel ; int error ; channel = ddata -> channels [ CPCAP_BATTERY_IIO_BATTDET ] ; if ( error < 0 ) { if ( ! ignore_temperature_probe ) { dev_warn ( ddata -> dev , "%s failed: %i\n" , __func__ , error ) ; } * value = CPCAP_NO_BATTERY ; return error ; } * value /= 100 ; return 0 ; } 