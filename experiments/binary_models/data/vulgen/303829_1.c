int graphaudio_open ( void * cookie , int flags ) { struct graphaudio_softc * sc = cookie ; struct dai_device * dai ; const struct audio_hw_if * hwif ; int error ; dai = sc -> sc_dai_cpu ; hwif = dai -> dd_hw_if ; if ( hwif -> open ) { error = hwif -> open ( dai -> dd_cookie , flags ) ; if ( error ) { return error ; } } dai = sc -> sc_dai_codec ; hwif = dai -> dd_hw_if ; if ( hwif -> open ) { error = hwif -> open ( dai -> dd_cookie , flags ) ; if ( error ) { graphaudio_close ( cookie ) ; return error ; } } return 0 ; } 