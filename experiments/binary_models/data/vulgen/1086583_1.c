void JsonbHashScalarValue ( const JsonbValue * scalarVal , uint32 * hash ) { uint32 tmp ; switch ( scalarVal -> type ) { case jbvNull : tmp = 0x01 ; break ; case jbvString : tmp = DatumGetUInt32 ( hash_any ( ( const unsigned char * ) scalarVal -> val . string . val , scalarVal -> val . string . len ) ) ; break ; case jbvNumeric : tmp = DatumGetUInt32 ( DirectFunctionCall1 ( hash_numeric , NumericGetDatum ( scalarVal -> val . numeric ) ) ) ; break ; case jbvBool : tmp = scalarVal -> val . boolean ?0x02 : 0x04 ; break ; default : tmp = 0 ; break ; } * hash = pg_rotate_left32 ( * hash , 1 ) ; * hash ^= tmp ; } 