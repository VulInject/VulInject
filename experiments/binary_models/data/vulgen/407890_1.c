static void redirty_tail_locked ( struct inode * inode , struct bdi_writeback * wb ) { assert_spin_locked ( & inode -> i_lock ) ; if ( inode -> i_state & I_FREEING ) { list_del_init ( & inode -> i_io_list ) ; wb_io_lists_depopulated ( wb ) ; return ; } if ( ! list_empty ( & wb -> b_dirty ) ) { struct inode * tail ; tail = wb_inode ( wb -> b_dirty . next ) ; if ( time_before ( inode -> dirtied_when , tail -> dirtied_when ) ) { inode -> dirtied_when = jiffies ; } } inode_io_list_move_locked ( inode , wb , & wb -> b_dirty ) ; } 