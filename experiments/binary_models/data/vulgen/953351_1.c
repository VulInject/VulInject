L_COLORFILL * l_colorfillCreate ( PIX * pixs , l_int32 nx , l_int32 ny ) { l_int32 i , j , w , h , tw , th , ntiles ; BOX * box ; BOXA * boxas ; L_COLORFILL * cf ; if ( ! pixs ) { return ( L_COLORFILL * ) ERROR_PTR ( "pixs not defined" , __func__ , NULL ) ; } if ( pixGetDepth ( pixs ) != 32 ) { return ( L_COLORFILL * ) ERROR_PTR ( "pixs not 32 bpp" , __func__ , NULL ) ; } pixGetDimensions ( pixs , & w , & h , NULL ) ; tw = w / nx ; th = h / ny ; if ( tw < 10 || th < 10 ) { return ( L_COLORFILL * ) ERROR_PTR ( "tile size too small" , __func__ , NULL ) ; } boxas = boxaCreate ( nx * ny ) ; for ( i = 0 ; i < ny ; i ++ ) { for ( j = 0 ; j < nx ; j ++ ) { box = boxCreate ( j * tw , i * th , tw , th ) ; } } ntiles = nx * ny ; cf = ( L_COLORFILL * ) LEPT_CALLOC ( 1 , sizeof ( L_COLORFILL ) ) ; cf -> pixs = pixClone ( pixs ) ; cf -> nx = nx ; cf -> ny = ny ; cf -> tw = tw ; cf -> th = th ; cf -> boxas = boxas ; cf -> naa = numaaCreate ( ntiles ) ; cf -> dnaa = l_dnaaCreate ( ntiles ) ; cf -> pixadb = pixaCreate ( 0 ) ; return cf ; } 