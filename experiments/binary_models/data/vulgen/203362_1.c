gimp_layer_prop_undo_constructed ( ) { GimpLayerPropUndo * layer_prop_undo = GIMP_LAYER_PROP_UNDO ( object ) ; GimpLayer * layer ; G_OBJECT_CLASS ( parent_class ) -> constructed ( object ) ; layer = GIMP_LAYER ( GIMP_ITEM_UNDO ( object ) -> item ) ; switch ( GIMP_UNDO ( object ) -> undo_type ) { case GIMP_UNDO_LAYER_MODE : layer_prop_undo -> mode = gimp_layer_get_mode ( layer ) ; layer_prop_undo -> blend_space = gimp_layer_get_blend_space ( layer ) ; layer_prop_undo -> composite_space = gimp_layer_get_composite_space ( layer ) ; layer_prop_undo -> composite_mode = gimp_layer_get_composite_mode ( layer ) ; break ; case GIMP_UNDO_LAYER_OPACITY : layer_prop_undo -> opacity = gimp_layer_get_opacity ( layer ) ; break ; case GIMP_UNDO_LAYER_LOCK_ALPHA : layer_prop_undo -> lock_alpha = gimp_layer_get_lock_alpha ( layer ) ; break ; default : g_return_if_reached ( ) ; } } 