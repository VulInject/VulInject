DEFINE_PER_CPU_READ_MOSTLY ( int , sched_core_priority ) ; static bool __read_mostly sched_itmt_capable ; unsigned int __read_mostly sysctl_sched_itmt_enabled ; static int sched_itmt_update_handler ( struct ctl_table * table , int write , void * buffer , size_t * lenp , loff_t * ppos ) { unsigned int old_sysctl ; int ret ; mutex_lock ( & itmt_update_mutex ) ; if ( ! sched_itmt_capable ) { mutex_unlock ( & itmt_update_mutex ) ; return - EINVAL ; } old_sysctl = sysctl_sched_itmt_enabled ; ret = proc_dointvec_minmax ( table , write , buffer , lenp , ppos ) ; if ( ! ret && write && old_sysctl != sysctl_sched_itmt_enabled ) { x86_topology_update = true ; rebuild_sched_domains ( ) ; } mutex_unlock ( & itmt_update_mutex ) ; return ret ; } 