static acpi_status san_opreg_handler ( u32 function , acpi_physical_address command , u32 bits , u64 * value64 , void * opreg_context , void * region_context ) { struct san_data * d = to_san_data ( opreg_context , info ) ; struct gsb_buffer * buffer = ( gsb_buffer * ) value64 ; if ( command != SAN_GSB_COMMAND ) { dev_warn ( d -> dev , "unsupported command: %#04llx\n" , command ) ; return AE_OK ; } if ( accessor_type != ACPI_GSB_ACCESS_ATTRIB_RAW_PROCESS ) { dev_err ( d -> dev , "invalid access type: %#04x\n" , accessor_type ) ; return AE_OK ; } if ( buffer -> len == 0 ) { dev_err ( d -> dev , "request-package too small\n" ) ; return AE_OK ; } switch ( buffer -> data . in . cv ) { case SAN_GSB_REQUEST_CV_RQST : return san_rqst ( d , buffer ) ; case SAN_GSB_REQUEST_CV_ETWL : return san_etwl ( d , buffer ) ; case SAN_GSB_REQUEST_CV_RQSG : return san_rqsg ( d , buffer ) ; default : dev_warn ( d -> dev , "unsupported SAN0 request (cv: %#04x)\n" , buffer -> data . in . cv ) ; return AE_OK ; } } 