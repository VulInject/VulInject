static int klsi_105_get_line_state ( struct usb_serial_port * port , unsigned long * state ) { u16 status ; int rc ; if ( rc ) { dev_err ( & port -> dev , "reading line status failed: %d\n" , rc ) ; return rc ; } le16_to_cpus ( & status ) ; dev_dbg ( & port -> dev , "read status %04x\n" , status ) ; * state = ( ( status & KL5KUSB105A_DSR ) ?TIOCM_DSR : 0 ) | ( ( status & KL5KUSB105A_CTS ) ?TIOCM_CTS : 0 ) ; return 0 ; } 