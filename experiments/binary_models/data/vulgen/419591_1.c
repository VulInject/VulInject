acpi_status acpi_ex_acquire_mutex_object ( u16 timeout , union acpi_operand_object * obj_desc , acpi_thread_id thread_id ) { acpi_status status ; ACPI_FUNCTION_TRACE_PTR ( ex_acquire_mutex_object , obj_desc ) ; if ( obj_desc -> mutex . thread_id == thread_id ) { obj_desc -> mutex . acquisition_depth ++ ; return_ACPI_STATUS ( AE_OK ) ; } if ( obj_desc == acpi_gbl_global_lock_mutex ) { status = acpi_ev_acquire_global_lock ( timeout ) ; } else { status = acpi_ex_system_wait_mutex ( obj_desc -> mutex . os_mutex , timeout ) ; } if ( ACPI_FAILURE ( status ) ) { return_ACPI_STATUS ( status ) ; } obj_desc -> mutex . thread_id = thread_id ; obj_desc -> mutex . acquisition_depth = 1 ; obj_desc -> mutex . original_sync_level = 0 ; obj_desc -> mutex . owner_thread = NULL ; return_ACPI_STATUS ( AE_OK ) ; } 