START_TEST ( ) { char * strs [ ] { ( char * ) "   one " ( char * ) " \ntwo" ( char * ) "three   " ( char * ) " four" ( char * ) "five " ( char * ) " six " ( char * ) "\t" } ; ; char firsts [ ] { 'o' 't' 't' 'f' 'f' 's' '\0' } ; ; char lasts [ ] { 'e' 'o' 'e' 'r' 'e' 'x' } ; ; int num_strs = 7 ; int i ; int last ; char * duped ; char * retd ; fail_unless ( is_whitespace ( ' ' ) == TRUE , "doesn't think a space is whitespace" ) ; fail_unless ( is_whitespace ( '\n' ) == TRUE , "doesn't think a newline is whitespace" ) ; fail_unless ( is_whitespace ( '\f' ) == TRUE , "doesn't think a formfeed is whitespace" ) ; fail_unless ( is_whitespace ( '\t' ) == TRUE , "doesn't think a tab is whitespace" ) ; fail_unless ( is_whitespace ( '\r' ) == TRUE , "doesn't think a carriage return is whitespace" ) ; for ( i = 0 ; i < num_strs ; i ++ ) { duped = strdup ( strs [ i ] ) ; retd = trim ( duped ) ; snprintf ( buf , sizeof ( buf ) , "didn't trim the front correctly, found '%s' but expected to start with %c" , retd , firsts [ i ] ) ; last = strlen ( retd ) - 1 ; if ( last > 0 ) { snprintf ( buf , sizeof ( buf ) , "didn't trim the back correctly, found '%s' but expected to end with %c" , retd , lasts [ i ] ) ; fail_unless ( retd [ last ] == lasts [ i ] , buf ) ; } } fail_unless ( trim ( NULL ) == NULL , "returned a non-null for null string" ) ; } END_TEST Suite * u_mu_suite ( void ) { Suite * s = suite_create ( "u_mu_suite methods" ) ; TCase * tc_core = tcase_create ( "threadsafe_tokenizer_test" ) ; tcase_add_test ( tc_core , threadsafe_tokenizer_test ) ; suite_add_tcase ( s , tc_core ) ; tc_core = tcase_create ( "safe_strncat_test" ) ; tcase_add_test ( tc_core , safe_strncat_test ) ; suite_add_tcase ( s , tc_core ) ; tc_core = tcase_create ( "trim_whitespace_test" ) ; tcase_add_test ( tc_core , trim_whitespace_test ) ; suite_add_tcase ( s , tc_core ) ; return s ; } void rundebug ( ) { } int main ( void ) { int number_failed = 0 ; SRunner * sr = NULL ; rundebug ( ) ; sr = srunner_create ( u_mu_suite ( ) ) ; srunner_set_log ( sr , "u_mu_suite.log" ) ; srunner_run_all ( sr , CK_NORMAL ) ; number_failed = srunner_ntests_failed ( sr ) ; srunner_free ( sr ) ; return number_failed ; } 