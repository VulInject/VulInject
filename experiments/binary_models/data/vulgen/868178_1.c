void v4l2_print_dv_timings ( const char * dev_prefix , const char * prefix , const struct v4l2_dv_timings * t , bool detailed ) { const struct v4l2_bt_timings * bt = & t -> bt ; u32 htot , vtot ; u32 fps ; if ( t -> type != V4L2_DV_BT_656_1120 ) { return ; } htot = V4L2_DV_BT_FRAME_WIDTH ( bt ) ; vtot = V4L2_DV_BT_FRAME_HEIGHT ( bt ) ; if ( bt -> interlaced ) { vtot /= 2 ; } fps = ( htot * vtot ) > 0 ?div_u64 ( ( 100 * ( u64 ) bt -> pixelclock ) , ( htot * vtot ) ) : 0 ; if ( prefix == NULL ) { prefix = "" ; } pr_info ( "%s: %s%ux%u%s%u.%u (%ux%u)\n" , dev_prefix , prefix , bt -> width , bt -> height , bt -> interlaced ?"i" : "p" , fps / 100 , fps % 100 , htot , vtot ) ; if ( ! detailed ) { return ; } pr_info ( "%s: horizontal: fp = %u, %ssync = %u, bp = %u\n" , dev_prefix , bt -> hfrontporch , ( bt -> polarities & V4L2_DV_HSYNC_POS_POL ) ?"+" : "-" , bt -> hsync , bt -> hbackporch ) ; pr_info ( "%s: vertical: fp = %u, %ssync = %u, bp = %u\n" , dev_prefix , bt -> vfrontporch , ( bt -> polarities & V4L2_DV_VSYNC_POS_POL ) ?"+" : "-" , bt -> vsync , bt -> vbackporch ) ; if ( bt -> interlaced ) { pr_info ( "%s: vertical bottom field: fp = %u, %ssync = %u, bp = %u\n" , dev_prefix , bt -> il_vfrontporch , ( bt -> polarities & V4L2_DV_VSYNC_POS_POL ) ?"+" : "-" , bt -> il_vsync , bt -> il_vbackporch ) ; } pr_info ( "%s: pixelclock: %llu\n" , dev_prefix , bt -> pixelclock ) ; pr_info ( "%s: flags (0x%x):%s%s%s%s%s%s%s%s%s%s\n" , dev_prefix , bt -> flags , ( bt -> flags & V4L2_DV_FL_REDUCED_BLANKING ) ?" REDUCED_BLANKING" : "" , ( ( bt -> flags & V4L2_DV_FL_REDUCED_BLANKING ) && bt -> vsync == 8 ) ?" (V2)" : "" , ( bt -> flags & V4L2_DV_FL_CAN_REDUCE_FPS ) ?" CAN_REDUCE_FPS" : "" , ( bt -> flags & V4L2_DV_FL_REDUCED_FPS ) ?" REDUCED_FPS" : "" , ( bt -> flags & V4L2_DV_FL_HALF_LINE ) ?" HALF_LINE" : "" , ( bt -> flags & V4L2_DV_FL_IS_CE_VIDEO ) ?" CE_VIDEO" : "" , ( bt -> flags & V4L2_DV_FL_FIRST_FIELD_EXTRA_LINE ) ?" FIRST_FIELD_EXTRA_LINE" : "" , ( bt -> flags & V4L2_DV_FL_HAS_PICTURE_ASPECT ) ?" HAS_PICTURE_ASPECT" : "" , ( bt -> flags & V4L2_DV_FL_HAS_CEA861_VIC ) ?" HAS_CEA861_VIC" : "" , ( bt -> flags & V4L2_DV_FL_HAS_HDMI_VIC ) ?" HAS_HDMI_VIC" : "" ) ; pr_info ( "%s: standards (0x%x):%s%s%s%s%s\n" , dev_prefix , bt -> standards , ( bt -> standards & V4L2_DV_BT_STD_CEA861 ) ?" CEA" : "" , ( bt -> standards & V4L2_DV_BT_STD_DMT ) ?" DMT" : "" , ( bt -> standards & V4L2_DV_BT_STD_CVT ) ?" CVT" : "" , ( bt -> standards & V4L2_DV_BT_STD_GTF ) ?" GTF" : "" , ( bt -> standards & V4L2_DV_BT_STD_SDI ) ?" SDI" : "" ) ; if ( bt -> flags & V4L2_DV_FL_HAS_PICTURE_ASPECT ) { pr_info ( "%s: picture aspect (hor:vert): %u:%u\n" , dev_prefix , bt -> picture_aspect . numerator , bt -> picture_aspect . denominator ) ; } if ( bt -> flags & V4L2_DV_FL_HAS_CEA861_VIC ) { pr_info ( "%s: CEA-861 VIC: %u\n" , dev_prefix , bt -> cea861_vic ) ; } } 