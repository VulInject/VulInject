static void link_lnode_disp ( di_link_t link , uint_t endpoint , int ilev , di_devlink_handle_t devlink_hdl ) { di_lnode_t lnode ; char * name , * path ; int displayed_path , spec_type ; di_node_t node = DI_NODE_NIL ; dev_t devt = DDI_DEV_T_NONE ; lnode = di_link_to_lnode ( link , endpoint ) ; indent_to_level ( ilev ) ; name = di_lnode_name ( lnode ) ; spec_type = di_link_spectype ( link ) ; ( void ) printf ( "mod=%s" , name ) ; if ( endpoint == DI_LINK_SRC ) { ( void ) printf ( " accesstype=%s" , ( spec_type == S_IFBLK ) ?"blk" : "chr" ) ; } displayed_path = 0 ; if ( di_lnode_devt ( lnode , & devt ) == 0 ) { ( void ) printf ( " dev=(%u,%u)\n" , ( uint_t ) major ( devt ) , ( uint_t ) minor ( devt ) ) ; while ( minor = di_minor_next ( node , minor ) ) { if ( devt != di_minor_devt ( minor ) ) { continue ; } if ( ( endpoint == DI_LINK_TGT ) && ( spec_type != di_minor_spectype ( minor ) ) ) { continue ; } dump_minor_data_paths ( ilev + 1 , minor , devlink_hdl ) ; displayed_path = 1 ; } } else { ( void ) printf ( "\n" ) ; } if ( displayed_path ) { return ; } node = di_lnode_devinfo ( lnode ) ; if ( ( path = di_devfs_path ( node ) ) == NULL ) { exit ( _error ( "failed to allocate memory" ) ) ; } indent_to_level ( ilev + 1 ) ; ( void ) printf ( "dev_path=%s\n" , path ) ; di_devfs_path_free ( path ) ; } 