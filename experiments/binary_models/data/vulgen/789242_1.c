void tm_spd_tar ( void ) { unsigned long result , texasr ; unsigned long regs [ 3 ] ; int ret ; cptr = ( int * ) shmat ( shm_id , NULL , 0 ) ; trans cptr [ 2 ] = 0 ; __volatile__ if ( result ) { if ( ! cptr [ 0 ] ) { trans } regs [ 0 ] = mfspr ( SPRN_TAR ) ; regs [ 1 ] = mfspr ( SPRN_PPR ) ; regs [ 2 ] = mfspr ( SPRN_DSCR ) ; shmdt ( & cptr ) ; printf ( "%-30s TAR: %lu PPR: %lx DSCR: %lu\n" , user_read , regs [ 0 ] , regs [ 1 ] , regs [ 2 ] ) ; ret = validate_tar_registers ( regs , TAR_4 , PPR_4 , DSCR_4 ) ; exit ( 0 ) ; } shmdt ( & cptr ) ; exit ( 1 ) ; } 