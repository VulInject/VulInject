static void vsw_process_dringdata_info_shm ( vsw_ldc_t * ldcp , vio_dring_msg_t * msg ) { dring_info_t * dp = ldcp -> lane_in . dringp ; vsw_t * vswp = ldcp -> ldc_vswp ; vgen_stats_t * statsp = & ldcp -> ldc_stats ; if ( dp -> ident != msg -> dring_ident ) { DERR ( vswp , "%s(%lld): Invalid dring ident 0x%llx" , __func__ , ldcp -> ldc_id , msg -> dring_ident ) ; return ; } statsp -> dring_data_msgs_rcvd ++ ; ASSERT ( MUTEX_HELD ( & ldcp -> ldc_cblock ) ) ; mutex_exit ( & ldcp -> ldc_cblock ) ; if ( ! ( ldcp -> rcv_thr_flags & VSW_WTHR_DATARCVD ) ) { ldcp -> rcv_thr_flags |= VSW_WTHR_DATARCVD ; cv_signal ( & ldcp -> rcv_thr_cv ) ; } mutex_exit ( & ldcp -> rcv_thr_lock ) ; mutex_enter ( & ldcp -> ldc_cblock ) ; } 