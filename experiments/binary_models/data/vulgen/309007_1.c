void * module_alloc ( unsigned long size ) { u64 module_alloc_end = module_alloc_base + MODULES_VSIZE ; gfp_t gfp_mask = GFP_KERNEL ; void * p ; if ( IS_ENABLED ( CONFIG_ARM64_MODULE_PLTS ) ) { gfp_mask |= __GFP_NOWARN ; } if ( IS_ENABLED ( CONFIG_KASAN_GENERIC ) || IS_ENABLED ( CONFIG_KASAN_SW_TAGS ) ) { module_alloc_end = MODULES_END ; } p = __vmalloc_node_range ( size , MODULE_ALIGN , module_alloc_base , module_alloc_end , gfp_mask , PAGE_KERNEL , VM_DEFER_KMEMLEAK , NUMA_NO_NODE , __builtin_return_address ( 0 ) ) ; if ( ! p && IS_ENABLED ( CONFIG_ARM64_MODULE_PLTS ) && ( IS_ENABLED ( CONFIG_KASAN_VMALLOC ) || ( ! IS_ENABLED ( CONFIG_KASAN_GENERIC ) && ! IS_ENABLED ( CONFIG_KASAN_SW_TAGS ) ) ) ) { p = __vmalloc_node_range ( size , MODULE_ALIGN , module_alloc_base , module_alloc_base + SZ_2G , GFP_KERNEL , PAGE_KERNEL , 0 , NUMA_NO_NODE , __builtin_return_address ( 0 ) ) ; } if ( p && ( kasan_alloc_module_shadow ( p , size , gfp_mask ) < 0 ) ) { return NULL ; } return kasan_reset_tag ( p ) ; } aarch64_reloc_op { RELOC_OP_NONE , RELOC_OP_ABS , RELOC_OP_PREL , RELOC_OP_PAGE } 