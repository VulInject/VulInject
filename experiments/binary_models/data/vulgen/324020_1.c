static DisasJumpType gen_mfpr ( DisasContext * ctx , TCGv va , int regno ) { void * helper ( TCGv ) int data ; switch ( regno ) { case 32 ... 39 : regno = regno == 39 ?25 : regno - 32 + 8 ; tcg_gen_mov_i64 ( va , cpu_std_ir [ regno ] ) ; break ; case 250 : helper = gen_helper_get_walltime ; do_helper case 249 : helper = gen_helper_get_vmtime ; do_helper if ( tb_cflags ( ctx -> base . tb ) & CF_USE_ICOUNT ) { gen_io_start ( ) ; helper ( va ) ; return DISAS_PC_STALE ; } else { helper ( va ) ; } break ; case 0 : ld_flag_byte ( va , ENV_FLAG_PS_SHIFT ) ; break ; case 1 : ld_flag_byte ( va , ENV_FLAG_FEN_SHIFT ) ; break ; default : data = cpu_pr_data ( regno ) ; if ( data == 0 ) { tcg_gen_ld_i64 ( va , cpu_env , 0 ) ; } if ( data & PR_LONG ) { tcg_gen_ld32s_i64 ( va , cpu_env , data & ~ PR_LONG ) ; } else { tcg_gen_ld_i64 ( va , cpu_env , data ) ; } break ; } return DISAS_NEXT ; } 