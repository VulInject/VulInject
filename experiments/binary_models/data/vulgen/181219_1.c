static int edp_ctrl_training ( struct edp_ctrl * ctrl ) { int ret ; train_start ret = edp_do_link_train ( ctrl ) ; if ( ret == EDP_TRAIN_RECONFIG ) { edp_ctrl_irq_enable ( ctrl , 0 ) ; edp_ctrl_link_enable ( ctrl , 0 ) ; msm_edp_phy_ctrl ( ctrl -> phy , 0 ) ; wmb ( ) ; usleep_range ( 500 , 1000 ) ; msm_edp_phy_ctrl ( ctrl -> phy , 1 ) ; edp_ctrl_link_enable ( ctrl , 1 ) ; edp_ctrl_irq_enable ( ctrl , 1 ) ; train_start } return ret ; } 