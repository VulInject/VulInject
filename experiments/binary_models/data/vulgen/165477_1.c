static void handle_rxD ( struct w6692_hw * card ) { u8 stat ; int count ; stat = ReadW6692 ( card , W_D_RSTA ) ; if ( stat & ( W_D_RSTA_RDOV | W_D_RSTA_CRCE | W_D_RSTA_RMB ) ) { if ( stat & W_D_RSTA_RDOV ) { pr_debug ( "%s: D-channel RDOV\n" , card -> name ) ; card -> dch . err_rx ++ ; } if ( stat & W_D_RSTA_CRCE ) { pr_debug ( "%s: D-channel CRC error\n" , card -> name ) ; card -> dch . err_crc ++ ; } if ( stat & W_D_RSTA_RMB ) { pr_debug ( "%s: D-channel ABORT\n" , card -> name ) ; card -> dch . err_rx ++ ; } dev_kfree_skb ( card -> dch . rx_skb ) ; card -> dch . rx_skb = NULL ; WriteW6692 ( card , W_D_CMDR , W_D_CMDR_RACK | W_D_CMDR_RRST ) ; } else { count = ReadW6692 ( card , W_D_RBCL ) & ( W_D_FIFO_THRESH - 1 ) ; W6692_empty_Dfifo ( card , count ) ; recv_Dchannel ( & card -> dch ) ; } } 