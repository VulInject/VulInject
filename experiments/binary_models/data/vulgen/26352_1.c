static int clk_pll14xx_prepare ( struct clk_hw * hw ) { struct clk_pll14xx * pll = to_clk_pll14xx ( hw ) ; u32 val ; int ret ; val = readl_relaxed ( pll -> base + GNRL_CTL ) ; val |= BYPASS_MASK ; writel_relaxed ( val , pll -> base + GNRL_CTL ) ; val |= RST_MASK ; writel_relaxed ( val , pll -> base + GNRL_CTL ) ; ret = clk_pll14xx_wait_lock ( pll ) ; if ( ret ) { return ret ; } val &= ~ BYPASS_MASK ; writel_relaxed ( val , pll -> base + GNRL_CTL ) ; return 0 ; } 