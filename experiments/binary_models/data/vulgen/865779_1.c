int TestCallReplyWithNestedReply ( RedisModuleCtx * ctx , RedisModuleString * * argv , int argc ) { REDISMODULE_NOT_USED ( argv ) ; REDISMODULE_NOT_USED ( argc ) ; RedisModule_AutoMemory ( ctx ) ; RedisModuleCallReply * reply ; RedisModule_Call ( ctx , "DEL" , "c" , "mylist" ) ; RedisModule_Call ( ctx , "RPUSH" , "ccl" , "mylist" , "test" , ( long long ) 1234 ) ; reply = RedisModule_Call ( ctx , "LRANGE" , "ccc" , "mylist" , "0" , "-1" ) ; if ( RedisModule_CallReplyLength ( reply ) < 1 ) { fail } RedisModuleCallReply * nestedReply = RedisModule_CallReplyArrayElement ( reply , 0 ) ; RedisModule_ReplyWithCallReply ( ctx , nestedReply ) ; return REDISMODULE_OK ; fail RedisModule_ReplyWithSimpleString ( ctx , "ERR" ) ; return REDISMODULE_OK ; } 