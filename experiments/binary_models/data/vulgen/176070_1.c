static void test_concurrent_races ( struct kunit * test ) { struct expect_report expect = { . access = { { test_kernel_rmw_array NULL 0 __KCSAN_ACCESS_RW ( ) } { test_kernel_rmw_array NULL 0 __KCSAN_ACCESS_RW ( 0 ) } } } ; struct expect_report never = { . access = { { test_kernel_rmw_array NULL 0 0 } { test_kernel_rmw_array NULL 0 0 } } } ; bool match_expect = false ; bool match_never = false ; begin_test_checks ( test_kernel_rmw_array , test_kernel_rmw_array ) ; { match_expect |= report_matches ( & expect ) ; match_never |= report_matches ( & never ) ; } ! end_test_checks ( false ) ; KUNIT_EXPECT_TRUE ( test , match_expect ) ; } 