static void __init setup_nonnuma ( void ) { unsigned long top_of_ram = memblock_end_of_DRAM ( ) ; unsigned long total_ram = memblock_phys_mem_size ( ) ; unsigned long start_pfn , end_pfn ; unsigned int nid = 0 ; int i ; pr_debug ( "Top of RAM: 0x%lx, Total RAM: 0x%lx\n" , top_of_ram , total_ram ) ; pr_debug ( "Memory hole size: %ldMB\n" , ( top_of_ram - total_ram ) >> 20 ) ; for_each_mem_pfn_range ( , , , , ) { fake_numa_create_new_node ( end_pfn , & nid ) ; memblock_set_node ( PFN_PHYS ( start_pfn ) , PFN_PHYS ( end_pfn - start_pfn ) , & memblock . memory , nid ) ; } } 