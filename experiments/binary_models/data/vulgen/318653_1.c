static zend_result zend_restore_ini_entry_cb ( zend_ini_entry * ini_entry , int stage ) { zend_result result = FAILURE ; if ( ini_entry -> modified ) { if ( ini_entry -> on_modify ) { zend_try { result = ini_entry -> on_modify ( ini_entry , ini_entry -> orig_value , ini_entry -> mh_arg1 , ini_entry -> mh_arg2 , ini_entry -> mh_arg3 , stage ) ; } } if ( stage == ZEND_INI_STAGE_RUNTIME && result == FAILURE ) { return FAILURE ; } if ( ini_entry -> value != ini_entry -> orig_value ) { zend_string_release ( ini_entry -> value ) ; } ini_entry -> value = ini_entry -> orig_value ; ini_entry -> modifiable = ini_entry -> orig_modifiable ; ini_entry -> modified = 0 ; ini_entry -> orig_value = NULL ; ini_entry -> orig_modifiable = 0 ; } return SUCCESS ; } 