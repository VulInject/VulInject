static void main_pll_init_ti816x ( void ) { u32 main_pll_ctrl ; main_pll_ctrl = readl ( & cmpll -> mainpll_ctrl ) ; main_pll_ctrl &= 0xFFFFFFFB ; main_pll_ctrl |= BIT ( 2 ) ; writel ( main_pll_ctrl , & cmpll -> mainpll_ctrl ) ; main_pll_ctrl = readl ( & cmpll -> mainpll_ctrl ) ; main_pll_ctrl &= 0xFFFFFFF7 ; main_pll_ctrl |= BIT ( 3 ) ; writel ( main_pll_ctrl , & cmpll -> mainpll_ctrl ) ; main_pll_ctrl = readl ( & cmpll -> mainpll_ctrl ) ; main_pll_ctrl &= 0xFF ; main_pll_ctrl |= ( MAIN_N << 16 | MAIN_P << 8 ) ; writel ( main_pll_ctrl , & cmpll -> mainpll_ctrl ) ; writel ( 0x0 , & cmpll -> mainpll_pwd ) ; writel ( ( 1 << 31 | 1 << 28 | ( MAIN_INTFREQ1 << 24 ) | MAIN_FRACFREQ1 ) , & cmpll -> mainpll_freq1 ) ; writel ( ( ( 1 << 8 ) | MAIN_MDIV1 ) , & cmpll -> mainpll_div1 ) ; writel ( ( 1 << 31 | 1 << 28 | ( MAIN_INTFREQ2 << 24 ) | MAIN_FRACFREQ2 ) , & cmpll -> mainpll_freq2 ) ; writel ( ( ( 1 << 8 ) | MAIN_MDIV2 ) , & cmpll -> mainpll_div2 ) ; writel ( ( 1 << 31 | 1 << 28 | ( MAIN_INTFREQ3 << 24 ) | MAIN_FRACFREQ3 ) , & cmpll -> mainpll_freq3 ) ; writel ( ( ( 1 << 8 ) | MAIN_MDIV3 ) , & cmpll -> mainpll_div3 ) ; writel ( ( 1 << 31 | 1 << 28 | ( MAIN_INTFREQ4 << 24 ) | MAIN_FRACFREQ4 ) , & cmpll -> mainpll_freq4 ) ; writel ( ( ( 1 << 8 ) | MAIN_MDIV4 ) , & cmpll -> mainpll_div4 ) ; writel ( ( 1 << 31 | 1 << 28 | ( MAIN_INTFREQ5 << 24 ) | MAIN_FRACFREQ5 ) , & cmpll -> mainpll_freq5 ) ; writel ( ( ( 1 << 8 ) | MAIN_MDIV5 ) , & cmpll -> mainpll_div5 ) ; writel ( ( 1 << 8 | MAIN_MDIV6 ) , & cmpll -> mainpll_div6 ) ; writel ( ( 1 << 8 | MAIN_MDIV7 ) , & cmpll -> mainpll_div7 ) ; while ( ( readl ( & cmpll -> mainpll_ctrl ) & BIT ( 7 ) ) != BIT ( 7 ) ) { } main_pll_ctrl = readl ( & cmpll -> mainpll_ctrl ) ; main_pll_ctrl &= 0xFFFFFFFB ; writel ( main_pll_ctrl , & cmpll -> mainpll_ctrl ) ; } 