void CleanupOutput ( char * str ) { char * s , * t ; int period = 0 ; s = t = str ; while ( * s ) { if ( ( * s == ' ' ) && ( s [ 1 ] == ' ' || s [ 1 ] == '\n' || s [ 1 ] == 0 ) ) { s ++ ; } else { * t ++ = * s ++ ; } } * t = 0 ; s = t = str ; while ( * s ) { if ( * s == '.' ) { period = 1 ; * t ++ = * s ++ ; } if ( isdigit ( * s ) ) { * t ++ = * s ++ ; } if ( period ) { while ( t > str && t [ - 1 ] == '0' ) { t -- ; } if ( t > str && t [ - 1 ] == '.' ) { t -- ; if ( t > str && ! isdigit ( t [ - 1 ] ) ) { * t ++ = '0' ; } } period = 0 ; * t ++ = * s ++ ; } else { period = 0 ; * t ++ = * s ++ ; } } * t = 0 ; s = t = str ; while ( * s ) { if ( * s == '-' && s [ 1 ] == '0' && s [ 2 ] == ' ' ) { s ++ ; } else { * t ++ = * s ++ ; } } * t = 0 ; } 