void snd_opl3_init_seq_oss ( struct snd_opl3 * opl3 , char * name ) { struct snd_seq_oss_reg * arg ; struct snd_seq_device * dev ; if ( snd_seq_device_new ( opl3 -> card , 0 , SNDRV_SEQ_DEV_ID_OSS , sizeof ( snd_seq_oss_reg ) , & dev ) < 0 ) { return ; } opl3 -> oss_seq_dev = dev ; arg = SNDRV_SEQ_DEVICE_ARGPTR ( dev ) ; arg -> type = SYNTH_TYPE_FM ; if ( opl3 -> hardware < OPL3_HW_OPL3 ) { arg -> subtype = FM_TYPE_ADLIB ; arg -> nvoices = MAX_OPL2_VOICES ; } else { arg -> subtype = FM_TYPE_OPL3 ; arg -> nvoices = MAX_OPL3_VOICES ; } arg -> oper = oss_callback ; arg -> private_data = opl3 ; if ( snd_opl3_oss_create_port ( opl3 ) ) { snd_device_register ( opl3 -> card , dev ) ; } } 