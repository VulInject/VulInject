int sdio_disable_func ( struct sdio_func * func ) { int ret ; unsigned char reg ; pr_debug ( "SDIO: Disabling device %s...\n" , sdio_func_id ( func ) ) ; ret = mmc_io_rw_direct ( func -> card , 0 , 0 , SDIO_CCCR_IOEx , 0 , & reg ) ; if ( ret ) { err } reg &= ~ ( 1 << func -> num ) ; ret = mmc_io_rw_direct ( func -> card , 1 , 0 , SDIO_CCCR_IOEx , reg , NULL ) ; if ( ret ) { err } pr_debug ( "SDIO: Disabled device %s\n" , sdio_func_id ( func ) ) ; return 0 ; err pr_debug ( "SDIO: Failed to disable device %s\n" , sdio_func_id ( func ) ) ; return ret ; } 