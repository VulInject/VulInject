void sysfs_remove_group ( struct kobject * kobj , const struct attribute_group * grp ) { struct kernfs_node * parent = kobj -> sd ; struct kernfs_node * kn ; if ( grp -> name ) { kn = kernfs_find_and_get ( parent , grp -> name ) ; if ( ! kn ) { WARN ( ! kn , KERN_WARNING "sysfs group '%s' not found for kobject '%s'\n" , grp -> name , kobject_name ( kobj ) ) ; return ; } } else { kn = parent ; kernfs_get ( kn ) ; } remove_files ( kn , grp ) ; if ( grp -> name ) { kernfs_remove ( kn ) ; } } 