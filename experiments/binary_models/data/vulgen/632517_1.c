CC_UINT32 ccs_authenticate ( const CC_CHAR * name ) { HANDLE hMap = 0 ; PDWORD pvalue = 0 ; CC_UINT32 result = 0 ; DWORD status = 0 ; status = ! hMap ; if ( ! status ) { pvalue = ( PDWORD ) MapViewOfFile ( hMap , FILE_MAP_WRITE , 0 , 0 , 0 ) ; status = ! pvalue ; } if ( ! status ) { * pvalue += 1 ; result = * pvalue ; } if ( pvalue ) { UnmapViewOfFile ( pvalue ) ; } if ( hMap ) { CloseHandle ( hMap ) ; } return result ; } 