int rfapi_compare_rfds ( void * rfd1 , void * rfd2 ) { struct rfapi_descriptor * rrfd1 , * rrfd2 ; int match ; rrfd1 = ( rfapi_descriptor * ) rfd1 ; rrfd2 = ( rfapi_descriptor * ) rfd2 ; if ( rrfd1 -> vn_addr . addr_family == rrfd2 -> vn_addr . addr_family ) { if ( rrfd1 -> vn_addr . addr_family == AF_INET ) { match = IPV4_ADDR_SAME ( & ( rrfd1 -> vn_addr . addr . v4 ) , & ( rrfd2 -> vn_addr . addr . v4 ) ) ; } else { match = IPV6_ADDR_SAME ( & ( rrfd1 -> vn_addr . addr . v6 ) , & ( rrfd2 -> vn_addr . addr . v6 ) ) ; } } if ( ! match ) { return 0 ; } match = 0 ; if ( rrfd1 -> un_addr . addr_family == rrfd2 -> un_addr . addr_family ) { if ( rrfd1 -> un_addr . addr_family == AF_INET ) { match = IPV4_ADDR_SAME ( & ( rrfd1 -> un_addr . addr . v4 ) , & ( rrfd2 -> un_addr . addr . v4 ) ) ; } else { match = IPV6_ADDR_SAME ( & ( rrfd1 -> un_addr . addr . v6 ) , & ( rrfd2 -> un_addr . addr . v6 ) ) ; } } return match ; } 