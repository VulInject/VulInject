static int __init jive_init ( void ) { int ret ; printk ( "JIVE WM8750 Audio support\n" ) ; jive_snd_device = platform_device_alloc ( "soc-audio" , - 1 ) ; if ( ! jive_snd_device ) { return - ENOMEM ; } platform_set_drvdata ( jive_snd_device , & snd_soc_machine_jive ) ; ret = platform_device_add ( jive_snd_device ) ; if ( ret ) { platform_device_put ( jive_snd_device ) ; } return ret ; } 