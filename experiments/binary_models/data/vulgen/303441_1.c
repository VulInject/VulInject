void _xode_to_prettystr ( xode_spool s , xode x , int deep ) { int i ; xode y ; for ( i = 0 ; i < deep ; i ++ ) { xode_spool_add ( s , "\t" ) ; } xode_spooler ( s , "<" , xode_get_name ( x ) , s ) ; y = xode_get_firstattrib ( x ) ; while ( y ) { xode_spooler ( s , " " , xode_get_name ( y ) , "='" , xode_get_data ( y ) , "'" , s ) ; y = xode_get_nextsibling ( y ) ; } xode_spool_add ( s , ">" ) ; xode_spool_add ( s , "\n" ) ; if ( xode_get_data ( x ) ) { for ( i = 0 ; i <= deep ; i ++ ) { xode_spool_add ( s , "\t" ) ; } xode_spool_add ( s , xode_get_data ( x ) ) ; } y = xode_get_firstchild ( x ) ; while ( y ) { _xode_to_prettystr ( s , y , deep + 1 ) ; y = xode_get_nextsibling ( y ) ; xode_spool_add ( s , "\n" ) ; } for ( i = 0 ; i < deep ; i ++ ) { xode_spool_add ( s , "\t" ) ; } xode_spooler ( s , "</" , xode_get_name ( x ) , ">" , s ) ; return ; } 