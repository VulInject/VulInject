static bool parse_sort_args ( const char * arg_str ) { int size = 0 ; if ( sc . size != 0 ) { free ( sc . signs ) ; free ( sc . cmps ) ; size = 0 ; } char * * args = explode ( ',' , arg_str , & size ) ; sc . signs = calloc ( size , sizeof ( int ) ) ; sc . cmps = calloc ( size , sizeof ( int * ) ) ; for ( int i = 0 ; i < size ; ++ i ) { int offset = 0 ; sc . signs [ i ] = SORT_ASC ; if ( args [ i ] [ 0 ] == '-' || args [ i ] [ 0 ] == '+' ) { offset = 1 ; } int arg_type = get_arg_type ( args [ i ] + offset ) ; if ( arg_type == ARG_PID ) { sc . cmps [ i ] = compare_pid ; } if ( arg_type == ARG_TGID ) { sc . cmps [ i ] = compare_tgid ; } if ( arg_type == ARG_COMM ) { sc . cmps [ i ] = compare_comm ; } if ( arg_type == ARG_STACKTRACE ) { sc . cmps [ i ] = compare_stacktrace ; } if ( arg_type == ARG_ALLOC_TS ) { sc . cmps [ i ] = compare_ts ; } if ( arg_type == ARG_FREE_TS ) { sc . cmps [ i ] = compare_free_ts ; } if ( arg_type == ARG_TXT ) { sc . cmps [ i ] = compare_txt ; } if ( arg_type == ARG_ALLOCATOR ) { sc . cmps [ i ] = compare_allocator ; } else { free_explode ( args , size ) ; sc . size = 0 ; return false ; } } sc . size = size ; free_explode ( args , size ) ; return true ; } 