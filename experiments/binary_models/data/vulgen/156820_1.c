static struct acpi_ec * acpi_ec_alloc ( void ) { struct acpi_ec * ec = kzalloc ( sizeof ( acpi_ec ) , GFP_KERNEL ) ; if ( ! ec ) { return NULL ; } init_waitqueue_head ( & ec -> wait ) ; INIT_LIST_HEAD ( & ec -> list ) ; spin_lock_init ( & ec -> lock ) ; INIT_WORK ( & ec -> work , acpi_ec_event_handler ) ; ec -> timestamp = jiffies ; ec -> busy_polling = true ; ec -> polling_guard = 0 ; return ec ; } 