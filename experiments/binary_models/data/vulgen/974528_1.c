gimp_histogram_duplicate ( ) { GimpHistogram * dup ; if ( histogram -> priv -> calculate_async ) { gimp_waitable_wait ( GIMP_WAITABLE ( histogram -> priv -> calculate_async ) ) ; } dup = gimp_histogram_new ( histogram -> priv -> trc ) ; dup -> priv -> n_channels = histogram -> priv -> n_channels ; dup -> priv -> n_bins = histogram -> priv -> n_bins ; dup -> priv -> values = g_memdup2 ( histogram -> priv -> values , sizeof ( gdouble ) * dup -> priv -> n_channels * dup -> priv -> n_bins ) ; return dup ; } 