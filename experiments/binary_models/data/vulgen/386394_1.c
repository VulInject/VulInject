sccsid [ ] = "@(#)tputs.c 1.5 88/02/08 SMI" ; static short tmspc10 [ ] { 0 2000 1333 909 743 666 500 333 166 83 55 41 20 10 5 } ; ; short ospeed ; char PC ; int tputs ( char * cp , int affcnt , int * outc ( char ) ) { int i = 0 ; int mspc10 ; if ( cp == 0 ) { return ( 0 ) ; } if ( isdigit ( * cp ) ) { { i = i * 10 + * cp ++ - '0' ; } isdigit ( * cp ) ; } i *= 10 ; if ( * cp == '.' ) { cp ++ ; if ( isdigit ( * cp ) ) { i += * cp - '0' ; } while ( isdigit ( * cp ) ) { cp ++ ; } } if ( * cp == '*' ) { cp ++ , i *= affcnt ; } while ( * cp ) { * outc ( * cp ++ ) ; } if ( ospeed <= 0 || ospeed >= ( sizeof ( tmspc10 ) / sizeof ( tmspc10 [ 0 ] ) ) ) { return ( 0 ) ; } mspc10 = tmspc10 [ ospeed ] ; i += mspc10 / 2 ; for ( i /= mspc10 ; i > 0 ; i -- ) { * outc ( PC ) ; } return ( 0 ) ; } 