int exuartcngetc ( dev_t dev ) { int c ; int s ; s = splhigh ( ) ; while ( ( bus_space_read_4 ( exuartconsiot , exuartconsioh , EXUART_UTRSTAT ) & EXUART_UTRSTAT_RXBREADY ) == 0 && ( bus_space_read_4 ( exuartconsiot , exuartconsioh , EXUART_UFSTAT ) & ( exuart_rx_fifo_cnt_mask | exuart_rx_fifo_full ) ) == 0 ) { } c = bus_space_read_4 ( exuartconsiot , exuartconsioh , EXUART_URXH ) ; return c ; } 