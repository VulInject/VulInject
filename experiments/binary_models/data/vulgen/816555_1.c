pesge * t1_sge_create ( ch_t * sa , struct sge_params * p ) { pesge * sge ; sge = t1_os_malloc_wait_zero ( sizeof ( pesge ) ) ; if ( sge == NULL ) { error_no_mem } if ( is_T2 ( sa ) ) { sge -> ptimeout = 1 ; } sge -> obj = sa ; if ( sge_kstat_setup ( sge ) != 0 ) { t1_sge_create_fail1 } p -> cmdQ_size [ 0 ] = sge_cmdq0_cnt ; p -> cmdQ_size [ 1 ] = sge_cmdq1_cnt ; if ( is_T2 ( sa ) ) { p -> freelQ_size [ 1 ] = sge_flq0_cnt ; p -> freelQ_size [ 0 ] = sge_flq1_cnt ; } else { p -> freelQ_size [ 0 ] = sge_flq0_cnt ; p -> freelQ_size [ 1 ] = sge_flq1_cnt ; } cmn_err ( CE_NOTE , "sge: %p\n" , sge ) ; cmn_err ( CE_NOTE , "&sge->cmdQ[0]: %p\n" , & sge -> cmdQ [ 0 ] ) ; cmn_err ( CE_NOTE , "&sge->freelQ[0]: %p\n" , & sge -> freelQ [ 0 ] ) ; cmn_err ( CE_NOTE , "&sge->freelQ[1]: %p\n" , & sge -> freelQ [ 1 ] ) ; cmn_err ( CE_NOTE , "&sge->respQ: %p\n" , & sge -> respQ ) ; cmn_err ( CE_NOTE , "&sge->intr_cnt: %p\n" , & sge -> intr_cnt ) ; error_no_mem t1_sge_create_fail1 t1_os_free ( sge , sizeof ( pesge ) ) ; sge = NULL ; error_no_mem return ( sge ) ; } 