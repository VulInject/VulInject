static int cs4271_soc_resume ( struct snd_soc_codec * codec ) { int ret ; struct cs4271_private * cs4271 = snd_soc_codec_get_drvdata ( codec ) ; if ( ret < 0 ) { dev_err ( codec -> dev , "Failed to enable regulators: %d\n" , ret ) ; return ret ; } cs4271_reset ( codec ) ; ret = regcache_sync ( cs4271 -> regmap ) ; if ( ret < 0 ) { return ret ; } ret = regmap_update_bits ( cs4271 -> regmap , CS4271_MODE2 , CS4271_MODE2_PDN , 0 ) ; if ( ret < 0 ) { return ret ; } return 0 ; } 