static int amdgpu_vkms_sw_fini ( void * handle ) { struct amdgpu_device * adev = ( amdgpu_device * ) handle ; int i = 0 ; for ( i = 0 ; i < adev -> mode_info . num_crtc ; i ++ ) { if ( adev -> mode_info . crtcs [ i ] ) { hrtimer_cancel ( & adev -> mode_info . crtcs [ i ] -> vblank_timer ) ; } } drm_kms_helper_poll_fini ( adev_to_drm ( adev ) ) ; drm_mode_config_cleanup ( adev_to_drm ( adev ) ) ; adev -> mode_info . mode_config_initialized = false ; kfree ( adev -> mode_info . bios_hardcoded_edid ) ; return 0 ; } 