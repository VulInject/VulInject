static gchar * inf_gtk_connection_view_format_ipaddress ( InfIpAddress * address , guint port ) { gchar * out ; gchar * str ; str = inf_ip_address_to_string ( address ) ; switch ( inf_ip_address_get_family ( address ) ) { case INF_IP_ADDRESS_IPV4 : out = g_strdup_printf ( "%s:%u" , str , port ) ; break ; case INF_IP_ADDRESS_IPV6 : out = g_strdup_printf ( "[%s]:%u" , str , port ) ; break ; default : g_assert_not_reached ( ) ; out = NULL ; break ; } return out ; } 