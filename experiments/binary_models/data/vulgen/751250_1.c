static void relay_kill ( struct Client * one , struct Client * source_p , struct Client * target_p , const char * inpath , const char * reason ) { struct Client * client_p ; rb_dlink_node * ptr ; char buffer [ BUFSIZE ] ; if ( MyClient ( source_p ) ) { snprintf ( buffer , sizeof ( buffer ) , "%s!%s!%s!%s (%s)" , me . name , source_p -> host , source_p -> username , source_p -> name , reason ) ; } else { snprintf ( buffer , sizeof ( buffer ) , "%s %s" , inpath , reason ) ; } RB_DLINK_FOREACH ( , ) { client_p = ptr -> data ; sendto_one ( client_p , ":%s KILL %s :%s" , get_id ( source_p , client_p ) , get_id ( target_p , client_p ) , buffer ) ; } } 