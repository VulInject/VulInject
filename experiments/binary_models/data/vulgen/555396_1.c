void wf_info_getScreenData ( wfInfo * wfi , long * width , long * height , BYTE * * pBits , int * pitch ) { * width = ( wfi -> invalid . right - wfi -> invalid . left ) ; * height = ( wfi -> invalid . bottom - wfi -> invalid . top ) ; wf_dxgi_getPixelData ( wfi , pBits , pitch , & wfi -> invalid ) ; { long offset ; GETCHANGESBUF * changes ; changes = ( GETCHANGESBUF * ) wfi -> changeBuffer ; * width += 1 ; * height += 1 ; offset = ( 4 * wfi -> invalid . left ) + ( wfi -> invalid . top * wfi -> virtscreen_width * 4 ) ; * pitch = wfi -> virtscreen_width * 4 ; } } 