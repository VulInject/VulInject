static void qla4_83xx_rmw_crb_reg ( struct scsi_qla_host * ha , uint32_t raddr , uint32_t waddr , struct qla4_83xx_rmw * p_rmw_hdr ) { uint32_t value ; if ( p_rmw_hdr -> index_a ) { value = ha -> reset_tmplt . array [ p_rmw_hdr -> index_a ] ; } else { qla4_83xx_rd_reg_indirect ( ha , raddr , & value ) ; } value &= p_rmw_hdr -> test_mask ; value <<= p_rmw_hdr -> shl ; value >>= p_rmw_hdr -> shr ; value |= p_rmw_hdr -> or_value ; value ^= p_rmw_hdr -> xor_value ; return ; } 