START_TEST ( ) { int res ; rlim_t curr_rlim = 0 , max_rlim = 0 ; res = pr_rlimit_get_nproc ( NULL , NULL ) ; ck_assert_msg ( res == - 1 , "Failed to handle null arguments" ) ; ck_assert_msg ( errno == EINVAL , "Failed to set errno to EINVAL, got %s (%d)" , strerror ( errno ) , errno ) ; res = pr_rlimit_get_nproc ( & curr_rlim , & max_rlim ) ; ck_assert_msg ( res == 0 , "Failed to get nproc resource limits: %s" , strerror ( errno ) ) ; curr_rlim = max_rlim = - 1 ; if ( res < 0 ) { ck_assert_msg ( errno == EPERM , "Failed to set errno to EPERM, got %s (%d)" , strerror ( errno ) , errno ) ; } } 