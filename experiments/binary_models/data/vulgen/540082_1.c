static void osnoise_print_stats ( struct osnoise_hist_params * params , struct osnoise_tool * tool ) { struct osnoise_hist_data * data = tool -> data ; struct trace_instance * trace = & tool -> trace ; int bucket , cpu ; int total ; osnoise_hist_header ( tool ) ; for ( bucket = 0 ; bucket < data -> entries ; bucket ++ ) { total = 0 ; if ( ! params -> no_index ) { trace_seq_printf ( trace -> seq , "%-6d" , bucket * data -> bucket_size ) ; } for ( cpu = 0 ; cpu < data -> nr_cpus ; cpu ++ ) { if ( params -> cpus && ! params -> monitored_cpus [ cpu ] ) { continue ; } if ( ! data -> hist [ cpu ] . count ) { continue ; } total += data -> hist [ cpu ] . samples [ bucket ] ; trace_seq_printf ( trace -> seq , "%9d " , data -> hist [ cpu ] . samples [ bucket ] ) ; } if ( total == 0 && ! params -> with_zeros ) { trace_seq_reset ( trace -> seq ) ; continue ; } trace_seq_printf ( trace -> seq , "\n" ) ; trace_seq_do_printf ( trace -> seq ) ; trace_seq_reset ( trace -> seq ) ; } if ( ! params -> no_index ) { trace_seq_printf ( trace -> seq , "over: " ) ; } for ( cpu = 0 ; cpu < data -> nr_cpus ; cpu ++ ) { if ( params -> cpus && ! params -> monitored_cpus [ cpu ] ) { continue ; } if ( ! data -> hist [ cpu ] . count ) { continue ; } trace_seq_printf ( trace -> seq , "%9d " , data -> hist [ cpu ] . samples [ data -> entries ] ) ; } trace_seq_printf ( trace -> seq , "\n" ) ; trace_seq_do_printf ( trace -> seq ) ; trace_seq_reset ( trace -> seq ) ; } 