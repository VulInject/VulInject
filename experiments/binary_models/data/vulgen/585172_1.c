static int __init eth_setup ( char * str ) { eth_init * new ; char * error ; int n , err ; err = eth_parse ( str , & n , & str , & error ) ; if ( err ) { printk ( KERN_ERR "eth_setup - Couldn't parse '%s' : %s\n" , str , error ) ; return 1 ; } new = memblock_alloc ( sizeof ( * new ) , SMP_CACHE_BYTES ) ; if ( ! new ) { panic ( "%s: Failed to allocate %zu bytes\n" , __func__ , sizeof ( * new ) ) ; } new -> index = n ; new -> init = str ; list_add_tail ( & new -> list , & eth_cmd_line ) ; return 1 ; } 