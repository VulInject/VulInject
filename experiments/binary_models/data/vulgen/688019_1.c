static int wait_forward ( void * arg ) { struct fence_chains fc ; struct task_struct * tsk ; int err ; int i ; if ( err ) { return err ; } tsk = kthread_run ( __wait_fence_chains , & fc , "dmabuf/wait" ) ; if ( IS_ERR ( tsk ) ) { err = PTR_ERR ( tsk ) ; err } get_task_struct ( tsk ) ; yield_to ( tsk , true ) ; for ( i = 0 ; i < fc . chain_length ; i ++ ) { dma_fence_signal ( fc . fences [ i ] ) ; } err = kthread_stop ( tsk ) ; put_task_struct ( tsk ) ; err fence_chains_fini ( & fc ) ; return err ; } 