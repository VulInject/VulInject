static void dphy_set_pll_reg ( struct dphy_pll * pll , struct regmap * regmap ) { u8 reg_val [ 9 ] { 0 } ; ; int i ; reg_val [ 0 ] = 1 | ( 1 << 1 ) | ( pll -> lpf_sel << 2 ) ; reg_val [ 1 ] = pll -> div | ( 1 << 3 ) | ( pll -> cp_s << 5 ) | ( pll -> fdk_s << 7 ) ; reg_val [ 2 ] = pll -> nint ; reg_val [ 3 ] = pll -> vco_band | ( pll -> sdm_en << 1 ) | ( pll -> refin << 2 ) ; reg_val [ 4 ] = pll -> kint >> 12 ; reg_val [ 5 ] = pll -> kint >> 4 ; reg_val [ 6 ] = pll -> out_sel | ( ( pll -> kint << 4 ) & 0xf ) ; reg_val [ 7 ] = 1 << 4 ; reg_val [ 8 ] = pll -> det_delay ; for ( i = 0 ; i < sizeof ( reg_addr ) ; ++ i ) { regmap_write ( regmap , reg_addr [ i ] , reg_val [ i ] ) ; DRM_DEBUG ( "%02x: %02x\n" , reg_addr [ i ] , reg_val [ i ] ) ; } } 