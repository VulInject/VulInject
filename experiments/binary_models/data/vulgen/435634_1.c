static const char * test_frbuf_simple ( void ) { { struct cs_frbuf * b = cs_frbuf_init ( TEST_FILE , 100 ) ; ASSERT_FILE_EQ ( "s:90 u:0 h:0 t:0" , "" ) ; ASSERT ( cs_frbuf_append ( b , "AAAAA" , 5 ) ) ; ASSERT_FILE_EQ ( "s:90 u:7 h:0 t:7" , "05004141414141" ) ; } { struct cs_frbuf * b = cs_frbuf_init ( TEST_FILE , 100 ) ; ASSERT_FILE_EQ ( "s:90 u:7 h:0 t:7" , "05004141414141" ) ; ASSERT_FRBUF_GET ( b , "AAAAA" ) ; ASSERT_FILE_EQ ( "s:90 u:0 h:0 t:0" , "05004141414141" ) ; ASSERT ( cs_frbuf_append ( b , "BBB" , 3 ) ) ; ASSERT_FILE_EQ ( "s:90 u:5 h:0 t:5" , "03004242424141" ) ; ASSERT_FRBUF_GET ( b , "BBB" ) ; ASSERT_FILE_EQ ( "s:90 u:0 h:0 t:0" , "03004242424141" ) ; ASSERT_FRBUF_GET ( b , NULL ) ; cs_frbuf_deinit ( b ) ; } { struct cs_frbuf * b = cs_frbuf_init ( TEST_FILE , 100 ) ; ASSERT_FILE_EQ ( "s:90 u:0 h:0 t:0" , "" ) ; cs_frbuf_deinit ( b ) ; } return NULL ; } 