static void hl_debugfs_led_set ( struct hl_device * hdev , u8 led , u8 state ) { struct cpucp_packet pkt ; int rc ; if ( ! hl_device_operational ( hdev , NULL ) ) { return ; } pkt . ctl = cpu_to_le32 ( CPUCP_PACKET_LED_SET << CPUCP_PKT_CTL_OPCODE_SHIFT ) ; pkt . led_index = cpu_to_le32 ( led ) ; pkt . value = cpu_to_le64 ( state ) ; rc = hdev -> asic_funcs -> send_cpu_message ( hdev , ( u32 * ) & pkt , sizeof ( pkt ) , 0 , NULL ) ; if ( rc ) { dev_err ( hdev -> dev , "Failed to set LED %d, error %d\n" , led , rc ) ; } } 