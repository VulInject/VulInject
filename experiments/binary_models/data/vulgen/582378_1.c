ipa_callsite_compute_param ( ) { tree call_tree ; tree arg , cst_decl ; int arg_num ; int i ; struct cgraph_node * mt ; if ( ipa_callsite_param_count ( cs ) == 0 ) { return ; } ipa_callsite_param_map_create ( cs ) ; call_tree = get_call_expr_in ( ipa_callsite_tree ( cs ) ) ; gcc_assert ( TREE_CODE ( call_tree ) == CALL_EXPR ) ; arg = TREE_OPERAND ( call_tree , 1 ) ; arg_num = 0 ; for ( ; arg != NULL_TREE ; arg = TREE_CHAIN ( arg ) ) { if ( TREE_CODE ( TREE_VALUE ( arg ) ) == PARM_DECL ) { mt = ipa_callsite_caller ( cs ) ; i = ipa_method_tree_map ( mt , TREE_VALUE ( arg ) ) ; if ( i < 0 || ipa_method_is_modified ( mt , i ) ) { ipa_callsite_param_set_type ( cs , arg_num , UNKNOWN_IPATYPE ) ; } else { ipa_callsite_param_set_type ( cs , arg_num , FORMAL_IPATYPE ) ; ipa_callsite_param_set_info_type_formal ( cs , arg_num , i ) ; } } if ( TREE_CODE ( TREE_VALUE ( arg ) ) == INTEGER_CST || TREE_CODE ( TREE_VALUE ( arg ) ) == REAL_CST ) { ipa_callsite_param_set_type ( cs , arg_num , CONST_IPATYPE ) ; } if ( TREE_CODE ( TREE_VALUE ( arg ) ) == ADDR_EXPR && TREE_CODE ( TREE_OPERAND ( TREE_VALUE ( arg ) , 0 ) ) == CONST_DECL ) { cst_decl = TREE_OPERAND ( TREE_VALUE ( arg ) , 0 ) ; if ( TREE_CODE ( DECL_INITIAL ( cst_decl ) ) == INTEGER_CST || TREE_CODE ( DECL_INITIAL ( cst_decl ) ) == REAL_CST ) { ipa_callsite_param_set_type ( cs , arg_num , CONST_IPATYPE_REF ) ; ipa_callsite_param_set_info_type ( cs , arg_num , DECL_INITIAL ( cst_decl ) ) ; } } else { ipa_callsite_param_set_type ( cs , arg_num , UNKNOWN_IPATYPE ) ; } arg_num ++ ; } } 