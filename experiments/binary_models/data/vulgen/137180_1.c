int pgt_cardbus_detach ( struct device * self , int flags ) { struct pgt_cardbus_softc * csc = ( pgt_cardbus_softc * ) self ; struct pgt_softc * sc = & csc -> sc_pgt ; cardbus_devfunc_t ct = csc -> sc_ct ; cardbus_chipset_tag_t cc = ct -> ct_cc ; cardbus_function_tag_t cf = ct -> ct_cf ; int error ; error = pgt_detach ( sc ) ; if ( error != 0 ) { return ( error ) ; } if ( csc -> sc_ih != NULL ) { csc -> sc_ih = NULL ; } Cardbus_mapreg_unmap ( ct , CARDBUS_BASE0_REG , sc -> sc_iotag , sc -> sc_iohandle , csc -> sc_mapsize ) ; return ( 0 ) ; } 