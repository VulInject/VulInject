void db_aml_showvalue ( struct aml_value * value ) { int idx ; if ( value -> node ) { db_printf ( "[%s] " , aml_nodename ( value -> node ) ) ; } switch ( value -> type ) { case AML_OBJTYPE_OBJREF : db_printf ( "refof: %x {\n" , value -> v_objref . index ) ; db_aml_showvalue ( value -> v_objref . ref ) ; db_printf ( "}\n" ) ; break ; case AML_OBJTYPE_NAMEREF : db_printf ( "nameref: %s\n" , value -> v_nameref ) ; break ; case AML_OBJTYPE_INTEGER : db_printf ( "integer: %llx\n" , value -> v_integer ) ; break ; case AML_OBJTYPE_STRING : db_printf ( "string: %s\n" , value -> v_string ) ; break ; case AML_OBJTYPE_PACKAGE : db_printf ( "package: %d {\n" , value -> length ) ; for ( idx = 0 ; idx < value -> length ; idx ++ ) { db_aml_showvalue ( value -> v_package [ idx ] ) ; } db_printf ( "}\n" ) ; break ; case AML_OBJTYPE_BUFFER : db_printf ( "buffer: %d " , value -> length ) ; db_aml_dump ( value -> length , value -> v_buffer ) ; break ; case AML_OBJTYPE_DEBUGOBJ : db_printf ( "debug" ) ; break ; case AML_OBJTYPE_MUTEX : db_printf ( "mutex : %llx\n" , value -> v_integer ) ; break ; case AML_OBJTYPE_DEVICE : db_printf ( "device\n" ) ; break ; case AML_OBJTYPE_EVENT : db_printf ( "event\n" ) ; break ; case AML_OBJTYPE_PROCESSOR : db_printf ( "cpu: %x,%x,%x\n" , value -> v_processor . proc_id , value -> v_processor . proc_addr , value -> v_processor . proc_len ) ; break ; case AML_OBJTYPE_METHOD : db_printf ( "method: args=%d, serialized=%d, synclevel=%d\n" , AML_METHOD_ARGCOUNT ( value -> v_method . flags ) , AML_METHOD_SERIALIZED ( value -> v_method . flags ) , AML_METHOD_SYNCLEVEL ( value -> v_method . flags ) ) ; break ; case AML_OBJTYPE_FIELDUNIT : db_printf ( "%s: access=%x,lock=%x,update=%x pos=%.4x " "len=%.4x\n" , aml_mnem ( value -> v_field . type , NULL ) , AML_FIELD_ACCESS ( value -> v_field . flags ) , AML_FIELD_LOCK ( value -> v_field . flags ) , AML_FIELD_UPDATE ( value -> v_field . flags ) , value -> v_field . bitpos , value -> v_field . bitlen ) ; if ( value -> v_field . ref2 ) { db_printf ( "  index: %.3x %s\n" , value -> v_field . ref3 , aml_nodename ( value -> v_field . ref2 -> node ) ) ; } if ( value -> v_field . ref1 ) { db_printf ( "  data: %s\n" , aml_nodename ( value -> v_field . ref1 -> node ) ) ; } break ; case AML_OBJTYPE_BUFFERFIELD : db_printf ( "%s: pos=%.4x len=%.4x\n" , aml_mnem ( value -> v_field . type , NULL ) , value -> v_field . bitpos , value -> v_field . bitlen ) ; db_printf ( "  buffer: %s\n" , aml_nodename ( value -> v_field . ref1 -> node ) ) ; break ; case AML_OBJTYPE_OPREGION : db_printf ( "opregion: %s,0x%llx,0x%x\n" , db_opregion ( value -> v_opregion . iospace ) , value -> v_opregion . iobase , value -> v_opregion . iolen ) ; break ; default : db_printf ( "unknown: %d\n" , value -> type ) ; break ; } } 