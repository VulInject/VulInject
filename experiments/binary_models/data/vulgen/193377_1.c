static void check_poison_mem ( struct page * page , unsigned char * mem , size_t bytes ) { static DEFINE_RATELIMIT_STATE ( ratelimit , 5 * HZ , 10 ) ; unsigned char * start ; unsigned char * end ; start = memchr_inv ( mem , PAGE_POISON , bytes ) ; if ( ! start ) { return ; } for ( end = mem + bytes - 1 ; end > start ; end -- ) { if ( * end != PAGE_POISON ) { break ; } } if ( ! __ratelimit ( & ratelimit ) ) { return ; } if ( start == end && single_bit_flip ( * start , PAGE_POISON ) ) { pr_err ( "pagealloc: single bit error\n" ) ; } else { pr_err ( "pagealloc: memory corruption\n" ) ; } dump_stack ( ) ; dump_page ( page , "pagealloc: corrupted page details" ) ; } 