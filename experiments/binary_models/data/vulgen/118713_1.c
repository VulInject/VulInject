static void reference_listing ( git_repository * repo ) { git_strarray ref_list ; unsigned i ; printf ( "\n*Reference Listing*\n" ) ; git_reference_list ( & ref_list , repo ) ; for ( i = 0 ; i < ref_list . count ; ++ i ) { git_reference * ref ; char oid_hex [ GIT_OID_SHA1_HEXSIZE + 1 ] GIT_OID_SHA1_HEXZERO ; ; const char * refname ; refname = ref_list . strings [ i ] ; git_reference_lookup ( & ref , repo , refname ) ; switch ( git_reference_type ( ref ) ) { case GIT_REFERENCE_DIRECT : git_oid_fmt ( oid_hex , git_reference_target ( ref ) ) ; printf ( "%s [%s]\n" , refname , oid_hex ) ; break ; case GIT_REFERENCE_SYMBOLIC : printf ( "%s =>%s\n" , refname , git_reference_symbolic_target ( ref ) ) ; break ; default : fprintf ( stderr , "Unexpected reference type\n" ) ; exit ( 1 ) ; } } git_strarray_dispose ( & ref_list ) ; } 