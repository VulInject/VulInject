static void free_req ( h2o_memcached_req_t * req ) { assert ( ! h2o_linklist_is_linked ( & req -> pending ) ) ; switch ( req -> type ) { case REQ_TYPE_GET : assert ( ! h2o_linklist_is_linked ( & req -> data . get . message . link ) ) ; h2o_mem_set_secure ( req -> data . get . value . base , 0 , req -> data . get . value . len ) ; free ( req -> data . get . value . base ) ; break ; case REQ_TYPE_SET : h2o_mem_set_secure ( req -> data . set . value . base , 0 , req -> data . set . value . len ) ; free ( req -> data . set . value . base ) ; break ; case REQ_TYPE_DELETE : break ; default : assert ( ! "FIXME" ) ; break ; } } 