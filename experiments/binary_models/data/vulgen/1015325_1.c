static void mdl_dump ( const struct uniphier_ddrphy_param * param ) { printf ( "\n--- Master Delay Line ---\n" ) ; printf ( "          IPRD TPRD MDLD\n" ) ; dump_loop ( param , & __mdl_dump ) ; } { int ofst = PHY_ # # x ; void __iomem * reg = phy_base + ofst ; printf ( "%3d: %-10s: %08x : %08x\n" , ofst >> PHY_REG_SHIFT , # x , ptr_to_uint ( reg ) , readl ( reg ) ) ; } { int ofst = PHY_DX_BASE + PHY_DX_STRIDE * ( dx ) + PHY_DX_ # # x ; void __iomem * reg = phy_base + ofst ; printf ( "%3d: DX%d%-7s: %08x : %08x\n" , ofst >> PHY_REG_SHIFT , ( dx ) , # x , ptr_to_uint ( reg ) , readl ( reg ) ) ; } static void reg_dump ( const struct uniphier_ddrphy_param * param ) { void __iomem * phy_base ; int phy , dx ; printf ( "\n--- DDR PHY registers ---\n" ) ; for ( phy = 0 ; phy < param -> nr_phy ; phy ++ ) { phy_base = ioremap ( param -> phy [ phy ] . base , SZ_4K ) ; printf ( "== PHY%d (base: %08x) ==\n" , phy , ptr_to_uint ( phy_base ) ) ; printf ( " No: Name      : Address  : Data\n" ) ; REG_DUMP ( RIDR ) ; REG_DUMP ( PIR ) ; REG_DUMP ( PGCR0 ) ; REG_DUMP ( PGCR1 ) ; REG_DUMP ( PGSR0 ) ; REG_DUMP ( PGSR1 ) ; REG_DUMP ( PLLCR ) ; REG_DUMP ( PTR0 ) ; REG_DUMP ( PTR1 ) ; REG_DUMP ( PTR2 ) ; REG_DUMP ( PTR3 ) ; REG_DUMP ( PTR4 ) ; REG_DUMP ( ACMDLR ) ; REG_DUMP ( ACBDLR ) ; REG_DUMP ( DXCCR ) ; REG_DUMP ( DSGCR ) ; REG_DUMP ( DCR ) ; REG_DUMP ( DTPR0 ) ; REG_DUMP ( DTPR1 ) ; REG_DUMP ( DTPR2 ) ; REG_DUMP ( MR0 ) ; REG_DUMP ( MR1 ) ; REG_DUMP ( MR2 ) ; REG_DUMP ( MR3 ) ; for ( dx = 0 ; dx < param -> phy [ phy ] . nr_dx ; dx ++ ) { DX_REG_DUMP ( dx , GCR ) ; DX_REG_DUMP ( dx , GTR ) ; } } } 