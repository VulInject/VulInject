struct dpu_hw_mixer * dpu_hw_lm_init ( enum dpu_lm idx , void __iomem * addr , const struct dpu_mdss_cfg * m ) { struct dpu_hw_mixer * c ; const struct dpu_lm_cfg * cfg ; c = kzalloc ( sizeof ( * c ) , GFP_KERNEL ) ; if ( ! c ) { return ERR_PTR ( - ENOMEM ) ; } cfg = _lm_offset ( idx , m , addr , & c -> hw ) ; if ( IS_ERR_OR_NULL ( cfg ) ) { return ERR_PTR ( - EINVAL ) ; } c -> idx = idx ; c -> cap = cfg ; _setup_mixer_ops ( m , & c -> ops , c -> cap -> features ) ; return c ; } 