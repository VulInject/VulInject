static int bgpio_setup_direction ( struct gpio_chip * gc , void __iomem * dirout , void __iomem * dirin , unsigned long flags ) { if ( dirout && dirin ) { return - EINVAL ; } if ( dirout ) { gc -> reg_dir = dirout ; gc -> direction_output = bgpio_dir_out ; gc -> direction_input = bgpio_dir_in ; gc -> get_direction = bgpio_get_dir ; } if ( dirin ) { gc -> reg_dir = dirin ; gc -> direction_output = bgpio_dir_out_inv ; gc -> direction_input = bgpio_dir_in_inv ; gc -> get_direction = bgpio_get_dir_inv ; } else { else { gc -> direction_output = bgpio_simple_dir_out ; } gc -> direction_input = bgpio_simple_dir_in ; } return 0 ; } 