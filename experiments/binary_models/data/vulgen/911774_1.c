static void surface3_spi_process_touch ( struct surface3_ts_data * ts_data , u8 * data ) { u16 timestamp ; timestamp = get_unaligned_le16 ( & data [ 15 ] ) ; for ( i = 0 ; i < 13 ; i ++ ) { struct surface3_ts_data_finger * finger ; finger = ( surface3_ts_data_finger * ) & data [ 17 + i * sizeof ( surface3_ts_data_finger ) ] ; if ( finger -> status & 0x10 ) { break ; } surface3_spi_report_touch ( ts_data , finger ) ; } input_mt_sync_frame ( ts_data -> input_dev ) ; input_sync ( ts_data -> input_dev ) ; } 