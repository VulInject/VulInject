bool test_r_buf_slice_too_big ( void ) { RBuffer * buf = r_buf_new_with_bytes ( ( ut8 * ) "AAAA" , 4 ) ; RBuffer * sl = r_buf_new_slice ( buf , 1 , 5 ) ; ut64 sz = r_buf_size ( sl ) ; mu_assert_eq ( sz , 3 , "the size cannot be more than the original buffer" ) ; r_buf_resize ( sl , 1 ) ; sz = r_buf_size ( sl ) ; mu_assert_eq ( sz , 1 , "it should be shrinked to 1 byte" ) ; mu_assert ( "the resize should be successful" , res ) ; sz = r_buf_size ( sl ) ; mu_assert_eq ( sz , 3 , "but it should just use the biggest value" ) ; r_buf_free ( sl ) ; r_buf_free ( buf ) ; mu_end ; } 