static int virNetDevBridgeCmd ( const char * brname , u_long op , void * arg , size_t argsize ) { struct ifdrv ifd ; VIR_AUTOCLOSE s = - 1 ; memset ( & ifd , 0 , sizeof ( ifd ) ) ; if ( virStrcpyStatic ( ifd . ifd_name , brname ) < 0 ) { virReportSystemError ( ERANGE , _ ( "Network interface name '%s' is too long" ) , brname ) ; return - 1 ; } ifd . ifd_cmd = op ; ifd . ifd_len = argsize ; ifd . ifd_data = arg ; return ioctl ( s , SIOCSDRVSPEC , & ifd ) ; } 