static unsigned long drb_to_nr_pages ( u16 drbs [ X38_CHANNELS ] [ X38_RANKS_PER_CHANNEL ] , bool stacked , int channel , int rank ) { int n ; n = drbs [ channel ] [ rank ] ; if ( rank > 0 ) { n -= drbs [ channel ] [ rank - 1 ] ; } if ( stacked && ( channel == 1 ) && drbs [ channel ] [ rank ] == drbs [ channel ] [ X38_RANKS_PER_CHANNEL - 1 ] ) { n -= drbs [ 0 ] [ X38_RANKS_PER_CHANNEL - 1 ] ; } return n ; } 