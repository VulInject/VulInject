close_path ( ) { struct stroker * stroker = closure ; cairo_status_t status ; status = line_to ( stroker , & stroker -> first_point ) ; if ( stroker -> has_first_face && stroker -> has_current_face ) { outer_close ( stroker , & stroker -> current_face , & stroker -> first_face ) ; inner_close ( stroker , & stroker -> current_face , & stroker -> first_face ) ; * _cairo_contour_first_point ( & stroker -> ccw . contour ) = * _cairo_contour_last_point ( & stroker -> ccw . contour ) ; * _cairo_contour_first_point ( & stroker -> cw . contour ) = * _cairo_contour_last_point ( & stroker -> cw . contour ) ; _cairo_polygon_add_contour ( stroker -> polygon , & stroker -> cw . contour ) ; _cairo_polygon_add_contour ( stroker -> polygon , & stroker -> ccw . contour ) ; { FILE * file = fopen ( "contours.txt" , "a" ) ; _cairo_debug_print_contour ( file , & stroker -> path ) ; _cairo_debug_print_contour ( file , & stroker -> cw . contour ) ; _cairo_debug_print_contour ( file , & stroker -> ccw . contour ) ; fclose ( file ) ; _cairo_contour_reset ( & stroker -> path ) ; } _cairo_contour_reset ( & stroker -> cw . contour ) ; _cairo_contour_reset ( & stroker -> ccw . contour ) ; } else { add_caps ( stroker ) ; } stroker -> has_initial_sub_path = FALSE ; stroker -> has_first_face = FALSE ; stroker -> has_current_face = FALSE ; return CAIRO_STATUS_SUCCESS ; } 