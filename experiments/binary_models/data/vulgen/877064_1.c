static void __init of_parse_and_init_cpus ( void ) { struct device_node * dn ; for_each_node_by_type ( , "cpu" ) { u64 hwid = of_get_cpu_mpidr ( dn ) ; if ( hwid == INVALID_HWID ) { next } if ( is_mpidr_duplicate ( cpu_count , hwid ) ) { pr_err ( "%s: duplicate cpu reg properties in the DT\n" , dn -> full_name ) ; next } if ( hwid == cpu_logical_map ( 0 ) ) { if ( bootcpu_valid ) { pr_err ( "%s: duplicate boot cpu reg property in DT\n" , dn -> full_name ) ; next } bootcpu_valid = true ; early_map_cpu_to_node ( 0 , of_node_to_nid ( dn ) ) ; continue ; } pr_debug ( "cpu logical map 0x%llx\n" , hwid ) ; cpu_logical_map ( cpu_count ) = hwid ; early_map_cpu_to_node ( cpu_count , of_node_to_nid ( dn ) ) ; next cpu_count ++ ; } } 