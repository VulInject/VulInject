char * test_file_path ( const char * file ) { char * base ; char * path = NULL ; const char * envs [ ] { "C_TAP_BUILD" "C_TAP_SOURCE" NULL } ; ; int i ; for ( i = 0 ; envs [ i ] != NULL ; i ++ ) { base = getenv ( envs [ i ] ) ; if ( base == NULL ) { continue ; } path = concat ( base , "/" , file , ( const char * ) 0 ) ; if ( access ( path , R_OK ) == 0 ) { break ; } path = NULL ; } return path ; } 