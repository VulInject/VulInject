static int backwards_compatibility ( const char * module , CONFIG_NODE * node , CONFIG_NODE * parent ) { const char * new_key , * new_module ; CONFIG_NODE * new_node ; char * new_value ; new_value = NULL ; new_key = NULL ; new_module = NULL ; if ( g_strcmp0 ( module , "fe-text" ) == 0 ) { if ( g_ascii_strcasecmp ( node -> key , "term_type" ) == 0 || g_ascii_strcasecmp ( node -> key , "term_charset" ) == 0 ) { new_module = "fe-common/core" ; new_key = "term_charset" ; new_value = ! is_valid_charset ( node -> value ) ?NULL : g_strdup ( node -> value ) ; new_node = iconfig_node_traverse ( "settings" , FALSE ) ; new_node = new_node == NULL ?NULL : iconfig_node_section ( new_node , new_module , - 1 ) ; config_node_set_str ( mainconfig , new_node , new_key , new_value ) ; config_node_set_str ( mainconfig , parent , node -> key , NULL ) ; config_changed = TRUE ; return new_key != NULL ; } if ( g_ascii_strcasecmp ( node -> key , "actlist_moves" ) == 0 && node -> value != NULL && g_ascii_strcasecmp ( node -> value , "yes" ) == 0 ) { config_node_set_str ( mainconfig , parent , "actlist_sort" , "recent" ) ; config_node_set_str ( mainconfig , parent , node -> key , NULL ) ; config_changed = TRUE ; return TRUE ; } } if ( g_strcmp0 ( module , "core" ) == 0 && g_strcmp0 ( node -> key , "resolve_reverse_lookup" ) == 0 ) { config_node_set_str ( mainconfig , parent , node -> key , NULL ) ; config_changed = TRUE ; return TRUE ; } return new_key != NULL ; } 