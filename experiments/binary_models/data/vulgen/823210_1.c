static void print_direc ( struct print_inf * inf , char * format , unsigned int fmt_length , int field_width , int precision , const char * argument ) { long long llv ; char saved ; char * have_prec , * have_width ; saved = format [ fmt_length ] ; format [ fmt_length ] = '\0' ; have_prec = strstr ( format , ".*" ) ; have_width = strchr ( format , '*' ) ; errno = 0 ; switch ( format [ fmt_length - 1 ] ) { case 'c' : printf_str ( inf , format , * argument ) ; break ; case 'd' : case 'i' : llv = my_xstrtoll ( skip_whitespace ( argument ) ) ; print_long if ( ! have_width ) { if ( ! have_prec ) { printf_str ( inf , format , llv ) ; } else { printf_str ( inf , format , precision , llv ) ; } } else { if ( ! have_prec ) { printf_str ( inf , format , field_width , llv ) ; } else { printf_str ( inf , format , field_width , precision , llv ) ; } } break ; case 'o' : case 'u' : case 'x' : case 'X' : llv = my_xstrtoull ( skip_whitespace ( argument ) ) ; print_long case 's' : if ( sizeof ( argument ) == sizeof ( llv ) ) { llv = ( long long ) ( ptrdiff_t ) argument ; print_long } else { if ( ! have_width ) { if ( ! have_prec ) { printf_str ( inf , format , argument , argument , argument ) ; } else { printf_str ( inf , format , precision , argument , argument ) ; } } else { if ( ! have_prec ) { printf_str ( inf , format , field_width , argument , argument ) ; } else { printf_str ( inf , format , field_width , precision , argument ) ; } } break ; } break ; } format [ fmt_length ] = saved ; } 