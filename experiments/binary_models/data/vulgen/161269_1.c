static void blogic_dealloc_ccb ( struct blogic_ccb * ccb , int dma_unmap ) { struct blogic_adapter * adapter = ccb -> adapter ; if ( dma_unmap ) { dma_unmap_single ( & adapter -> pci_device -> dev , ccb -> sensedata , ccb -> sense_datalen , DMA_FROM_DEVICE ) ; } ccb -> command = NULL ; ccb -> status = BLOGIC_CCB_FREE ; ccb -> next = adapter -> free_ccbs ; adapter -> free_ccbs = ccb ; } 