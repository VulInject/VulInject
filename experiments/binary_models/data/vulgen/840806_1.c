static void profile_discard_flip_buffers ( void ) { int i , cpu ; mutex_lock ( & profile_flip_mutex ) ; i = per_cpu ( cpu_profile_flip , get_cpu ( ) ) ; put_cpu ( ) ; on_each_cpu ( __profile_flip_buffers , NULL , 1 ) ; for_each_online_cpu ( ) { struct profile_hit * hits = per_cpu ( cpu_profile_hits , cpu ) [ i ] ; memset ( hits , 0 , NR_PROFILE_HIT * sizeof ( profile_hit ) ) ; } } 