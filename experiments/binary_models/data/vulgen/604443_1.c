static s32 e1000_init_phy_params_pchlan ( struct e1000_hw * hw ) { struct e1000_phy_info * phy = & hw -> phy ; s32 ret_val ; phy -> addr = 1 ; phy -> reset_delay_us = 100 ; phy -> ops . set_page = e1000_set_page_igp ; phy -> ops . read_reg = e1000_read_phy_reg_hv ; phy -> ops . read_reg_locked = e1000_read_phy_reg_hv_locked ; phy -> ops . read_reg_page = e1000_read_phy_reg_page_hv ; phy -> ops . set_d0_lplu_state = e1000_set_lplu_state_pchlan ; phy -> ops . set_d3_lplu_state = e1000_set_lplu_state_pchlan ; phy -> ops . write_reg = e1000_write_phy_reg_hv ; phy -> ops . write_reg_locked = e1000_write_phy_reg_hv_locked ; phy -> ops . write_reg_page = e1000_write_phy_reg_page_hv ; phy -> ops . power_up = e1000_power_up_phy_copper ; phy -> ops . power_down = e1000_power_down_phy_copper_ich8lan ; phy -> autoneg_mask = AUTONEG_ADVERTISE_SPEED_DEFAULT ; phy -> id = e1000_phy_unknown ; ret_val = e1000_init_phy_workarounds_pchlan ( hw ) ; if ( ret_val ) { return ret_val ; } if ( phy -> id == e1000_phy_unknown ) { switch ( hw -> mac . type ) { default : ret_val = e1000e_get_phy_id ( hw ) ; if ( ret_val ) { return ret_val ; } fallthrough ; case e1000_pch2lan : case e1000_pch_lpt : case e1000_pch_spt : case e1000_pch_cnp : case e1000_pch_tgp : case e1000_pch_adp : case e1000_pch_mtp : case e1000_pch_lnp : case e1000_pch_ptp : ret_val = e1000_set_mdio_slow_mode_hv ( hw ) ; if ( ret_val ) { return ret_val ; } ret_val = e1000e_get_phy_id ( hw ) ; if ( ret_val ) { return ret_val ; } break ; } } phy -> type = e1000e_get_phy_type_from_id ( phy -> id ) ; switch ( phy -> type ) { case e1000_phy_82577 : case e1000_phy_82579 : case e1000_phy_i217 : phy -> ops . check_polarity = e1000_check_polarity_82577 ; phy -> ops . force_speed_duplex = e1000_phy_force_speed_duplex_82577 ; phy -> ops . get_cable_length = e1000_get_cable_length_82577 ; phy -> ops . get_info = e1000_get_phy_info_82577 ; phy -> ops . commit = e1000e_phy_sw_reset ; break ; case e1000_phy_82578 : phy -> ops . check_polarity = e1000_check_polarity_m88 ; phy -> ops . force_speed_duplex = e1000e_phy_force_speed_duplex_m88 ; phy -> ops . get_cable_length = e1000e_get_cable_length_m88 ; phy -> ops . get_info = e1000e_get_phy_info_m88 ; break ; default : ret_val = - E1000_ERR_PHY ; break ; } return ret_val ; } 