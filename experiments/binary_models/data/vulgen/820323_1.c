PHY_SetBBReg ( pDM_Odm -> Adapter , rTx_IQK_PI_A , bMaskDWord , 0x821303ea ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rRx_IQK_PI_A , bMaskDWord , 0x28110000 ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rTx_IQK_PI_B , bMaskDWord , 0x82110000 ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rRx_IQK_PI_B , bMaskDWord , 0x28110000 ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rIQK_AGC_Rsp , bMaskDWord , 0x00462911 ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rFPGA0_IQK , bMaskH3Bytes , 0x808000 ) ; if ( configPathB || ( RF_Path == 0 ) ) { PHY_SetBBReg ( pDM_Odm -> Adapter , 0x948 , bMaskDWord , 0x00000000 ) ; } else { PHY_SetBBReg ( pDM_Odm -> Adapter , 0x948 , bMaskDWord , 0x00000280 ) ; } PHY_SetBBReg ( pDM_Odm -> Adapter , 0x764 , bMaskDWord , 0x00000800 ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rIQK_AGC_Pts , bMaskDWord , 0xf9000000 ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rIQK_AGC_Pts , bMaskDWord , 0xf8000000 ) ; mdelay ( IQK_DELAY_TIME_8723B ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , 0x948 , bMaskDWord , Path_SEL_BB ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , 0x764 , bMaskDWord , 0x00001800 ) ; PHY_SetBBReg ( pDM_Odm -> Adapter , rFPGA0_IQK , bMaskH3Bytes , 0x000000 ) ; regEAC = PHY_QueryBBReg ( pDM_Odm -> Adapter , rRx_Power_After_IQK_A_2 , bMaskDWord ) ; regE94 = PHY_QueryBBReg ( pDM_Odm -> Adapter , rTx_Power_Before_IQK_A , bMaskDWord ) ; regE9C = PHY_QueryBBReg ( pDM_Odm -> Adapter , rTx_Power_After_IQK_A , bMaskDWord ) ; ODM_RT_TRACE ( pDM_Odm , ODM_COMP_CALIBRATION , ODM_DBG_LOUD , ( "0xeac = 0x%x\n" , regEAC ) ) ; ODM_RT_TRACE ( pDM_Odm , ODM_COMP_CALIBRATION , ODM_DBG_LOUD , ( "0xe94 = 0x%x, 0xe9c = 0x%x\n" , regE94 , regE9C ) ) ; ODM_RT_TRACE ( pDM_Odm , ODM_COMP_CALIBRATION , ODM_DBG_LOUD , ( "0xe90(before IQK) = 0x%x, 0xe98(afer IQK) = 0x%x\n" , PHY_QueryBBReg ( pDM_Odm -> Adapter , 0xe90 , bMaskDWord ) , PHY_QueryBBReg ( pDM_Odm -> Adapter , 0xe98 , bMaskDWord ) ) ) ; tmp = ( regE9C & 0x03FF0000 ) >> 16 ; if ( ! ( regEAC & BIT28 ) && ( ( ( regE94 & 0x03FF0000 ) >> 16 ) != 0x142 ) && ( ( ( regE9C & 0x03FF0000 ) >> 16 ) != 0x42 ) && ( ( ( regE94 & 0x03FF0000 ) >> 16 ) < 0x110 ) && ( ( ( regE94 & 0x03FF0000 ) >> 16 ) > 0xf0 ) && ( tmp < 0xf ) ) { result |= 0x01 ; } else { return result ; } return result ; 