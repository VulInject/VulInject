static int nfs_file_fsync_commit ( struct file * file , int datasync ) { struct inode * inode = file_inode ( file ) ; int ret , ret2 ; dprintk ( "NFS: fsync file(%pD2) datasync %d\n" , file , datasync ) ; ret = nfs_commit_inode ( inode , FLUSH_SYNC ) ; ret2 = file_check_and_advance_wb_err ( file ) ; if ( ret2 < 0 ) { return ret2 ; } return ret ; } 