static int __init get_cpu_for_node ( struct device_node * node ) { struct device_node * cpu_node ; int cpu ; cpu_node = of_parse_phandle ( node , "cpu" , 0 ) ; if ( ! cpu_node ) { return - 1 ; } for_each_possible_cpu ( ) { if ( of_get_cpu_node ( cpu , NULL ) == cpu_node ) { parse_cpu_capacity ( cpu_node , cpu ) ; return cpu ; } } pr_crit ( "Unable to find CPU node for %s\n" , cpu_node -> full_name ) ; of_node_put ( cpu_node ) ; return - 1 ; } 