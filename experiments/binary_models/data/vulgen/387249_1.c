mpz_mul ( , , ) { int sign ; mp_size_t un , vn , rn ; mpz_t t ; mp_ptr tp ; un = u -> _mp_size ; vn = v -> _mp_size ; if ( un == 0 || vn == 0 ) { r -> _mp_size = 0 ; return ; } sign = ( un ^ vn ) < 0 ; un = GMP_ABS ( un ) ; vn = GMP_ABS ( vn ) ; mpz_init2 ( t , ( un + vn ) * GMP_LIMB_BITS ) ; tp = t -> _mp_d ; if ( un >= vn ) { mpn_mul ( tp , u -> _mp_d , un , v -> _mp_d , vn ) ; } else { mpn_mul ( tp , v -> _mp_d , vn , u -> _mp_d , un ) ; } rn = un + vn ; rn -= tp [ rn - 1 ] == 0 ; t -> _mp_size = sign ?- rn : rn ; mpz_clear ( t ) ; } 