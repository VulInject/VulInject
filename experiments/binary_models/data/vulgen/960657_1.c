static void tegra124_usb3_port_disable ( struct tegra_xusb_port * port ) { struct tegra_xusb_padctl * padctl = port -> padctl ; u32 value ; value = padctl_readl ( padctl , XUSB_PADCTL_ELPG_PROGRAM ) ; padctl_writel ( padctl , value , XUSB_PADCTL_ELPG_PROGRAM ) ; usleep_range ( 100 , 200 ) ; value = padctl_readl ( padctl , XUSB_PADCTL_ELPG_PROGRAM ) ; value |= XUSB_PADCTL_ELPG_PROGRAM_SSPX_ELPG_CLAMP_EN ( port -> index ) ; padctl_writel ( padctl , value , XUSB_PADCTL_ELPG_PROGRAM ) ; usleep_range ( 250 , 350 ) ; value = padctl_readl ( padctl , XUSB_PADCTL_ELPG_PROGRAM ) ; value |= XUSB_PADCTL_ELPG_PROGRAM_SSPX_ELPG_VCORE_DOWN ( port -> index ) ; padctl_writel ( padctl , value , XUSB_PADCTL_ELPG_PROGRAM ) ; value = padctl_readl ( padctl , XUSB_PADCTL_SS_PORT_MAP ) ; value &= ~ XUSB_PADCTL_SS_PORT_MAP_PORTX_MAP_MASK ( port -> index ) ; value |= XUSB_PADCTL_SS_PORT_MAP_PORTX_MAP ( port -> index , 0x7 ) ; padctl_writel ( padctl , value , XUSB_PADCTL_SS_PORT_MAP ) ; } 