void ForgetBackgroundWorker ( slist_mutable_iter * cur ) { RegisteredBgWorker * rw ; BackgroundWorkerSlot * slot ; rw = slist_container ( RegisteredBgWorker , rw_lnode , cur -> cur ) ; Assert ( rw -> rw_shmem_slot < max_worker_processes ) ; slot = & BackgroundWorkerData -> slot [ rw -> rw_shmem_slot ] ; Assert ( slot -> in_use ) ; if ( ( rw -> rw_worker . bgw_flags & BGWORKER_CLASS_PARALLEL ) != 0 ) { BackgroundWorkerData -> parallel_terminate_count ++ ; } pg_memory_barrier ( ) ; slot -> in_use = false ; ereport ( DEBUG1 , ( errmsg_internal ( "unregistering background worker \"%s\"" , rw -> rw_worker . bgw_name ) ) ) ; free ( rw ) ; } 