static int hynix_nand_init ( struct nand_chip * chip ) { struct hynix_nand * hynix ; int ret ; if ( ! nand_is_slc ( chip ) ) { chip -> bbt_options |= NAND_BBT_SCANLASTPAGE ; } else { chip -> bbt_options |= NAND_BBT_SCAN2NDPAGE ; } hynix = kzalloc ( sizeof ( * hynix ) , GFP_KERNEL ) ; nand_set_manufacturer_data ( chip , hynix ) ; ret = hynix_nand_rr_init ( chip ) ; if ( ret ) { hynix_nand_cleanup ( chip ) ; } return ret ; } 