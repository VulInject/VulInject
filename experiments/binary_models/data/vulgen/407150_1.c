static int otx2_pf_flr_init ( struct otx2_nic * pf , int num_vfs ) { int vf ; pf -> flr_wq = alloc_workqueue ( "otx2_pf_flr_wq" , WQ_UNBOUND | WQ_HIGHPRI , 1 ) ; if ( ! pf -> flr_wq ) { return - ENOMEM ; } pf -> flr_wrk = devm_kcalloc ( pf -> dev , num_vfs , sizeof ( flr_work ) , GFP_KERNEL ) ; if ( ! pf -> flr_wrk ) { return - ENOMEM ; } for ( vf = 0 ; vf < num_vfs ; vf ++ ) { pf -> flr_wrk [ vf ] . pf = pf ; INIT_WORK ( & pf -> flr_wrk [ vf ] . work , otx2_flr_handler ) ; } return 0 ; } 