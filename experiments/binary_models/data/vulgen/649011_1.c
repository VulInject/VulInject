static void decode_audio_s16 ( int16_t * out , const uint8_t * buf , int buf_size , int channels ) { int ch ; const uint8_t * buf_end = buf + buf_size ; int predictor [ 2 ] ; int st = channels - 1 ; for ( ch = 0 ; ch < channels ; ch ++ ) { predictor [ ch ] = ( int16_t ) AV_RL16 ( buf ) ; buf += 2 ; * out ++ = predictor [ ch ] ; } ch = 0 ; while ( buf < buf_end ) { uint8_t b = * buf ++ ; if ( b & 0x80 ) { predictor [ ch ] -= vmdaudio_table [ b & 0x7F ] ; } else { predictor [ ch ] += vmdaudio_table [ b ] ; } * out ++ = predictor [ ch ] ; ch ^= st ; } } 