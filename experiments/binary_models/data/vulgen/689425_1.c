static void ExecPushExprSetupSteps ( ExprState * state , ExprSetupInfo * info ) { ExprEvalStep scratch = { 0 } ; ListCell * lc ; scratch . resvalue = NULL ; scratch . resnull = NULL ; if ( info -> last_inner > 0 ) { scratch . opcode = EEOP_INNER_FETCHSOME ; scratch . d . fetch . last_var = info -> last_inner ; scratch . d . fetch . fixed = false ; scratch . d . fetch . kind = NULL ; scratch . d . fetch . known_desc = NULL ; if ( ExecComputeSlotInfo ( state , & scratch ) ) { ExprEvalPushStep ( state , & scratch ) ; } } if ( info -> last_outer > 0 ) { scratch . opcode = EEOP_OUTER_FETCHSOME ; scratch . d . fetch . last_var = info -> last_outer ; scratch . d . fetch . fixed = false ; scratch . d . fetch . kind = NULL ; scratch . d . fetch . known_desc = NULL ; if ( ExecComputeSlotInfo ( state , & scratch ) ) { ExprEvalPushStep ( state , & scratch ) ; } } ( lc info -> multiexpr_subplans ; ) { SubPlan * subplan = ( SubPlan * ) lfirst ( lc ) ; SubPlanState * sstate ; Assert ( subplan -> subLinkType == MULTIEXPR_SUBLINK ) ; if ( ! state -> parent ) { elog ( ERROR , "SubPlan found with no parent plan" ) ; } sstate = ExecInitSubPlan ( subplan , state -> parent ) ; state -> parent -> subPlan = lappend ( state -> parent -> subPlan , sstate ) ; scratch . opcode = EEOP_SUBPLAN ; scratch . d . subplan . sstate = sstate ; scratch . resvalue = & state -> resvalue ; scratch . resnull = & state -> resnull ; ExprEvalPushStep ( state , & scratch ) ; } } 