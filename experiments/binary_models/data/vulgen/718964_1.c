START_TEST ( ) { M_json_node_t * json ; char * out ; M_json_error_t error ; size_t error_line ; size_t error_pos ; size_t i ; for ( i = 0 ; check_json_reader_flags_data [ i ] . data != NULL ; i ++ ) { json = M_json_read ( check_json_reader_flags_data [ i ] . data , M_str_len ( check_json_reader_flags_data [ i ] . data ) , check_json_reader_flags_data [ i ] . reader_flags , NULL , & error , & error_line , & error_pos ) ; if ( check_json_reader_flags_data [ i ] . will_error == M_TRUE ) { ck_assert_msg ( json == NULL , "Invalid JSON was parsed (%zu): %s" , i , check_json_reader_flags_data [ i ] . data ) ; if ( check_json_reader_flags_data [ i ] . error_line != 0 && check_json_reader_flags_data [ i ] . error_pos != 0 ) { ck_assert_msg ( check_json_reader_flags_data [ i ] . error_line == error_line && check_json_reader_flags_data [ i ] . error_pos == error_pos , "Parse error (%zu) '%s' was not found at expected location. Found. %zu:%zu. Expected: %zu:%zu" , i , check_json_reader_flags_data [ i ] . data , error_line , error_pos , check_json_reader_flags_data [ i ] . error_line , check_json_reader_flags_data [ i ] . error_pos ) ; } } else { ck_assert_msg ( json != NULL , "JSON (%zu) '%s' could not be parsed: %d" , i , check_json_reader_flags_data [ i ] . data , error ) ; } M_json_node_destroy ( json ) ; } } END_TEST "  \"store\": {" "    \"book\": [" "      {" "        \"category\": \"reference\"," "        \"author\": \"Nigel Rees\"," "        \"title\": \"Sayings of the Century\"," "        \"price\": 8.95" "      }," "      {" "        \"category\": \"fiction\"," "        \"author\": \"Evelyn Waugh\"," "        \"title\": \"Sword of Honour\"," "        \"price\": 12.99" "      }," "      {" "        \"category\": \"fiction\"," "        \"author\": \"Herman Melville\"," "        \"title\": \"Moby Dick\"," "        \"isbn\": \"0-553-21311-3\"," "        \"price\": 8.99" "      }," "      {" "        \"category\": \"fiction\"," "        \"author\": \"J. R. R. Tolkien\"," "        \"title\": \"The Lord of the Rings\"," "        \"isbn\": \"0-395-19395-8\"," "        \"price\": 22.99" "      }" "    ]," "    \"bicycle\": {" "      \"color\": \"red\"," "      \"price\": 19.95" "    }" "  }" "}" static { const char * search size_t num_matches M_json_type_t type } check_json_jsonpath_book_data [ ] = { } ; 