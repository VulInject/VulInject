void iwl_trans_pcie_gen2_fw_alive ( struct iwl_trans * trans , u32 scd_addr ) { struct iwl_trans_pcie * trans_pcie = IWL_TRANS_GET_PCIE_TRANS ( trans ) ; iwl_pcie_reset_ict ( trans ) ; memset ( trans -> txqs . queue_stopped , 0 , sizeof ( trans -> txqs . queue_stopped ) ) ; memset ( trans -> txqs . queue_used , 0 , sizeof ( trans -> txqs . queue_used ) ) ; if ( trans -> trans_cfg -> device_family >= IWL_DEVICE_FAMILY_AX210 ) { iwl_pcie_ctxt_info_gen3_free ( trans , true ) ; } else { iwl_pcie_ctxt_info_free ( trans ) ; } iwl_enable_interrupts ( trans ) ; mutex_lock ( & trans_pcie -> mutex ) ; iwl_pcie_get_rf_name ( trans ) ; mutex_unlock ( & trans_pcie -> mutex ) ; } 