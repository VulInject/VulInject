static void blinkm_remove ( struct i2c_client * client ) { struct blinkm_data * data = i2c_get_clientdata ( client ) ; int ret = 0 ; int i ; for ( i = 0 ; i < 3 ; i ++ ) { led_classdev_unregister ( & data -> blinkm_leds [ i ] . led_cdev ) ; } data -> next_red = 0x00 ; data -> next_green = 0x00 ; data -> next_blue = 0x00 ; ret = blinkm_transfer_hw ( client , BLM_FADE_RGB ) ; if ( ret < 0 ) { dev_err ( & client -> dev , "Failure in blinkm_remove ignored. Continuing.\n" ) ; } data -> next_hue = 0x00 ; data -> next_saturation = 0x00 ; data -> next_brightness = 0x00 ; ret = blinkm_transfer_hw ( client , BLM_FADE_HSB ) ; if ( ret < 0 ) { dev_err ( & client -> dev , "Failure in blinkm_remove ignored. Continuing.\n" ) ; } data -> next_red = 0xff ; ret = blinkm_transfer_hw ( client , BLM_GO_RGB ) ; if ( ret < 0 ) { dev_err ( & client -> dev , "Failure in blinkm_remove ignored. Continuing.\n" ) ; } data -> next_red = 0x00 ; ret = blinkm_transfer_hw ( client , BLM_FADE_RGB ) ; sysfs_remove_group ( & client -> dev . kobj , & blinkm_group ) ; } 