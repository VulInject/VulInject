gimp_prefs_box_init ( ) { GimpPrefsBoxPrivate * private ; GtkTreeViewColumn * column ; GtkCellRenderer * cell ; GtkTreeSelection * sel ; GtkWidget * frame ; GtkWidget * hbox ; GtkWidget * ebox ; GtkWidget * vbox ; box -> priv = gimp_prefs_box_get_instance_private ( box ) ; private = box -> priv ; private -> tree_icon_size = GTK_ICON_SIZE_BUTTON ; private -> page_icon_size = GTK_ICON_SIZE_DIALOG ; gtk_orientable_set_orientation ( GTK_ORIENTABLE ( box ) , GTK_ORIENTATION_HORIZONTAL ) ; gtk_box_set_spacing ( GTK_BOX ( box ) , 12 ) ; frame = gtk_scrolled_window_new ( NULL , NULL ) ; gtk_scrolled_window_set_shadow_type ( GTK_SCROLLED_WINDOW ( frame ) , GTK_SHADOW_IN ) ; gtk_scrolled_window_set_policy ( GTK_SCROLLED_WINDOW ( frame ) , GTK_POLICY_NEVER , GTK_POLICY_AUTOMATIC ) ; gtk_box_pack_start ( GTK_BOX ( box ) , frame , FALSE , FALSE , 0 ) ; gtk_widget_show ( frame ) ; private -> store = gtk_tree_store_new ( 7 , G_TYPE_STRING , G_TYPE_INT , G_TYPE_STRING , G_TYPE_STRING , G_TYPE_INT , G_TYPE_STRING , G_TYPE_STRING ) ; private -> tree_view = gtk_tree_view_new_with_model ( GTK_TREE_MODEL ( private -> store ) ) ; gtk_tree_view_set_headers_visible ( GTK_TREE_VIEW ( private -> tree_view ) , FALSE ) ; column = gtk_tree_view_column_new ( ) ; cell = gtk_cell_renderer_pixbuf_new ( ) ; gtk_tree_view_column_pack_start ( column , cell , FALSE ) ; gtk_tree_view_column_set_attributes ( column , cell , "icon-name" , COLUMN_TREE_ICON_NAME , "stock-size" , COLUMN_TREE_ICON_SIZE , NULL ) ; cell = gtk_cell_renderer_text_new ( ) ; gtk_tree_view_column_pack_start ( column , cell , TRUE ) ; gtk_tree_view_column_set_attributes ( column , cell , "text" , COLUMN_TREE_LABEL , NULL ) ; gtk_tree_view_append_column ( GTK_TREE_VIEW ( private -> tree_view ) , column ) ; gtk_container_add ( GTK_CONTAINER ( frame ) , private -> tree_view ) ; gtk_widget_show ( private -> tree_view ) ; vbox = gtk_box_new ( GTK_ORIENTATION_VERTICAL , 12 ) ; gtk_box_pack_start ( GTK_BOX ( box ) , vbox , TRUE , TRUE , 0 ) ; gtk_widget_show ( vbox ) ; ebox = gtk_event_box_new ( ) ; gtk_widget_set_state_flags ( ebox , GTK_STATE_FLAG_SELECTED , TRUE ) ; gtk_style_context_add_class ( gtk_widget_get_style_context ( ebox ) , GTK_STYLE_CLASS_VIEW ) ; gtk_box_pack_start ( GTK_BOX ( vbox ) , ebox , FALSE , TRUE , 0 ) ; gtk_widget_show ( ebox ) ; hbox = gtk_box_new ( GTK_ORIENTATION_HORIZONTAL , 6 ) ; gtk_container_set_border_width ( GTK_CONTAINER ( hbox ) , 6 ) ; gtk_container_add ( GTK_CONTAINER ( ebox ) , hbox ) ; gtk_widget_show ( hbox ) ; private -> label = gtk_label_new ( NULL ) ; gtk_widget_set_state_flags ( private -> label , GTK_STATE_FLAG_SELECTED , TRUE ) ; gtk_label_set_xalign ( GTK_LABEL ( private -> label ) , 0.0 ) ; gimp_label_set_attributes ( GTK_LABEL ( private -> label ) , PANGO_ATTR_SCALE , PANGO_SCALE_LARGE , PANGO_ATTR_WEIGHT , PANGO_WEIGHT_BOLD , - 1 ) ; gtk_box_pack_start ( GTK_BOX ( hbox ) , private -> label , FALSE , FALSE , 0 ) ; gtk_widget_show ( private -> label ) ; private -> image = gtk_image_new ( ) ; gtk_widget_set_state_flags ( private -> image , GTK_STATE_FLAG_SELECTED , TRUE ) ; gtk_box_pack_end ( GTK_BOX ( hbox ) , private -> image , FALSE , FALSE , 0 ) ; gtk_widget_show ( private -> image ) ; private -> stack = gtk_stack_new ( ) ; gtk_stack_set_transition_type ( GTK_STACK ( private -> stack ) , GTK_STACK_TRANSITION_TYPE_SLIDE_UP_DOWN ) ; gtk_box_pack_start ( GTK_BOX ( vbox ) , private -> stack , TRUE , TRUE , 0 ) ; gtk_widget_show ( private -> stack ) ; sel = gtk_tree_view_get_selection ( GTK_TREE_VIEW ( private -> tree_view ) ) ; g_signal_connect ( sel , "changed" , G_CALLBACK ( gimp_prefs_box_tree_select_callback ) , box ) ; } 