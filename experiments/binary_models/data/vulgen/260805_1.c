void jswrap_io_shiftOutCallback ( int val , void * data ) { jswrap_io_shiftOutData * d = ( jswrap_io_shiftOutData * ) data ; int n , i ; for ( i = 0 ; i < d -> repeat ; i ++ ) { for ( n = d -> cnt - 1 ; n >= 0 ; n -- ) { if ( d -> addrs [ n ] ) { * d -> addrs [ n ] = val & 1 ; } if ( jshIsPinValid ( d -> pins [ n ] ) ) { jshPinSetValue ( d -> pins [ n ] , val & 1 ) ; } val >>= 1 ; } if ( d -> clkAddr ) { * d -> clkAddr = ! d -> clkPol ; } if ( jshIsPinValid ( d -> clk ) ) { jshPinSetValue ( d -> clk , d -> clkPol ) ; jshPinSetValue ( d -> clk , ! d -> clkPol ) ; } } } 