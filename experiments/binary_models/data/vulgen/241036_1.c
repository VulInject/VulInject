int psm_set_states ( struct pp_eventmgr * eventmgr , unsigned long * state_id ) { struct pp_power_state * state ; int table_entries ; struct pp_hwmgr * hwmgr = eventmgr -> hwmgr ; int i ; table_entries = hwmgr -> num_ps ; state = hwmgr -> ps ; for ( i = 0 ; i < table_entries ; i ++ ) { if ( state -> id == * state_id ) { return 0 ; } state = ( pp_power_state * ) ( ( unsigned long ) state + hwmgr -> ps_size ) ; } return - 1 ; } 