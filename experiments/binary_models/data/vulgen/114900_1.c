void UI_LoadArenas ( void ) { int numdirs ; vmCvar_t arenasFile ; char filename [ 128 ] ; char dirlist [ 1024 ] ; char * dirptr ; int i ; int dirlen ; ui_numArenas = 0 ; if ( * arenasFile . string ) { UI_LoadArenasFromFile ( arenasFile . string ) ; } else { UI_LoadArenasFromFile ( "scripts/arenas.txt" ) ; } numdirs = trap_FS_GetFileList ( "scripts" , ".arena" , dirlist , 1024 ) ; dirptr = dirlist ; for ( i = 0 ; i < numdirs ; i ++ , dirptr += dirlen + 1 ) { dirlen = strlen ( dirptr ) ; strcpy ( filename , "scripts/" ) ; strcat ( filename , dirptr ) ; UI_LoadArenasFromFile ( filename ) ; } trap_Print ( va ( "%i arenas parsed\n" , ui_numArenas ) ) ; if ( UI_OutOfMemory ( ) ) { trap_Print ( S_COLOR_YELLOW "WARNING: not enough memory in pool to load all arenas\n" ) ; } } 