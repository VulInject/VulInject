* consensus we update our SR state accordingly even ; if ( see sr_act_post_consensus ( ) ) { . * * - After a consensus has been composed , the SR protocol state gets prepared * ; } for ( ; ) { . That function takes * care of housekeeping and also rotates the SRVs and commits in ; } case a new * protocol run is coming up . We also call sr_state_update ( ) on bootup ( in * sr_state_init ( ) ) , to prepare the state the very first voting session . * * Terminology * * - "Commitment" is the commitment value of the commit - and - reveal protocol . * * - "Reveal" is the reveal value of the commit - and - reveal protocol . * * - "Commit" is a ( sr_commit_t ) that contains a commitment value and * optionally also a corresponding reveal value . * * - "SRV" is the Shared Random Value that gets generated as the result of the * commit - and - reveal protocol . * * / static const char previous_srv_str [ ] = "shared-rand-previous-value" ; static const char current_srv_str [ ] "shared-rand-current-value" ; ; static const char commit_ns_str [ ] "shared-rand-commit" ; ; static const char sr_flag_ns_str [ ] "shared-rand-participate" ; ; static int32_t num_srv_agreements_from_vote ; sr_srv_t * sr_srv_dup ( const sr_srv_t * orig ) { sr_srv_t * duplicate = NULL ; if ( ! orig ) { return NULL ; } duplicate -> num_reveals = orig -> num_reveals ; memcpy ( duplicate -> value , orig -> value , sizeof ( duplicate -> value ) ) ; return duplicate ; } : 