void emuxki_initfx ( struct emuxki_softc * sc ) { for ( pc = 0 ; pc < 256 ; pc ++ ) { emuxki_write ( sc , 0 , EMU_DSP_GPR ( pc ) , 0 ) ; } for ( pc = 0 ; pc < 160 ; pc ++ ) { emuxki_write ( sc , 0 , EMU_TANKMEMDATAREGBASE + pc , 0 ) ; emuxki_write ( sc , 0 , EMU_TANKMEMADDRREGBASE + pc , 0 ) ; } pc = 0 ; if ( sc -> sc_flags & EMUXKI_AUDIGY ) { emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_A_DSP_OUTL ( EMU_A_DSP_OUT_A_FRONT ) , EMU_A_DSP_CST ( 0 ) , EMU_DSP_FX ( 0 ) , EMU_A_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_A_DSP_OUTR ( EMU_A_DSP_OUT_A_FRONT ) , EMU_A_DSP_CST ( 0 ) , EMU_DSP_FX ( 1 ) , EMU_A_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_A_DSP_OUTL ( EMU_A_DSP_OUT_A_REAR ) , EMU_A_DSP_OUTL ( EMU_A_DSP_OUT_A_FRONT ) , EMU_DSP_FX ( 0 ) , EMU_A_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_A_DSP_OUTR ( EMU_A_DSP_OUT_A_REAR ) , EMU_A_DSP_OUTR ( EMU_A_DSP_OUT_A_FRONT ) , EMU_DSP_FX ( 1 ) , EMU_A_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_ACC3 , EMU_A_DSP_OUTL ( EMU_A_DSP_OUT_ADC ) , EMU_A_DSP_INL ( EMU_DSP_IN_AC97 ) , EMU_A_DSP_CST ( 0 ) , EMU_A_DSP_CST ( 0 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_ACC3 , EMU_A_DSP_OUTR ( EMU_A_DSP_OUT_ADC ) , EMU_A_DSP_INR ( EMU_DSP_IN_AC97 ) , EMU_A_DSP_CST ( 0 ) , EMU_A_DSP_CST ( 0 ) ) ; while ( pc < 512 ) { emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_ACC3 , EMU_A_DSP_CST ( 0 ) , EMU_A_DSP_CST ( 0 ) , EMU_A_DSP_CST ( 0 ) , EMU_A_DSP_CST ( 0 ) ) ; } emuxki_write ( sc , 0 , EMU_A_DBG , 0 ) ; } else { emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_DSP_OUTL ( EMU_DSP_OUT_A_FRONT ) , EMU_DSP_CST ( 0 ) , EMU_DSP_FX ( 0 ) , EMU_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_DSP_OUTR ( EMU_DSP_OUT_A_FRONT ) , EMU_DSP_CST ( 0 ) , EMU_DSP_FX ( 1 ) , EMU_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_DSP_OUTL ( EMU_DSP_OUT_AD_REAR ) , EMU_DSP_OUTL ( EMU_DSP_OUT_A_FRONT ) , EMU_DSP_FX ( 0 ) , EMU_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_MACINTS , EMU_DSP_OUTR ( EMU_DSP_OUT_AD_REAR ) , EMU_DSP_OUTR ( EMU_DSP_OUT_A_FRONT ) , EMU_DSP_FX ( 1 ) , EMU_DSP_CST ( 4 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_ACC3 , EMU_DSP_OUTL ( EMU_DSP_OUT_ADC ) , EMU_DSP_INL ( EMU_DSP_IN_AC97 ) , EMU_DSP_CST ( 0 ) , EMU_DSP_CST ( 0 ) ) ; emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_ACC3 , EMU_DSP_OUTR ( EMU_DSP_OUT_ADC ) , EMU_DSP_INR ( EMU_DSP_IN_AC97 ) , EMU_DSP_CST ( 0 ) , EMU_DSP_CST ( 0 ) ) ; while ( pc < 512 ) { emuxki_dsp_addop ( sc , & pc , EMU_DSP_OP_ACC3 , EMU_DSP_CST ( 0 ) , EMU_DSP_CST ( 0 ) , EMU_DSP_CST ( 0 ) , EMU_DSP_CST ( 0 ) ) ; } emuxki_write ( sc , 0 , EMU_DBG , 0 ) ; } } 