static void update_network ( struct wlan_bssid_ex * dst , struct wlan_bssid_ex * src , struct _adapter * padapter ) { u32 last_evm = 0 , tmpVal ; if ( check_fwstate ( & padapter -> mlmepriv , _FW_LINKED ) && is_same_network ( & ( padapter -> mlmepriv . cur_network . network ) , src ) ) { if ( padapter -> recvpriv . signal_qual_data . total_num ++ >= PHY_LINKQUALITY_SLID_WIN_MAX ) { padapter -> recvpriv . signal_qual_data . total_num = PHY_LINKQUALITY_SLID_WIN_MAX ; last_evm = padapter -> recvpriv . signal_qual_data . elements [ padapter -> recvpriv . signal_qual_data . index ] ; padapter -> recvpriv . signal_qual_data . total_val -= last_evm ; } padapter -> recvpriv . signal_qual_data . total_val += src -> Rssi ; padapter -> recvpriv . signal_qual_data . elements [ padapter -> recvpriv . signal_qual_data . index ++ ] = src -> Rssi ; tmpVal = padapter -> recvpriv . signal_qual_data . total_val / padapter -> recvpriv . signal_qual_data . total_num ; padapter -> recvpriv . signal = ( u8 ) tmpVal ; src -> Rssi = padapter -> recvpriv . signal ; } else { src -> Rssi = ( src -> Rssi + dst -> Rssi ) / 2 ; } memcpy ( ( u8 * ) dst , ( u8 * ) src , r8712_get_wlan_bssid_ex_sz ( src ) ) ; } 