struct uwsgi_legion_action * uwsgi_legion_action_register ( char * name , int * func ( struct uwsgi_legion * , char * ) ) { struct uwsgi_legion_action * found_ula = uwsgi_legion_action_get ( name ) ; struct uwsgi_legion_action * old_ula = NULL , * ula = uwsgi . legion_actions ; while ( ula ) { old_ula = ula ; ula = ula -> next ; } ula = uwsgi_calloc ( sizeof ( uwsgi_legion_action ) ) ; ula -> name = name ; ula -> func = func ; if ( old_ula ) { old_ula -> next = ula ; } else { uwsgi . legion_actions = ula ; } return ula ; } 