struct sk_buff * bnxt_xdp_build_skb ( struct bnxt * bp , struct sk_buff * skb , u8 num_frags , struct page_pool * pool , struct xdp_buff * xdp , struct rx_cmp_ext * rxcmp1 ) { struct skb_shared_info * sinfo = xdp_get_shared_info_from_buff ( xdp ) ; skb_checksum_none_assert ( skb ) ; if ( RX_CMP_L4_CS_OK ( rxcmp1 ) ) { if ( bp -> dev -> features & NETIF_F_RXCSUM ) { skb -> ip_summed = CHECKSUM_UNNECESSARY ; skb -> csum_level = RX_CMP_ENCAP ( rxcmp1 ) ; } } xdp_update_skb_shared_info ( skb , num_frags , sinfo -> xdp_frags_size , PAGE_SIZE * sinfo -> nr_frags , xdp_buff_is_frag_pfmemalloc ( xdp ) ) ; return skb ; } 