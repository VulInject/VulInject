static int reconnect_path ( struct vfsmount * mnt , struct dentry * target_dir , char * nbuf ) { struct dentry * dentry , * parent ; dentry = dget ( target_dir ) ; while ( dentry -> d_flags & DCACHE_DISCONNECTED ) { BUG_ON ( dentry == mnt -> mnt_sb -> s_root ) ; if ( IS_ROOT ( dentry ) ) { parent = reconnect_one ( mnt , dentry , nbuf ) ; } else { parent = dget_parent ( dentry ) ; } if ( ! parent ) { break ; } dput ( dentry ) ; if ( IS_ERR ( parent ) ) { return PTR_ERR ( parent ) ; } dentry = parent ; } dput ( dentry ) ; return 0 ; } getdents_callback { struct dir_context ctx ; char * name ; u64 ino ; int found ; int sequence ; } 