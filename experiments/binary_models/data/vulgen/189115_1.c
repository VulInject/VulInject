static struct device __init * ep93xx_init_soc ( void ) { struct soc_device_attribute * soc_dev_attr ; struct soc_device * soc_dev ; soc_dev_attr = kzalloc ( sizeof ( * soc_dev_attr ) , GFP_KERNEL ) ; if ( ! soc_dev_attr ) { return NULL ; } soc_dev_attr -> machine = ep93xx_get_machine_name ( ) ; soc_dev_attr -> family = "Cirrus Logic EP93xx" ; soc_dev_attr -> revision = ep93xx_get_soc_rev ( ) ; soc_dev_attr -> soc_id = ep93xx_get_soc_id ( ) ; soc_dev = soc_device_register ( soc_dev_attr ) ; if ( IS_ERR ( soc_dev ) ) { kfree ( soc_dev_attr ) ; return NULL ; } return soc_device_to_device ( soc_dev ) ; } 