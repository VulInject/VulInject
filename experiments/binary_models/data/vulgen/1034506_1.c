static void mdfld_dsi_dpi_shut_down ( struct mdfld_dsi_dpi_output * output , int pipe ) { struct drm_device * dev = output -> dev ; if ( ( ! output -> panel_on ) || output -> first_boot ) { output -> first_boot = 0 ; return ; } if ( REG_READ ( MIPI_INTR_STAT_REG ( pipe ) ) & DSI_INTR_STATE_SPL_PKG_SENT ) { REG_WRITE ( MIPI_INTR_STAT_REG ( pipe ) , DSI_INTR_STATE_SPL_PKG_SENT ) ; } if ( REG_READ ( MIPI_DPI_CONTROL_REG ( pipe ) ) == DSI_DPI_CTRL_HS_SHUTDOWN ) { shutdown_out } REG_WRITE ( MIPI_DPI_CONTROL_REG ( pipe ) , DSI_DPI_CTRL_HS_SHUTDOWN ) ; shutdown_out output -> panel_on = 0 ; output -> first_boot = 0 ; } 