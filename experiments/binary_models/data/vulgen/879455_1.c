DEF_TEST ( ) { int ret = 0 ; ret = config_cores_default ( 2 , & cgl ) ; EXPECT_EQ_INT ( 0 , ret ) ; EXPECT_EQ_INT ( 2 , cgl . num_cgroups ) ; CHECK_NOT_NULL ( cgl . cgroups ) ; CHECK_NOT_NULL ( cgl . cgroups [ 0 ] . cores ) ; CHECK_NOT_NULL ( cgl . cgroups [ 0 ] . desc ) ; EXPECT_EQ_STR ( "0" , cgl . cgroups [ 0 ] . desc ) ; EXPECT_EQ_INT ( 1 , cgl . cgroups [ 0 ] . num_cores ) ; EXPECT_EQ_INT ( 0 , cgl . cgroups [ 0 ] . cores [ 0 ] ) ; CHECK_NOT_NULL ( cgl . cgroups [ 1 ] . cores ) ; CHECK_NOT_NULL ( cgl . cgroups [ 1 ] . desc ) ; EXPECT_EQ_STR ( "1" , cgl . cgroups [ 1 ] . desc ) ; EXPECT_EQ_INT ( 1 , cgl . cgroups [ 1 ] . num_cores ) ; EXPECT_EQ_INT ( 1 , cgl . cgroups [ 1 ] . cores [ 0 ] ) ; config_cores_cleanup ( & cgl ) ; return 0 ; } 