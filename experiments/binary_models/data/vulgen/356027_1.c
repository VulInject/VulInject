"\t\t\tfor (i = 0; i<size&&openfd<2; i++)\n" ; if ( tirpcflag ) { f_print ( fout , "\t\t\t\tif (svc_pollfd[i].fd>= 0)\n" ) ; } else { f_print ( fout , "\t\t\t\tif (FD_ISSET(i,&svc_fdset))\n" ) ; } f_print ( fout , "\t\t\t\t\topenfd++;\n" ) ; f_print ( fout , "\t\t\tif (openfd<= 1)\n" ) ; f_print ( fout , "\t\t\t\texit(0);\n" ) ; f_print ( fout , "\t\t} else\n" ) ; f_print ( fout , "\t\t\t_rpcsvcstate = _IDLE;\n\n" ) ; f_print ( fout , "\t\t(void) mutex_unlock(&_svcstate_lock);\n" ) ; f_print ( fout , "\t}\n" ) ; f_print ( fout , "}\n" ) ; return ; ( fout , "static void\n" ) ; if ( ! Cflag ) { f_print ( fout , "closedown(sig)\n" ) ; f_print ( fout , "\tint sig;\n" ) ; } else { f_print ( fout , "closedown(int sig)\n" ) ; } f_print ( fout , "{\n" ) ; f_print ( fout , "\tif (_rpcsvcstate == _IDLE&&_rpcsvccount == 0) {\n" ) ; if ( tirpcflag ) { f_print ( fout , "\t\tint size;\n" ) ; } else { f_print ( fout , "\t\textern fd_set svc_fdset;\n" ) ; f_print ( fout , "\t\tstatic int size;\n" ) ; } f_print ( fout , "\t\tint i, openfd = 0;\n\n" ) ; if ( tirpcflag ) { f_print ( fout , "\t\tsize = svc_max_pollfd;\n" ) ; } else { f_print ( fout , "\t\tif (size == 0) {\n" ) ; f_print ( fout , "\t\t\tsize = getdtablesize();\n" ) ; f_print ( fout , "\t\t}\n" ) ; } f_print ( fout , "\t\tfor (i = 0; i<size&&openfd<2; i++)\n" ) ; if ( tirpcflag ) { f_print ( fout , "\t\t\tif (svc_pollfd[i].fd>= 0)\n" ) ; } else { f_print ( fout , "\t\t\tif (FD_ISSET(i,&svc_fdset))\n" ) ; } f_print ( fout , "\t\t\t\topenfd++;\n" ) ; f_print ( fout , "\t\tif (openfd<= 1)\n" ) ; f_print ( fout , "\t\t\texit(0);\n" ) ; f_print ( fout , "\t} else\n" ) ; f_print ( fout , "\t\t_rpcsvcstate = _IDLE;\n\n" ) ; f_print ( fout , "\t(void) signal(SIGALRM, %s closedown);\n" , Cflag ?"(SIG_PF)" : "(void(*)())" ) ; f_print ( fout , "\t(void) alarm(_RPCSVC_CLOSEDOWN/2);\n" ) ; 