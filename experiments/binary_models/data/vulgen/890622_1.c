static void drm_atomic_helper_commit_writebacks ( struct drm_device * dev , struct drm_atomic_state * old_state ) { struct drm_connector * connector ; struct drm_connector_state * new_conn_state ; int i ; for_each_new_connector_in_state ( , , , ) { const struct drm_connector_helper_funcs * funcs ; funcs = connector -> helper_private ; if ( new_conn_state -> writeback_job && new_conn_state -> writeback_job -> fb ) { WARN_ON ( connector -> connector_type != DRM_MODE_CONNECTOR_WRITEBACK ) ; funcs -> atomic_commit ( connector , old_state ) ; } } } 