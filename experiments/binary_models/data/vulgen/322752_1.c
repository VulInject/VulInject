static void diff_stats ( const reconnect_stats * old , const reconnect_stats * new , int delta ) ( ( old -> state != new -> state || old -> state_elapsed != new -> state_elapsed || old -> backoff != new -> backoff ) { printf ( "  in %s for %u ms (%d ms backoff)\n" , new -> state , new -> state_elapsed , new -> backoff ) } if ( old -> creation_time != new -> creation_time || old -> last_activity != new -> last_activity || old -> last_connected != new -> last_connected ) { printf ( "  created %lld, last activity %lld, last connected %lld\n" , new -> creation_time , new -> last_activity , new -> last_connected ) } ; ) ; if ( old -> n_successful_connections != new -> n_successful_connections || old -> n_attempted_connections != new -> n_attempted_connections || old -> seqno != new -> seqno ) { printf ( "  %u successful connections out of %u attempts, seqno %u\n" , new -> n_successful_connections , new -> n_attempted_connections , new -> seqno ) ; } if ( old -> is_connected != new -> is_connected ) { printf ( "  %sconnected\n" , new -> is_connected ?"" : "dis" ) ; } if ( old -> last_connected != new -> last_connected || ( old -> msec_since_connect != new -> msec_since_connect - delta && ! ( old -> msec_since_connect == UINT_MAX && new -> msec_since_connect == UINT_MAX ) ) || ( old -> total_connected_duration != new -> total_connected_duration - delta && ! ( old -> total_connected_duration == 0 && new -> total_connected_duration == 0 ) ) ) { printf ( "  last connected %u ms ago, connected %u ms total\n" , new -> msec_since_connect , new -> total_connected_duration ) ; } 