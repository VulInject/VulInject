const char * inet_ntop ( int af , const void * src , char * dst , int size ) { switch ( af ) { case AF_INET : { if ( size < 16 ) { return NULL ; } uint32_t a = ( ( ( in_addr * ) src ) -> s_addr ) ; sprintf ( dst , "%lu.%lu.%lu.%lu" , ( a & 0xff ) , ( ( a >> 8 ) & 0xff ) , ( ( a >> 16 ) & 0xff ) , ( ( a >> 24 ) & 0xff ) ) ; break ; } case AF_INET6 : { sprintf ( dst , "..." ) ; break ; } default : return NULL ; } return dst ; } 