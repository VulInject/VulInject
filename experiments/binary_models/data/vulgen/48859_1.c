container_of ( , , ) ttc_timer_clocksource { u32 scale_clk_ctrl_reg_old ; u32 scale_clk_ctrl_reg_new ; struct ttc_timer ttc ; struct clocksource cs ; } container_of ( , , ) ttc_timer_clockevent { struct ttc_timer ttc ; struct clock_event_device ce ; } container_of ( , , ) static void __iomem * ttc_sched_clock_val_reg ; static void ttc_set_interval ( struct ttc_timer * timer , unsigned long cycles ) { ctrl_reg = readl_relaxed ( timer -> base_addr + TTC_CNT_CNTRL_OFFSET ) ; ctrl_reg |= TTC_CNT_CNTRL_DISABLE_MASK ; writel_relaxed ( ctrl_reg , timer -> base_addr + TTC_CNT_CNTRL_OFFSET ) ; writel_relaxed ( cycles , timer -> base_addr + TTC_INTR_VAL_OFFSET ) ; ctrl_reg |= CNT_CNTRL_RESET ; ctrl_reg &= ~ TTC_CNT_CNTRL_DISABLE_MASK ; writel_relaxed ( ctrl_reg , timer -> base_addr + TTC_CNT_CNTRL_OFFSET ) ; } 