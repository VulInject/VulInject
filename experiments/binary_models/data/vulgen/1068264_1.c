R_API void r_th_sem_free ( RThreadSemaphore * sem ) { if ( sem -> sem ) { sem_close ( sem -> sem ) ; sem_destroy ( sem -> sem ) ; free ( sem -> sem ) ; } CloseHandle ( sem -> sem ) ; free ( sem ) ; } 