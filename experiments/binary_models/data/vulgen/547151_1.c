static int __hpp__sort ( struct hist_entry * a , struct hist_entry * b , hpp_field_fn get_field ) { s64 ret ; int i , nr_members ; struct perf_evsel * evsel ; struct hist_entry * pair ; u64 * fields_a , * fields_b ; ret = field_cmp ( get_field ( a ) , get_field ( b ) ) ; evsel = hists_to_evsel ( a -> hists ) ; if ( ! perf_evsel__is_group_event ( evsel ) ) { return ret ; } nr_members = evsel -> nr_members ; fields_a = calloc ( nr_members , sizeof ( * fields_a ) ) ; fields_b = calloc ( nr_members , sizeof ( * fields_b ) ) ; if ( ! fields_a || ! fields_b ) { out } list_for_each_entry ( , , ) { evsel = hists_to_evsel ( pair -> hists ) ; fields_a [ perf_evsel__group_idx ( evsel ) ] = get_field ( pair ) ; } list_for_each_entry ( , , ) { evsel = hists_to_evsel ( pair -> hists ) ; fields_b [ perf_evsel__group_idx ( evsel ) ] = get_field ( pair ) ; } for ( i = 1 ; i < nr_members ; i ++ ) { ret = field_cmp ( fields_a [ i ] , fields_b [ i ] ) ; if ( ret ) { break ; } } out free ( fields_a ) ; free ( fields_b ) ; return ret ; } 