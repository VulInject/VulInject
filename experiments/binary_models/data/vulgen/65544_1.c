int nilfs_segbuf_reset ( struct nilfs_segment_buffer * segbuf , unsigned int flags , time_t ctime , __u64 cno ) { int err ; segbuf -> sb_sum . nblocks = segbuf -> sb_sum . nsumblk = 0 ; if ( unlikely ( err ) ) { return err ; } segbuf -> sb_sum . flags = flags ; segbuf -> sb_sum . sumbytes = sizeof ( nilfs_segment_summary ) ; segbuf -> sb_sum . nfinfo = segbuf -> sb_sum . nfileblk = 0 ; segbuf -> sb_sum . ctime = ctime ; segbuf -> sb_sum . cno = cno ; return 0 ; } 