int sbdp_cpu_poweron ( struct cpu * cp ) { int cpuid ; int ntries ; pnode_t nodeid ; extern void restart_other_cpu ( int ) ; static fn_t f = "sbdp_cpu_poweron" ; SBDP_DBG_FUNC ( "%s\n" , f ) ; ASSERT ( MUTEX_HELD ( & cpu_lock ) ) ; ntries = sbdp_cpu_ntries ; cpuid = cp -> cpu_id ; nodeid = cpunodes [ cpuid ] . nodeid ; ASSERT ( nodeid != ( pnode_t ) 0 ) ; cp -> cpu_flags &= ~ CPU_POWEROFF ; SBDP_DBG_CPU ( "%s: COLD START for cpu (%d)\n" , f , cpuid ) ; restart_other_cpu ( cpuid ) ; SBDP_DBG_CPU ( "after restarting other cpus\n" ) ; while ( ( cp -> cpu_thread != cp -> cpu_idle_thread ) && ( ntries > 0 ) ) { DELAY ( sbdp_cpu_delay ) ; ntries -- ; } SBDP_DBG_CPU ( "%s: waited %d out of %d loops for cpu %d\n" , f , sbdp_cpu_ntries - ntries , sbdp_cpu_ntries , cpuid ) ; return ( 0 ) ; } static const char cpyren_key [ ] "COPYREN" ; ; static uint64_t bbsram_pa ; static uint_t bbsram_size ; { caddr_t vaddr ; pgcnt_t npages ; uint64_t * pa ; uint_t * size ; } sbdp_cpu_sram_map_t 