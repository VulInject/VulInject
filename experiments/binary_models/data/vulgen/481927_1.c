void fix_uclass ( void ) { struct uclass_driver * uclass = ll_entry_start ( uclass_driver , uclass_driver ) ; const int n_ents = ll_entry_count ( uclass_driver , uclass_driver ) ; struct uclass_driver * entry ; for ( entry = uclass ; entry != uclass + n_ents ; entry ++ ) { if ( entry -> post_bind ) { entry -> post_bind += gd -> reloc_off ; } if ( entry -> pre_unbind ) { entry -> pre_unbind += gd -> reloc_off ; } if ( entry -> pre_probe ) { entry -> pre_probe += gd -> reloc_off ; } if ( entry -> post_probe ) { entry -> post_probe += gd -> reloc_off ; } if ( entry -> pre_remove ) { entry -> pre_remove += gd -> reloc_off ; } if ( entry -> child_post_bind ) { entry -> child_post_bind += gd -> reloc_off ; } if ( entry -> child_pre_probe ) { entry -> child_pre_probe += gd -> reloc_off ; } if ( entry -> destroy ) { entry -> destroy += gd -> reloc_off ; } } } 