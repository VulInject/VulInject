int vdev_raidz_math_generate ( raidz_map_t * rm ) { switch ( raidz_parity ( rm ) ) { case 1 : gen_parity = rm -> rm_ops -> gen [ RAIDZ_GEN_P ] ; break ; case 2 : gen_parity = rm -> rm_ops -> gen [ RAIDZ_GEN_PQ ] ; break ; case 3 : gen_parity = rm -> rm_ops -> gen [ RAIDZ_GEN_PQR ] ; break ; default : gen_parity = NULL ; cmn_err ( CE_PANIC , "invalid RAID-Z configuration %u" , ( uint_t ) raidz_parity ( rm ) ) ; break ; } if ( gen_parity == NULL ) { return ( RAIDZ_ORIGINAL_IMPL ) ; } gen_parity ( rm ) ; return ( 0 ) ; } 