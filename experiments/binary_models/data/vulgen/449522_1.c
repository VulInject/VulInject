input_file_give_next_buffer ( ) { char * return_value ; register int size ; if ( preprocess ) { size = do_scrub_chars ( input_file_get , where , BUFFER_SIZE ) ; } else { size = fread ( where , sizeof ( char ) , BUFFER_SIZE , f_in ) ; } if ( size < 0 ) { bfd_set_error ( bfd_error_system_call ) ; as_perror ( _ ( "Can't read from %s" ) , file_name ) ; size = 0 ; } if ( size ) { return_value = where + size ; } else { if ( fclose ( f_in ) ) { bfd_set_error ( bfd_error_system_call ) ; as_perror ( _ ( "Can't close %s" ) , file_name ) ; } f_in = ( FILE * ) 0 ; return_value = 0 ; } return return_value ; } 