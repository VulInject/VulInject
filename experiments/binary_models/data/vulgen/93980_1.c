DEF_TEST ( ) { char buffer [ 32 ] { 0 } ; ; int status ; status = strunescape ( buffer , sizeof ( buffer ) ) ; OK ( status == 0 ) ; EXPECT_EQ_STR ( "foo\tbar" , buffer ) ; strncpy ( buffer , "\\tfoo\\r\\n" , sizeof ( buffer ) - 1 ) ; status = strunescape ( buffer , sizeof ( buffer ) ) ; OK ( status == 0 ) ; EXPECT_EQ_STR ( "\tfoo\r\n" , buffer ) ; strncpy ( buffer , "With \\\"quotes\\\"" , sizeof ( buffer ) - 1 ) ; status = strunescape ( buffer , sizeof ( buffer ) ) ; OK ( status == 0 ) ; EXPECT_EQ_STR ( "With \"quotes\"" , buffer ) ; strncpy ( buffer , "\\tbackslash end\\" , sizeof ( buffer ) - 1 ) ; status = strunescape ( buffer , sizeof ( buffer ) ) ; OK ( status != 0 ) ; EXPECT_EQ_STR ( "\tbackslash end" , buffer ) ; return 0 ; strncpy ( buffer , "\\t3\\56" , sizeof ( buffer ) - 1 ) ; status = strunescape ( buffer , 4 ) ; OK ( status != 0 ) ; OK ( buffer [ 0 ] == '\t' ) ; OK ( buffer [ 1 ] == '3' ) ; OK ( buffer [ 2 ] == 0 ) ; OK ( buffer [ 3 ] == 0 ) ; OK ( buffer [ 4 ] == '5' ) ; OK ( buffer [ 5 ] == '6' ) ; OK ( buffer [ 6 ] == '7' ) ; return 0 ; } 