static int __init HiSax_inithardware ( int * busy_flag ) { int foundcards = 0 ; int i = 0 ; int t = ',' ; int flg = 0 ; char * id ; char * next_id = HiSax_id ; char ids [ 20 ] ; if ( strchr ( HiSax_id , ',' ) ) { t = ',' ; } if ( strchr ( HiSax_id , '%' ) ) { t = '%' ; } while ( i < nrcards ) { if ( cards [ i ] . typ < 1 ) { break ; } id = next_id ; if ( ( next_id = strchr ( id , t ) ) ) { * next_id ++ = 0 ; strcpy ( ids , id ) ; flg = i + 1 ; } else { next_id = id ; if ( flg >= i ) { strcpy ( ids , id ) ; } else { sprintf ( ids , "%s%d" , id , i ) ; } } if ( checkcard ( i , ids , busy_flag , THIS_MODULE , hisax_cs_setup_card ) ) { foundcards ++ ; i ++ ; } else { if ( cards [ i ] . typ > 0 && cards [ i ] . typ <= ISDN_CTYPE_COUNT ) { printk ( KERN_WARNING "HiSax: Card %s not installed !\n" , CardType [ cards [ i ] . typ ] ) ; } nrcards -- ; } } return foundcards ; } 