static int select_del ( void * arg , struct event * ev ) { struct selectop * sop = arg ; check_selectop ( sop ) ; if ( sop -> event_fds < ev -> ev_fd ) { check_selectop ( sop ) ; return ( 0 ) ; } if ( ev -> ev_events & EV_READ ) { FD_CLR ( ev -> ev_fd , sop -> event_readset_in ) ; sop -> event_r_by_fd [ ev -> ev_fd ] = NULL ; } if ( ev -> ev_events & EV_WRITE ) { FD_CLR ( ev -> ev_fd , sop -> event_writeset_in ) ; sop -> event_w_by_fd [ ev -> ev_fd ] = NULL ; } check_selectop ( sop ) ; return ( 0 ) ; } 