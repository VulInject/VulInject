static void check ( r , buf , n , oops , status ) artab * r ; char * buf ; size_t n ; err_t oops ; int * status ; { if ( oops != NULL ) { printf ( "`%s' gave error `%s', expecting %lu `" , r -> ascii , oops , strlen ( r -> data ) ) ; hexout ( r -> data , strlen ( r -> data ) , stdout ) ; printf ( "'\n" ) ; * status = 1 ; } if ( r -> data == NULL ) { printf ( "`%s' gave %lu `" , r -> ascii , n ) ; hexout ( buf , n , stdout ) ; printf ( "', expecting error\n" ) ; * status = 1 ; } if ( n != strlen ( r -> data ) ) { printf ( "length wrong in `%s': got %lu `" , r -> ascii , n ) ; hexout ( buf , n , stdout ) ; printf ( "', expecting %lu `" , strlen ( r -> data ) ) ; hexout ( r -> data , strlen ( r -> data ) , stdout ) ; printf ( "'\n" ) ; * status = 1 ; } if ( ! memeq ( buf , r -> data , n ) ) { printf ( "`%s' gave %lu `" , r -> ascii , n ) ; hexout ( buf , n , stdout ) ; printf ( "', expecting %lu `" , strlen ( r -> data ) ) ; hexout ( r -> data , strlen ( r -> data ) , stdout ) ; printf ( "'\n" ) ; * status = 1 ; } fflush ( stdout ) ; } 