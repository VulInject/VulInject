void qedf_dbg_err ( struct qedf_dbg_ctx * qedf , const char * func , u32 line , const char * fmt , ... ) { va_list va ; struct va_format vaf ; char nfunc [ 32 ] ; memset ( nfunc , 0 , sizeof ( nfunc ) ) ; va_start ( va , fmt ) ; vaf . fmt = fmt ; vaf . va = & va ; if ( likely ( qedf ) && likely ( qedf -> pdev ) ) { pr_err ( "[%s]:[%s:%d]:%d: %pV" , dev_name ( & ( qedf -> pdev -> dev ) ) , nfunc , line , qedf -> host_no , & vaf ) ; } else { pr_err ( "[0000:00:00.0]:[%s:%d]: %pV" , nfunc , line , & vaf ) ; } va_end ( va ) ; } 