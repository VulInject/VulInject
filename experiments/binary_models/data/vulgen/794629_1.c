vsnprintf ( , , , ) { ssize_t count ; FILE siop ; size_t max = MAXINT ; unsigned char tmpbuf [ 1 ] ; siop . _cnt = n - 1 ; siop . _base = siop . _ptr = ( unsigned char * ) string ; siop . _flag = _IOREAD ; siop . _end = NULL ; if ( n == 0 ) { siop . _base = siop . _ptr = tmpbuf ; siop . _cnt = 0 ; } count = _ndoprnt ( format , ap , & siop , _F_INTMAX32 ) ; count = _ndoprnt ( format , ap , & siop , 0 ) ; * siop . _ptr = '\0' ; if ( ( size_t ) count > max ) { errno = EOVERFLOW ; return ( EOF ) ; } else { return ( ( int ) count ) ; } } 