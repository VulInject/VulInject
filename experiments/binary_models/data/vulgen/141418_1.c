module_param_named ( buschk , sym_driver_setup . scsi_bus_check , byte , 0 ) ; module_param_named ( hostid , sym_driver_setup . host_id , byte , 0 ) ; module_param_named ( verb , sym_driver_setup . verbose , byte , 0 ) ; module_param_named ( settle , sym_driver_setup . settle_delay , byte , 0 ) ; module_param_named ( nvram , sym_driver_setup . use_nvram , byte , 0 ) ; module_param_named ( excl , excl_string , charp , 0 ) ; module_param_named ( safe , safe_string , charp , 0 ) ; MODULE_PARM_DESC ( cmd_per_lun , "The maximum number of tags to use by default" ) ; MODULE_PARM_DESC ( burst , "Maximum burst.  0 to disable, 255 to read from registers" ) ; MODULE_PARM_DESC ( led , "Set to 1 to enable LED support" ) ; MODULE_PARM_DESC ( diff , "0 for no differential mode, 1 for BIOS, 2 for always, 3 for not GPIO3" ) ; MODULE_PARM_DESC ( irqm , "0 for open drain, 1 to leave alone, 2 for totem pole" ) ; MODULE_PARM_DESC ( buschk , "0 to not check, 1 for detach on error, 2 for warn on error" ) ; MODULE_PARM_DESC ( hostid , "The SCSI ID to use for the host adapters" ) ; MODULE_PARM_DESC ( verb , "0 for minimal verbosity, 1 for normal, 2 for excessive" ) ; MODULE_PARM_DESC ( debug , "Set bits to enable debugging" ) ; MODULE_PARM_DESC ( settle , "Settle delay in seconds.  Default 3" ) ; MODULE_PARM_DESC ( nvram , "Option currently not used" ) ; MODULE_PARM_DESC ( excl , "List ioport addresses here to prevent controllers from being attached" ) ; MODULE_PARM_DESC ( safe , "Set other settings to a \"safe mode\"" ) ; MODULE_LICENSE ( "GPL" ) ; MODULE_VERSION ( SYM_VERSION ) ; MODULE_AUTHOR ( "Matthew Wilcox<matthew@wil.cx>" ) ; MODULE_DESCRIPTION ( "NCR, Symbios and LSI 8xx and 1010 PCI SCSI adapters" ) ; static void sym2_setup_params ( void ) { char * p = excl_string ; int xi = 0 ; while ( p && ( xi < 8 ) ) { char * next_p ; int val = ( int ) simple_strtoul ( p , & next_p , 0 ) ; sym_driver_setup . excludes [ xi ++ ] = val ; p = next_p ; } if ( safe_string ) { if ( * safe_string == 'y' ) { sym_driver_setup . max_tag = 0 ; sym_driver_setup . burst_order = 0 ; sym_driver_setup . scsi_led = 0 ; sym_driver_setup . scsi_diff = 1 ; sym_driver_setup . irq_mode = 0 ; sym_driver_setup . scsi_bus_check = 2 ; sym_driver_setup . host_id = 7 ; sym_driver_setup . verbose = 2 ; sym_driver_setup . settle_delay = 10 ; sym_driver_setup . use_nvram = 1 ; } if ( * safe_string != 'n' ) { printk ( "Ignoring parameter %s" " passed to safe option" , ) } } } 