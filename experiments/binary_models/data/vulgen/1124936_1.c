STATIC int __xfs_inobt_alloc_block ( xfs_btree_cur * cur , xfs_btree_ptr * start , xfs_btree_ptr * new , int * stat , xfs_ag_resv_type resv ) ( xfs_alloc_arg_t args , int error , xfs_agblock_t sbno = be32_to_cpu ( start -> s ) , XFS_BTREE_TRACE_CURSOR ( cur , XBT_ENTRY ) , memset ( & args , 0 , sizeof ( args ) ) , args . tp = cur -> bc_tp , args . mp = cur -> bc_mp , xfs_rmap_ag_owner ( & args . oinfo , XFS_RMAP_OWN_INOBT ) , args . fsbno = XFS_AGB_TO_FSB ( args . mp , cur -> bc_private . a . agno , sbno ) , args . minlen = 1 , args . maxlen = 1 , args . prod = 1 , args . type = XFS_ALLOCTYPE_NEAR_BNO , args . resv = resv , error = xfs_alloc_vextent ( & args ) , ( error ) { XFS_BTREE_TRACE_CURSOR ( cur , XBT_ERROR ) return error ; } if ( args . fsbno == NULLFSBLOCK ) { XFS_BTREE_TRACE_CURSOR ( cur , XBT_EXIT ) * stat = 0 } ; ) ; return 0 ; ( args . len == 1 ) ; new -> s = cpu_to_be32 ( XFS_FSB_TO_AGBNO ( args . mp , args . fsbno ) ) ; * stat = 1 ; return 0 ; 