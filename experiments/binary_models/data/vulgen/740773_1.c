l_ok dewarpaInfo ( FILE * fp , L_DEWARPA * dewa ) { l_int32 i , n , pageno , nnone , nvsuccess , nvvalid , nhsuccess , nhvalid , nref ; L_DEWARP * dew ; if ( ! fp ) { return ERROR_INT ( "dewa not defined" , __func__ , 1 ) ; } if ( ! dewa ) { return ERROR_INT ( "dewa not defined" , __func__ , 1 ) ; } fprintf ( fp , "\nDewarpaInfo: %p\n" , dewa ) ; fprintf ( fp , "nalloc = %d, maxpage = %d\n" , dewa -> nalloc , dewa -> maxpage ) ; fprintf ( fp , "sampling = %d, redfactor = %d, minlines = %d\n" , dewa -> sampling , dewa -> redfactor , dewa -> minlines ) ; fprintf ( fp , "maxdist = %d, useboth = %d\n" , dewa -> maxdist , dewa -> useboth ) ; dewarpaModelStats ( dewa , & nnone , & nvsuccess , & nvvalid , & nhsuccess , & nhvalid , & nref ) ; n = numaGetCount ( dewa -> napages ) ; lept_stderr ( "Total number of pages with a dew = %d\n" , n ) ; lept_stderr ( "Number of pages without any models = %d\n" , nnone ) ; lept_stderr ( "Number of pages with a vert model = %d\n" , nvsuccess ) ; lept_stderr ( "Number of pages with a valid vert model = %d\n" , nvvalid ) ; lept_stderr ( "Number of pages with both models = %d\n" , nhsuccess ) ; lept_stderr ( "Number of pages with both models valid = %d\n" , nhvalid ) ; lept_stderr ( "Number of pages with a ref model = %d\n" , nref ) ; for ( i = 0 ; i < n ; i ++ ) { numaGetIValue ( dewa -> napages , i , & pageno ) ; if ( ( dew = dewarpaGetDewarp ( dewa , pageno ) ) == NULL ) { continue ; } lept_stderr ( "Page: %d\n" , dew -> pageno ) ; lept_stderr ( "  hasref = %d, refpage = %d\n" , dew -> hasref , dew -> refpage ) ; lept_stderr ( "  nlines = %d\n" , dew -> nlines ) ; lept_stderr ( "  w = %d, h = %d, nx = %d, ny = %d\n" , dew -> w , dew -> h , dew -> nx , dew -> ny ) ; if ( dew -> samphdispar ) { lept_stderr ( "  Horizontal disparity builds:\n" "    left edge slope = %d, right edge slope = %d\n" "    (left,right,abs-diff) edge curvature = (%d,%d,%d)\n" , dew -> leftslope , dew -> rightslope , dew -> leftcurv , dew -> rightcurv , L_ABS ( dew -> leftcurv - dew -> rightcurv ) ) ; } } return 0 ; } 