static dladm_status_t do_check_priority ( fprop_desc_t * pdp __unused , char * * prop_val , uint_t val_cnt , val_desc_t * * vdpp ) { mac_priority_level_t pri ; val_desc_t * vdp = NULL ; dladm_status_t status = DLADM_STATUS_OK ; if ( val_cnt != 1 ) { return ( DLADM_STATUS_BADVALCNT ) ; } status = dladm_str2pri ( * prop_val , & pri ) ; if ( status != DLADM_STATUS_OK ) { return ( status ) ; } vdp = malloc ( sizeof ( val_desc_t ) ) ; if ( vdp == NULL ) { return ( DLADM_STATUS_NOMEM ) ; } vdp -> vd_val = ( uint_t ) pri ; * vdpp = vdp ; return ( DLADM_STATUS_OK ) ; } 