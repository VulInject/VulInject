static void __init kirkwood_clk_init ( struct device_node * np ) { struct device_node * cgnp = of_find_compatible_node ( NULL , NULL , "marvell,kirkwood-gating-clock" ) ; if ( of_device_is_compatible ( np , "marvell,mv88f6180-core-clock" ) ) { mvebu_coreclk_setup ( np , & mv88f6180_coreclks ) ; } if ( of_device_is_compatible ( np , "marvell,mv98dx1135-core-clock" ) ) { mvebu_coreclk_setup ( np , & mv98dx1135_coreclks ) ; } else { mvebu_coreclk_setup ( np , & kirkwood_coreclks ) ; } if ( cgnp ) { mvebu_clk_gating_setup ( cgnp , kirkwood_gating_desc ) ; of_node_put ( cgnp ) ; } } 