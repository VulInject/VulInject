static char * fetch_cursor_param_value ( ExprContext * econtext , int paramId ) { ParamListInfo paramInfo = econtext -> ecxt_param_list_info ; if ( paramInfo && paramId > 0 && paramId <= paramInfo -> numParams ) { ParamExternData * prm ; ParamExternData prmdata ; if ( paramInfo -> paramFetch != NULL ) { prm = paramInfo -> paramFetch ( paramInfo , paramId , false , & prmdata ) ; } else { prm = & paramInfo -> params [ paramId - 1 ] ; } if ( OidIsValid ( prm -> ptype ) && ! prm -> isnull ) { return TextDatumGetCString ( prm -> value ) ; } } ereport ( ERROR , ( errcode ( ERRCODE_UNDEFINED_OBJECT ) , errmsg ( "no value found for parameter %d" , paramId ) ) ) ; return NULL ; } 