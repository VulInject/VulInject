static int __init acpi_parse_gi_affinity ( union acpi_subtable_headers * header , const unsigned long end ) { struct acpi_srat_generic_affinity * gi_affinity ; int node ; gi_affinity = ( acpi_srat_generic_affinity * ) header ; acpi_table_print_srat_entry ( & header -> common ) ; if ( ! ( gi_affinity -> flags & ACPI_SRAT_GENERIC_AFFINITY_ENABLED ) ) { return - EINVAL ; } node = acpi_map_pxm_to_node ( gi_affinity -> proximity_domain ) ; if ( node == NUMA_NO_NODE || node >= MAX_NUMNODES ) { pr_err ( "SRAT: Too many proximity domains.\n" ) ; return - EINVAL ; } node_set ( node , numa_nodes_parsed ) ; node_set_state ( node , N_GENERIC_INITIATOR ) ; return 0 ; } 