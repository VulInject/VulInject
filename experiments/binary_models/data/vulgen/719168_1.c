int print_insn_tci ( bfd_vma addr , disassemble_info * info ) { const uint32_t * tb_ptr = ( const void * ) ( uintptr_t ) addr ; const TCGOpDef * def ; const char * op_name ; uint32_t insn ; TCGOpcode op ; TCGReg r0 , r1 , r2 , r3 , r4 , r5 ; tcg_target_ulong i1 ; TCGCond c ; MemOpIdx oi ; uint8_t pos , len ; void * ptr ; insn = * tb_ptr ++ ; info -> fprintf_func ( info -> stream , "%08x  " , insn ) ; op = extract32 ( insn , 0 , 8 ) ; def = & tcg_op_defs [ op ] ; op_name = def -> name ; switch ( op ) { case INDEX_op_br : case INDEX_op_exit_tb : case INDEX_op_goto_tb : tci_args_l ( insn , tb_ptr , & ptr ) ; info -> fprintf_func ( info -> stream , "%-12s  %p" , op_name , ptr ) ; break ; case INDEX_op_goto_ptr : tci_args_r ( insn , & r0 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s" , op_name , str_r ( r0 ) ) ; break ; case INDEX_op_call : tci_args_nl ( insn , tb_ptr , & len , & ptr ) ; info -> fprintf_func ( info -> stream , "%-12s  %d, %p" , op_name , len , ptr ) ; break ; case INDEX_op_brcond_i32 : case INDEX_op_brcond_i64 : tci_args_rl ( insn , tb_ptr , & r0 , & ptr ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, 0, ne, %p" , op_name , str_r ( r0 ) , ptr ) ; break ; case INDEX_op_setcond_i32 : case INDEX_op_setcond_i64 : tci_args_rrrc ( insn , & r0 , & r1 , & r2 , & c ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s, %s" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) , str_c ( c ) ) ; break ; case INDEX_op_tci_movi : tci_args_ri ( insn , & r0 , & i1 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, 0x%" TCG_PRIlx , op_name , str_r ( r0 ) , i1 ) ; break ; case INDEX_op_tci_movl : tci_args_rl ( insn , tb_ptr , & r0 , & ptr ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %p" , op_name , str_r ( r0 ) , ptr ) ; break ; case INDEX_op_ld8u_i32 : case INDEX_op_ld8u_i64 : case INDEX_op_ld8s_i32 : case INDEX_op_ld8s_i64 : case INDEX_op_ld16u_i32 : case INDEX_op_ld16u_i64 : case INDEX_op_ld16s_i32 : case INDEX_op_ld16s_i64 : case INDEX_op_ld32u_i64 : case INDEX_op_ld32s_i64 : case INDEX_op_ld_i32 : case INDEX_op_ld_i64 : case INDEX_op_st8_i32 : case INDEX_op_st8_i64 : case INDEX_op_st16_i32 : case INDEX_op_st16_i64 : case INDEX_op_st32_i64 : case INDEX_op_st_i32 : case INDEX_op_st_i64 : tci_args_rrs ( insn , & r0 , & r1 , & s2 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %d" , op_name , str_r ( r0 ) , str_r ( r1 ) , s2 ) ; break ; case INDEX_op_mov_i32 : case INDEX_op_mov_i64 : case INDEX_op_ext8s_i32 : case INDEX_op_ext8s_i64 : case INDEX_op_ext8u_i32 : case INDEX_op_ext8u_i64 : case INDEX_op_ext16s_i32 : case INDEX_op_ext16s_i64 : case INDEX_op_ext16u_i32 : case INDEX_op_ext32s_i64 : case INDEX_op_ext32u_i64 : case INDEX_op_ext_i32_i64 : case INDEX_op_extu_i32_i64 : case INDEX_op_bswap16_i32 : case INDEX_op_bswap16_i64 : case INDEX_op_bswap32_i32 : case INDEX_op_bswap32_i64 : case INDEX_op_bswap64_i64 : case INDEX_op_not_i32 : case INDEX_op_not_i64 : case INDEX_op_neg_i32 : case INDEX_op_neg_i64 : case INDEX_op_ctpop_i32 : case INDEX_op_ctpop_i64 : tci_args_rr ( insn , & r0 , & r1 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s" , op_name , str_r ( r0 ) , str_r ( r1 ) ) ; break ; case INDEX_op_add_i32 : case INDEX_op_add_i64 : case INDEX_op_sub_i32 : case INDEX_op_sub_i64 : case INDEX_op_mul_i32 : case INDEX_op_mul_i64 : case INDEX_op_and_i32 : case INDEX_op_and_i64 : case INDEX_op_or_i32 : case INDEX_op_or_i64 : case INDEX_op_xor_i32 : case INDEX_op_xor_i64 : case INDEX_op_andc_i32 : case INDEX_op_andc_i64 : case INDEX_op_orc_i32 : case INDEX_op_orc_i64 : case INDEX_op_eqv_i32 : case INDEX_op_eqv_i64 : case INDEX_op_nand_i32 : case INDEX_op_nand_i64 : case INDEX_op_nor_i32 : case INDEX_op_nor_i64 : case INDEX_op_div_i32 : case INDEX_op_div_i64 : case INDEX_op_rem_i32 : case INDEX_op_rem_i64 : case INDEX_op_divu_i32 : case INDEX_op_divu_i64 : case INDEX_op_remu_i32 : case INDEX_op_remu_i64 : case INDEX_op_shl_i32 : case INDEX_op_shl_i64 : case INDEX_op_shr_i32 : case INDEX_op_shr_i64 : case INDEX_op_sar_i32 : case INDEX_op_sar_i64 : case INDEX_op_rotl_i32 : case INDEX_op_rotl_i64 : case INDEX_op_rotr_i32 : case INDEX_op_rotr_i64 : case INDEX_op_clz_i32 : case INDEX_op_clz_i64 : case INDEX_op_ctz_i32 : case INDEX_op_ctz_i64 : tci_args_rrr ( insn , & r0 , & r1 , & r2 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) ) ; break ; case INDEX_op_deposit_i32 : case INDEX_op_deposit_i64 : tci_args_rrrbb ( insn , & r0 , & r1 , & r2 , & pos , & len ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s, %d, %d" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) , pos , len ) ; break ; case INDEX_op_extract_i32 : case INDEX_op_extract_i64 : case INDEX_op_sextract_i32 : case INDEX_op_sextract_i64 : tci_args_rrbb ( insn , & r0 , & r1 , & pos , & len ) ; info -> fprintf_func ( info -> stream , "%-12s  %s,%s,%d,%d" , op_name , str_r ( r0 ) , str_r ( r1 ) , pos , len ) ; break ; case INDEX_op_movcond_i32 : case INDEX_op_movcond_i64 : case INDEX_op_setcond2_i32 : tci_args_rrrrrc ( insn , & r0 , & r1 , & r2 , & r3 , & r4 , & c ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s, %s, %s, %s" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) , str_r ( r3 ) , str_r ( r4 ) , str_c ( c ) ) ; break ; case INDEX_op_mulu2_i32 : case INDEX_op_mulu2_i64 : case INDEX_op_muls2_i32 : case INDEX_op_muls2_i64 : tci_args_rrrr ( insn , & r0 , & r1 , & r2 , & r3 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s, %s" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) , str_r ( r3 ) ) ; break ; case INDEX_op_add2_i32 : case INDEX_op_add2_i64 : case INDEX_op_sub2_i32 : case INDEX_op_sub2_i64 : tci_args_rrrrrr ( insn , & r0 , & r1 , & r2 , & r3 , & r4 , & r5 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s, %s, %s, %s" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) , str_r ( r3 ) , str_r ( r4 ) , str_r ( r5 ) ) ; break ; case INDEX_op_qemu_ld_i64 : case INDEX_op_qemu_st_i64 : len = DIV_ROUND_UP ( 64 , TCG_TARGET_REG_BITS ) ; do_qemu_ldst case INDEX_op_qemu_ld_i32 : case INDEX_op_qemu_st_i32 : len = 1 ; do_qemu_ldst len += DIV_ROUND_UP ( TARGET_LONG_BITS , TCG_TARGET_REG_BITS ) ; switch ( len ) { case 2 : tci_args_rrm ( insn , & r0 , & r1 , & oi ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %x" , op_name , str_r ( r0 ) , str_r ( r1 ) , oi ) ; break ; case 3 : tci_args_rrrm ( insn , & r0 , & r1 , & r2 , & oi ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s, %x" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) , oi ) ; break ; case 4 : tci_args_rrrrr ( insn , & r0 , & r1 , & r2 , & r3 , & r4 ) ; info -> fprintf_func ( info -> stream , "%-12s  %s, %s, %s, %s, %s" , op_name , str_r ( r0 ) , str_r ( r1 ) , str_r ( r2 ) , str_r ( r3 ) , str_r ( r4 ) ) ; break ; default : g_assert_not_reached ( ) ; } break ; case 0 : if ( insn == 0 ) { info -> fprintf_func ( info -> stream , "align" ) ; break ; } default : info -> fprintf_func ( info -> stream , "illegal opcode %d" , op ) ; break ; } return sizeof ( insn ) ; } 