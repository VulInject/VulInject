{ GsfOutput * output ; GsfOutput * gzout ; GError * err = NULL ; if ( argc != 2 ) { fprintf ( stderr , "Usage : %s outfile\n" , argv [ 0 ] ) ; return 1 ; } output = gsf_output_stdio_new ( argv [ 1 ] , & err ) ; if ( output == NULL ) { g_return_val_if_fail ( err != NULL , 1 ) ; g_warning ( "'%s' error: %s" , argv [ 1 ] , err -> message ) ; g_error_free ( err ) ; return 1 ; } if ( gsf_output_error ( gzout ) ) { g_warning ( "'%s' error: %s" , "gzip output" , gsf_output_error ( gzout ) -> message ) ; g_object_unref ( gzout ) ; return 1 ; } if ( ! gsf_output_printf ( gzout , "The %s sat on the %s.\n" , "cat" , "mat" ) ) { return 1 ; } if ( ! gsf_output_printf ( gzout , "%d %ss sat on the %s.\n" , 2 , "cat" , "mat" ) ) { return 1 ; } if ( ! gsf_output_puts ( gzout , "The quick brown fox is afraid of the cats.\n" ) ) { return 1 ; } if ( ! gsf_output_close ( gzout ) ) { return 1 ; } if ( ! gsf_output_close ( output ) ) { return 1 ; } g_object_unref ( G_OBJECT ( gzout ) ) ; g_object_unref ( G_OBJECT ( output ) ) ; return 0 ; } 