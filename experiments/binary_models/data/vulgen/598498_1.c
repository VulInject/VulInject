int acpi_register_wakeup_handler ( int wake_irq , bool * wakeup ( void * context ) , void * context ) { struct acpi_wakeup_handler * handler ; handler = kmalloc ( sizeof ( * handler ) , GFP_KERNEL ) ; if ( ! handler ) { return - ENOMEM ; } handler -> wakeup = wakeup ; handler -> context = context ; mutex_lock ( & acpi_wakeup_handler_mutex ) ; list_add ( & handler -> list_node , & acpi_wakeup_handler_head ) ; mutex_unlock ( & acpi_wakeup_handler_mutex ) ; return 0 ; } 