int mwifiex_get_bss_info ( struct mwifiex_private * priv , struct mwifiex_bss_info * info ) { struct mwifiex_adapter * adapter = priv -> adapter ; struct mwifiex_bssdescriptor * bss_desc ; if ( ! info ) { return - 1 ; } bss_desc = & priv -> curr_bss_params . bss_descriptor ; info -> bss_mode = priv -> bss_mode ; memcpy ( & info -> ssid , & bss_desc -> ssid , sizeof ( cfg80211_ssid ) ) ; memcpy ( & info -> bssid , & bss_desc -> mac_address , ETH_ALEN ) ; info -> bss_chan = bss_desc -> channel ; info -> media_connected = priv -> media_connected ; info -> max_power_level = priv -> max_tx_power_level ; info -> min_power_level = priv -> min_tx_power_level ; info -> adhoc_state = priv -> adhoc_state ; info -> bcn_nf_last = priv -> bcn_nf_last ; if ( priv -> sec_info . wep_enabled ) { info -> wep_status = true ; } else { info -> wep_status = false ; } info -> is_hs_configured = test_bit ( MWIFIEX_IS_HS_CONFIGURED , & adapter -> work_flags ) ; info -> is_deep_sleep = adapter -> is_deep_sleep ; return 0 ; } 