static bool annotate_browser__toggle_source ( struct annotate_browser * browser ) { struct disasm_line * dl ; struct browser_disasm_line * bdl ; off_t offset = browser -> b . index - browser -> b . top_idx ; browser -> b . seek ( & browser -> b , offset , SEEK_CUR ) ; dl = list_entry ( browser -> b . top , disasm_line , node ) ; bdl = disasm_line__browser ( dl ) ; if ( annotate_browser__opts . hide_src_code ) { if ( bdl -> idx_asm < offset ) { offset = bdl -> idx ; } browser -> b . nr_entries = browser -> nr_entries ; annotate_browser__opts . hide_src_code = false ; browser -> b . seek ( & browser -> b , - offset , SEEK_CUR ) ; browser -> b . top_idx = bdl -> idx - offset ; browser -> b . index = bdl -> idx ; } else { if ( bdl -> idx_asm < 0 ) { ui_helpline__puts ( "Only available for assembly lines." ) ; browser -> b . seek ( & browser -> b , - offset , SEEK_CUR ) ; return false ; } browser -> b . nr_entries = browser -> nr_asm_entries ; annotate_browser__opts . hide_src_code = true ; browser -> b . seek ( & browser -> b , - offset , SEEK_CUR ) ; browser -> b . top_idx = bdl -> idx_asm - offset ; browser -> b . index = bdl -> idx_asm ; } return true ; } 