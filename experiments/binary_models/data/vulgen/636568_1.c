TEST ( ) { _cleanup_hashmap_free_ Hashmap * m = NULL ; char * s ; assert_se ( hashmap_put_strdup ( & m , "foo" , "bar" ) == 1 ) ; assert_se ( hashmap_put_strdup ( & m , "foo" , "bar" ) == 0 ) ; assert_se ( hashmap_put_strdup ( & m , "foo" , NULL ) == - EEXIST ) ; assert_se ( hashmap_put_strdup ( & m , "foo" , "bar" ) == 0 ) ; s = hashmap_get ( m , "foo" ) ; assert_se ( streq ( s , "bar" ) ) ; assert_se ( hashmap_put_strdup ( & m , "xxx" , NULL ) == 1 ) ; assert_se ( hashmap_put_strdup ( & m , "xxx" , "bar" ) == - EEXIST ) ; assert_se ( hashmap_put_strdup ( & m , "xxx" , NULL ) == 0 ) ; assert_se ( hashmap_contains ( m , "xxx" ) ) ; s = hashmap_get ( m , "xxx" ) ; assert_se ( s == NULL ) ; } 