static void max77693_led_validate_configuration ( struct max77693_led_device * led , struct max77693_led_config_data * cfg ) { u32 flash_iout_max = cfg -> boost_mode ?FLASH_IOUT_MAX_2LEDS : FLASH_IOUT_MAX_1LED ; int i ; if ( cfg -> num_leds == 1 && max77693_fled_used ( led , FLED1 ) && max77693_fled_used ( led , FLED2 ) ) { led -> iout_joint = true ; } cfg -> boost_mode = clamp_val ( cfg -> boost_mode , MAX77693_LED_BOOST_NONE , MAX77693_LED_BOOST_FIXED ) ; if ( ( cfg -> boost_mode == MAX77693_LED_BOOST_NONE ) && led -> iout_joint ) { cfg -> boost_mode = MAX77693_LED_BOOST_FIXED ; } max77693_align_iout_current ( led , cfg -> iout_torch_max , TORCH_IOUT_MIN , TORCH_IOUT_MAX , TORCH_IOUT_STEP ) ; max77693_align_iout_current ( led , cfg -> iout_flash_max , FLASH_IOUT_MIN , flash_iout_max , FLASH_IOUT_STEP ) ; for ( i = 0 ; i < ARRAY_SIZE ( cfg -> flash_timeout_max ) ; ++ i ) { clamp_align ( & cfg -> flash_timeout_max [ i ] , FLASH_TIMEOUT_MIN , FLASH_TIMEOUT_MAX , FLASH_TIMEOUT_STEP ) ; } clamp_align ( & cfg -> boost_vout , FLASH_VOUT_MIN , FLASH_VOUT_MAX , FLASH_VOUT_STEP ) ; } 