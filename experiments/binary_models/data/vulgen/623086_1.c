void print_sensor ( struct sensor * s ) { const char * name ; if ( s -> flags & SENSOR_FUNKNOWN ) { printf ( "unknown" ) ; } else { switch ( s -> type ) { case SENSOR_TEMP : printf ( "%.2f degC" , ( s -> value - 273150000 ) / 1000000.0 ) ; break ; case SENSOR_FANRPM : printf ( "%lld RPM" , s -> value ) ; break ; case SENSOR_VOLTS_DC : printf ( "%.2f VDC" , s -> value / 1000000.0 ) ; break ; case SENSOR_VOLTS_AC : printf ( "%.2f VAC" , s -> value / 1000000.0 ) ; break ; case SENSOR_OHMS : printf ( "%lld ohm" , s -> value ) ; break ; case SENSOR_WATTS : printf ( "%.2f W" , s -> value / 1000000.0 ) ; break ; case SENSOR_AMPS : printf ( "%.2f A" , s -> value / 1000000.0 ) ; break ; case SENSOR_WATTHOUR : printf ( "%.2f Wh" , s -> value / 1000000.0 ) ; break ; case SENSOR_AMPHOUR : printf ( "%.2f Ah" , s -> value / 1000000.0 ) ; break ; case SENSOR_INDICATOR : printf ( "%s" , s -> value ?"On" : "Off" ) ; break ; case SENSOR_INTEGER : printf ( "%lld" , s -> value ) ; break ; case SENSOR_PERCENT : printf ( "%.2f%%" , s -> value / 1000.0 ) ; break ; case SENSOR_LUX : printf ( "%.2f lx" , s -> value / 1000000.0 ) ; break ; case SENSOR_DRIVE : switch ( s -> value ) { case SENSOR_DRIVE_EMPTY : name = "empty" ; break ; case SENSOR_DRIVE_READY : name = "ready" ; break ; case SENSOR_DRIVE_POWERUP : name = "powering up" ; break ; case SENSOR_DRIVE_ONLINE : name = "online" ; break ; case SENSOR_DRIVE_IDLE : name = "idle" ; break ; case SENSOR_DRIVE_ACTIVE : name = "active" ; break ; case SENSOR_DRIVE_REBUILD : name = "rebuilding" ; break ; case SENSOR_DRIVE_POWERDOWN : name = "powering down" ; break ; case SENSOR_DRIVE_FAIL : name = "failed" ; break ; case SENSOR_DRIVE_PFAIL : name = "degraded" ; break ; default : name = "unknown" ; break ; } printf ( "%s" , name ) ; break ; case SENSOR_TIMEDELTA : printf ( "%.6f secs" , s -> value / 1000000000.0 ) ; break ; case SENSOR_HUMIDITY : printf ( "%.2f%%" , s -> value / 1000.0 ) ; break ; case SENSOR_FREQ : printf ( "%.2f Hz" , s -> value / 1000000.0 ) ; break ; case SENSOR_ANGLE : printf ( "%3.4f degrees" , s -> value / 1000000.0 ) ; break ; case SENSOR_DISTANCE : printf ( "%.3f m" , s -> value / 1000000.0 ) ; break ; case SENSOR_PRESSURE : printf ( "%.2f Pa" , s -> value / 1000.0 ) ; break ; case SENSOR_ACCEL : printf ( "%2.4f m/s^2" , s -> value / 1000000.0 ) ; break ; case SENSOR_VELOCITY : printf ( "%4.3f m/s" , s -> value / 1000000.0 ) ; break ; case SENSOR_ENERGY : printf ( "%.2f J" , s -> value / 1000000.0 ) ; break ; default : printf ( "unknown" ) ; } } switch ( s -> status ) { case SENSOR_S_UNSPEC : break ; case SENSOR_S_OK : printf ( ", OK" ) ; break ; case SENSOR_S_WARN : printf ( ", WARNING" ) ; break ; case SENSOR_S_CRIT : printf ( ", CRITICAL" ) ; break ; case SENSOR_S_UNKNOWN : printf ( ", UNKNOWN" ) ; break ; } if ( s -> tv . tv_sec ) { time_t t = s -> tv . tv_sec ; char ct [ 26 ] ; ctime_r ( & t , ct ) ; ct [ 19 ] = '\0' ; printf ( ", %s.%03ld" , ct , s -> tv . tv_usec / 1000 ) ; } } 