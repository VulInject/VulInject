static void tm6000_ir_keydown ( struct tm6000_IR * ir , const char * buf , unsigned int len ) { u8 device , command ; u32 scancode ; enum rc_type protocol ; command = buf [ 0 ] ; device = ( len > 1 ?buf [ 1 ] : 0x0 ) ; switch ( ir -> rc_type ) { case RC_BIT_RC5 : protocol = RC_TYPE_RC5 ; scancode = RC_SCANCODE_RC5 ( device , command ) ; break ; case RC_BIT_NEC : protocol = RC_TYPE_NEC ; scancode = RC_SCANCODE_NEC ( device , command ) ; break ; default : protocol = RC_TYPE_OTHER ; scancode = RC_SCANCODE_OTHER ( device << 8 | command ) ; break ; } dprintk ( 1 , "%s, protocol: 0x%04x, scancode: 0x%08x\n" , __func__ , protocol , scancode ) ; rc_keydown ( ir -> rc , protocol , scancode , 0 ) ; } 