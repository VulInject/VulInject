gnu_fetch_registers ( ) { struct proc * thread ; inf_update_procs ( current_inferior ) ; thread = inf_tid_to_thread ( current_inferior , PIDGET ( inferior_ptid ) ) ; if ( ! thread ) { error ( "Can't fetch registers from thread %d: No such thread" , PIDGET ( inferior_ptid ) ) ; } if ( regno < I386_NUM_GREGS || regno == - 1 ) { thread_state_t state ; state = proc_get_state ( thread , 0 ) ; if ( ! state ) { warning ( "Couldn't fetch registers from %s" , proc_string ( thread ) ) ; return ; } if ( regno == - 1 ) { int i ; proc_debug ( thread , "fetching all register" ) ; for ( i = 0 ; i < I386_NUM_GREGS ; i ++ ) { regcache_raw_supply ( current_regcache , i , REG_ADDR ( state , i ) ) ; } } else { proc_debug ( thread , "fetching register %s" , REGISTER_NAME ( regno ) ) ; regcache_raw_supply ( current_regcache , regno , REG_ADDR ( state , regno ) ) ; thread -> fetched_regs |= ( 1 << regno ) ; } } if ( regno >= I386_NUM_GREGS || regno == - 1 ) { proc_debug ( thread , "fetching floating-point registers" ) ; fetch_fpregs ( thread ) ; } } 