extern char * strndup ( const char * s , size_t n ) char * strndup ( const char * s , size_t n ) { const size_t len = strlen ( s ) ; char * new_s ; if ( len <= n ) { return strdup ( s ) ; } new_s = malloc ( n + 1 ) ; memcpy ( new_s , s , n ) ; new_s [ n ] = '\0' ; return new_s ; } 