static u32 k3_lpddr4_read_ddr_type ( const lpddr4_privatedata * pd ) { u32 status = 0U ; u32 offset = 0U ; u32 regval = 0U ; u32 dram_class = 0U ; struct k3_ddrss_desc * ddrss = ( k3_ddrss_desc * ) pd -> ddr_instance ; status = ddrss -> driverdt -> readreg ( pd , LPDDR4_CTL_REGS , offset , & regval ) ; if ( status > 0U ) { printf ( "%s: Failed to read DRAM_CLASS\n" , __func__ ) ; hang ( ) ; } dram_class = ( ( regval & TH_FLD_MASK ( LPDDR4__DRAM_CLASS__FLD ) ) >> TH_FLD_SHIFT ( LPDDR4__DRAM_CLASS__FLD ) ) ; return dram_class ; } 