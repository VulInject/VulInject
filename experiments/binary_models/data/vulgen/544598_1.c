smux_set ( , , , , , ) { int j ; struct subtree * subtree ; struct variable * v ; int subresult ; oid * suffix ; size_t suffix_len ; int result ; u_char * statP = NULL ; WriteMethod * write_method = NULL ; struct listnode * node , * nnode ; for ( ALL_LIST_ELEMENTS ( treelist , node , nnode , subtree ) ; ) { subresult = oid_compare_part ( reqid , * reqid_len , subtree -> name , subtree -> name_len ) ; if ( subresult == 0 ) { suffix = reqid + subtree -> name_len ; suffix_len = * reqid_len - subtree -> name_len ; result = subresult ; for ( j = 0 ; j < subtree -> variables_num ; j ++ ) { v = & subtree -> variables [ j ] ; result = oid_compare_part ( suffix , suffix_len , v -> name , v -> namelen ) ; if ( result == 0 ) { if ( debug_smux ) { zlog_debug ( "SMUX function call index is %d" , v -> magic ) ; } statP = * v -> findVar ( v , suffix , & suffix_len , 1 , & val_len , & write_method ) ; if ( write_method ) { return * write_method ( action , val , val_type , val_len , statP , suffix , suffix_len ) ; } else { return SNMP_ERR_READONLY ; } } } } } return SNMP_ERR_NOSUCHNAME ; } 