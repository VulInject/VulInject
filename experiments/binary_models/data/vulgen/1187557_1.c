extern char * slurm_conf_get_aliased_nodename ( ) { struct addrinfo * addrs , * addr_ptr ; char hostname_full [ NI_MAXHOST ] ; char * nodename , * tmp_name = NULL ; if ( gethostname ( hostname_full , sizeof ( hostname_full ) ) ) { return NULL ; } nodename = slurm_conf_get_nodename ( hostname_full ) ; if ( nodename ) { return nodename ; } addrs = get_addr_info ( hostname_full , 0 ) ; addr_ptr = addrs ; for ( addr_ptr = addrs ; addr_ptr ; addr_ptr = addr_ptr -> ai_next ) { if ( addr_ptr -> ai_canonname ) { nodename = slurm_conf_get_nodename ( addr_ptr -> ai_canonname ) ; } else { tmp_name = xgetnameinfo ( addr_ptr -> ai_addr , addr_ptr -> ai_addrlen ) ; nodename = slurm_conf_get_nodename ( tmp_name ) ; } if ( nodename ) { break ; } } if ( addrs ) { freeaddrinfo ( addrs ) ; } if ( ! nodename ) { nodename = _get_aliased_nodename_fallback ( hostname_full ) ; } return nodename ; } 