BOOL pf_config_plugin ( proxyPluginsManager * plugins_manager , void * userdata ) { struct config_plugin_data * custom ; proxyPlugin plugin = { 0 } ; plugin . name = config_plugin_name ; plugin . description = config_plugin_desc ; plugin . PluginUnload = config_plugin_unload ; plugin . KeyboardEvent = config_plugin_keyboard_event ; plugin . UnicodeEvent = config_plugin_unicode_event ; plugin . MouseEvent = config_plugin_mouse_event ; plugin . MouseExEvent = config_plugin_mouse_ex_event ; plugin . ClientChannelData = config_plugin_client_channel_data ; plugin . ServerChannelData = config_plugin_server_channel_data ; plugin . ChannelCreate = config_plugin_channel_create ; plugin . DynamicChannelCreate = config_plugin_dynamic_channel_create ; plugin . userdata = userdata ; custom = calloc ( 1 , sizeof ( config_plugin_data ) ) ; custom -> mgr = plugins_manager ; custom -> config = userdata ; plugin . custom = custom ; plugin . userdata = userdata ; return plugins_manager -> RegisterPlugin ( plugins_manager , & plugin ) ; } 