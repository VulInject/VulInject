save_regs ( , , , , , , ) FILE * file ; int low , high ; const char * base ; int offset ; int n_regs ; int real_offset ; { int i ; if ( TARGET_ARCH64 && high <= 32 ) { for ( i = low ; i < high ; i ++ ) { if ( regs_ever_live [ i ] && ! call_used_regs [ i ] ) { fprintf ( file , "\tstx\t%s, [%s+%d]\n" , reg_names [ i ] , base , offset + 4 * n_regs ) ; if ( dwarf2out_do_frame ( ) ) { dwarf2out_reg_save ( "" , i , real_offset + 4 * n_regs ) ; } n_regs += 2 ; } } } else { for ( i = low ; i < high ; i += 2 ) { if ( regs_ever_live [ i ] && ! call_used_regs [ i ] ) { if ( regs_ever_live [ i + 1 ] && ! call_used_regs [ i + 1 ] ) { fprintf ( file , "\tstd\t%s, [%s+%d]\n" , reg_names [ i ] , base , offset + 4 * n_regs ) ; if ( dwarf2out_do_frame ( ) ) { dwarf2out_reg_save ( l , i , real_offset + 4 * n_regs ) ; dwarf2out_reg_save ( l , i + 1 , real_offset + 4 * n_regs + 4 ) ; } n_regs += 2 ; } else { fprintf ( file , "\tst\t%s, [%s+%d]\n" , reg_names [ i ] , base , offset + 4 * n_regs ) ; if ( dwarf2out_do_frame ( ) ) { dwarf2out_reg_save ( "" , i , real_offset + 4 * n_regs ) ; } n_regs += 2 ; } } else { if ( regs_ever_live [ i + 1 ] && ! call_used_regs [ i + 1 ] ) { fprintf ( file , "\tst\t%s, [%s+%d]\n" , reg_names [ i + 1 ] , base , offset + 4 * n_regs + 4 ) ; if ( dwarf2out_do_frame ( ) ) { dwarf2out_reg_save ( "" , i + 1 , real_offset + 4 * n_regs + 4 ) ; } n_regs += 2 ; } } } } return n_regs ; } 