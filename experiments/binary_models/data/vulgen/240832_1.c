void pe__print_bundle ( pe_resource_t * rsc , const char * pre_text , long options , void * print_data ) { pe__bundle_variant_data_t * bundle_data = NULL ; char * child_text = NULL ; CRM_CHECK ( , ) if ( options & pe_print_xml ) { bundle_print_xml ( rsc , pre_text , options , print_data ) ; return ; } get_bundle_variant_data ( bundle_data , rsc ) ; if ( pre_text == NULL ) { pre_text = " " ; } status_print ( "%sContainer bundle%s: %s [%s]%s%s\n" , pre_text , ( ( bundle_data -> nreplicas > 1 ) ?" set" : "" ) , rsc -> id , bundle_data -> image , pcmk_is_set ( rsc -> flags , pe_rsc_unique ) ?" (unique)" : "" , pcmk_is_set ( rsc -> flags , pe_rsc_managed ) ?"" : " (unmanaged)" ) ; if ( options & pe_print_html ) { status_print ( "<br />\n<ul>\n" ) ; } for ( GList * gIter = bundle_data -> replicas ; gIter != NULL ; gIter = gIter -> next ) { pe__bundle_replica_t * replica = gIter -> data ; CRM_ASSERT ( replica ) ; if ( options & pe_print_html ) { status_print ( "<li>" ) ; } if ( pcmk_is_set ( options , pe_print_implicit ) ) { child_text = crm_strdup_printf ( "     %s" , pre_text ) ; if ( pcmk__list_of_multiple ( bundle_data -> replicas ) ) { status_print ( "  %sReplica[%d]\n" , pre_text , replica -> offset ) ; } if ( options & pe_print_html ) { status_print ( "<br />\n<ul>\n" ) ; } print_rsc_in_list ( replica -> ip , child_text , options , print_data ) ; print_rsc_in_list ( replica -> container , child_text , options , print_data ) ; print_rsc_in_list ( replica -> remote , child_text , options , print_data ) ; print_rsc_in_list ( replica -> child , child_text , options , print_data ) ; if ( options & pe_print_html ) { status_print ( "</ul>\n" ) ; } } else { child_text = crm_strdup_printf ( "%s  " , pre_text ) ; print_bundle_replica ( replica , child_text , options , print_data ) ; } free ( child_text ) ; if ( options & pe_print_html ) { status_print ( "</li>\n" ) ; } } } 