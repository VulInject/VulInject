str * dlginfo_agg_nbody ( str * pres_user , str * pres_domain , str * * body_array , int n , int off_index ) { str * n_body = NULL ; LM_DBG ( "[pres_user]=%.*s [pres_domain]= %.*s, [n]=%d\n" , pres_user -> len , pres_user -> s , pres_domain -> len , pres_domain -> s , n ) ; if ( body_array == NULL && ( ! force_dummy_dialog ) ) { return NULL ; } if ( body_array == NULL ) { return dlginfo_agg_nbody_empty ( pres_user , pres_domain ) ; } n_body = aggregate_xmls ( pres_user , pres_domain , body_array , n ) ; LM_DBG ( "[n_body]=%p\n" , n_body ) ; if ( n_body ) { LM_ERR ( 0 ) ; } if ( n_body == NULL && n != 0 ) { LM_ERR ( "while aggregating body\n" ) ; } xmlCleanupParser ( ) ; xmlMemoryDump ( ) ; return n_body ; } 