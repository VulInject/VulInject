static int cadence_qspi_set_protocol ( struct cadence_spi_priv * priv , const struct spi_mem_op * op ) { int ret ; priv -> dtr = op -> data . dtr && op -> cmd . dtr && op -> addr . dtr ; ret = cadence_qspi_buswidth_to_inst_type ( op -> cmd . buswidth ) ; if ( ret < 0 ) { return ret ; } priv -> inst_width = ret ; ret = cadence_qspi_buswidth_to_inst_type ( op -> addr . buswidth ) ; if ( ret < 0 ) { return ret ; } priv -> addr_width = ret ; ret = cadence_qspi_buswidth_to_inst_type ( op -> data . buswidth ) ; priv -> data_width = ret ; return 0 ; } 