static int __init tunnel4_init ( void ) { if ( inet_add_protocol ( & tunnel4_protocol , IPPROTO_IPIP ) ) { err } if ( inet_add_protocol ( & tunnel64_protocol , IPPROTO_IPV6 ) ) { inet_del_protocol ( & tunnel4_protocol , IPPROTO_IPIP ) ; err } if ( inet_add_protocol ( & tunnelmpls4_protocol , IPPROTO_MPLS ) ) { inet_del_protocol ( & tunnel4_protocol , IPPROTO_IPIP ) ; err } return 0 ; err pr_err ( "%s: can't add protocol\n" , __func__ ) ; return - EAGAIN ; } 