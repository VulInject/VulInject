static void xz_display_options ( void * buffer , int size ) { struct comp_opts * comp_opts = buffer ; int dictionary_size , flags , printed ; int i , n ; if ( size != sizeof ( comp_opts ) ) { failed } dictionary_size = comp_opts -> dictionary_size ; flags = comp_opts -> flags ; n = ffs ( dictionary_size ) - 1 ; if ( dictionary_size != ( 1 << n ) && dictionary_size != ( ( 1 << n ) + ( 1 << ( n + 1 ) ) ) ) { failed } printf ( "\tDictionary size %d\n" , dictionary_size ) ; printed = 0 ; for ( i = 0 ; bcj [ i ] . name ; i ++ ) { if ( ( flags >> i ) & 1 ) { if ( printed ) { printf ( ", " ) ; } else { printf ( "\tFilters selected: " ) ; } printf ( "%s" , bcj [ i ] . name ) ; printed = 1 ; } } if ( ! printed ) { printf ( "\tNo filters specified\n" ) ; } else { printf ( "\n" ) ; } return ; failed fprintf ( stderr , "xz: error reading stored compressor options from " "filesystem!\n" ) ; } 