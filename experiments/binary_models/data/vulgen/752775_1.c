static int omap_usb_init ( struct phy * x ) { struct omap_usb * phy = phy_get_drvdata ( x ) ; u32 val ; omap_usb2_enable_clocks ( phy ) ; if ( phy -> flags & OMAP_USB2_CALIBRATE_FALSE_DISCONNECT ) { val = omap_usb_readl ( phy -> phy_base , USB2PHY_ANA_CONFIG1 ) ; val |= USB2PHY_DISCON_BYP_LATCH ; omap_usb_writel ( phy -> phy_base , USB2PHY_ANA_CONFIG1 , val ) ; } if ( phy -> flags & OMAP_USB2_DISABLE_CHRG_DET ) { val = omap_usb_readl ( phy -> phy_base , USB2PHY_CHRG_DET ) ; omap_usb_writel ( phy -> phy_base , USB2PHY_CHRG_DET , val ) ; } return 0 ; } 