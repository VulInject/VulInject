void rtl8723be_phy_set_bw_mode ( struct ieee80211_hw * hw , enum nl80211_channel_type ch_type ) { struct rtl_priv * rtlpriv = rtl_priv ( hw ) ; struct rtl_phy * rtlphy = & rtlpriv -> phy ; struct rtl_hal * rtlhal = rtl_hal ( rtl_priv ( hw ) ) ; u8 tmp_bw = rtlphy -> current_chan_bw ; if ( rtlphy -> set_bwmode_inprogress ) { return ; } rtlphy -> set_bwmode_inprogress = true ; if ( ( ! is_hal_stop ( rtlhal ) ) && ! ( RT_CANNOT_IO ( hw ) ) ) { rtl8723be_phy_set_bw_mode_callback ( hw ) ; } else { rtl_dbg ( rtlpriv , COMP_ERR , DBG_WARNING , "false driver sleep or unload\n" ) ; rtlphy -> set_bwmode_inprogress = false ; } } 