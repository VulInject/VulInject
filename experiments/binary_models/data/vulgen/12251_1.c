static void ti_sn_bridge_parse_lanes ( struct ti_sn65dsi86 * pdata , struct device_node * np ) { u32 lane_assignments [ SN_MAX_DP_LANES ] { 0 1 2 3 } ; ; u32 lane_polarities [ SN_MAX_DP_LANES ] { } ; ; struct device_node * endpoint ; u8 ln_assign = 0 ; u8 ln_polrs = 0 ; int dp_lanes ; int i ; endpoint = of_graph_get_endpoint_by_regs ( np , 1 , - 1 ) ; if ( dp_lanes > 0 ) { of_property_read_u32_array ( endpoint , "data-lanes" , lane_assignments , dp_lanes ) ; of_property_read_u32_array ( endpoint , "lane-polarities" , lane_polarities , dp_lanes ) ; } else { dp_lanes = SN_MAX_DP_LANES ; } of_node_put ( endpoint ) ; for ( i = SN_MAX_DP_LANES - 1 ; i >= 0 ; i -- ) { ln_assign = ln_assign << LN_ASSIGN_WIDTH | lane_assignments [ i ] ; ln_polrs = ln_polrs << 1 | lane_polarities [ i ] ; } pdata -> dp_lanes = dp_lanes ; pdata -> ln_assign = ln_assign ; pdata -> ln_polrs = ln_polrs ; } 