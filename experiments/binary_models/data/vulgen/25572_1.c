static void intel_gt_reset_global ( struct intel_gt * gt , u32 engine_mask , const char * reason ) { struct kobject * kobj = & gt -> i915 -> drm . primary -> kdev -> kobj ; char * error_event [ ] { I915_ERROR_UEVENT "=1" NULL } ; ; char * reset_event [ ] { I915_RESET_UEVENT "=1" NULL } ; ; char * reset_done_event [ ] { I915_ERROR_UEVENT "=0" NULL } ; ; struct intel_wedge_me w ; kobject_uevent_env ( kobj , KOBJ_CHANGE , error_event ) ; GT_TRACE ( gt , "resetting chip, engines=%x\n" , engine_mask ) ; kobject_uevent_env ( kobj , KOBJ_CHANGE , reset_event ) ; intel_wedge_on_timeout ( , , 5 ) { intel_display_prepare_reset ( gt -> i915 ) ; intel_gt_reset ( gt , engine_mask , reason ) ; intel_display_finish_reset ( gt -> i915 ) ; } } 