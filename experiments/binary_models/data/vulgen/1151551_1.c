enum env_location arch_env_get_location ( enum env_operation op , int prio ) { enum boot_src src = get_boot_src ( ) ; if ( prio ) { return ENVL_UNKNOWN ; } return env_loc ; switch ( src ) { case BOOT_SOURCE_IFC_NOR : env_loc = ENVL_FLASH ; break ; case BOOT_SOURCE_QSPI_NOR : case BOOT_SOURCE_XSPI_NOR : env_loc = ENVL_SPI_FLASH ; break ; case BOOT_SOURCE_IFC_NAND : case BOOT_SOURCE_QSPI_NAND : case BOOT_SOURCE_XSPI_NAND : env_loc = ENVL_NAND ; break ; case BOOT_SOURCE_SD_MMC : case BOOT_SOURCE_SD_MMC2 : env_loc = ENVL_MMC ; break ; case BOOT_SOURCE_I2C1_EXTENDED : default : break ; } return env_loc ; } 