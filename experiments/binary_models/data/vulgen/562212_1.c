int wsm_set_pm ( struct cw1200_common * priv , const struct wsm_set_pm * arg ) { int ret ; struct wsm_buf * buf = & priv -> wsm_cmd_buf ; wsm_cmd_lock ( priv ) ; WSM_PUT8 ( buf , arg -> mode ) ; WSM_PUT8 ( buf , arg -> fast_psm_idle_period ) ; WSM_PUT8 ( buf , arg -> ap_psm_change_period ) ; WSM_PUT8 ( buf , arg -> min_auto_pspoll_period ) ; ret = wsm_cmd_send ( priv , buf , NULL , WSM_SET_PM_REQ_ID , WSM_CMD_TIMEOUT ) ; wsm_cmd_unlock ( priv ) ; return ret ; nomem wsm_cmd_unlock ( priv ) ; return - ENOMEM ; } 