static void ath_scan_next_channel ( struct ath_softc * sc ) { struct ath_common * common = ath9k_hw_common ( sc -> sc_ah ) ; struct cfg80211_scan_request * req = sc -> offchannel . scan_req ; struct ieee80211_channel * chan ; ath_dbg ( common , CHAN_CTX , "Moving offchannel state to ATH_OFFCHANNEL_PROBE_SEND, scan_idx: %d\n" , sc -> offchannel . scan_idx ) ; chan = req -> channels [ sc -> offchannel . scan_idx ++ ] ; sc -> offchannel . duration = ath_scan_channel_duration ( sc , chan ) ; sc -> offchannel . state = ATH_OFFCHANNEL_PROBE_SEND ; ath_chanctx_offchan_switch ( sc , chan ) ; } 