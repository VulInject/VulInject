static void OPNAME # # rv40_chroma_mc4_c ( , , , , , ) { const int A = ( 8 - x ) * ( 8 - y ) const int B = ( x ) * ( 8 - y ) const int C = ( 8 - x ) * ( y ) const int D = ( x ) * ( y ) int i int bias = rv40_bias [ y >> 1 ] [ x >> 1 ] assert ( x < 8 && y < 8 && x >= 0 && y >= 0 ) } ; { const int E = B + C ; const ptrdiff_t step = C ?stride : 1 ; for ( i = 0 ; i < h ; i ++ ) { OP ( dst [ 0 ] , ( A * src [ 0 ] + E * src [ step + 0 ] + bias ) ) ; OP ( dst [ 1 ] , ( A * src [ 1 ] + E * src [ step + 1 ] + bias ) ) ; OP ( dst [ 2 ] , ( A * src [ 2 ] + E * src [ step + 2 ] + bias ) ) ; OP ( dst [ 3 ] , ( A * src [ 3 ] + E * src [ step + 3 ] + bias ) ) ; dst += stride ; src += stride ; } } 