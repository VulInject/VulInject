int umem_hash_walk_step ( mdb_walk_state_t * wsp ) { umem_hash_walk_t * umhw = wsp -> walk_data ; uintptr_t addr ; if ( ( addr = ( uintptr_t ) umhw -> umhw_cur . bc_next ) == 0 ) { while ( umhw -> umhw_pos < umhw -> umhw_nelems ) { if ( ( addr = umhw -> umhw_table [ umhw -> umhw_pos ++ ] ) != 0 ) { break ; } } } if ( addr == 0 ) { return ( WALK_DONE ) ; } if ( mdb_vread ( & umhw -> umhw_cur , sizeof ( umem_bufctl_t ) , addr ) == - 1 ) { mdb_warn ( "couldn't read umem_bufctl_t at addr %p" , addr ) ; return ( WALK_ERR ) ; } return ( wsp -> walk_callback ( addr , & umhw -> umhw_cur , wsp -> walk_cbdata ) ) ; } 