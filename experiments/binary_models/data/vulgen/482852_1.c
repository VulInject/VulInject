void test_revwalk_mergebase__remove_redundant ( void ) { git_repository * repo ; git_oid one , two , base ; git_oidarray result = { NULL 0 } ; cl_git_pass ( git_repository_open ( & repo , cl_fixture ( "redundant.git" ) ) ) ; cl_git_pass ( git_oid__fromstr ( & one , "d89137c93ba1ee749214ff4ce52ae9137bc833f9" , GIT_OID_SHA1 ) ) ; cl_git_pass ( git_oid__fromstr ( & two , "91f4b95df4a59504a9813ba66912562931d990e3" , GIT_OID_SHA1 ) ) ; cl_git_pass ( git_oid__fromstr ( & base , "6cb1f2352d974e1c5a776093017e8772416ac97a" , GIT_OID_SHA1 ) ) ; cl_git_pass ( git_merge_bases ( & result , repo , & one , & two ) ) ; cl_assert_equal_i ( 1 , result . count ) ; cl_assert_equal_oid ( & base , & result . ids [ 0 ] ) ; git_oidarray_dispose ( & result ) ; } 