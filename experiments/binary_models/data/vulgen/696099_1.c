Cell * jump ( Node * * a , int n ) { Cell * y ; switch ( n ) { case EXIT : if ( a [ 0 ] != NULL ) { y = execute ( a [ 0 ] ) ; errorflag = ( int ) getfval ( y ) ; } longjmp ( env , 1 ) ; case RETURN : if ( a [ 0 ] != NULL ) { y = execute ( a [ 0 ] ) ; if ( ( y -> tval & ( STR | NUM ) ) == ( STR | NUM ) ) { ( void ) setsval ( fp -> retval , getsval ( y ) ) ; fp -> retval -> fval = getfval ( y ) ; fp -> retval -> tval |= NUM ; } if ( y -> tval & STR ) { ( void ) setsval ( fp -> retval , getsval ( y ) ) ; } if ( y -> tval & NUM ) { ( void ) setfval ( fp -> retval , getfval ( y ) ) ; } else { FATAL ( "bad type variable %d" , y -> tval ) ; } tempfree ( y ) ; } return ( jret ) ; case NEXT : return ( jnext ) ; case NEXTFILE : nextfile ( ) ; return ( jnextfile ) ; case BREAK : return ( jbreak ) ; case CONTINUE : return ( jcont ) ; default : FATAL ( "illegal jump type %d" , n ) ; } return ( NULL ) ; } 