static int genregs_set ( struct task_struct * target , const struct user_regset * regset , unsigned int pos , unsigned int count , const void * kbuf , const void __user * ubuf ) { struct pt_regs * regs = task_pt_regs ( target ) ; const struct switch_stack * sw = ( switch_stack * ) regs - 1 ; int ret = 0 ; if ( ! ret ) { ret = user_regset_copyin_ignore ( & pos , & count , & kbuf , & ubuf , START * 4 , ( END * 4 ) + 4 ) ; } if ( ! ret ) { ret = user_regset_copyin ( & pos , & count , & kbuf , & ubuf , ( void * ) ( PTR ) , LOC * 4 , ( LOC * 4 ) + 4 ) ; } if ( ! ret ) { ret = user_regset_copyin ( & pos , & count , & kbuf , & ubuf , ( void * ) ( PTR ) , START * 4 , ( END * 4 ) + 4 ) ; } REG_IGNORE_RANGE ( PTR_R0 , PTR_R0 ) ; REG_IN_RANGE ( & regs -> r1 , PTR_R1 , PTR_R7 ) ; REG_IN_RANGE ( & regs -> r8 , PTR_R8 , PTR_R15 ) ; REG_IN_RANGE ( sw , PTR_R16 , PTR_R23 ) ; REG_IGNORE_RANGE ( PTR_R24 , PTR_R25 ) ; REG_IN_ONE ( & regs -> gp , PTR_GP ) ; REG_IN_ONE ( & regs -> sp , PTR_SP ) ; REG_IN_ONE ( & regs -> fp , PTR_FP ) ; REG_IN_ONE ( & regs -> ea , PTR_EA ) ; REG_IGNORE_RANGE ( PTR_BA , PTR_BA ) ; REG_IN_ONE ( & regs -> ra , PTR_RA ) ; REG_IN_ONE ( & regs -> ea , PTR_PC ) ; return ret ; } 