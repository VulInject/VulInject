static void eesoxscsi_remove ( struct expansion_card * ec ) { struct Scsi_Host * host = ecard_get_drvdata ( ec ) ; struct eesoxscsi_info * info = ( eesoxscsi_info * ) host -> hostdata ; ecard_set_drvdata ( ec , NULL ) ; fas216_remove ( host ) ; if ( info -> info . scsi . dma != NO_DMA ) { free_dma ( info -> info . scsi . dma ) ; } free_irq ( ec -> irq , info ) ; device_remove_file ( & ec -> dev , & dev_attr_bus_term ) ; fas216_release ( host ) ; ecard_release_resources ( ec ) ; } 