static void MVCreateFields ( MetricsView * mv , int i ) { static GBox small = GBOX_EMPTY ; GGadgetData gd ; GTextInfo label ; static unichar_t nullstr [ 1 ] { 0 } ; ; int j ; extern GBox _GGadget_gtextfield_box ; int udaidx = 1 ; small = _GGadget_gtextfield_box ; small . flags = 0 ; small . border_type = bt_none ; small . border_shape = bs_rect ; small . border_width = 0 ; small . padding = 0 ; memset ( & gd , '\0' , sizeof ( gd ) ) ; memset ( & label , '\0' , sizeof ( label ) ) ; memset ( mv -> perchar [ i ] . updownkparray , '\0' , sizeof ( GGadget * ) * 10 ) ; label . text = nullstr ; label . font = mv -> font ; mv -> perchar [ i ] . mx = gd . pos . x = mv -> mbase + ( i + 1 - mv -> coff ) * mv -> mwidth + 2 ; mv -> perchar [ i ] . mwidth = gd . pos . width = mv -> mwidth - 4 ; gd . pos . y = mv -> displayend + 2 ; gd . pos . height = mv -> fh ; gd . label = & label ; gd . box = & small ; gd . flags = gg_visible | gg_pos_in_pixels | gg_dontcopybox ; if ( mv -> bdf == NULL ) { gd . flags |= gg_enabled ; } mv -> perchar [ i ] . name = GLabelCreate ( mv -> gw , & gd , ( void * ) ( intptr_t ) i ) ; if ( mv -> perchar [ i ] . selected ) { GGadgetSetEnabled ( mv -> perchar [ i ] . name , false ) ; } gd . pos . y += mv -> fh + 4 ; gd . handle_controlevent = MV_WidthChanged ; mv -> perchar [ i ] . width = GTextFieldCreate ( mv -> gw , & gd , ( void * ) ( intptr_t ) i ) ; mv -> perchar [ i ] . updownkparray [ udaidx ++ ] = mv -> perchar [ i ] . width ; gd . pos . y += mv -> fh + 4 ; gd . handle_controlevent = MV_LBearingChanged ; mv -> perchar [ i ] . lbearing = GTextFieldCreate ( mv -> gw , & gd , ( void * ) ( intptr_t ) i ) ; mv -> perchar [ i ] . updownkparray [ udaidx ++ ] = mv -> perchar [ i ] . lbearing ; gd . pos . y += mv -> fh + 4 ; gd . handle_controlevent = MV_RBearingChanged ; mv -> perchar [ i ] . rbearing = GTextFieldCreate ( mv -> gw , & gd , ( void * ) ( intptr_t ) i ) ; mv -> perchar [ i ] . updownkparray [ udaidx ++ ] = mv -> perchar [ i ] . rbearing ; if ( i != 0 ) { gd . pos . y += mv -> fh + 4 ; gd . pos . x -= mv -> mwidth / 2 ; gd . handle_controlevent = MV_KernChanged ; mv -> perchar [ i ] . kern = GTextFieldCreate ( mv -> gw , & gd , ( void * ) ( intptr_t ) i ) ; if ( i == 1 ) { mv -> perchar [ i - 1 ] . updownkparray [ udaidx ] = mv -> perchar [ i ] . kern ; } mv -> perchar [ i ] . updownkparray [ udaidx ++ ] = mv -> perchar [ i ] . kern ; } GWidgetIndicateFocusGadget ( mv -> text ) ; } 