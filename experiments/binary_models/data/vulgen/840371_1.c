static void iic_ioexc_cascade ( struct irq_desc * desc ) { struct irq_chip * chip = irq_desc_get_chip ( desc ) ; struct cbe_iic_regs __iomem * node_iic = ( void __iomem * ) irq_desc_get_handler_data ( desc ) ; unsigned int irq = irq_desc_get_irq ( desc ) ; unsigned int base = ( irq & 0xffffff00 ) | IIC_IRQ_TYPE_IOEXC ; unsigned long bits , ack ; int cascade ; for ( ; ; ) { bits = in_be64 ( & node_iic -> iic_is ) ; if ( bits == 0 ) { break ; } ack = bits & IIC_ISR_EDGE_MASK ; if ( ack ) { out_be64 ( & node_iic -> iic_is , ack ) ; } for ( cascade = 63 ; cascade >= 0 ; cascade -- ) { if ( bits & ( 0x8000000000000000UL >> cascade ) ) { if ( cirq ) { generic_handle_irq ( cirq ) ; } } } ack = bits & ~ IIC_ISR_EDGE_MASK ; if ( ack ) { out_be64 ( & node_iic -> iic_is , ack ) ; } } chip -> irq_eoi ( & desc -> irq_data ) ; } 