static void rtl_hw_start_8168e_2 ( struct rtl8169_private * tp ) { void __iomem * ioaddr = tp -> mmio_addr ; struct pci_dev * pdev = tp -> pci_dev ; static const struct ephy_info e_info_8168e_2 [ ] { { 0x09 0x0000 0x0080 } { 0x19 0x0000 0x0224 } } ; ; rtl_ephy_init ( tp , e_info_8168e_2 , ARRAY_SIZE ( e_info_8168e_2 ) ) ; if ( tp -> dev -> mtu <= ETH_DATA_LEN ) { rtl_tx_performance_tweak ( pdev , 0x5 << MAX_READ_REQUEST_SHIFT ) ; } rtl_eri_write ( tp , 0xc0 , ERIAR_MASK_0011 , 0x0000 , ERIAR_EXGMAC ) ; rtl_eri_write ( tp , 0xb8 , ERIAR_MASK_0011 , 0x0000 , ERIAR_EXGMAC ) ; rtl_eri_write ( tp , 0xc8 , ERIAR_MASK_1111 , 0x00100002 , ERIAR_EXGMAC ) ; rtl_eri_write ( tp , 0xe8 , ERIAR_MASK_1111 , 0x00100006 , ERIAR_EXGMAC ) ; rtl_eri_write ( tp , 0xcc , ERIAR_MASK_1111 , 0x00000050 , ERIAR_EXGMAC ) ; rtl_eri_write ( tp , 0xd0 , ERIAR_MASK_1111 , 0x07ff0060 , ERIAR_EXGMAC ) ; rtl_w0w1_eri ( tp , 0x1b0 , ERIAR_MASK_0001 , 0x10 , 0x00 , ERIAR_EXGMAC ) ; rtl_w0w1_eri ( tp , 0x0d4 , ERIAR_MASK_0011 , 0x0c00 , 0xff00 , ERIAR_EXGMAC ) ; RTL_W8 ( MaxTxPacketSize , EarlySize ) ; rtl_disable_clock_request ( pdev ) ; RTL_W32 ( TxConfig , RTL_R32 ( TxConfig ) | TXCFG_AUTO_FIFO ) ; RTL_W8 ( MCU , RTL_R8 ( MCU ) & ~ NOW_IS_OOB ) ; RTL_W8 ( EEE_LED , RTL_R8 ( EEE_LED ) & ~ 0x07 ) ; RTL_W8 ( DLLPR , RTL_R8 ( DLLPR ) | PFM_EN ) ; RTL_W32 ( MISC , RTL_R32 ( MISC ) | PWM_EN ) ; RTL_W8 ( Config5 , RTL_R8 ( Config5 ) & ~ Spi_en ) ; } 