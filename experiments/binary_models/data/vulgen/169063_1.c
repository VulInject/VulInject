MODULE_DESCRIPTION ( "pvpanic device driver" ) ; MODULE_LICENSE ( "GPL" ) ; static struct list_head pvpanic_list ; static spinlock_t pvpanic_lock ; static void pvpanic_send_event ( unsigned int event ) { struct pvpanic_instance * pi_cur ; list_for_each_entry ( , , ) { if ( event & pi_cur -> capability & pi_cur -> events ) { iowrite8 ( event , pi_cur -> base ) ; } } spin_unlock ( & pvpanic_lock ) ; } 