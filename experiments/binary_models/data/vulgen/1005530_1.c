static void dosum ( struct sys_snapshot * ss ) { uint64_t total_faults ; kstat_named_t * ksn ; uint64_t nchhits ; sum_out ( "swap ins" , & ss -> ss_agg_vm , "swapin" ) ; sum_out ( "swap outs" , & ss -> ss_agg_vm , "swapout" ) ; sum_out ( "pages swapped in" , & ss -> ss_agg_vm , "pgswapin" ) ; sum_out ( "pages swapped out" , & ss -> ss_agg_vm , "pgswapout" ) ; ksn = kstat_data_lookup ( & ss -> ss_agg_vm , "hat_fault" ) ; if ( ksn == NULL ) { fail ( 0 , "kstat_data_lookup('%s', 'hat_fault') failed" , ss -> ss_agg_vm . ks_name ) ; } total_faults = ksn -> value . ui64 ; ksn = kstat_data_lookup ( & ss -> ss_agg_vm , "as_fault" ) ; if ( ksn == NULL ) { fail ( 0 , "kstat_data_lookup('%s', 'as_fault') failed" , ss -> ss_agg_vm . ks_name ) ; } total_faults += ksn -> value . ui64 ; ( void ) printf ( "%9llu total address trans. faults taken\n" , total_faults ) ; sum_out ( "page ins" , & ss -> ss_agg_vm , "pgin" ) ; sum_out ( "page outs" , & ss -> ss_agg_vm , "pgout" ) ; sum_out ( "pages paged in" , & ss -> ss_agg_vm , "pgpgin" ) ; sum_out ( "pages paged out" , & ss -> ss_agg_vm , "pgpgout" ) ; sum_out ( "total reclaims" , & ss -> ss_agg_vm , "pgrec" ) ; sum_out ( "reclaims from free list" , & ss -> ss_agg_vm , "pgfrec" ) ; sum_out ( "micro (hat) faults" , & ss -> ss_agg_vm , "hat_fault" ) ; sum_out ( "minor (as) faults" , & ss -> ss_agg_vm , "as_fault" ) ; sum_out ( "major faults" , & ss -> ss_agg_vm , "maj_fault" ) ; sum_out ( "copy-on-write faults" , & ss -> ss_agg_vm , "cow_fault" ) ; sum_out ( "zero fill page faults" , & ss -> ss_agg_vm , "zfod" ) ; sum_out ( "pages examined by the clock daemon" , & ss -> ss_agg_vm , "scan" ) ; sum_out ( "revolutions of the clock hand" , & ss -> ss_agg_vm , "rev" ) ; sum_out ( "pages freed by the clock daemon" , & ss -> ss_agg_vm , "dfree" ) ; sum_out ( "forks" , & ss -> ss_agg_sys , "sysfork" ) ; sum_out ( "vforks" , & ss -> ss_agg_sys , "sysvfork" ) ; sum_out ( "execs" , & ss -> ss_agg_sys , "sysexec" ) ; sum_out ( "cpu context switches" , & ss -> ss_agg_sys , "pswitch" ) ; sum_out ( "device interrupts" , & ss -> ss_agg_sys , "intr" ) ; sum_out ( "traps" , & ss -> ss_agg_sys , "trap" ) ; sum_out ( "system calls" , & ss -> ss_agg_sys , "syscall" ) ; nchtotal = ( long double ) ss -> ss_nc . ncs_hits . value . ui64 + ( long double ) ss -> ss_nc . ncs_misses . value . ui64 ; nchhits = ss -> ss_nc . ncs_hits . value . ui64 ; ( void ) printf ( "%9.0Lf total name lookups (cache hits %.0Lf%%)\n" , nchtotal , nchhits / denom ( nchtotal ) * 100 ) ; sum_out ( "user   cpu" , & ss -> ss_agg_sys , "cpu_ticks_user" ) ; sum_out ( "system cpu" , & ss -> ss_agg_sys , "cpu_ticks_kernel" ) ; sum_out ( "idle   cpu" , & ss -> ss_agg_sys , "cpu_ticks_idle" ) ; sum_out ( "wait   cpu" , & ss -> ss_agg_sys , "cpu_ticks_wait" ) ; } 