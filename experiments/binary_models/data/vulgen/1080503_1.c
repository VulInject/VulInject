static BOOL pf_modules_register_plugin ( proxyPluginsManager * mgr , const proxyPlugin * plugin_to_register ) { proxyPlugin internal = { 0 } ; proxyModule * module = ( proxyModule * ) mgr ; WINPR_ASSERT ( module ) ; internal = * plugin_to_register ; internal . mgr = mgr ; if ( ! ArrayList_ForEach ( module -> plugins , pf_modules_register_ArrayList_ForEachFkt , & internal ) ) { return FALSE ; } if ( ! ArrayList_Append ( module -> plugins , & internal ) ) { WLog_ERR ( TAG , "failed adding plugin to list: %s" , plugin_to_register -> name ) ; return FALSE ; } return TRUE ; } 