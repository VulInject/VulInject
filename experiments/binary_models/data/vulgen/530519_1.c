void sbus_xbox_attach ( struct device * parent , struct device * self , void * aux ) { struct sbus_softc * sc = ( sbus_softc * ) self ; struct xbox_softc * xsc = ( xbox_softc * ) parent ; struct sbus_softc * sbus = ( sbus_softc * ) parent -> dv_parent ; struct xbox_attach_args * xa = aux ; int node = xa -> xa_node ; sc -> sc_master = sbus -> sc_master ; sc -> sc_bustag = xa -> xa_bustag ; sc -> sc_dmatag = sbus_alloc_dma_tag ( sc , xa -> xa_dmatag ) ; sc -> sc_nrange = xsc -> sc_nrange ; sc -> sc_range = xsc -> sc_range ; sc -> sc_clockfreq = getpropint ( node , "clock-frequency" , 25 * 1000 * 1000 ) ; printf ( ": %s MHz\n" , clockfreq ( sc -> sc_clockfreq ) ) ; } 