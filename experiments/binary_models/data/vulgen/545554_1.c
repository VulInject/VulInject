static irqreturn_t bq24190_irq_handler_thread ( int irq , void * data ) { struct bq24190_dev_info * bdi = data ; int error ; bdi -> irq_event = true ; error = pm_runtime_get_sync ( bdi -> dev ) ; if ( error < 0 ) { dev_warn ( bdi -> dev , "pm_runtime_get failed: %i\n" , error ) ; pm_runtime_put_noidle ( bdi -> dev ) ; return IRQ_NONE ; } pm_runtime_mark_last_busy ( bdi -> dev ) ; pm_runtime_put_autosuspend ( bdi -> dev ) ; bdi -> irq_event = false ; return IRQ_HANDLED ; } 