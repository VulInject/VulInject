void * page_address ( const struct page * page ) { unsigned long flags ; void * ret ; struct page_address_slot * pas ; pas = page_slot ( page ) ; ret = NULL ; spin_lock_irqsave ( & pas -> lock , flags ) ; if ( ! list_empty ( & pas -> lh ) ) { struct page_address_map * pam ; list_for_each_entry ( , , ) { if ( pam -> page == page ) { ret = pam -> virtual ; break ; } } } spin_unlock_irqrestore ( & pas -> lock , flags ) ; return ret ; } 