static void print_formats_internal ( AVFilterLink * * links , const AVFilterPad * pads , unsigned nb , size_t fmts_cfg_offset , const char * inout_string ) { for ( unsigned i = 0 ; i < nb ; i ++ ) { const AVFilterLink * const link = links [ i ] ; const AVFilterFormatsConfig * const cfg = ( AVFilterFormatsConfig * ) ( ( const char * ) link + fmts_cfg_offset ) ; const char * pad_name = avfilter_pad_get_name ( pads , i ) ; if ( link -> type == AVMEDIA_TYPE_VIDEO ) { const AVFilterFormats * const fmts = cfg -> formats ; for ( unsigned j = 0 ; fmts && j < fmts -> nb_formats ; j ++ ) { printf ( "%s[%u] %s: fmt:%s\n" , inout_string , i , pad_name , av_get_pix_fmt_name ( fmts -> formats [ j ] ) ) ; } } if ( link -> type == AVMEDIA_TYPE_AUDIO ) { const AVFilterFormats * const fmts = cfg -> formats ; const AVFilterChannelLayouts * const layouts = cfg -> channel_layouts ; for ( unsigned j = 0 ; fmts && j < fmts -> nb_formats ; j ++ ) { printf ( "%s[%u] %s: fmt:%s\n" , inout_string , i , pad_name , av_get_sample_fmt_name ( fmts -> formats [ j ] ) ) ; } for ( unsigned j = 0 ; layouts && j < layouts -> nb_channel_layouts ; j ++ ) { av_channel_layout_describe ( & layouts -> channel_layouts [ j ] , buf , sizeof ( buf ) ) ; printf ( "%s[%u] %s: chlayout:%s\n" , inout_string , i , pad_name , buf ) ; } } } } 