static int hw_break_get ( struct task_struct * target , const struct user_regset * regset , struct membuf to ) { unsigned int note_type = regset -> core_note_type ; int ret , idx = 0 ; u32 info , ctrl ; u64 addr ; ret = ptrace_hbp_get_resource_info ( note_type , & info ) ; if ( ret ) { return ret ; } membuf_write ( & to , & info , sizeof ( info ) ) ; while ( to . left ) { ret = ptrace_hbp_get_addr ( note_type , target , idx , & addr ) ; if ( ret ) { return ret ; } ret = ptrace_hbp_get_ctrl ( note_type , target , idx , & ctrl ) ; if ( ret ) { return ret ; } membuf_store ( & to , addr ) ; membuf_store ( & to , ctrl ) ; membuf_zero ( & to , sizeof ( u32 ) ) ; idx ++ ; } return 0 ; } 