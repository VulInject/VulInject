dcmd_rtmap ( , , , ) { Rt_map rtmap ; char * str ; if ( ( flags & DCMD_ADDRSPEC ) == 0 ) { return ( DCMD_USAGE ) ; } if ( mdb_vread ( & rtmap , sizeof ( Rt_map ) , addr ) == - 1 ) { mdb_warn ( MSG_ORIG ( MSG_ERR_READ ) , MSG_ORIG ( MSG_RTMAP_STR ) , addr ) ; return ( DCMD_ERR ) ; } mdb_printf ( MSG_ORIG ( MSG_RTMAP_TITLE ) , addr ) ; mdb_printf ( MSG_ORIG ( MSG_STR_DASHES ) ) ; if ( ( str = String ( ( uintptr_t ) NAME ( & rtmap ) , MSG_ORIG ( MSG_STR_NAME ) ) ) == 0 ) { return ( DCMD_ERR ) ; } mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE1 ) , str ) ; if ( NAME ( & rtmap ) != PATHNAME ( & rtmap ) ) { if ( ( str = String ( ( uintptr_t ) PATHNAME ( & rtmap ) , MSG_ORIG ( MSG_STR_PATHNAME ) ) ) == 0 ) { return ( DCMD_ERR ) ; } mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE2 ) , str ) ; } mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE3 ) , ADDR ( & rtmap ) , DYN ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE4 ) , NEXT ( & rtmap ) , PREV ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE5 ) , rtmap . rt_fct , TLSMODID ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE6 ) , INIT ( & rtmap ) , FINI ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE7 ) , GROUPS ( & rtmap ) , HANDLES ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE8 ) , DEPENDS ( & rtmap ) , CALLERS ( & rtmap ) ) ; if ( ( str = String ( ( uintptr_t ) REFNAME ( & rtmap ) , MSG_ORIG ( MSG_STR_REFNAME ) ) ) == 0 ) { return ( DCMD_ERR ) ; } mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE9 ) , DYNINFO ( & rtmap ) , str ) ; if ( ( str = String ( ( uintptr_t ) RPATH ( & rtmap ) , MSG_ORIG ( MSG_STR_RPATH ) ) ) == 0 ) { return ( DCMD_ERR ) ; } mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE10 ) , RLIST ( & rtmap ) , str ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE11 ) , LIST ( & rtmap ) , LIST ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE12 ) , FLAGS ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE20 ) , FLAGS ( & rtmap ) , rtflags_bits ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE13 ) , FLAGS1 ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE20 ) , FLAGS1 ( & rtmap ) , rtflags1_bits ) ; if ( AFLAGS ( & rtmap ) ) { mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE14 ) , AFLAGS ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE20 ) , AFLAGS ( & rtmap ) , rtaflags_bits ) ; } mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE15 ) , MODE ( & rtmap ) ) ; mdb_printf ( MSG_ORIG ( MSG_RTMAP_LINE20 ) , MODE ( & rtmap ) , rtmode_bits ) ; return ( DCMD_OK ) ; } 