static void checkclosemth ( lua_State * L , StkId level ) { if ( ttisnil ( tm ) ) { int idx = cast_int ( level - L -> ci -> func ) ; const char * vname = luaG_findlocal ( L , L -> ci , idx , NULL ) ; if ( vname == NULL ) { vname = "?" ; } luaG_runerror ( L , "variable '%s' got a non-closable value" , vname ) ; } } 