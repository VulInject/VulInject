static void mss_timer_init ( Object * obj ) { MSSTimerState * t = MSS_TIMER ( obj ) ; int i ; for ( i = 0 ; i < NUM_TIMERS ; i ++ ) { struct Msf2Timer * st = & t -> timers [ i ] ; ptimer_transaction_begin ( st -> ptimer ) ; ptimer_set_freq ( st -> ptimer , t -> freq_hz ) ; ptimer_transaction_commit ( st -> ptimer ) ; sysbus_init_irq ( SYS_BUS_DEVICE ( obj ) , & st -> irq ) ; } memory_region_init_io ( & t -> mmio , OBJECT ( t ) , & timer_ops , t , TYPE_MSS_TIMER , NUM_TIMERS * R_TIM1_MAX * 4 ) ; sysbus_init_mmio ( SYS_BUS_DEVICE ( obj ) , & t -> mmio ) ; } 