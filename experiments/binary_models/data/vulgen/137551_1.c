void cedrus_watchdog ( struct work_struct * work ) { struct cedrus_dev * dev ; struct cedrus_ctx * ctx ; dev = container_of ( to_delayed_work ( work ) , cedrus_dev , watchdog_work ) ; ctx = v4l2_m2m_get_curr_priv ( dev -> m2m_dev ) ; v4l2_err ( & dev -> v4l2_dev , "frame processing timed out!\n" ) ; reset_control_reset ( dev -> rstc ) ; v4l2_m2m_buf_done_and_job_finish ( ctx -> dev -> m2m_dev , ctx -> fh . m2m_ctx , VB2_BUF_STATE_ERROR ) ; } 