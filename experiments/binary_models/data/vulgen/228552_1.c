l_ok pixFindVerticalRuns ( PIX * pix , l_int32 x , l_int32 * ystart , l_int32 * yend , l_int32 * pn ) { l_int32 inrun ; l_int32 index , w , h , d , i , wpl , val ; l_uint32 * data , * line ; if ( ! pn ) { return ERROR_INT ( "&n not defined" , __func__ , 1 ) ; } * pn = 0 ; if ( ! pix ) { return ERROR_INT ( "pix not defined" , __func__ , 1 ) ; } pixGetDimensions ( pix , & w , & h , & d ) ; if ( x < 0 || x >= w ) { return ERROR_INT ( "x not in [0 ... w - 1]" , __func__ , 1 ) ; } if ( ! ystart ) { return ERROR_INT ( "ystart not defined" , __func__ , 1 ) ; } if ( ! yend ) { return ERROR_INT ( "yend not defined" , __func__ , 1 ) ; } wpl = pixGetWpl ( pix ) ; data = pixGetData ( pix ) ; inrun = FALSE ; index = 0 ; for ( i = 0 ; i < h ; i ++ ) { line = data + i * wpl ; val = GET_DATA_BIT ( line , x ) ; if ( ! inrun ) { if ( val ) { ystart [ index ] = i ; inrun = TRUE ; } } else { if ( ! val ) { yend [ index ++ ] = i - 1 ; inrun = FALSE ; } } } if ( inrun ) { yend [ index ++ ] = h - 1 ; } * pn = index ; return 0 ; } 