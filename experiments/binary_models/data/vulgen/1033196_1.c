{ dev_vdbg ( & info -> pdev -> dev , "%s():%d nand_writel(0x%x, 0x%04x)\n" , __func__ , __LINE__ , ( val ) , ( off ) ) ; writel_relaxed ( ( val ) , ( info ) -> mmio_base + ( off ) ) ; } { unsigned int _v ; _v = readl_relaxed ( ( info ) -> mmio_base + ( off ) ) ; dev_vdbg ( & info -> pdev -> dev , "%s():%d nand_readl(0x%04x) = 0x%x\n" , __func__ , __LINE__ , ( off ) , _v ) ; _v ; } { ERR_NONE = 0 , ERR_DMABUSERR = - 1 , ERR_SENDCMD = - 2 , ERR_UNCORERR = - 3 , ERR_BBERR = - 4 , ERR_CORERR = - 5 } { STATE_IDLE = 0 , STATE_PREPARED , STATE_CMD_HANDLE , STATE_DMA_READING , STATE_DMA_WRITING , STATE_DMA_DONE , STATE_PIO_READING , STATE_PIO_WRITING , STATE_CMD_DONE , STATE_READY } pxa3xx_nand_variant { PXA3XX_NAND_VARIANT_PXA , PXA3XX_NAND_VARIANT_ARMADA370 } pxa3xx_nand_host { struct nand_chip chip ; void * info_data ; int use_ecc ; int cs ; unsigned int col_addr_cycles ; unsigned int row_addr_cycles ; } pxa3xx_nand_info { struct nand_hw_control controller ; struct platform_device * pdev ; struct clk * clk ; void __iomem * mmio_base ; unsigned long mmio_phys ; struct completion cmd_complete , dev_ready ; unsigned int buf_start ; unsigned int buf_count ; unsigned int buf_size ; unsigned int data_buff_pos ; unsigned int oob_buff_pos ; struct scatterlist sg ; enum dma_data_direction dma_dir ; struct dma_chan * dma_chan ; dma_cookie_t dma_cookie ; int drcmr_dat ; unsigned char * data_buff ; unsigned char * oob_buff ; dma_addr_t data_buff_phys ; int data_dma_ch ; struct pxa3xx_nand_host * host [ NUM_CHIP_SELECT ] ; unsigned int state ; enum pxa3xx_nand_variant variant ; int cs ; int use_ecc ; int ecc_bch ; int use_dma ; int use_spare ; int need_wait ; unsigned int chunk_size ; unsigned int spare_size ; unsigned int nfullchunks ; unsigned int ntotalchunks ; unsigned int last_chunk_size ; unsigned int last_spare_size ; unsigned int ecc_size ; unsigned int ecc_err_cnt ; unsigned int max_bitflips ; int retcode ; unsigned int step_chunk_size ; unsigned int step_spare_size ; unsigned int cur_chunk ; uint32_t reg_ndcr ; uint32_t ndtr0cs0 ; uint32_t ndtr1cs0 ; uint32_t ndcb0 ; uint32_t ndcb1 ; uint32_t ndcb2 ; uint32_t ndcb3 ; } 