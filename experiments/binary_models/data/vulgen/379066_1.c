static void virtio_scsi_verify_response ( VirtioScsiCmdResp * resp , const char * title ) { const char * mr [ ] { title ": response " virtio_scsi_response_msg ( resp ) 0 } ; ; const char * ms [ ] { title CDB_STATUS_VALID ( resp -> status ) ? ": " : ": invalid " scsi_cdb_status_msg ( resp -> status ) resp -> status == CDB_STATUS_CHECK_CONDITION ? " " : 0 resp -> sense_len ? scsi_cdb_asc_msg ( resp -> sense ) : "no sense data" scsi_sense_response ( resp -> sense ) == 0x70 ? ", sure" : "?" 0 } ; ; vs_assert ( resp -> response == VIRTIO_SCSI_S_OK , mr ) ; } 