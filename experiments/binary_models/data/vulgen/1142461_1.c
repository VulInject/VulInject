static int alloc_table ( VLC * vlc , int size , int use_static ) { int index = vlc -> table_size ; vlc -> table_size += size ; if ( vlc -> table_size > vlc -> table_allocated ) { if ( use_static ) { abort ( ) ; } vlc -> table_allocated += ( 1 << vlc -> bits ) ; vlc -> table = av_realloc_f ( vlc -> table , vlc -> table_allocated , sizeof ( * vlc -> table ) ) ; if ( ! vlc -> table ) { vlc -> table_allocated = 0 ; vlc -> table_size = 0 ; return AVERROR ( ENOMEM ) ; } } return index ; } 