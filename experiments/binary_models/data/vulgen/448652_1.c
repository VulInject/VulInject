static void dcn30_notify_link_rate_change ( struct clk_mgr * clk_mgr_base , struct dc_link * link ) { struct clk_mgr_internal * clk_mgr = TO_CLK_MGR_INTERNAL ( clk_mgr_base ) ; unsigned int i , max_phyclk_req = clk_mgr_base -> bw_params -> clk_table . entries [ 0 ] . phyclk_mhz * 1000 ; if ( ! clk_mgr -> smu_present ) { return ; } clk_mgr -> cur_phyclk_req_table [ link -> link_index ] = link -> cur_link_settings . link_rate * LINK_RATE_REF_FREQ_IN_KHZ ; for ( i = 0 ; i < MAX_PIPES * 2 ; i ++ ) { if ( clk_mgr -> cur_phyclk_req_table [ i ] > max_phyclk_req ) { max_phyclk_req = clk_mgr -> cur_phyclk_req_table [ i ] ; } } } 