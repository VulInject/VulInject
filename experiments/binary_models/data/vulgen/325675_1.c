void scg_a7_init_core_clk ( void ) { u32 val ; if ( soc_rev ( ) >= CHIP_REV_2_0 ) { if ( ( readl ( & scg1_regs -> sosccsr ) & SCG_SOSC_CSR_SOSCVLD_MASK ) ) { val = readl ( & scg1_regs -> rccr ) ; val &= ( ~ SCG_CCR_SCS_MASK ) ; val |= ( ( SCG_SCS_SYS_OSC ) << SCG_CCR_SCS_SHIFT ) ; writel ( val , & scg1_regs -> rccr ) ; val = readl ( & scg1_regs -> spllcfg ) ; val &= ~ SCG_PLL_CFG_PLLSEL_MASK ; writel ( val , & scg1_regs -> spllcfg ) ; scg_enable_pll_pfd ( SCG_SPLL_PFD0_CLK , 19 ) ; val = readl ( & scg1_regs -> spllcfg ) ; val |= SCG_PLL_CFG_PLLSEL_MASK ; writel ( val , & scg1_regs -> spllcfg ) ; val = readl ( & scg1_regs -> rccr ) ; val &= ( ~ SCG_CCR_SCS_MASK ) ; val |= ( ( SCG_SCS_SYS_PLL ) << SCG_CCR_SCS_SHIFT ) ; writel ( val , & scg1_regs -> rccr ) ; } } } 