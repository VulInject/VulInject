static void tegra_adma_request_free ( struct tegra_adma_chan * tdc ) { struct tegra_adma * tdma = tdc -> tdma ; switch ( tdc -> sreq_dir ) { case DMA_MEM_TO_DEV : clear_bit ( tdc -> sreq_index , & tdma -> tx_requests_reserved ) ; break ; case DMA_DEV_TO_MEM : clear_bit ( tdc -> sreq_index , & tdma -> rx_requests_reserved ) ; break ; default : dev_WARN ( tdma -> dev , "channel %s has invalid transfer type\n" , dma_chan_name ( & tdc -> vc . chan ) ) ; return ; } tdc -> sreq_reserved = false ; } 