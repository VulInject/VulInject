static char * * user_dirs ( const char * persistent_config , const char * runtime_config , const char * global_persistent_config , const char * global_runtime_config , const char * generator , const char * generator_early , const char * generator_late , const char * transient , const char * persistent_control , const char * runtime_control ) { _cleanup_strv_free_ char * * config_dirs = NULL , * * data_dirs = NULL ; _cleanup_strv_free_ char * * res = NULL ; int r ; r = xdg_user_dirs ( & config_dirs , & data_dirs ) ; if ( r < 0 ) { return NULL ; } r = xdg_user_data_dir ( & data_home , "/systemd/user" ) ; if ( r < 0 && r != - ENXIO ) { return NULL ; } if ( strv_extend ( & res , persistent_control ) < 0 ) { return NULL ; } if ( strv_extend ( & res , runtime_control ) < 0 ) { return NULL ; } if ( strv_extend ( & res , transient ) < 0 ) { return NULL ; } if ( strv_extend ( & res , generator_early ) < 0 ) { return NULL ; } if ( strv_extend ( & res , persistent_config ) < 0 ) { return NULL ; } if ( strv_extend_strv_concat ( & res , config_dirs , "/systemd/user" ) < 0 ) { return NULL ; } if ( strv_extend ( & res , global_persistent_config ) < 0 ) { return NULL ; } if ( strv_extend_strv ( & res , ( char * * ) user_config_unit_paths , false ) < 0 ) { return NULL ; } if ( strv_extend ( & res , runtime_config ) < 0 ) { return NULL ; } if ( strv_extend ( & res , global_runtime_config ) < 0 ) { return NULL ; } if ( strv_extend ( & res , generator ) < 0 ) { return NULL ; } if ( strv_extend ( & res , data_home ) < 0 ) { return NULL ; } if ( strv_extend_strv_concat ( & res , data_dirs , "/systemd/user" ) < 0 ) { return NULL ; } if ( strv_extend_strv ( & res , ( char * * ) user_data_unit_paths , false ) < 0 ) { return NULL ; } if ( strv_extend ( & res , generator_late ) < 0 ) { return NULL ; } if ( path_strv_make_absolute_cwd ( res ) < 0 ) { return NULL ; } return TAKE_PTR ( res ) ; } 