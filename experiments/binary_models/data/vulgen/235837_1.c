gst_rdt_depay_chain ( , , ) { GstRDTDepay * rdtdepay ; GstFlowReturn ret ; GstClockTime timestamp ; gboolean more ; GstRDTPacket packet ; rdtdepay = GST_RDT_DEPAY ( parent ) ; if ( GST_BUFFER_IS_DISCONT ( buf ) ) { GST_LOG_OBJECT ( rdtdepay , "received discont" ) ; rdtdepay -> discont = TRUE ; } if ( rdtdepay -> header ) { GstBuffer * out ; out = rdtdepay -> header ; rdtdepay -> header = NULL ; gst_rdt_depay_push ( rdtdepay , out ) ; } timestamp = GST_BUFFER_TIMESTAMP ( buf ) ; ret = GST_FLOW_OK ; GST_LOG_OBJECT ( rdtdepay , "received buffer timestamp %" GST_TIME_FORMAT , GST_TIME_ARGS ( timestamp ) ) ; more = gst_rdt_buffer_get_first_packet ( buf , & packet ) ; while ( more ) { GstRDTType type ; type = gst_rdt_packet_get_type ( & packet ) ; GST_DEBUG_OBJECT ( rdtdepay , "Have packet of type %04x" , type ) ; if ( GST_RDT_IS_DATA_TYPE ( type ) ) { GST_DEBUG_OBJECT ( rdtdepay , "We have a data packet" ) ; ret = gst_rdt_depay_handle_data ( rdtdepay , timestamp , & packet ) ; } else { switch ( type ) { default : GST_DEBUG_OBJECT ( rdtdepay , "Ignoring packet" ) ; break ; } } more = gst_rdt_packet_move_to_next ( & packet ) ; } gst_buffer_unref ( buf ) ; return ret ; } 