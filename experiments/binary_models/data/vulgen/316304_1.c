xmlNodePtr msOWSCommonServiceIdentification ( xmlNsPtr psNsOws , mapObj * map , const char * servicetype , const char * supported_versions , const char * namespaces , const char * validated_language ) { const char * value = NULL ; xmlNodePtr psRootNode = NULL ; xmlNodePtr psNode = NULL ; psRootNode = xmlNewNode ( psNsOws , BAD_CAST "ServiceIdentification" ) ; value = msOWSLookupMetadataWithLanguage ( & ( map -> web . metadata ) , namespaces , "title" , validated_language ) ; psNode = xmlNewTextChild ( , , "Title" , ) ; if ( ! value ) { xmlAddSibling ( psNode , xmlNewComment ( BAD_CAST "WARNING: Optional metadata \"ows_title\" missing for ows:Title" ) ) ; } value = msOWSLookupMetadataWithLanguage ( & ( map -> web . metadata ) , namespaces , "abstract" , validated_language ) ; psNode = xmlNewTextChild ( , , "Abstract" , ) ; if ( ! value ) { xmlAddSibling ( psNode , xmlNewComment ( BAD_CAST "WARNING: Optional metadata \"ows_abstract\" was missing for ows:Abstract" ) ) ; } value = msOWSLookupMetadataWithLanguage ( & ( map -> web . metadata ) , namespaces , "keywordlist" , validated_language ) ; if ( value ) { psNode = xmlNewTextChild ( psRootNode , psNsOws , BAD_CAST "Keywords" , NULL ) ; msLibXml2GenerateList ( psNode , psNsOws , "Keyword" , value , ',' ) ; } else { xmlAddSibling ( psNode , xmlNewComment ( BAD_CAST "WARNING: Optional metadata \"ows_keywordlist\" was missing for ows:KeywordList" ) ) ; } psNode = xmlNewTextChild ( , , "ServiceType" , ) ; xmlNewProp ( , "codeSpace" , ) msLibXml2GenerateList ( psRootNode , psNsOws , "ServiceTypeVersion" , supported_versions , ',' ) ; value = msOWSLookupMetadataWithLanguage ( & ( map -> web . metadata ) , namespaces , "fees" , validated_language ) ; psNode = xmlNewTextChild ( , , "Fees" , ) ; if ( ! value ) { xmlAddSibling ( psNode , xmlNewComment ( BAD_CAST "WARNING: Optional metadata \"ows_fees\" was missing for ows:Fees" ) ) ; } value = msOWSLookupMetadataWithLanguage ( & ( map -> web . metadata ) , namespaces , "accessconstraints" , validated_language ) ; psNode = xmlNewTextChild ( , , "AccessConstraints" , ) ; if ( ! value ) { xmlAddSibling ( psNode , xmlNewComment ( BAD_CAST "WARNING: Optional metadata \"ows_accessconstraints\" was missing for ows:AccessConstraints" ) ) ; } return psRootNode ; } 