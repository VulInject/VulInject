static void vcn_v1_0_dec_ring_emit_fence ( struct amdgpu_ring * ring , u64 addr , u64 seq , unsigned flags ) { struct amdgpu_device * adev = ring -> adev ; amdgpu_ring_write ( ring , PACKET0 ( SOC15_REG_OFFSET ( UVD , 0 , mmUVD_CONTEXT_ID ) , 0 ) ) ; amdgpu_ring_write ( ring , seq ) ; amdgpu_ring_write ( ring , PACKET0 ( SOC15_REG_OFFSET ( UVD , 0 , mmUVD_GPCOM_VCPU_DATA0 ) , 0 ) ) ; amdgpu_ring_write ( ring , addr & 0xffffffff ) ; amdgpu_ring_write ( ring , PACKET0 ( SOC15_REG_OFFSET ( UVD , 0 , mmUVD_GPCOM_VCPU_DATA1 ) , 0 ) ) ; amdgpu_ring_write ( ring , upper_32_bits ( addr ) & 0xff ) ; amdgpu_ring_write ( ring , PACKET0 ( SOC15_REG_OFFSET ( UVD , 0 , mmUVD_GPCOM_VCPU_CMD ) , 0 ) ) ; amdgpu_ring_write ( ring , VCN_DEC_CMD_FENCE << 1 ) ; amdgpu_ring_write ( ring , PACKET0 ( SOC15_REG_OFFSET ( UVD , 0 , mmUVD_GPCOM_VCPU_DATA0 ) , 0 ) ) ; amdgpu_ring_write ( ring , 0 ) ; amdgpu_ring_write ( ring , PACKET0 ( SOC15_REG_OFFSET ( UVD , 0 , mmUVD_GPCOM_VCPU_DATA1 ) , 0 ) ) ; amdgpu_ring_write ( ring , 0 ) ; amdgpu_ring_write ( ring , PACKET0 ( SOC15_REG_OFFSET ( UVD , 0 , mmUVD_GPCOM_VCPU_CMD ) , 0 ) ) ; amdgpu_ring_write ( ring , VCN_DEC_CMD_TRAP << 1 ) ; } 