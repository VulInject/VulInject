* _ev_backend_info_load_from_dir ( ) { GList * list = NULL GDir * dir const gchar * dirent GError * error = NULL dir = g_dir_open ( path , 0 , & error ) if ( ! dir ) { g_warning ( "%s" , error -> message ) ; g_error_free ( error ) ; return FALSE ; ; } } ; while ( ( dirent = g_dir_read_name ( dir ) ) ) { EvBackendInfo * info ; gchar * file ; if ( ! g_str_has_suffix ( dirent , EV_BACKENDS_EXTENSION ) ) { continue ; } file = g_build_filename ( path , dirent , NULL ) ; info = _ev_backend_info_new_from_file ( file , & error ) ; if ( error != NULL ) { g_warning ( "Failed to load backend info from '%s': %s\n" , file , error -> message ) ; g_clear_error ( & error ) ; } if ( info == NULL ) { continue ; } list = g_list_prepend ( list , info ) ; } g_dir_close ( dir ) ; return list ; 