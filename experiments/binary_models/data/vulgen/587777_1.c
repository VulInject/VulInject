static void proc_dump_substream_formats ( struct snd_usb_substream * subs , struct snd_info_buffer * buffer ) { struct audioformat * fp ; static const char * const sync_types [ 4 ] { "NONE" "ASYNC" "ADAPTIVE" "SYNC" } ; ; list_for_each_entry ( , , ) { snd_pcm_format_t fmt ; snd_iprintf ( buffer , "  Interface %d\n" , fp -> iface ) ; snd_iprintf ( buffer , "    Altset %d\n" , fp -> altsetting ) ; snd_iprintf ( buffer , "    Format:" ) ; pcm_for_each_format ( ) if ( fp -> formats & pcm_format_to_bits ( fmt ) ) { snd_iprintf ( buffer , " %s" , snd_pcm_format_name ( fmt ) ) ; } snd_iprintf ( buffer , "\n" ) ; snd_iprintf ( buffer , "    Channels: %d\n" , fp -> channels ) ; snd_iprintf ( buffer , "    Endpoint: 0x%02x (%d %s) (%s)\n" , fp -> endpoint , fp -> endpoint & USB_ENDPOINT_NUMBER_MASK , fp -> endpoint & USB_DIR_IN ?"IN" : "OUT" , sync_types [ ( fp -> ep_attr & USB_ENDPOINT_SYNCTYPE ) >> 2 ] ) ; if ( fp -> rates & SNDRV_PCM_RATE_CONTINUOUS ) { snd_iprintf ( buffer , "    Rates: %d - %d (continuous)\n" , fp -> rate_min , fp -> rate_max ) ; } else { unsigned int i ; snd_iprintf ( buffer , "    Rates: " ) ; for ( i = 0 ; i < fp -> nr_rates ; i ++ ) { if ( i > 0 ) { snd_iprintf ( buffer , ", " ) ; } snd_iprintf ( buffer , "%d" , fp -> rate_table [ i ] ) ; } snd_iprintf ( buffer , "\n" ) ; } snd_iprintf ( buffer , "    Bits: %d\n" , fp -> fmt_bits ) ; if ( fp -> dsd_raw ) { snd_iprintf ( buffer , "    DSD raw: DOP=%d, bitrev=%d\n" , fp -> dsd_dop , fp -> dsd_bitrev ) ; } if ( fp -> chmap ) { const struct snd_pcm_chmap_elem * map = fp -> chmap ; int c ; snd_iprintf ( buffer , "    Channel map:" ) ; for ( c = 0 ; c < map -> channels ; c ++ ) { if ( map -> map [ c ] >= ARRAY_SIZE ( channel_labels ) || ! channel_labels [ map -> map [ c ] ] ) { snd_iprintf ( buffer , " --" ) ; } else { snd_iprintf ( buffer , " %s" , channel_labels [ map -> map [ c ] ] ) ; } } snd_iprintf ( buffer , "\n" ) ; } if ( fp -> sync_ep ) { snd_iprintf ( buffer , "    Sync Endpoint: 0x%02x (%d %s)\n" , fp -> sync_ep , fp -> sync_ep & USB_ENDPOINT_NUMBER_MASK , fp -> sync_ep & USB_DIR_IN ?"IN" : "OUT" ) ; snd_iprintf ( buffer , "    Sync EP Interface: %d\n" , fp -> sync_iface ) ; snd_iprintf ( buffer , "    Sync EP Altset: %d\n" , fp -> sync_altsetting ) ; snd_iprintf ( buffer , "    Implicit Feedback Mode: %s\n" , fp -> implicit_fb ?"Yes" : "No" ) ; } } } 