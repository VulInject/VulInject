static void CG_DrawCursorhint ( rectDef_t * rect ) { float * color ; qhandle_t icon , icon2 = 0 ; float scale , halfscale ; if ( ! cg_cursorHints . integer ) { return ; } CG_CheckForCursorHints ( ) ; if ( cg_fixedAspect . integer ) { CG_SetScreenPlacement ( PLACE_CENTER , PLACE_CENTER ) ; } switch ( cg . cursorHintIcon ) { case HINT_NONE : case HINT_FORCENONE : icon = 0 ; break ; case HINT_DOOR : icon = cgs . media . doorHintShader ; break ; case HINT_DOOR_ROTATING : icon = cgs . media . doorRotateHintShader ; break ; case HINT_DOOR_LOCKED : icon = cgs . media . doorLockHintShader ; break ; case HINT_DOOR_ROTATING_LOCKED : icon = cgs . media . doorRotateLockHintShader ; break ; case HINT_MG42 : icon = cgs . media . mg42HintShader ; break ; case HINT_BREAKABLE : case HINT_BREAKABLE_DYNAMITE : if ( cgs . gametype >= GT_WOLF && cg . cursorHintIcon == HINT_BREAKABLE_DYNAMITE ) { icon = cgs . media . dynamiteHintShader ; } else { icon = cgs . media . breakableHintShader ; } break ; case HINT_CHAIR : icon = cgs . media . notUsableHintShader ; if ( ! ( cg . predictedPlayerState . weapon ) || WEAPS_ONE_HANDED & ( 1 << ( cg . predictedPlayerState . weapon ) ) ) { icon = cgs . media . chairHintShader ; } break ; case HINT_ALARM : icon = cgs . media . alarmHintShader ; break ; case HINT_HEALTH : icon = cgs . media . healthHintShader ; break ; case HINT_TREASURE : icon = cgs . media . treasureHintShader ; break ; case HINT_KNIFE : icon = cgs . media . knifeHintShader ; break ; case HINT_LADDER : icon = cgs . media . ladderHintShader ; break ; case HINT_BUTTON : icon = cgs . media . buttonHintShader ; break ; case HINT_WATER : icon = cgs . media . waterHintShader ; break ; case HINT_CAUTION : icon = cgs . media . cautionHintShader ; break ; case HINT_DANGER : icon = cgs . media . dangerHintShader ; break ; case HINT_SECRET : icon = cgs . media . secretHintShader ; break ; case HINT_QUESTION : icon = cgs . media . qeustionHintShader ; break ; case HINT_EXCLAMATION : icon = cgs . media . exclamationHintShader ; break ; case HINT_CLIPBOARD : icon = cgs . media . clipboardHintShader ; break ; case HINT_WEAPON : icon = cgs . media . weaponHintShader ; break ; case HINT_AMMO : icon = cgs . media . ammoHintShader ; break ; case HINT_ARMOR : icon = cgs . media . armorHintShader ; break ; case HINT_POWERUP : icon = cgs . media . powerupHintShader ; break ; case HINT_HOLDABLE : icon = cgs . media . holdableHintShader ; break ; case HINT_INVENTORY : icon = cgs . media . inventoryHintShader ; break ; case HINT_EXIT : icon = cgs . media . exitHintShader ; break ; case HINT_PLYR_FRIEND : icon = cgs . media . hintPlrFriendShader ; break ; case HINT_PLYR_NEUTRAL : icon = cgs . media . hintPlrNeutralShader ; break ; case HINT_PLYR_ENEMY : icon = cgs . media . hintPlrEnemyShader ; break ; case HINT_PLYR_UNKNOWN : icon = cgs . media . hintPlrUnknownShader ; break ; case HINT_BUILD : icon = cgs . media . buildHintShader ; break ; case HINT_DISARM : icon = cgs . media . disarmHintShader ; break ; case HINT_REVIVE : icon = cgs . media . reviveHintShader ; break ; case HINT_DYNAMITE : icon = cgs . media . dynamiteHintShader ; break ; case HINT_ACTIVATE : case HINT_PLAYER : default : icon = cgs . media . usableHintShader ; break ; } if ( ! icon ) { return ; } color = CG_FadeColor ( cg . cursorHintTime , cg . cursorHintFade ) ; if ( ! color ) { trap_R_SetColor ( NULL ) ; return ; } if ( cg_cursorHints . integer >= 3 ) { scale = halfscale = 0 ; } else { if ( cg_cursorHints . integer == 2 ) { scale = ( float ) ( ( cg . cursorHintTime ) % 1000 ) / 100.0f ; } else { scale = CURSORHINT_SCALE * ( 0.5 + 0.5 * sin ( ( float ) cg . time / 150.0 ) ) ; } halfscale = scale * 0.5f ; } trap_R_SetColor ( color ) ; CG_DrawPic ( rect -> x - halfscale , rect -> y - halfscale , rect -> w + scale , rect -> h + scale , icon ) ; if ( icon2 ) { CG_DrawPic ( rect -> x - halfscale , rect -> y - halfscale , rect -> w + scale , rect -> h + scale , icon2 ) ; } trap_R_SetColor ( NULL ) ; if ( cg . cursorHintValue ) { Vector4Set ( color , 0 , 0 , 1 , 0.5f ) ; CG_FilledBar ( rect -> x , rect -> y + rect -> h + 4 , rect -> w , 8 , color , NULL , NULL , ( float ) cg . cursorHintValue / 255.0f , 0 ) ; } } 