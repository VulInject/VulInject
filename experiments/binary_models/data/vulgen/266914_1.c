new_domain = strdup ( domainname ) ; size_t len = strlen ( domainname ) + 1 ; new_domain = ( char * ) malloc ( len ) ; if ( new_domain != NULL ) { memcpy ( new_domain , domainname , len ) ; } ( new_domain != NULL ) { ++ _nl_msg_cat_cntr if ( old_domain != new_domain && old_domain != _nl_default_default_domain ) { free ( old_domain ) ; } } ; __libc_rwlock_unlock ( _nl_state_lock ) ; return new_domain ; 