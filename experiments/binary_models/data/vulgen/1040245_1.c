static void set_inverse_trans_unicode ( struct uni_pagedict * dict ) { unsigned int d , r , g ; u16 * inv ; if ( ! dict ) { return ; } inv = dict -> inverse_trans_unicode ; if ( ! inv ) { inv = dict -> inverse_trans_unicode = kmalloc_array ( MAX_GLYPH , sizeof ( * inv ) , GFP_KERNEL ) ; if ( ! inv ) { return ; } } for ( d = 0 ; d < UNI_DIRS ; d ++ ) { u16 * * dir = dict -> uni_pgdir [ d ] ; if ( ! dir ) { continue ; } for ( r = 0 ; r < UNI_DIR_ROWS ; r ++ ) { u16 * row = dir [ r ] ; if ( ! row ) { continue ; } for ( g = 0 ; g < UNI_ROW_GLYPHS ; g ++ ) { u16 glyph = row [ g ] ; if ( glyph < MAX_GLYPH && inv [ glyph ] < 32 ) { inv [ glyph ] = UNI ( d , r , g ) ; } } } } } 