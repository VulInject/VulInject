static int __init hvc_rtas_init ( void ) { struct hvc_struct * hp ; if ( rtascons_put_char_token == RTAS_UNKNOWN_SERVICE ) { rtascons_put_char_token = rtas_token ( "put-term-char" ) ; } if ( rtascons_put_char_token == RTAS_UNKNOWN_SERVICE ) { return - EIO ; } if ( rtascons_get_char_token == RTAS_UNKNOWN_SERVICE ) { rtascons_get_char_token = rtas_token ( "get-term-char" ) ; } if ( rtascons_get_char_token == RTAS_UNKNOWN_SERVICE ) { return - EIO ; } BUG_ON ( hvc_rtas_dev ) ; if ( IS_ERR ( hp ) ) { return PTR_ERR ( hp ) ; } hvc_rtas_dev = hp ; return 0 ; } 