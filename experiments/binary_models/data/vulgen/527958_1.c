bool check_invariants ( RIntervalNode * node ) { if ( ! node ) { return true ; } int i ; for ( i = 0 ; i < 2 ; i ++ ) { if ( ! node -> node . child [ i ] ) { continue ; } RIntervalNode * child = container_of ( node -> node . child [ i ] , RIntervalNode , node ) ; if ( child -> max_end > max ) { max = child -> max_end ; } if ( ! check_invariants ( child ) ) { return false ; } if ( i == 0 ) { mu_assert ( "left<= this" , child -> start <= node -> start ) ; } else { mu_assert ( "right>= this" , child -> start >= node -> start ) ; } } mu_assert_eq_fmt ( node -> max_end , max , "max_end invariant" , "0x%" PFMT64x ) ; return true ; } 