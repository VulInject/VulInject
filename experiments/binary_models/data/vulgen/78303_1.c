void recordSharedDependencyOn ( ObjectAddress * depender , ObjectAddress * referenced , SharedDependencyType deptype ) { Relation sdepRel ; Assert ( depender -> objectSubId == 0 ) ; Assert ( referenced -> objectSubId == 0 ) ; sdepRel = table_open ( SharedDependRelationId , RowExclusiveLock ) ; if ( ! IsPinnedObject ( referenced -> classId , referenced -> objectId ) ) { shdepAddDependency ( sdepRel , depender -> classId , depender -> objectId , depender -> objectSubId , referenced -> classId , referenced -> objectId , deptype ) ; } table_close ( sdepRel , RowExclusiveLock ) ; } 