static void doc_write_data_area ( struct docg3 * docg3 , const void * buf , int len ) { int i , cdr , len4 ; u16 * src16 ; u8 * src8 ; doc_dbg ( "doc_write_data_area(buf=%p, len=%d)\n" , buf , len ) ; cdr = len & 0x3 ; doc_writew ( docg3 , DOC_IOSPACE_DATA , DOC_READADDRESS ) ; src16 = ( u16 * ) buf ; for ( i = 0 ; i < len4 ; i += 2 ) { doc_writew ( docg3 , * src16 , DOC_IOSPACE_DATA ) ; src16 ++ ; } src8 = ( u8 * ) src16 ; for ( i = 0 ; i < cdr ; i ++ ) { doc_writew ( docg3 , DOC_IOSPACE_DATA | DOC_READADDR_ONE_BYTE , DOC_READADDRESS ) ; doc_writeb ( docg3 , * src8 , DOC_IOSPACE_DATA ) ; src8 ++ ; } } 