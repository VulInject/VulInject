int acpi_mdiobus_register ( struct mii_bus * mdio , struct fwnode_handle * fwnode ) { struct fwnode_handle * child ; u32 addr ; int ret ; ret = mdiobus_register ( mdio ) ; if ( ret ) { return ret ; } ACPI_COMPANION_SET ( & mdio -> dev , to_acpi_device_node ( fwnode ) ) ; fwnode_for_each_child_node ( , ) { ret = acpi_get_local_address ( ACPI_HANDLE_FWNODE ( child ) , & addr ) ; if ( ret || addr >= PHY_MAX_ADDR ) { continue ; } ret = fwnode_mdiobus_register_phy ( mdio , child , addr ) ; if ( ret == - ENODEV ) { dev_err ( & mdio -> dev , "MDIO device at address %d is missing.\n" , addr ) ; } } return 0 ; } 