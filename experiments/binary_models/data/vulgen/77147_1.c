static bool mkdir_for_user ( const char * path , const struct passwd * p , mode_t mode , Error * * errp ) { if ( g_mkdir ( path , mode ) == - 1 ) { error_setg ( errp , "failed to create directory '%s': %s" , path , g_strerror ( errno ) ) ; return false ; } if ( chown ( path , p -> pw_uid , p -> pw_gid ) == - 1 ) { error_setg ( errp , "failed to set ownership of directory '%s': %s" , path , g_strerror ( errno ) ) ; return false ; } return true ; } 