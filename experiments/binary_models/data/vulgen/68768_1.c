static void lookup ( struct ub_ctx * ctx , const char * nm , const char * qt , const char * qc ) { int multi = 0 ; int reverse = 0 ; int t = massage_type ( qt , reverse , & multi ) ; int c = massage_class ( qc ) ; if ( multi ) { if ( ! dnslook ( ctx , realq , LDNS_RR_TYPE_A , c , 1 ) ) { ( void ) dnslook ( ctx , realq , LDNS_RR_TYPE_AAAA , c , 0 ) ; ( void ) dnslook ( ctx , realq , LDNS_RR_TYPE_MX , c , 0 ) ; } } else { ( void ) dnslook ( ctx , realq , t , c , 1 ) ; } ub_ctx_delete ( ctx ) ; free ( realq ) ; } 