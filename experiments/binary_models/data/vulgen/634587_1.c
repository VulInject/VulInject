static void build_complete_ppr ( struct iommu_cmd * cmd , u16 devid , int pasid , int status , int tag , bool gn ) { cmd -> data [ 0 ] = devid ; if ( gn ) { cmd -> data [ 1 ] = pasid ; cmd -> data [ 2 ] = CMD_INV_IOMMU_PAGES_GN_MASK ; } cmd -> data [ 3 ] = tag & 0x1ff ; cmd -> data [ 3 ] |= ( status & PPR_STATUS_MASK ) << PPR_STATUS_SHIFT ; CMD_SET_TYPE ( cmd , CMD_COMPLETE_PPR ) ; } 