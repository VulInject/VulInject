static void ffmpeg_close_context ( FREERDP_DSP_CONTEXT * context ) { if ( context ) { if ( context -> context ) { avcodec_free_context ( & context -> context ) ; } if ( context -> frame ) { av_frame_free ( & context -> frame ) ; } if ( context -> resampled ) { av_frame_free ( & context -> resampled ) ; } if ( context -> buffered ) { av_frame_free ( & context -> buffered ) ; } if ( context -> packet ) { av_packet_free ( & context -> packet ) ; } if ( context -> rcontext ) { swr_free ( & context -> rcontext ) ; avresample_free ( & context -> rcontext ) ; } context -> id = AV_CODEC_ID_NONE ; context -> codec = NULL ; context -> context = NULL ; context -> frame = NULL ; context -> resampled = NULL ; context -> packet = NULL ; context -> rcontext = NULL ; } } 