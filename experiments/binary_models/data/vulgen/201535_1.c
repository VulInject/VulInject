static noinline_for_stack void scrub_free_ctx ( struct scrub_ctx * sctx ) { int i ; if ( sctx -> curr != - 1 ) { struct scrub_bio * sbio = sctx -> bios [ sctx -> curr ] ; for ( i = 0 ; i < sbio -> sector_count ; i ++ ) { scrub_block_put ( sbio -> sectors [ i ] -> sblock ) ; } bio_put ( sbio -> bio ) ; } for ( i = 0 ; i < SCRUB_BIOS_PER_SCTX ; ++ i ) { struct scrub_bio * sbio = sctx -> bios [ i ] ; if ( ! sbio ) { break ; } kfree ( sbio ) ; } kfree ( sctx -> wr_curr_bio ) ; scrub_free_csums ( sctx ) ; kfree ( sctx ) ; } 