( 1 + 1 + sizeof lonesome_lower / sizeof lonesome_lower <= CASE_FOLDED_BUFSIZE ) int case_folded_counterparts ( wint_t c , wchar_t folded [ CASE_FOLDED_BUFSIZE ] ) { int i ; int n = 0 ; wint_t uc = towupper ( c ) ; wint_t lc = towlower ( uc ) ; if ( lc != uc && lc != c && towupper ( lc ) == uc ) { folded [ n ++ ] = lc ; } for ( i = 0 ; i < sizeof lonesome_lower / sizeof lonesome_lower ; i ++ ) { wint_t li = lonesome_lower [ i ] ; if ( li != lc && li != uc && li != c && towupper ( li ) == uc ) { folded [ n ++ ] = li ; } } return n ; } 