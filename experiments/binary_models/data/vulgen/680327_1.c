static void mlx5_esw_bridge_fdb_entry_cleanup ( struct mlx5_esw_bridge_fdb_entry * entry , struct mlx5_esw_bridge * bridge ) { trace_mlx5_esw_bridge_fdb_entry_cleanup ( entry ) ; mlx5_del_flow_rules ( entry -> egress_handle ) ; if ( entry -> filter_handle ) { mlx5_del_flow_rules ( entry -> filter_handle ) ; } mlx5_del_flow_rules ( entry -> ingress_handle ) ; mlx5_fc_destroy ( bridge -> br_offloads -> esw -> dev , entry -> ingress_counter ) ; list_del ( & entry -> vlan_list ) ; list_del ( & entry -> list ) ; kvfree ( entry ) ; } 