void __attribute__ ( ( format ( printf , 3 , 4 ) ) ) LogError ( const int iErrno , const int iErrCode , const char * fmt , ... ) ( va_list ap , char buf [ 2048 ] , int lenBuf , va_start ( ap , fmt ) , lenBuf = vsnprintf ( buf , sizeof ( buf ) , fmt , ap ) , ( lenBuf < 0 ) { strncpy ( buf , "error message lost due to problem with vsnprintf" , sizeof ( buf ) ) } va_end ( ap ) , buf [ sizeof ( buf ) ] = '\0' , doLogMsg ( iErrno , iErrCode , LOG_ERR , buf ) ) ; 