static bool sof_ipc3_volume_put ( struct snd_sof_control * scontrol , struct snd_ctl_elem_value * ucontrol ) { struct sof_ipc_ctrl_data * cdata = scontrol -> ipc_control_data ; struct snd_soc_component * scomp = scontrol -> scomp ; unsigned int channels = scontrol -> num_channels ; unsigned int i ; bool change = false ; for ( i = 0 ; i < channels ; i ++ ) { u32 value = mixer_to_ipc ( ucontrol -> value . integer . value [ i ] , scontrol -> volume_table , scontrol -> max + 1 ) ; change = change || ( value != cdata -> chanv [ i ] . value ) ; cdata -> chanv [ i ] . channel = i ; cdata -> chanv [ i ] . value = value ; } if ( pm_runtime_active ( scomp -> dev ) ) { int ret = sof_ipc3_set_get_kcontrol_data ( scontrol , true , true ) ; } return change ; } 