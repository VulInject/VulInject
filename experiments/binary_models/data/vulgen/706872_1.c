imps_bad_bios ( ) { int sum ; if ( fps_ptr -> feature_info [ 0 ] > IMPS_FPS_DEFAULT_MAX ) { KERNEL_PRINT ( ( "    Invalid MP System Configuration type %d\n" , fps_ptr -> feature_info [ 0 ] ) ) ; return 1 ; } if ( fps_ptr -> cth_ptr ) { sum = get_checksum ( ( unsigned ) local_cth_ptr , local_cth_ptr -> base_length ) ; if ( local_cth_ptr -> sig != IMPS_CTH_SIGNATURE || sum ) { KERNEL_PRINT ( ( "    Bad MP Config Table sig 0x%x and/or checksum 0x%x\n" , ( unsigned ) ( fps_ptr -> cth_ptr ) , sum ) ) ; return 1 ; } if ( local_cth_ptr -> spec_rev != fps_ptr -> spec_rev ) { KERNEL_PRINT ( ( "    Bad MP Config Table sub-revision # %d\n" , local_cth_ptr -> spec_rev ) ) ; return 1 ; } if ( local_cth_ptr -> extended_length ) { sum = ( get_checksum ( ( ( unsigned ) local_cth_ptr ) + local_cth_ptr -> base_length , local_cth_ptr -> extended_length ) + local_cth_ptr -> extended_checksum ) & 0xFF ; if ( sum ) { KERNEL_PRINT ( ( "    Bad Extended MP Config Table checksum 0x%x\n" , sum ) ) ; return 1 ; } } } if ( ! fps_ptr -> feature_info [ 0 ] ) { KERNEL_PRINT ( ( "    Missing configuration information\n" ) ) ; return 1 ; } return 0 ; } 