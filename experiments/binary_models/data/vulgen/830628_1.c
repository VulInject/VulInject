static int kvm_mmu_print_role ( struct trace_seq * s , struct pevent_record * record , struct event_format * event , void * context ) { unsigned long long val ; static const char * access_str [ ] { "---" "--x" "w--" "w-x" "-u-" "-ux" "wu-" "wux" } ; ; union kvm_mmu_page_role role ; role . word = ( int ) val ; if ( pevent_is_file_bigendian ( event -> pevent ) == pevent_is_host_bigendian ( event -> pevent ) ) { trace_seq_printf ( s , "%u q%u%s %s%s %spae %snxe %swp%s%s%s" , role . level , role . quadrant , role . direct ?" direct" : "" , access_str [ role . access ] , role . invalid ?" invalid" : "" , role . cr4_pae ?"" : "!" , role . nxe ?"" : "!" , role . cr0_wp ?"" : "!" , role . smep_and_not_wp ?" smep" : "" , role . smap_and_not_wp ?" smap" : "" , role . smm ?" smm" : "" ) ; } else { trace_seq_printf ( s , "WORD: %08x" , role . word ) ; } pevent_print_num_field ( s , " root %u " , event , "root_count" , record , 1 ) ; if ( pevent_get_field_val ( s , event , "unsync" , record , & val , 1 ) < 0 ) { return - 1 ; } trace_seq_printf ( s , "%s%c" , val ?"unsync" : "sync" , 0 ) ; return 0 ; } 