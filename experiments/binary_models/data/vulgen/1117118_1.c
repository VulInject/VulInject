static void mdiobb_cmd ( struct mdiobb_ctrl * ctrl , int op , u8 phy , u8 reg ) { const struct mdiobb_ops * ops = ctrl -> ops ; int i ; ops -> set_mdio_dir ( ctrl , 1 ) ; for ( i = 0 ; i < 32 ; i ++ ) { mdiobb_send_bit ( ctrl , 1 ) ; } mdiobb_send_bit ( ctrl , 0 ) ; else { mdiobb_send_bit ( ctrl , 1 ) ; } mdiobb_send_bit ( ctrl , ( op >> 1 ) & 1 ) ; mdiobb_send_bit ( ctrl , ( op >> 0 ) & 1 ) ; mdiobb_send_num ( ctrl , phy , 5 ) ; mdiobb_send_num ( ctrl , reg , 5 ) ; } 