static void hfcsusb_ph_info ( struct hfcsusb * hw ) { struct ph_info * phi ; struct dchannel * dch = & hw -> dch ; int i ; phi = kzalloc ( sizeof ( ph_info ) + dch -> dev . nrbchan * sizeof ( ph_info_ch ) , GFP_ATOMIC ) ; phi -> dch . ch . protocol = hw -> protocol ; phi -> dch . ch . Flags = dch -> Flags ; phi -> dch . state = dch -> state ; phi -> dch . num_bch = dch -> dev . nrbchan ; for ( i = 0 ; i < dch -> dev . nrbchan ; i ++ ) { phi -> bch [ i ] . protocol = hw -> bch [ i ] . ch . protocol ; phi -> bch [ i ] . Flags = hw -> bch [ i ] . Flags ; } _queue_data ( & dch -> dev . D , MPH_INFORMATION_IND , MISDN_ID_ANY , sizeof ( ph_info_dch ) + dch -> dev . nrbchan * sizeof ( ph_info_ch ) , phi , GFP_ATOMIC ) ; } 