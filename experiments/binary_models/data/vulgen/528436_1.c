COMPILER_RT_VISIBILITY void __llvm_profile_reset_counters ( void ) { uint64_t * I = __llvm_profile_begin_counters ( ) ; uint64_t * E = __llvm_profile_end_counters ( ) ; memset ( I , 0 , sizeof ( uint64_t ) * ( E - I ) ) ; const __llvm_profile_data * DataBegin = __llvm_profile_begin_data ( ) ; const __llvm_profile_data * DataEnd = __llvm_profile_end_data ( ) ; const __llvm_profile_data * DI ; for ( DI = DataBegin ; DI < DataEnd ; ++ DI ) { uint64_t CurrentVSiteCount ; uint32_t VKI , i ; if ( ! DI -> Values ) { continue ; } ValueProfNode * * ValueCounters = ( ValueProfNode * * ) DI -> Values ; for ( VKI = IPVK_First ; VKI <= IPVK_Last ; ++ VKI ) { CurrentVSiteCount += DI -> NumValueSites [ VKI ] ; } for ( i = 0 ; i < CurrentVSiteCount ; ++ i ) { ValueProfNode * CurrentVNode = ValueCounters [ i ] ; while ( CurrentVNode ) { CurrentVNode -> Count = 0 ; CurrentVNode = CurrentVNode -> Next ; } } } lprofSetProfileDumped ( 0 ) ; } 