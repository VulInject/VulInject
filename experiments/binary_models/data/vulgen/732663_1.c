static int keyspan_setup ( struct usb_device * dev ) { int retval ; retval = usb_control_msg ( dev , usb_sndctrlpipe ( dev , 0 ) , 0x11 , 0x40 , 0x5601 , 0x0 , NULL , 0 , USB_CTRL_SET_TIMEOUT ) ; if ( retval ) { dev_dbg ( & dev -> dev , "%s - failed to set bit rate due to error: %d\n" , __func__ , retval ) ; return ( retval ) ; } retval = usb_control_msg ( dev , usb_sndctrlpipe ( dev , 0 ) , 0x44 , 0x40 , 0x0 , 0x0 , NULL , 0 , USB_CTRL_SET_TIMEOUT ) ; if ( retval ) { dev_dbg ( & dev -> dev , "%s - failed to set resume sensitivity due to error: %d\n" , __func__ , retval ) ; return ( retval ) ; } retval = usb_control_msg ( dev , usb_sndctrlpipe ( dev , 0 ) , 0x22 , 0x40 , 0x0 , 0x0 , NULL , 0 , USB_CTRL_SET_TIMEOUT ) ; if ( retval ) { dev_dbg ( & dev -> dev , "%s - failed to turn receive on due to error: %d\n" , __func__ , retval ) ; return ( retval ) ; } dev_dbg ( & dev -> dev , "%s - Setup complete.\n" , __func__ ) ; return ( retval ) ; } 