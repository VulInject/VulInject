static void qed_cxt_qm_iids ( struct qed_hwfn * p_hwfn , struct qed_qm_iids * iids ) { struct qed_cxt_mngr * p_mngr = p_hwfn -> p_cxt_mngr ; struct qed_tid_seg * segs ; u32 vf_cids = 0 , type , j ; u32 vf_tids = 0 ; for ( type = 0 ; type < MAX_CONN_TYPES ; type ++ ) { iids -> cids += p_mngr -> conn_cfg [ type ] . cid_count ; vf_cids += p_mngr -> conn_cfg [ type ] . cids_per_vf ; segs = p_mngr -> conn_cfg [ type ] . tid_seg ; for ( j = 0 ; j < NUM_TASK_PF_SEGMENTS ; j ++ ) { iids -> tids += segs [ j ] . count ; } vf_tids += segs [ NUM_TASK_PF_SEGMENTS ] . count ; } iids -> vf_cids = vf_cids ; iids -> tids += vf_tids * p_mngr -> vf_count ; } 