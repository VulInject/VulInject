void ratelimitDestruct ( ratelimit_t * ratelimit ) { smsg_t * pMsg ; if ( ratelimit -> pMsg != NULL ) { if ( ratelimit -> nsupp > 0 ) { pMsg = ratelimitGenRepMsg ( ratelimit ) ; if ( pMsg != NULL ) { submitMsg2 ( pMsg ) ; } } msgDestruct ( & ratelimit -> pMsg ) ; } tellLostCnt ( ratelimit ) ; if ( ratelimit -> bThreadSafe ) { pthread_mutex_destroy ( & ratelimit -> mut ) ; } free ( ratelimit ) ; } 