static void tegra_dma_synchronize ( struct dma_chan * dc ) { struct tegra_dma_channel * tdc = to_tegra_dma_chan ( dc ) ; int err ; err = pm_runtime_resume_and_get ( tdc -> tdma -> dev ) ; if ( err < 0 ) { dev_err ( tdc2dev ( tdc ) , "Failed to synchronize DMA: %d\n" , err ) ; return ; } wait_event ( tdc -> wq , tegra_dma_eoc_interrupt_deasserted ( tdc ) ) ; pm_runtime_put ( tdc -> tdma -> dev ) ; } 