void i915_restore_display ( struct drm_i915_private * dev_priv ) { struct pci_dev * pdev = dev_priv -> drm . pdev ; if ( ! HAS_DISPLAY ( dev_priv ) ) { return ; } intel_restore_swf ( dev_priv ) ; if ( GRAPHICS_VER ( dev_priv ) == 4 ) { pci_write_config_word ( pdev , GCDGMBUS , dev_priv -> regfile . saveGCDGMBUS ) ; } if ( GRAPHICS_VER ( dev_priv ) <= 4 ) { intel_de_write ( dev_priv , DSPARB , dev_priv -> regfile . saveDSPARB ) ; } intel_gmbus_reset ( dev_priv ) ; } 