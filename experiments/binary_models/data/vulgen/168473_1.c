time_t do_stats ( void ) { time_t tnow , ttaken ; ( void ) time ( & tnow ) ; ttaken = tnow - tstart_volume ; blocks = spcl . c_tapea - tapea_volume ; msg ( "Volume %d completed at: %s" , tapeno , ctime ( & tnow ) ) ; if ( ttaken > 0 ) { msg ( "Volume %d took %lld:%02lld:%02lld\n" , tapeno , ( long long ) ttaken / 3600 , ( ( long long ) ttaken % 3600 ) / 60 , ( long long ) ttaken % 60 ) ; blocks /= ttaken ; msg ( "Volume %d transfer rate: %lld KB/s\n" , tapeno , blocks ) ; xferrate += blocks ; } return ( tnow ) ; } 