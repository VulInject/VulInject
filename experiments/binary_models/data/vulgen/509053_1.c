selection_value_invoker ( , , , , , ) { gboolean success = TRUE ; GimpValueArray * return_vals ; GimpImage * image ; gint x ; gint y ; gint value = 0 ; image = g_value_get_object ( gimp_value_array_index ( args , 0 ) ) ; x = g_value_get_int ( gimp_value_array_index ( args , 1 ) ) ; y = g_value_get_int ( gimp_value_array_index ( args , 2 ) ) ; if ( success ) { gdouble val ; val = gimp_pickable_get_opacity_at ( GIMP_PICKABLE ( gimp_image_get_mask ( image ) ) , x , y ) ; value = ROUND ( CLAMP ( val , 0.0 , 1.0 ) * 255.0 ) ; } return_vals = gimp_procedure_get_return_values ( procedure , success , error ?* error : NULL ) ; if ( success ) { g_value_set_int ( gimp_value_array_index ( return_vals , 1 ) , 0 ) ; } return return_vals ; } 