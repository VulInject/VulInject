static bool mcr20a_iar_volatile ( struct device * dev , unsigned int reg ) { switch ( reg ) { case IAR_DUAL_PAN_STS : case IAR_RX_BYTE_COUNT : case IAR_FILTERFAIL_CODE1 : case IAR_FILTERFAIL_CODE2 : case IAR_RSSI : return true ; default : return false ; } } static const struct regmap_config mcr20a_iar_regmap = { . name = "mcr20a_iar" . reg_bits = 16 . val_bits = 8 . write_flag_mask = REGISTER_ACCESS | REGISTER_WRITE | IAR_INDEX . read_flag_mask = REGISTER_ACCESS | REGISTER_READ | IAR_INDEX . cache_type = REGCACHE_RBTREE . writeable_reg = mcr20a_iar_writeable . readable_reg = mcr20a_iar_readable . volatile_reg = mcr20a_iar_volatile . fast_io = true } ; mcr20a_local { struct spi_device * spi ; struct ieee802154_hw * hw ; struct regmap * regmap_dar ; struct regmap * regmap_iar ; u8 * buf ; bool is_tx ; struct spi_message tx_buf_msg ; u8 tx_header [ 1 ] ; struct spi_transfer tx_xfer_header ; u8 tx_len [ 1 ] ; struct spi_transfer tx_xfer_len ; struct spi_transfer tx_xfer_buf ; struct sk_buff * tx_skb ; struct spi_message reg_msg ; u8 reg_cmd [ 1 ] ; u8 reg_data [ MCR20A_IRQSTS_NUM ] ; struct spi_transfer reg_xfer_cmd ; struct spi_transfer reg_xfer_data ; struct spi_message rx_buf_msg ; u8 rx_header [ 1 ] ; struct spi_transfer rx_xfer_header ; u8 rx_lqi [ 1 ] ; struct spi_transfer rx_xfer_lqi ; u8 rx_buf [ MCR20A_MAX_BUF ] ; struct spi_transfer rx_xfer_buf ; struct spi_message irq_msg ; u8 irq_header [ 1 ] ; u8 irq_data [ MCR20A_IRQSTS_NUM ] ; struct spi_transfer irq_xfer_data ; int irq_xfer_header ; } 