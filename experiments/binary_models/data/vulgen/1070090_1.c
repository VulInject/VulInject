void igb_free_dma_buffer ( dma_buffer_t * buf ) { if ( buf -> dma_handle != NULL ) { ( void ) ddi_dma_unbind_handle ( buf -> dma_handle ) ; buf -> dma_address = 0 ; } else { return ; } if ( buf -> acc_handle != NULL ) { ddi_dma_mem_free ( & buf -> acc_handle ) ; buf -> address = NULL ; } if ( buf -> dma_handle != NULL ) { ddi_dma_free_handle ( & buf -> dma_handle ) ; buf -> dma_handle = NULL ; } buf -> size = 0 ; buf -> len = 0 ; } 