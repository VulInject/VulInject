static void smc_enable ( struct net_device * dev ) { struct smc_local * lp = netdev_priv ( dev ) ; void __iomem * ioaddr = lp -> base ; int mask ; DBG ( 2 , dev , "%s\n" , __func__ ) ; SMC_SELECT_BANK ( lp , 0 ) ; SMC_SET_TCR ( lp , lp -> tcr_cur_mode ) ; SMC_SET_RCR ( lp , lp -> rcr_cur_mode ) ; SMC_SELECT_BANK ( lp , 1 ) ; SMC_SET_MAC_ADDR ( lp , dev -> dev_addr ) ; if ( lp -> version >= ( CHIP_91100 << 4 ) ) { mask |= IM_MDINT ; } SMC_SELECT_BANK ( lp , 2 ) ; SMC_SET_INT_MASK ( lp , mask ) ; } 