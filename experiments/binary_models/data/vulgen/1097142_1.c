static int rtw89_wow_fw_start ( struct rtw89_dev * rtwdev ) { struct rtw89_wow_param * rtw_wow = & rtwdev -> wow ; struct rtw89_vif * rtwvif = ( rtw89_vif * ) rtw_wow -> wow_vif -> drv_priv ; int ret ; rtw89_wow_pattern_write ( rtwdev ) ; ret = rtw89_fw_h2c_keep_alive ( rtwdev , rtwvif , true ) ; if ( ret ) { rtw89_err ( rtwdev , "wow: failed to enable keep alive\n" ) ; return ret ; } if ( ret ) { rtw89_err ( rtwdev , "wow: failed to enable disconnect detect\n" ) ; out } ret = rtw89_wow_cfg_wake ( rtwdev , true ) ; if ( ret ) { rtw89_err ( rtwdev , "wow: failed to config wake\n" ) ; out } ret = rtw89_wow_check_fw_status ( rtwdev , true ) ; if ( ret ) { rtw89_err ( rtwdev , "wow: failed to check enable fw ready\n" ) ; out } out return ret ; } 