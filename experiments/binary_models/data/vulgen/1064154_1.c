static void mvumi_get_ib_list_entry ( struct mvumi_hba * mhba , void * * ib_entry ) { unsigned int cur_ib_entry ; cur_ib_entry = mhba -> ib_cur_slot & mhba -> regs -> cl_slot_num_mask ; cur_ib_entry ++ ; if ( cur_ib_entry >= mhba -> list_num_io ) { cur_ib_entry -= mhba -> list_num_io ; mhba -> ib_cur_slot ^= mhba -> regs -> cl_pointer_toggle ; } mhba -> ib_cur_slot &= ~ mhba -> regs -> cl_slot_num_mask ; mhba -> ib_cur_slot |= ( cur_ib_entry & mhba -> regs -> cl_slot_num_mask ) ; if ( mhba -> hba_capability & HS_CAPABILITY_SUPPORT_DYN_SRC ) { * ib_entry = mhba -> ib_list + cur_ib_entry * sizeof ( mvumi_dyn_list_entry ) ; } else { * ib_entry = mhba -> ib_list + cur_ib_entry * mhba -> ib_max_size ; } } 