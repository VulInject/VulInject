void pcmk__require_promotion_tickets ( pe_resource_t * rsc ) { for ( GList * item = rsc -> rsc_tickets ; item != NULL ; item = item -> next ) { rsc_ticket_t * rsc_ticket = ( rsc_ticket_t * ) item -> data ; if ( ( rsc_ticket -> role == RSC_ROLE_PROMOTED ) && ( ! rsc_ticket -> ticket -> granted || rsc_ticket -> ticket -> standby ) ) { resource_location ( rsc , NULL , - INFINITY , "__stateful_without_ticket__" , 0 ) ; } } } 