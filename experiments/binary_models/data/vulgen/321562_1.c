static void rk3066_dmc_set_bandwidth_ratio ( const struct rk3066_dmc_chan_info * chan , int channel , u32 n , struct rk3066_grf * grf ) { struct rk3288_ddr_pctl * pctl = chan -> pctl ; struct rk3288_ddr_publ * publ = chan -> publ ; if ( n == 1 ) { setbits_le32 ( & pctl -> ppcfg , 1 ) ; setbits_le32 ( & msch -> ddrtiming , 1 << 31 ) ; clrbits_le32 ( & publ -> datx8 [ 2 ] . dxgcr , 1 ) ; clrbits_le32 ( & publ -> datx8 [ 3 ] . dxgcr , 1 ) ; setbits_le32 ( & publ -> datx8 [ 2 ] . dxdllcr , DXDLLCR_DLLDIS ) ; setbits_le32 ( & publ -> datx8 [ 3 ] . dxdllcr , DXDLLCR_DLLDIS ) ; } else { clrbits_le32 ( & pctl -> ppcfg , 1 ) ; clrbits_le32 ( & msch -> ddrtiming , 1 << 31 ) ; setbits_le32 ( & publ -> datx8 [ 2 ] . dxgcr , 1 ) ; setbits_le32 ( & publ -> datx8 [ 3 ] . dxgcr , 1 ) ; clrbits_le32 ( & publ -> datx8 [ 2 ] . dxdllcr , DXDLLCR_DLLDIS ) ; clrbits_le32 ( & publ -> datx8 [ 3 ] . dxdllcr , DXDLLCR_DLLDIS ) ; clrbits_le32 ( & publ -> datx8 [ 2 ] . dxdllcr , DXDLLCR_DLLSRST ) ; clrbits_le32 ( & publ -> datx8 [ 3 ] . dxdllcr , DXDLLCR_DLLSRST ) ; udelay ( 10 ) ; setbits_le32 ( & publ -> datx8 [ 2 ] . dxdllcr , DXDLLCR_DLLSRST ) ; setbits_le32 ( & publ -> datx8 [ 3 ] . dxdllcr , DXDLLCR_DLLSRST ) ; } setbits_le32 ( & pctl -> dfistcfg0 , 1 << 2 ) ; } 