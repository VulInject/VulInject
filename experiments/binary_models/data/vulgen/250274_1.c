static ssize_t extended_store ( struct config_item * item , const char * buf , size_t count ) { struct netconsole_target * nt = to_target ( item ) ; int extended ; int err ; mutex_lock ( & dynamic_netconsole_mutex ) ; if ( nt -> enabled ) { pr_err ( "target (%s) is enabled, disable to update parameters\n" , config_item_name ( & nt -> item ) ) ; err = - EINVAL ; out_unlock } err = kstrtoint ( buf , 10 , & extended ) ; if ( err < 0 ) { out_unlock } if ( extended ( 0 || extended ) 1 ) { err = - EINVAL ; out_unlock } nt -> extended = extended ; return strnlen ( buf , count ) ; out_unlock mutex_unlock ( & dynamic_netconsole_mutex ) ; return err ; } 