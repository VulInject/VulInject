static av_cold int init ( AVFilterContext * ctx ) { DelogoContext * s = ctx -> priv ; int ret ; if ( ( ret = set_expr ( & s -> x_pexpr , s -> x_expr , "x" , ctx ) ) < 0 || ( ret = set_expr ( & s -> y_pexpr , s -> y_expr , "y" , ctx ) ) < 0 || ( ret = set_expr ( & s -> w_pexpr , s -> w_expr , "w" , ctx ) ) < 0 || ( ret = set_expr ( & s -> h_pexpr , s -> h_expr , "h" , ctx ) ) < 0 ) { return ret ; } s -> x = av_expr_eval ( s -> x_pexpr , s -> var_values , s ) ; s -> y = av_expr_eval ( s -> y_pexpr , s -> var_values , s ) ; s -> w = av_expr_eval ( s -> w_pexpr , s -> var_values , s ) ; s -> h = av_expr_eval ( s -> h_pexpr , s -> var_values , s ) ; if ( s -> opt == - 1 ) { av_log ( s , AV_LOG_ERROR , "Option %s was not set.\n" , # opt ) ; return AVERROR ( EINVAL ) ; } CHECK_UNSET_OPT ( x ) ; CHECK_UNSET_OPT ( y ) ; CHECK_UNSET_OPT ( w ) ; CHECK_UNSET_OPT ( h ) ; s -> band = 1 ; av_log ( ctx , AV_LOG_VERBOSE , "x:%d y:%d, w:%d h:%d band:%d show:%d\n" , s -> x , s -> y , s -> w , s -> h , s -> band , s -> show ) ; s -> w += s -> band * 2 ; s -> h += s -> band * 2 ; s -> x -= s -> band ; s -> y -= s -> band ; return 0 ; } 