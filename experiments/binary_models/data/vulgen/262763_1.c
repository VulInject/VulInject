void pv_destroy_api ( void ) { pv_table_free ( ) ; tr_table_free ( ) ; pv_destroy_buffer ( ) ; return ; } static char * * _pv_print_buffer = NULL ; static int _pv_print_buffer_size = PV_DEFAULT_PRINT_BUFFER_SIZE ; static int _pv_print_buffer_size_active = 0 ; static int _pv_print_buffer_slots = PV_DEFAULT_PRINT_BUFFER_SLOTS ; static int _pv_print_buffer_slots_active = 0 ; static int _pv_print_buffer_index = 0 ; int pv_init_buffer ( void ) { int i ; if ( _pv_print_buffer != NULL ) { return 0 ; } _pv_print_buffer = ( char * * ) pkg_malloc ( _pv_print_buffer_slots * sizeof ( char * ) ) ; if ( _pv_print_buffer == NULL ) { PKG_MEM_ERROR ; return - 1 ; } for ( i = 0 ; i < _pv_print_buffer_slots ; i ++ ) { _pv_print_buffer [ i ] = ( char * ) pkg_malloc ( _pv_print_buffer_size * sizeof ( char ) ) ; if ( _pv_print_buffer [ i ] == NULL ) { PKG_MEM_ERROR ; return - 1 ; } } LM_DBG ( "PV print buffer initialized to [%d][%d]\n" , _pv_print_buffer_slots , _pv_print_buffer_size ) ; _pv_print_buffer_slots_active = _pv_print_buffer_slots ; _pv_print_buffer_size_active = _pv_print_buffer_size ; _pv_print_buffer_index = 0 ; return 0 ; } 