int EstimateTAC ( CMSREGISTER const cmsUInt16Number In [ ] , CMSREGISTER cmsUInt16Number Out [ ] , CMSREGISTER void * Cargo ) { cmsTACestimator * bp = ( cmsTACestimator * ) Cargo ; cmsFloat32Number RoundTrip [ cmsMAXCHANNELS ] ; cmsUInt32Number i ; cmsFloat32Number Sum ; cmsDoTransform ( bp -> hRoundTrip , In , RoundTrip , 1 ) ; for ( Sum = 0 , i = 0 ; i < bp -> nOutputChans ; i ++ ) { Sum += RoundTrip [ i ] ; } if ( Sum > bp -> MaxTAC ) { bp -> MaxTAC = Sum ; for ( i = 0 ; i < bp -> nOutputChans ; i ++ ) { bp -> MaxInput [ i ] = In [ i ] ; } } return TRUE ; } 