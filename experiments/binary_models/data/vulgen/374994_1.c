static void vrrp_vrf_handler ( const vector_t * strvec ) { if ( strlen ( name ) >= IFNAMSIZ ) { report_config_error ( CONFIG_GENERAL_ERROR , "(%s) VRF interface name '%s' too long - ignoring" , current_vrrp -> iname , name ) ; return ; } if ( current_vrrp -> ifp ) { report_config_error ( CONFIG_GENERAL_ERROR , "(%s) Cannot specify VRF interface and interface - ignoring" , current_vrrp -> iname ) ; return ; } if ( current_vrrp -> vrf_ifp ) { report_config_error ( CONFIG_GENERAL_ERROR , "(%s) VRF interface already specified as '%s' - ignoring" , current_vrrp -> iname , current_vrrp -> vrf_ifp -> ifname ) ; return ; } current_vrrp -> vrf_ifp = if_get_by_ifname ( name , IF_CREATE_IF_DYNAMIC ) ; if ( ! current_vrrp -> vrf_ifp ) { report_config_error ( CONFIG_GENERAL_ERROR , "(%s) WARNING - VRF interface %s doesn't exist" , current_vrrp -> iname , name ) ; } if ( current_vrrp -> vrf_ifp -> hw_type == ARPHRD_LOOPBACK ) { report_config_error ( CONFIG_GENERAL_ERROR , "(%s) cannot use a loopback interface (%s) for VRF - ignoring" , current_vrrp -> iname , name ) ; current_vrrp -> vrf_ifp = NULL ; } } 