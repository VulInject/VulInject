static int compile_goto_error ( int f , int n ) { struct buffer * bp ; struct mgwin * wp ; char * fname , * line , * lp , * ln ; int lineno ; char * adjf , path [ NFILEN ] ; const char * errstr ; struct line * last ; compile_win = curwp ; compile_buffer = curbp ; last = blastlp ( compile_buffer ) ; retry if ( curwp -> w_dotp == last ) { return ( FALSE ) ; } if ( ( line = linetostr ( curwp -> w_dotp ) ) == NULL ) { return ( FALSE ) ; } lp = line ; if ( ( fname = strsep ( & lp , ":" ) ) == NULL || * fname == '\0' ) { fail } if ( ( ln = strsep ( & lp , ":" ) ) == NULL || * ln == '\0' ) { fail } lineno = ( int ) strtonum ( ln , INT_MIN , INT_MAX , & errstr ) ; if ( errstr ) { fail } if ( fname && fname [ 0 ] != '/' ) { if ( getbufcwd ( path , sizeof ( path ) ) == FALSE ) { fail } if ( strlcat ( path , fname , sizeof ( path ) ) >= sizeof ( path ) ) { fail } adjf = path ; } else { adjf = adjustname ( fname , TRUE ) ; } free ( line ) ; if ( adjf == NULL ) { return ( FALSE ) ; } if ( ( bp = findbuffer ( adjf ) ) == NULL ) { return ( FALSE ) ; } if ( ( wp = popbuf ( bp , WNONE ) ) == NULL ) { return ( FALSE ) ; } curbp = bp ; curwp = wp ; if ( bp -> b_fname [ 0 ] == '\0' ) { readin ( adjf ) ; } gotoline ( FFARG , lineno ) ; return ( TRUE ) ; fail free ( line ) ; dobeep ( ) ; ewprintf ( "No more hits" ) ; return ( FALSE ) ; } 