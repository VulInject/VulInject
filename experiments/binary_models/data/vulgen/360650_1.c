void smatch ( struct string_list * filelist ) { struct symbol_list * sym_list ; struct timeval stop , start ; char * path ; int len ; gettimeofday ( & start , NULL ) ; FOR_EACH_PTR_NOTAG ( , ) { path = getcwd ( NULL , 0 ) ; if ( path ) { len = strlen ( path ) + 1 + strlen ( base_file ) + 1 ; full_base_file = malloc ( len ) ; snprintf ( full_base_file , len , "%s/%s" , path , base_file ) ; } else { full_base_file = alloc_string ( base_file ) ; } if ( option_file_output ) { open_output_files ( base_file ) ; } sym_list = sparse_keep_tokens ( base_file ) ; split_c_file_functions ( sym_list ) ; } END_FOR_EACH_PTR_NOTAG ( base_file ) ; gettimeofday ( & stop , NULL ) ; set_position ( last_pos ) ; final_pass = 1 ; if ( option_time ) { sm_msg ( "time: %lu" , stop . tv_sec - start . tv_sec ) ; } if ( option_mem ) { sm_msg ( "mem: %luKb" , get_max_memory ( ) ) ; } } 