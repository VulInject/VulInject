static int rtw_load_firmware ( struct rtw_dev * rtwdev , enum rtw_fw_type type ) { const char * fw_name ; struct rtw_fw_state * fw ; int ret ; switch ( type ) { case RTW_WOWLAN_FW : fw = & rtwdev -> wow_fw ; fw_name = rtwdev -> chip -> wow_fw_name ; break ; case RTW_NORMAL_FW : fw = & rtwdev -> fw ; fw_name = rtwdev -> chip -> fw_name ; break ; default : rtw_warn ( rtwdev , "unsupported firmware type\n" ) ; return - ENOENT ; } fw -> type = type ; fw -> rtwdev = rtwdev ; init_completion ( & fw -> completion ) ; if ( ret ) { rtw_err ( rtwdev , "failed to async firmware request\n" ) ; return ret ; } return 0 ; } 