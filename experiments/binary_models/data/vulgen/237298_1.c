errcode_t ext2fs_extent_save_path ( ext2_extent_handle_t handle , ext2_extent_path_t * ret_path ) { ext2_extent_path_t save_path ; struct ext2fs_extent extent ; struct ext2_extent_info info ; errcode_t retval ; retval = ext2fs_extent_get ( handle , EXT2_EXTENT_CURRENT , & extent ) ; retval = ext2fs_extent_get_info ( handle , & info ) ; if ( retval ) { return retval ; } retval = ext2fs_get_mem ( sizeof ( ext2_extent_path ) , & save_path ) ; if ( retval ) { return retval ; } memset ( save_path , 0 , sizeof ( ext2_extent_path ) ) ; save_path -> magic = EXT2_ET_MAGIC_EXTENT_PATH ; save_path -> leaf_height = info . max_depth - info . curr_level - 1 ; save_path -> lblk = extent . e_lblk ; * ret_path = save_path ; return 0 ; } 