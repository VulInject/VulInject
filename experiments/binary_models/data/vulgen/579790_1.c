int diswl_ ( struct tcp_chan * chan , dis_long_double_t value , unsigned ndigs ) { int c ; int expon ; int negate ; int retval ; unsigned pow2 ; char * cp ; char * ocp ; dis_long_double_t ldval ; char scratch [ DIS_BUFSIZ ] ; assert ( ndigs > 0 && ndigs <= LDBL_DIG ) ; memset ( scratch , 0 , sizeof ( scratch ) ) ; if ( value == 0.0L ) { retval = tcp_puts ( chan , "+0+0" , 4 ) < 0 ?DIS_PROTO : DIS_SUCCESS ; return ( ( tcp_wcommit ( chan , retval == DIS_SUCCESS ) < 0 ) ?DIS_NOCOMMIT : retval ) ; } ldval = ( negate = value < 0.0L ) ?- value : value ; if ( ldval > LDBL_MAX ) { return ( DIS_HUGEVAL ) ; } if ( dis_lmx10 == 0 ) { disi10l_ ( ) ; } expon = 0 ; pow2 = dis_lmx10 + 1 ; if ( ldval < 1.0L ) { { } pow2 ; ldval *= 10.0 ; } } 