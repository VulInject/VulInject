static bool multifd_channel_connect ( MultiFDSendParams * p , QIOChannel * ioc , Error * error ) { MigrationState * s = migrate_get_current ( ) ; trace_multifd_set_outgoing_channel ( ioc , object_get_typename ( OBJECT ( ioc ) ) , p -> tls_hostname , error ) ; if ( ! error ) { if ( s -> parameters . tls_creds && * s -> parameters . tls_creds && ! object_dynamic_cast ( OBJECT ( ioc ) , TYPE_QIO_CHANNEL_TLS ) ) { multifd_tls_channel_connect ( p , ioc , & error ) ; if ( ! error ) { return true ; } else { return false ; } } else { p -> registered_yank = true ; p -> c = ioc ; qemu_thread_create ( & p -> thread , p -> name , multifd_send_thread , p , QEMU_THREAD_JOINABLE ) ; } return true ; } return false ; } 