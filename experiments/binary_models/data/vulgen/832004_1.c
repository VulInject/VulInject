int mt7615_mcu_set_bss_pm ( struct mt7615_dev * dev , struct ieee80211_vif * vif , bool enable ) { struct mt7615_vif * mvif = ( mt7615_vif * ) vif -> drv_priv ; { u8 bss_idx ; u8 dtim_period ; __le16 aid ; __le16 bcn_interval ; __le16 atim_window ; u8 uapsd ; u8 bmc_delivered_ac ; u8 bmc_triggered_ac ; u8 pad ; } , req = { . bss_idx = mvif -> mt76 . idx . aid = cpu_to_le16 ( vif -> cfg . aid ) . dtim_period = vif -> bss_conf . dtim_period . bcn_interval = cpu_to_le16 ( vif -> bss_conf . beacon_int ) } { u8 bss_idx ; u8 pad [ 3 ] ; } , req_hdr = { . bss_idx = mvif -> mt76 . idx } int err ; err = mt76_mcu_send_msg ( & dev -> mt76 , MCU_CE_CMD ( SET_BSS_ABORT ) , & req_hdr , sizeof ( req_hdr ) , false ) ; if ( err < 0 || ! enable ) { return err ; } return mt76_mcu_send_msg ( & dev -> mt76 , MCU_CE_CMD ( SET_BSS_CONNECTED ) , & req , sizeof ( req ) , false ) ; } 