unsigned long uboot_kbd ; unsigned long uboot_initrd_start , uboot_initrd_end ; unsigned long uboot_cmd_start , uboot_cmd_end ; sp = ( unsigned long * ) _init_sp ; uboot_kbd = sp [ 1 ] ; uboot_initrd_start = sp [ 2 ] ; uboot_initrd_end = sp [ 3 ] ; uboot_cmd_start = sp [ 4 ] ; uboot_cmd_end = sp [ 5 ] ; if ( uboot_cmd_start && uboot_cmd_end ) { initrd_start = uboot_initrd_start ; initrd_end = uboot_initrd_end ; ROOT_DEV = Root_RAM0 ; pr_info ( "initrd at 0x%lx:0x%lx\n" , initrd_start , 0 ) ; } if ( uboot_initrd_start && uboot_initrd_end && ( uboot_initrd_end > uboot_initrd_start ) ) { initrd_start = uboot_initrd_start ; initrd_end = uboot_initrd_end ; ROOT_DEV = Root_RAM0 ; pr_info ( "initrd at 0x%lx:0x%lx\n" , initrd_start , initrd_end ) ; } 