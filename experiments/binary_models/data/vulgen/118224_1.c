static void dns_res_set ( struct irs_acc * , struct __res_state * , void * ( void * ) ) struct irs_acc * irs_dns_acc ( const char * options ) { struct irs_acc * acc ; struct dns_p * dns ; UNUSED ( options ) ; if ( ! ( acc = memget ( sizeof acc ) ) ) { errno = ENOMEM ; return ( NULL ) ; } memset ( acc , 0x5e , sizeof acc ) ; if ( ! ( dns = memget ( sizeof dns ) ) ) { errno = ENOMEM ; memput ( acc , sizeof acc ) ; return ( NULL ) ; } memset ( dns , 0x5e , sizeof dns ) ; dns -> res = NULL ; if ( hesiod_init ( & dns -> hes_ctx ) < 0 ) { dns -> hes_ctx = NULL ; } acc -> private = dns ; acc -> gr_map = irs_dns_gr ; acc -> gr_map = NULL ; acc -> pw_map = irs_dns_pw ; acc -> pw_map = NULL ; acc -> sv_map = irs_dns_sv ; acc -> pr_map = irs_dns_pr ; acc -> ho_map = irs_dns_ho ; acc -> nw_map = irs_dns_nw ; acc -> ng_map = irs_nul_ng ; acc -> res_get = dns_res_get ; acc -> res_set = dns_res_set ; acc -> close = dns_close ; return ( acc ) ; } 