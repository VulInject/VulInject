static void comm_write_block ( PIA * pi , char * buf , int count ) { int k ; switch ( pi -> mode ) { case 0 : case 1 : P1 ; for ( k = 0 ; k < count ; k ++ ) { w2 ( 5 ) ; w0 ( buf [ k ^ 1 ] ) ; w2 ( 7 ) ; } w2 ( 5 ) ; w2 ( 4 ) ; break ; case 2 : w3 ( 0x48 ) ; ( void ) r1 ( ) ; for ( k = 0 ; k < count ; k ++ ) { w4 ( buf [ k ^ 1 ] ) ; } break ; case 3 : w3 ( 0x48 ) ; ( void ) r1 ( ) ; for ( k = 0 ; k < count / 2 ; k ++ ) { w4w ( pi_swab16 ( buf , k ) ) ; } break ; case 4 : w3 ( 0x48 ) ; ( void ) r1 ( ) ; for ( k = 0 ; k < count / 4 ; k ++ ) { w4l ( pi_swab32 ( buf , k ) ) ; } break ; } } 