static int __init lov_init ( void ) { int rc ; CDEBUG ( D_INFO , "Lustre LOV module (%p).\n" , & lov_caches ) ; rc = lu_kmem_init ( lov_caches ) ; if ( rc ) { return rc ; } lov_oinfo_slab = kmem_cache_create ( "lov_oinfo" , sizeof ( lov_oinfo ) , 0 , SLAB_HWCACHE_ALIGN , NULL ) ; if ( ! lov_oinfo_slab ) { lu_kmem_fini ( lov_caches ) ; return - ENOMEM ; } lprocfs_lov_init_vars ( & lvars ) ; rc = class_register_type ( & lov_obd_ops , NULL , LUSTRE_LOV_NAME , & lov_device_type ) ; if ( rc ) { kmem_cache_destroy ( lov_oinfo_slab ) ; lu_kmem_fini ( lov_caches ) ; } return rc ; } 