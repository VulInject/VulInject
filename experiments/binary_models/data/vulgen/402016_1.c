static ssize_t set_ # # reg ( , , , ) { int nr = to_sensor_dev_attr ( attr ) -> index i2c_client * client = to_i2c_client ( dev ) asb100_data * data = i2c_get_clientdata ( client ) long val int err = kstrtol ( buf , 10 , & val ) mutex_lock ( & data -> update_lock ) } ; switch ( nr ) { case 1 : case 2 : data -> reg [ nr ] = LM75_TEMP_TO_REG ( val ) ; break ; case 0 : case 3 : default : data -> reg [ nr ] = TEMP_TO_REG ( val ) ; break ; } asb100_write_value ( client , ASB100_REG_TEMP_ # # REG ( nr + 1 ) , data -> reg [ nr ] ) ; mutex_unlock ( & data -> update_lock ) ; return count ; 