compute_store_table ( ) { int ret ; basic_block bb ; unsigned regno ; rtx insn , pat ; max_gcse_regno = max_reg_num ( ) ; reg_set_in_block = ( sbitmap * ) sbitmap_vector_alloc ( last_basic_block , max_gcse_regno ) ; sbitmap_vector_zero ( reg_set_in_block , last_basic_block ) ; pre_ldst_mems = 0 ; FOR_EACH_BB ( ) { regvec = & ( reg_set_in_block [ bb -> index ] ) ; for ( insn = bb -> end ; insn && insn != PREV_INSN ( bb -> end ) ; insn = PREV_INSN ( insn ) ) { if ( GET_CODE ( insn ) == CALL_INSN ) { bool clobbers_all = false ; if ( NON_SAVING_SETJMP && find_reg_note ( insn , REG_SETJMP , NULL_RTX ) ) { clobbers_all = true ; } for ( regno = 0 ; regno < FIRST_PSEUDO_REGISTER ; regno ++ ) { if ( clobbers_all || TEST_HARD_REG_BIT ( regs_invalidated_by_call , regno ) ) { SET_BIT ( reg_set_in_block [ bb -> index ] , regno ) ; } } } pat = PATTERN ( insn ) ; note_stores ( pat , reg_set_info , NULL ) ; if ( GET_CODE ( pat ) == SET ) { find_moveable_store ( insn ) ; } } } ret = enumerate_ldsts ( ) ; if ( gcse_file ) { fprintf ( gcse_file , "Store Motion Expressions.\n" ) ; print_ldst_list ( gcse_file ) ; } return ret ; } 