DB * dbopen ( const char * fname , int flags , int mode , DBTYPE type , const void * openinfo ) { ( O_CREAT | O_EXCL | O_EXLOCK | O_NOFOLLOW | O_NONBLOCK | O_ACCMODE | O_SHLOCK | O_SYNC | O_TRUNC ) ; if ( ( ( flags & O_ACCMODE ) == O_RDONLY || ( flags & O_ACCMODE ) == O_RDWR ) && ( flags & ~ ( USE_OPEN_FLAGS | DB_FLAGS ) ) == 0 ) { switch ( type ) { case DB_BTREE : return ( __bt_open ( fname , flags & USE_OPEN_FLAGS , mode , openinfo , flags & DB_FLAGS ) ) ; case DB_HASH : return ( __hash_open ( fname , flags & USE_OPEN_FLAGS , mode , openinfo , flags & DB_FLAGS ) ) ; case DB_RECNO : return ( __rec_open ( fname , flags & USE_OPEN_FLAGS , mode , openinfo , flags & DB_FLAGS ) ) ; } } return ( NULL ) ; } 