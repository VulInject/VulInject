static void * dm_ioctl ( int ioc , struct dm_ioctl * dm ) { static DMData d ; memcpy ( & d . dm , dm , sizeof ( d . dm ) ) ; QEMU_BUILD_BUG_ON ( sizeof ( d . data ) < sizeof ( dm_target_spec ) ) ; d . dm . version [ 0 ] = DM_VERSION_MAJOR ; d . dm . version [ 1 ] = 0 ; d . dm . version [ 2 ] = 0 ; d . dm . data_size = 1024 ; d . dm . data_start = offsetof ( DMData , data ) ; memcpy ( dm , & d . dm , sizeof ( d . dm ) ) ; return & d . data ; } 