static void dm9000_reset ( struct dm9000_priv * db ) { debug ( "resetting DM9000\n" ) ; dm9000_iow ( db , DM9000_GPCR , GPCR_GPIO0_OUT ) ; dm9000_iow ( db , DM9000_GPR , 0 ) ; dm9000_iow ( db , DM9000_NCR , ( NCR_LBK_INT_MAC | NCR_RST ) ) ; { debug ( "resetting the DM9000, 1st reset\n" ) ; udelay ( 25 ) ; } dm9000_ior ( db , DM9000_NCR ) & 1 ; dm9000_iow ( db , DM9000_NCR , 0 ) ; dm9000_iow ( db , DM9000_NCR , ( NCR_LBK_INT_MAC | NCR_RST ) ) ; { debug ( "resetting the DM9000, 2nd reset\n" ) ; udelay ( 25 ) ; } dm9000_ior ( db , DM9000_NCR ) & 1 ; } 