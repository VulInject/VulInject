static void nfs4_clear_open_state ( struct nfs4_state * state ) { struct nfs4_lock_state * lock ; clear_bit ( NFS_DELEGATED_STATE , & state -> flags ) ; clear_bit ( NFS_O_RDONLY_STATE , & state -> flags ) ; clear_bit ( NFS_O_WRONLY_STATE , & state -> flags ) ; clear_bit ( NFS_O_RDWR_STATE , & state -> flags ) ; spin_lock ( & state -> state_lock ) ; list_for_each_entry ( , , ) { lock -> ls_seqid . flags = 0 ; } spin_unlock ( & state -> state_lock ) ; } 