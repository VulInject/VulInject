static irqreturn_t sbni_interrupt ( int , void * ) static void handle_channel ( struct net_device * ) static int recv_frame ( struct net_device * ) static void send_frame ( struct net_device * ) static int upload_data ( struct net_device * , unsigned , unsigned , unsigned , u32 ) static void download_data ( struct net_device * , u32 * ) static void sbni_watchdog ( unsigned long ) static void interpret_ack ( struct net_device * , unsigned ) static int append_frame_to_pkt ( struct net_device * , unsigned , u32 ) static void indicate_pkt ( struct net_device * ) static void card_start ( struct net_device * ) static void prepare_to_send ( struct sk_buff * , struct net_device * ) static void drop_xmit_queue ( struct net_device * ) static void send_frame_header ( struct net_device * , u32 * ) static int skip_tail ( unsigned int , unsigned int , u32 ) static int check_fhdr ( u32 , u32 * , u32 * , u32 * , u32 * , u32 * ) static void change_level ( struct net_device * ) static void timeout_change_level ( struct net_device * ) static u32 calc_crc32 ( u32 , u8 * , u32 ) static struct sk_buff * get_rx_buf ( struct net_device * ) static int sbni_init ( struct net_device * ) static int enslave ( struct net_device * , struct net_device * ) static int emancipate ( struct net_device * ) static const char version [ ] "Granch SBNI12 driver ver 5.0.1  Jun 22 2001  Denis I.Timofeev.\n" ; ; static bool skip_pci_probe __initdata = false ; static int scandone __initdata = 0 ; static int num __initdata = 0 ; static unsigned char rxl_tab [ ] ; static u32 crc32tab [ ] ; static struct net_device * sbni_cards [ SBNI_MAX_NUM_CARDS ] ; static u32 io [ SBNI_MAX_NUM_CARDS ] __initdata = { [ 0 ... SBNI_MAX_NUM_CARDS - 1 ] = - 1 } ; static u32 irq [ SBNI_MAX_NUM_CARDS ] __initdata ; static u32 baud [ SBNI_MAX_NUM_CARDS ] __initdata ; static u32 rxl [ SBNI_MAX_NUM_CARDS ] __initdata = { [ 0 ... SBNI_MAX_NUM_CARDS - 1 ] = - 1 } ; static u32 mac [ SBNI_MAX_NUM_CARDS ] __initdata ; u32 iarr [ ] static iarr * dest [ 5 ] __initdata = { & io & irq & baud & rxl & mac } ; static unsigned int netcard_portlist [ ] __initdata = { 0x210 0x214 0x220 0x224 0x230 0x234 0x240 0x244 0x250 0x254 0x260 0x264 0x270 0x274 0x280 0x284 0x290 0x294 0x2a0 0x2a4 0x2b0 0x2b4 0x2c0 0x2c4 0x2d0 0x2d4 0x2e0 0x2e4 0x2f0 0x2f4 0 } ; static inline int __init sbni_isa_probe ( struct net_device * dev ) { if ( dev -> base_addr > 0x1ff && request_region ( dev -> base_addr , SBNI_IO_EXTENT , dev -> name ) && sbni_probe1 ( dev , dev -> base_addr , dev -> irq ) ) { return 0 ; } else { return - ENODEV ; } } 