static void gpio_tilt_polled_poll ( struct input_polled_dev * dev ) { struct gpio_tilt_polled_dev * tdev = dev -> private ; const struct gpio_tilt_platform_data * pdata = tdev -> pdata ; struct input_dev * input = dev -> input ; struct gpio_tilt_state * tilt_state = NULL ; int state , i ; if ( tdev -> count < tdev -> threshold ) { tdev -> count ++ ; } else { state = 0 ; for ( i = 0 ; i < pdata -> nr_gpios ; i ++ ) { state |= ( ! ! gpio_get_value ( pdata -> gpios [ i ] . gpio ) << i ) ; } } } 