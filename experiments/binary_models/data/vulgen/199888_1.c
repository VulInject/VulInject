static void commit_desc_set ( struct cvs_file * cf ) { BUF * bp ; int fd ; char desc_path [ PATH_MAX ] , * desc ; ( void ) xsnprintf ( desc_path , PATH_MAX , "%s/%s/%s%s" , cf -> file_wd , CVS_PATH_CVSDIR , cf -> file_name , CVS_DESCR_FILE_EXT ) ; if ( ( fd = open ( desc_path , O_RDONLY ) ) == - 1 ) { return ; } bp = buf_load_fd ( fd ) ; buf_putc ( bp , '\0' ) ; desc = buf_release ( bp ) ; ( void ) close ( fd ) ; ( void ) cvs_unlink ( desc_path ) ; free ( desc ) ; } 