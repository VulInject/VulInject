assert_event_count ( , ) { const char * event_name ; uint32_t count ; uint32_t total ; event_name = bson_lookup_utf8 ( operation , "arguments.event" ) ; count = bson_lookup_int32 ( operation , "arguments.count" ) ; if ( 0 == strcmp ( event_name , "ServerMarkedUnknownEvent" ) ) { total = ctx -> total_ServerMarkedUnknownEvent ; } if ( 0 == strcmp ( event_name , "PoolClearedEvent" ) ) { total = _get_total_pool_cleared_event ( ctx ) ; } else { test_error ( "Unknown event: %s" , event_name ) ; } if ( count != total ) { test_error ( "event count %s mismatched. Expected %d, but have %d" , event_name , count , total ) ; } } 