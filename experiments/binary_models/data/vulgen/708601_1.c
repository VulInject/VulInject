void px_pec_msg_rem_intr ( px_t * px_p ) { dev_info_t * dip = px_p -> px_dip ; px_pec_t * pec_p = px_p -> px_pec_p ; ddi_intr_handle_impl_t hdl ; DBG ( DBG_MSG , px_p -> px_dip , "px_pec_msg_rem_intr: dip 0x%p\n" , dip ) ; hdl . ih_ver = DDI_INTR_VERSION ; hdl . ih_state = DDI_IHDL_STATE_ALLOC ; hdl . ih_dip = dip ; if ( pec_p -> pec_corr_msg_msiq_id >= 0 ) { px_lib_msg_setvalid ( dip , PCIE_CORR_MSG , PCIE_MSG_INVALID ) ; hdl . ih_pri = PX_ERR_LOW_PIL ; ( void ) px_rem_msiq_intr ( dip , dip , & hdl , MSG_REC , PCIE_CORR_MSG , pec_p -> pec_corr_msg_msiq_id ) ; ( void ) px_ib_update_intr_state ( px_p , px_p -> px_dip , hdl . ih_inum , px_msiqid_to_devino ( px_p , pec_p -> pec_corr_msg_msiq_id ) , PX_ERR_LOW_PIL , PX_INTR_STATE_DISABLE , MSG_REC , PCIE_CORR_MSG ) ; pec_p -> pec_corr_msg_msiq_id = ( msiqid_t ) - 1 ; } if ( pec_p -> pec_non_fatal_msg_msiq_id >= 0 ) { px_lib_msg_setvalid ( dip , PCIE_NONFATAL_MSG , PCIE_MSG_INVALID ) ; hdl . ih_pri = PX_ERR_PIL ; ( void ) px_rem_msiq_intr ( dip , dip , & hdl , MSG_REC , PCIE_NONFATAL_MSG , pec_p -> pec_non_fatal_msg_msiq_id ) ; ( void ) px_ib_update_intr_state ( px_p , px_p -> px_dip , hdl . ih_inum , px_msiqid_to_devino ( px_p , pec_p -> pec_non_fatal_msg_msiq_id ) , PX_ERR_PIL , PX_INTR_STATE_DISABLE , MSG_REC , PCIE_NONFATAL_MSG ) ; pec_p -> pec_non_fatal_msg_msiq_id = ( msiqid_t ) - 1 ; } if ( pec_p -> pec_fatal_msg_msiq_id >= 0 ) { px_lib_msg_setvalid ( dip , PCIE_FATAL_MSG , PCIE_MSG_INVALID ) ; hdl . ih_pri = PX_ERR_PIL ; ( void ) px_rem_msiq_intr ( dip , dip , & hdl , MSG_REC , PCIE_FATAL_MSG , pec_p -> pec_fatal_msg_msiq_id ) ; ( void ) px_ib_update_intr_state ( px_p , px_p -> px_dip , hdl . ih_inum , px_msiqid_to_devino ( px_p , pec_p -> pec_fatal_msg_msiq_id ) , PX_ERR_PIL , PX_INTR_STATE_DISABLE , MSG_REC , PCIE_FATAL_MSG ) ; pec_p -> pec_fatal_msg_msiq_id = ( msiqid_t ) - 1 ; } } 