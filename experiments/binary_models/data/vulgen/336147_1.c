static uint32_t vega20_ih_doorbell_rptr ( struct amdgpu_ih_ring * ih ) { u32 ih_doorbell_rtpr ; if ( ih -> use_doorbell ) { ih_doorbell_rtpr = REG_SET_FIELD ( ih_doorbell_rtpr , IH_DOORBELL_RPTR , OFFSET , ih -> doorbell_index ) ; ih_doorbell_rtpr = REG_SET_FIELD ( ih_doorbell_rtpr , IH_DOORBELL_RPTR , ENABLE , 1 ) ; } else { ih_doorbell_rtpr = REG_SET_FIELD ( ih_doorbell_rtpr , IH_DOORBELL_RPTR , ENABLE , 0 ) ; } return ih_doorbell_rtpr ; } 