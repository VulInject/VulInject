int32_t dofix ( struct inodesc * idesc , char * msg ) { switch ( idesc -> id_fix ) { case DONTKNOW : pwarn ( msg ) ; if ( reply ( gettext ( "SALVAGE" ) ) == 0 ) { idesc -> id_fix = NOFIX ; return ( 0 ) ; } idesc -> id_fix = FIX ; return ( ALTERED ) ; case FIX : return ( ALTERED ) ; case NOFIX : return ( 0 ) ; default : errexit ( gettext ( "UNKNOWN INODESC FIX MODE %d\n" ) , idesc -> id_fix ) ; } } 