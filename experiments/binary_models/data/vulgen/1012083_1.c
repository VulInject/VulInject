xcf_load_invoker ( , , , , , ) { GimpValueArray * return_vals ; GimpImage * image = NULL ; GFile * file ; GInputStream * input ; GError * my_error = NULL ; gimp_set_busy ( gimp ) ; file = g_value_get_object ( gimp_value_array_index ( args , 1 ) ) ; input = G_INPUT_STREAM ( g_file_read ( file , NULL , & my_error ) ) ; if ( input ) { g_object_unref ( input ) ; } else { g_propagate_prefixed_error ( error , my_error , _ ( "Could not open '%s' for reading: " ) , gimp_file_get_utf8_name ( file ) ) ; } return_vals = gimp_procedure_get_return_values ( procedure , image != NULL , error ?* error : NULL ) ; if ( image ) { g_value_set_object ( gimp_value_array_index ( return_vals , 1 ) , image ) ; } gimp_unset_busy ( gimp ) ; return return_vals ; } 