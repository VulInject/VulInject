static apr_status_t set_resource_limits ( request_rec * r , apr_procattr_t * procattr ) { defined ( RLIMIT_DATA ) || defined ( RLIMIT_VMEM ) || defined ( ) core_dir_config * conf = ( core_dir_config * ) ap_get_core_module_config ( r -> per_dir_config ) ; apr_status_t rv ; rv = apr_procattr_limit_set ( procattr , APR_LIMIT_CPU , conf -> limit_cpu ) ; ap_assert ( rv == APR_SUCCESS ) ; rv = apr_procattr_limit_set ( procattr , APR_LIMIT_MEM , conf -> limit_mem ) ; ap_assert ( rv == APR_SUCCESS ) ; rv = apr_procattr_limit_set ( procattr , APR_LIMIT_NPROC , conf -> limit_nproc ) ; return APR_SUCCESS ; } 