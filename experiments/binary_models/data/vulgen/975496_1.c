static void brcmu_d11ac_encchspec ( struct brcmu_chan * ch ) { brcmu_maskset16 ( & ch -> chspec , BRCMU_CHSPEC_CH_MASK , BRCMU_CHSPEC_CH_SHIFT , ch -> chnum ) ; brcmu_maskset16 ( & ch -> chspec , BRCMU_CHSPEC_D11AC_SB_MASK , BRCMU_CHSPEC_D11AC_SB_SHIFT , ch -> sb ) ; brcmu_maskset16 ( & ch -> chspec , BRCMU_CHSPEC_D11AC_BW_MASK , 0 , d11ac_bw ( ch -> bw ) ) ; ch -> chspec &= ~ BRCMU_CHSPEC_D11AC_BND_MASK ; if ( ch -> chnum <= CH_MAX_2G_CHANNEL ) { ch -> chspec |= BRCMU_CHSPEC_D11AC_BND_2G ; } else { ch -> chspec |= BRCMU_CHSPEC_D11AC_BND_5G ; } } 