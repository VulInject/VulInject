static int lower_callback ( struct notifier_block * nb , unsigned long val , void * v ) { capi_profile profile ; u32 contr = ( long ) v ; switch ( val ) { case CAPICTR_UP : printk ( KERN_INFO "capidrv: controller %hu up\n" , contr ) ; if ( capi20_get_profile ( contr , & profile ) == CAPI_NOERROR ) { ( void ) capidrv_addcontr ( contr , & profile ) ; } break ; case CAPICTR_DOWN : printk ( KERN_INFO "capidrv: controller %hu down\n" , contr ) ; break ; } return NOTIFY_OK ; } 