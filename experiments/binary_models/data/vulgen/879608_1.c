ia64_pseudo_register_read ( , , , ) { if ( regnum >= V32_REGNUM && regnum <= V127_REGNUM ) { ULONGEST bsp ; ULONGEST cfm ; CORE_ADDR reg ; regcache_cooked_read_unsigned ( regcache , IA64_BSP_REGNUM , & bsp ) ; regcache_cooked_read_unsigned ( regcache , IA64_CFM_REGNUM , & cfm ) ; bsp = rse_address_add ( bsp , - ( cfm & 0x7f ) ) ; if ( ( cfm & 0x7f ) > regnum - V32_REGNUM ) { ULONGEST reg_addr = rse_address_add ( bsp , ( regnum - V32_REGNUM ) ) ; store_unsigned_integer ( buf , register_size ( current_gdbarch , regnum ) , reg ) ; } else { store_unsigned_integer ( buf , register_size ( current_gdbarch , regnum ) , 0 ) ; } } if ( IA64_NAT0_REGNUM <= regnum && regnum <= IA64_NAT31_REGNUM ) { ULONGEST unatN_val ; ULONGEST unat ; regcache_cooked_read_unsigned ( regcache , IA64_UNAT_REGNUM , & unat ) ; unatN_val = ( unat & ( 1LL << ( regnum - IA64_NAT0_REGNUM ) ) ) != 0 ; store_unsigned_integer ( buf , register_size ( current_gdbarch , regnum ) , unatN_val ) ; } if ( IA64_NAT32_REGNUM <= regnum && regnum <= IA64_NAT127_REGNUM ) { ULONGEST natN_val = 0 ; ULONGEST bsp ; ULONGEST cfm ; CORE_ADDR gr_addr = 0 ; regcache_cooked_read_unsigned ( regcache , IA64_BSP_REGNUM , & bsp ) ; regcache_cooked_read_unsigned ( regcache , IA64_CFM_REGNUM , & cfm ) ; bsp = rse_address_add ( bsp , - ( cfm & 0x7f ) ) ; if ( ( cfm & 0x7f ) > regnum - V32_REGNUM ) { gr_addr = rse_address_add ( bsp , ( regnum - V32_REGNUM ) ) ; } if ( gr_addr != 0 ) { CORE_ADDR nat_addr = gr_addr | 0x1f8 ; CORE_ADDR nat_collection ; int nat_bit ; if ( nat_addr >= bsp ) { regcache_cooked_read_unsigned ( regcache , IA64_RNAT_REGNUM , & nat_collection ) ; } else { nat_collection = read_memory_integer ( nat_addr , 8 ) ; } nat_bit = ( gr_addr >> 3 ) & 0x3f ; natN_val = ( nat_collection >> nat_bit ) & 1 ; } store_unsigned_integer ( buf , register_size ( current_gdbarch , regnum ) , natN_val ) ; } if ( regnum == VBOF_REGNUM ) { ULONGEST bsp , vbsp ; ULONGEST cfm ; CORE_ADDR reg ; regcache_cooked_read_unsigned ( regcache , IA64_BSP_REGNUM , & bsp ) ; regcache_cooked_read_unsigned ( regcache , IA64_CFM_REGNUM , & cfm ) ; vbsp = rse_address_add ( bsp , - ( cfm & 0x7f ) ) ; store_unsigned_integer ( buf , register_size ( current_gdbarch , regnum ) , vbsp ) ; } if ( VP0_REGNUM <= regnum && regnum <= VP63_REGNUM ) { ULONGEST pr ; ULONGEST cfm ; ULONGEST prN_val ; CORE_ADDR reg ; regcache_cooked_read_unsigned ( regcache , IA64_PR_REGNUM , & pr ) ; regcache_cooked_read_unsigned ( regcache , IA64_CFM_REGNUM , & cfm ) ; if ( VP16_REGNUM <= regnum && regnum <= VP63_REGNUM ) { int rrb_pr = ( cfm >> 32 ) & 0x3f ; regnum = VP16_REGNUM + ( ( regnum - VP16_REGNUM ) + rrb_pr ) % 48 ; } prN_val = ( pr & ( 1LL << ( regnum - VP0_REGNUM ) ) ) != 0 ; store_unsigned_integer ( buf , register_size ( current_gdbarch , regnum ) , prN_val ) ; } else { memset ( buf , 0 , register_size ( current_gdbarch , regnum ) ) ; } } 