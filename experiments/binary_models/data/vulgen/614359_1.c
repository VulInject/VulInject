static int __ov2722_buf_reg_array ( struct i2c_client * client , struct ov2722_write_ctrl * ctrl , const struct ov2722_reg * next ) { int size ; u16 * data16 ; switch ( next -> type ) { case OV2722_8BIT : size = 1 ; ctrl -> buffer . data [ ctrl -> index ] = ( u8 ) next -> val ; break ; case OV2722_16BIT : size = 2 ; data16 = ( u16 * ) & ctrl -> buffer . data [ ctrl -> index ] ; * data16 = cpu_to_be16 ( ( u16 ) next -> val ) ; break ; default : return - EINVAL ; } if ( ctrl -> index == 0 ) { ctrl -> buffer . addr = next -> reg ; } ctrl -> index += size ; return 0 ; } 