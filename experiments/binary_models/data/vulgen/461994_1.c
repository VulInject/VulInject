static void notify_packet_sent ( void * callback_data , unsigned int packet_length ) { struct ipw_network * network = callback_data ; unsigned long flags ; spin_lock_irqsave ( & network -> lock , flags ) ; network -> outgoing_packets_queued -- ; if ( network -> ppp_channel != NULL ) { if ( network -> ppp_blocked ) { network -> ppp_blocked = 0 ; ppp_output_wakeup ( network -> ppp_channel ) ; if ( ipwireless_debug ) { printk ( ": ppp unblocked\n" ) } } else { spin_unlock_irqrestore ( & network -> lock , flags ) ; } } else { spin_unlock_irqrestore ( & network -> lock , flags ) ; } } 