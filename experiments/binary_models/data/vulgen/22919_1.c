static int printEnvironment ( FILE * log ) { cleanup ( , ) size_t length ; size_t i ; for ( length = 0 ; environ [ length ] ; length ++ ) { } if ( length == 0 ) { return 0 ; } if ( ! ( newenv = malloc ( sizeof ( * newenv ) * length ) ) ) { return - 1 ; } for ( i = 0 ; i < length ; i ++ ) { newenv [ i ] = environ [ i ] ; } qsort ( newenv , length , sizeof ( newenv [ 0 ] ) , envsort ) ; for ( i = 0 ; i < length ; i ++ ) { if ( ! STRPREFIX ( newenv [ i ] , "LD_" ) ) { fprintf ( log , "ENV:%s\n" , newenv [ i ] ) ; } } return 0 ; } 