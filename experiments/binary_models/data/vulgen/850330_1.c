static void do_make_pnode_dirty ( struct ubifs_info * c , struct ubifs_pnode * pnode ) { if ( ! test_and_set_bit ( DIRTY_CNODE , & pnode -> flags ) ) { struct ubifs_nnode * nnode ; c -> dirty_pn_cnt += 1 ; add_pnode_dirt ( c , pnode ) ; nnode = pnode -> parent ; while ( nnode ) { if ( ! test_and_set_bit ( DIRTY_CNODE , & nnode -> flags ) ) { ubifs_add_nnode_dirt ( c , nnode ) ; nnode = nnode -> parent ; } else { break ; } } } } 