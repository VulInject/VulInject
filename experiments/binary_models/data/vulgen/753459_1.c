static void sja1105_gating_cfg_time_to_interval ( struct sja1105_gating_config * gating_cfg , u64 cycle_time ) { struct sja1105_gate_entry * last_e ; struct sja1105_gate_entry * e ; struct list_head * prev ; list_for_each_entry ( , , ) { struct sja1105_gate_entry * p ; prev = e -> list . prev ; p = list_entry ( prev , sja1105_gate_entry , list ) ; p -> interval = e -> interval - p -> interval ; } last_e = list_last_entry ( & gating_cfg -> entries , sja1105_gate_entry , list ) ; last_e -> interval = cycle_time - last_e -> interval ; } 