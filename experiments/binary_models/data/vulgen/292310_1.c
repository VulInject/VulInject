update_hardlink_info ( ) const char * file ; { char * path ; Node * n ; struct hardlink_info * hlinfo ; if ( file [ 0 ] == '/' ) { path = xstrdup ( file ) ; } else { char * dir = xgetwd ( ) ; path = xmalloc ( strlen ( dir ) + strlen ( file ) + 2 ) ; sprintf ( path , "%s/%s" , dir , file ) ; free ( dir ) ; } n = lookup_file_by_inode ( path ) ; if ( n == NULL ) { error ( 1 , 0 , "lost hardlink info for %s" , file ) ; } hlinfo = ( hardlink_info * ) n -> data ; hlinfo -> status = T_UPTODATE ; hlinfo -> checked_out = 1 ; } 