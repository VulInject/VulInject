static int logprintf_hub_devices ( picl_nodehdl_t hubh ) { char * name ; int portnum ; char * labelp ; picl_nodehdl_t parenth ; int err ; err = picldiag_get_string_propval ( hubh , PICL_PROP_NAME , & name ) ; if ( err != PICL_SUCCESS ) { return ( err ) ; } log_printf ( "%-12.12s  " , name ) ; free ( name ) ; err = picl_get_propval_by_name ( hubh , PICL_REFPROP_LOC_PARENT , & parenth , sizeof ( picl_nodehdl_t ) ) ; if ( err == PICL_SUCCESS ) { err = picldiag_get_label ( parenth , & labelp ) ; if ( err == PICL_SUCCESS ) { log_printf ( "%s\n" , labelp ) ; return ( PICL_SUCCESS ) ; } if ( err != PICL_PROPNOTFOUND ) { log_printf ( "\n" ) ; return ( err ) ; } } if ( err != PICL_PROPNOTFOUND ) { log_printf ( "\n" ) ; return ( err ) ; } err = picl_get_propval_by_name ( hubh , OBP_PROP_REG , & portnum , sizeof ( portnum ) ) ; if ( err == PICL_PROPNOTFOUND ) { log_printf ( "  -\n" ) ; } if ( err != PICL_SUCCESS ) { log_printf ( "\n" ) ; return ( err ) ; } else { log_printf ( "%3d\n" , portnum ) ; } return ( PICL_SUCCESS ) ; } 