static void parse_zoffset ( char * fname ) { FILE * file ; char * p ; int c ; file = fopen ( fname , "r" ) ; if ( ! file ) { die ( "Unable to open `%s': %m" , fname ) ; } if ( ferror ( file ) ) { die ( "read-error on `zoffset.h'" ) ; } fclose ( file ) ; buf [ c ] = 0 ; p = ( char * ) buf ; while ( p && * p ) { PARSE_ZOFS ( p , efi32_stub_entry ) ; PARSE_ZOFS ( p , efi64_stub_entry ) ; PARSE_ZOFS ( p , efi_pe_entry ) ; PARSE_ZOFS ( p , startup_64 ) ; p = strchr ( p , '\n' ) ; while ( p && ( * p == '\r' || * p == '\n' ) ) { p ++ ; } } } 