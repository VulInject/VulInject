static int meson_vpu_probe ( struct udevice * dev ) { struct meson_vpu_priv * priv = dev_get_priv ( dev ) ; struct udevice * disp ; int ret ; priv -> dev = dev ; priv -> io_base = dev_remap_addr_index ( dev , 0 ) ; if ( ! priv -> io_base ) { return - EINVAL ; } priv -> hhi_base = dev_remap_addr_index ( dev , 1 ) ; if ( ! priv -> hhi_base ) { return - EINVAL ; } priv -> dmc_base = dev_remap_addr_index ( dev , 2 ) ; if ( ! priv -> dmc_base ) { return - EINVAL ; } meson_vpu_init ( dev ) ; ret = uclass_get_device ( UCLASS_DISPLAY , 0 , & disp ) ; return meson_vpu_setup_mode ( dev , ret ?NULL : disp ) ; } 