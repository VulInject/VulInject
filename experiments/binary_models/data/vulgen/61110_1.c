static void check_after_balance_leaf ( struct tree_balance * tb ) { if ( tb -> lnum [ 0 ] ) { if ( B_FREE_SPACE ( tb -> L [ 0 ] ) != MAX_CHILD_SIZE ( tb -> L [ 0 ] ) - dc_size ( B_N_CHILD ( tb -> FL [ 0 ] , get_left_neighbor_position ( tb , 0 ) ) ) ) { print_cur_tb ( "12221" ) ; reiserfs_panic ( tb -> tb_sb , "PAP-12355" , "shift to left was incorrect" ) ; } } if ( PATH_H_PBUFFER ( tb -> tb_path , 1 ) && ( B_FREE_SPACE ( PATH_H_PBUFFER ( tb -> tb_path , 0 ) ) != ( MAX_CHILD_SIZE ( PATH_H_PBUFFER ( tb -> tb_path , 0 ) ) - dc_size ( B_N_CHILD ( PATH_H_PBUFFER ( tb -> tb_path , 1 ) , PATH_H_POSITION ( tb -> tb_path , 1 ) ) ) ) ) ) { int left = B_FREE_SPACE ( PATH_H_PBUFFER ( tb -> tb_path , 0 ) ) ; int right = ( MAX_CHILD_SIZE ( PATH_H_PBUFFER ( tb -> tb_path , 0 ) ) - dc_size ( B_N_CHILD ( PATH_H_PBUFFER ( tb -> tb_path , 1 ) , PATH_H_POSITION ( tb -> tb_path , 1 ) ) ) ) ; print_cur_tb ( "12223" ) ; reiserfs_warning ( tb -> tb_sb , "reiserfs-12363" , "B_FREE_SPACE (PATH_H_PBUFFER(tb->tb_path,0)) = %d; " "MAX_CHILD_SIZE (%d) - dc_size( %y, %d ) [%d] = %d" , left , MAX_CHILD_SIZE ( PATH_H_PBUFFER ( tb -> tb_path , 0 ) ) , PATH_H_PBUFFER ( tb -> tb_path , 1 ) , PATH_H_POSITION ( tb -> tb_path , 1 ) , dc_size ( B_N_CHILD ( PATH_H_PBUFFER ( tb -> tb_path , 1 ) , PATH_H_POSITION ( tb -> tb_path , 1 ) ) ) , right ) ; reiserfs_panic ( tb -> tb_sb , "PAP-12365" , "S is incorrect" ) ; } } 