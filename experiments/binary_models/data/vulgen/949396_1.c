gimp_image_import_rotation_metadata ( , , , ) { GimpMetadata * metadata ; g_return_if_fail ( GIMP_IS_IMAGE ( image ) ) ; g_return_if_fail ( GIMP_IS_CONTEXT ( context ) ) ; g_return_if_fail ( progress == NULL || GIMP_IS_PROGRESS ( progress ) ) ; metadata = gimp_image_get_metadata ( image ) ; if ( metadata ) { GimpMetadataRotationPolicy policy ; policy = GIMP_DIALOG_CONFIG ( image -> gimp -> config ) -> metadata_rotation_policy ; if ( policy == GIMP_METADATA_ROTATION_POLICY_ASK ) { if ( interactive ) { gboolean dont_ask = FALSE ; policy = gimp_query_rotation_policy ( image -> gimp , image , context , & dont_ask ) ; if ( dont_ask ) { gimp_image_metadata_rotate ( image , context , gexiv2_metadata_get_orientation ( GEXIV2_METADATA ( metadata ) ) , 0 ) ; } } else { policy = GIMP_METADATA_ROTATION_POLICY_ROTATE ; } } if ( policy == GIMP_METADATA_ROTATION_POLICY_ROTATE ) { gimp_image_metadata_rotate ( image , context , gexiv2_metadata_get_orientation ( GEXIV2_METADATA ( metadata ) ) , progress ) ; } gexiv2_metadata_set_orientation ( GEXIV2_METADATA ( metadata ) , GEXIV2_ORIENTATION_NORMAL ) ; } } 