static void ioinst_handle_chsc_sda ( ChscReq * req , ChscResp * res ) { uint16_t resp_code = 0x0001 ; uint16_t len = be16_to_cpu ( req -> len ) ; uint32_t param0 = be32_to_cpu ( req -> param0 ) ; uint16_t oc ; int ret ; if ( ( len != 0x0400 ) || ( param0 & CHSC_SDA_0_RES ) ) { out } if ( param0 & CHSC_SDA_0_FMT ) { resp_code = 0x0007 ; out } oc = param0 & CHSC_SDA_0_OC ; switch ( oc ) { case CHSC_SDA_OC_MCSSE : ret = css_enable_mcsse ( ) ; if ( ret == - EINVAL ) { resp_code = 0x0101 ; out } break ; case CHSC_SDA_OC_MSS : ret = css_enable_mss ( ) ; if ( ret == - EINVAL ) { resp_code = 0x0101 ; out } break ; default : resp_code = 0x0003 ; out } out res -> code = cpu_to_be16 ( resp_code ) ; res -> len = cpu_to_be16 ( CHSC_MIN_RESP_LEN ) ; res -> param = 0 ; } 