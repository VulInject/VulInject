void git_config_push_env ( const char * spec ) { char * key ; const char * env_name ; const char * env_value ; env_name = strrchr ( spec , '=' ) ; if ( ! env_name ) { die ( _ ( "invalid config format: %s" ) , spec ) ; } key = xmemdupz ( spec , env_name - spec ) ; env_name ++ ; if ( ! * env_name ) { die ( _ ( "missing environment variable name for configuration '%.*s'" ) , ( int ) ( env_name - spec - 1 ) , spec ) ; } env_value = getenv ( env_name ) ; if ( ! env_value ) { die ( _ ( "missing environment variable '%s' for configuration '%.*s'" ) , env_name , ( int ) ( env_name - spec - 1 ) , spec ) ; } git_config_push_split_parameter ( key , env_value ) ; } 