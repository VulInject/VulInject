static irqreturn_t ad74115_trigger_handler ( int irq , void * p ) { struct iio_poll_func * pf = p ; struct iio_dev * indio_dev = pf -> indio_dev ; struct ad74115_state * st = iio_priv ( indio_dev ) ; int ret ; ret = spi_sync ( st -> spi , & st -> adc_samples_msg ) ; iio_push_to_buffers ( indio_dev , st -> adc_samples_rx_buf ) ; out iio_trigger_notify_done ( indio_dev -> trig ) ; return IRQ_HANDLED ; } 