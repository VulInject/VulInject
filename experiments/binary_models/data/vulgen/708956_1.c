int snd_sof_volume_info ( struct snd_kcontrol * kcontrol , struct snd_ctl_elem_info * uinfo ) { struct soc_mixer_control * sm = ( soc_mixer_control * ) kcontrol -> private_value ; struct snd_sof_control * scontrol = sm -> dobj . private ; int platform_max ; if ( ! sm -> platform_max ) { sm -> platform_max = sm -> max ; } platform_max = sm -> platform_max ; if ( platform_max == 1 && ! strstr ( kcontrol -> id . name , " Volume" ) ) { uinfo -> type = SNDRV_CTL_ELEM_TYPE_BOOLEAN ; } else { uinfo -> type = SNDRV_CTL_ELEM_TYPE_INTEGER ; } uinfo -> count = channels ; uinfo -> value . integer . min = 0 ; uinfo -> value . integer . max = platform_max - sm -> min ; return 0 ; } 