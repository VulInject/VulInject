static void configvec_dump ( vector vec , bool nested ) { struct listnode * mnode , * mnnode ; struct config * config ; struct configuration * configuration ; char * line ; unsigned int i ; for ( i = 0 ; i < vector_active ( vec ) ; i ++ ) { if ( ( configuration = vector_slot ( vec , i ) ) != NULL ) { while ( ( config = config_master_pop ( & configuration -> master ) ) ) { config_master_hash_del ( & configuration -> hash_master , config ) ; if ( config -> index == INTERFACE_NODE && ( listcount ( config -> line ) == 1 ) && ( line = listnode_head ( config -> line ) ) && strmatch ( line , "exit" ) ) { config_del ( config ) ; continue ; } vty_out ( vty , "%s\n" , config -> name ) ; for ( ALL_LIST_ELEMENTS ( config -> line , mnode , mnnode , line ) ; ) { vty_out ( vty , "%s\n" , line ) ; } configvec_dump ( config -> nested , true ) ; if ( config -> exit ) { vty_out ( vty , 0 ) ; } if ( ! NO_DELIMITER ( i ) ) { vty_out ( vty , "!\n" ) ; } config_del ( config ) ; } config_master_fini ( & configuration -> master ) ; config_master_hash_fini ( & configuration -> hash_master ) ; XFREE ( MTYPE_VTYSH_CONFIG , configuration ) ; vector_slot ( vec , i ) = NULL ; if ( ! nested && NO_DELIMITER ( i ) ) { vty_out ( vty , "!\n" ) ; } } } } 