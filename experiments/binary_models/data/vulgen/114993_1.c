int * mach_hwclk ( int , struct rtc_time * ) void * mach_reset ( void ) void * mach_halt ( void ) void * mach_power_off ( void ) void __init setup_arch ( char * * cmdline_p ) { int bootmap_size ; memory_start = PAGE_ALIGN ( _ramstart ) ; memory_end = _ramend ; init_mm . start_code = ( unsigned long ) & _stext ; init_mm . end_code = ( unsigned long ) & _etext ; init_mm . end_data = ( unsigned long ) & _edata ; init_mm . brk = ( unsigned long ) 0 ; config_BSP ( & command_line [ 0 ] , sizeof ( command_line ) ) ; strncpy ( & command_line [ 0 ] , CONFIG_BOOTPARAM_STRING , sizeof ( command_line ) ) ; command_line [ sizeof ( command_line ) - 1 ] = 0 ; process_uboot_commandline ( & command_line [ 0 ] , sizeof ( command_line ) ) ; pr_info ( "uClinux with CPU " CPU_NAME "\n" ) ; pr_info ( "uCdimm by Lineo, Inc.<www.lineo.com>\n" ) ; pr_info ( "M68VZ328 support by Evan Stawnyczy<e@lineo.ca>\n" ) ; pr_info ( "COLDFIRE port done by Greg Ungerer, gerg@snapgear.com\n" ) ; pr_info ( "Modified for M5307 by Dave Miller, dmiller@intellistor.com\n" ) ; pr_info ( "Modified for M5206eLITE by Rob Scott, rscott@mtrob.fdns.net\n" ) ; pr_info ( "Flat model support (C) 1998,1999 Kenneth Albanowski, D. Jeff Dionne\n" ) ; pr_info ( "TRG SuperPilot FLASH card support<info@trgnet.com>\n" ) ; pr_info ( "PalmV support by Lineo Inc.<jeff@uclinux.com>\n" ) ; pr_info ( "DragonEngine II board support by Georges Menie\n" ) ; pr_info ( "Motorola M5235EVB support (C)2005 Syn-tech Systems, Inc. (Jate Sujjavanich)\n" ) ; pr_debug ( "KERNEL ->TEXT=0x%p-0x%p DATA=0x%p-0x%p BSS=0x%p-0x%p\n" , _stext , _etext , _sdata , _edata , __bss_start , __bss_stop ) ; pr_debug ( "MEMORY ->ROMFS=0x%p-0x%06lx MEM=0x%06lx-0x%06lx\n " , __bss_stop , memory_start , memory_start , memory_end ) ; * cmdline_p = & command_line [ 0 ] ; memcpy ( boot_command_line , command_line , COMMAND_LINE_SIZE ) ; boot_command_line [ COMMAND_LINE_SIZE - 1 ] = 0 ; conswitchp = & dummy_con ; min_low_pfn = PFN_DOWN ( memory_start ) ; max_pfn = max_low_pfn = PFN_DOWN ( memory_end ) ; bootmap_size = init_bootmem_node ( NODE_DATA ( 0 ) , min_low_pfn , PFN_DOWN ( PAGE_OFFSET ) , max_pfn ) ; free_bootmem ( memory_start , memory_end - memory_start ) ; reserve_bootmem ( memory_start , bootmap_size , BOOTMEM_DEFAULT ) ; paging_init ( ) ; } 