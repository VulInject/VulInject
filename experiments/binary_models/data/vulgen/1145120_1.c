static ssize_t in_min_store ( struct device * dev , struct device_attribute * attr , const char * buf , size_t count ) { struct sensor_device_attribute * sensor_attr = to_sensor_dev_attr ( attr ) ; int nr = sensor_attr -> index ; struct vt8231_data * data = dev_get_drvdata ( dev ) ; unsigned long val ; int err ; err = kstrtoul ( buf , 10 , & val ) ; if ( err ) { return err ; } mutex_lock ( & data -> update_lock ) ; vt8231_write_value ( data , regvoltmin [ nr ] , data -> in_min [ nr ] ) ; mutex_unlock ( & data -> update_lock ) ; return count ; } 