static void enable_single_step ( struct perf_event * bp , u32 addr ) { struct arch_hw_breakpoint * info = counter_arch_bp ( bp ) ; arch_uninstall_hw_breakpoint ( bp ) ; info -> step_ctrl . mismatch = 1 ; info -> step_ctrl . len = ARM_BREAKPOINT_LEN_4 ; info -> step_ctrl . type = ARM_BREAKPOINT_EXECUTE ; info -> step_ctrl . privilege = info -> ctrl . privilege ; info -> step_ctrl . enabled = 1 ; arch_install_hw_breakpoint ( bp ) ; } 