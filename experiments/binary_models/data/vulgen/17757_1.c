LOCAL ( ) transdecode_master_selection ( ) { cinfo -> buffered_image = TRUE ; jpeg_core_output_dimensions ( cinfo ) ; if ( cinfo -> arith_code ) { jinit_arith_decoder ( cinfo ) ; } else { if ( cinfo -> progressive_mode ) { jinit_phuff_decoder ( cinfo ) ; ERREXIT ( cinfo , JERR_NOT_COMPILED ) ; } else { jinit_huff_decoder ( cinfo ) ; } } if ( cinfo -> data_precision == 12 ) { j12init_d_coef_controller ( cinfo , TRUE ) ; } else { jinit_d_coef_controller ( cinfo , TRUE ) ; } * cinfo -> mem -> realize_virt_arrays ( ( j_common_ptr ) cinfo ) ; * cinfo -> inputctl -> start_input_pass ( cinfo ) ; if ( cinfo -> progress != NULL ) { int nscans ; if ( cinfo -> progressive_mode ) { nscans = 2 + 3 * cinfo -> num_components ; } if ( cinfo -> inputctl -> has_multiple_scans ) { nscans = cinfo -> num_components ; } else { nscans = 1 ; } cinfo -> progress -> pass_counter = 0L ; cinfo -> progress -> pass_limit = ( long ) cinfo -> total_iMCU_rows * nscans ; cinfo -> progress -> completed_passes = 0 ; cinfo -> progress -> total_passes = 1 ; } } 