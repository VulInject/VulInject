static void ab8500_usb_phy_enable ( struct ab8500_usb * ab , bool sel_host ) { u8 bit ; bit = sel_host ?AB8500_BIT_PHY_CTRL_HOST_EN : AB8500_BIT_PHY_CTRL_DEVICE_EN ; ab -> pinctrl = pinctrl_get_select ( ab -> dev , PINCTRL_STATE_DEFAULT ) ; if ( clk_prepare_enable ( ab -> sysclk ) ) { dev_err ( ab -> dev , "can't prepare/enable clock\n" ) ; } ab8500_usb_regulator_enable ( ab ) ; abx500_mask_and_set_register_interruptible ( ab -> dev , AB8500_USB , AB8500_USB_PHY_CTRL_REG , bit , bit ) ; } 