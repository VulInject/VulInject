static int ad7314_probe ( struct spi_device * spi_dev ) { struct ad7314_data * chip ; struct device * hwmon_dev ; chip = devm_kzalloc ( & spi_dev -> dev , sizeof ( * chip ) , GFP_KERNEL ) ; if ( chip == NULL ) { return - ENOMEM ; } hwmon_dev = devm_hwmon_device_register_with_groups ( & spi_dev -> dev , spi_dev -> modalias , chip , ad7314_groups ) ; return PTR_ERR_OR_ZERO ( hwmon_dev ) ; } 