static char * * printers_list ( papi_service_t svc ) { papi_status_t status ; papi_printer_t * printers = NULL ; char * keys [ ] { "printer-name" NULL } ; ; char * * result = NULL ; status = papiPrintersList ( svc , keys , NULL , & printers ) ; if ( ( status == PAPI_OK ) && ( printers != NULL ) ) { int i ; for ( i = 0 ; printers [ i ] != NULL ; i ++ ) { papi_attribute_t * * attributes = papiPrinterGetAttributeList ( printers [ i ] ) ; char * name = NULL ; ( void ) papiAttributeListGetString ( attributes , NULL , "printer-name" , & name ) ; if ( ( name != NULL ) && ( strcmp ( name , "_default" ) != 0 ) ) { list_append ( & result , strdup ( name ) ) ; } } } return ( result ) ; } 