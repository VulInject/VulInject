static int sa_attr_table ( uintptr_t addr , uint_t flags , int argc , const mdb_arg_t * argv ) { sa_attr_table_t * table ; sa_os_t sa_os ; char * name ; int i ; if ( mdb_vread ( & sa_os , sizeof ( sa_os_t ) , addr ) == - 1 ) { mdb_warn ( "failed to read sa_os at %p" , addr ) ; return ( DCMD_ERR ) ; } table = mdb_alloc ( sizeof ( sa_attr_table_t ) * sa_os . sa_num_attrs , UM_SLEEP | UM_GC ) ; if ( mdb_vread ( table , sizeof ( sa_attr_table_t ) * sa_os . sa_num_attrs , ( uintptr_t ) sa_os . sa_attr_table ) == - 1 ) { mdb_warn ( "failed to read sa_os at %p" , addr ) ; return ( DCMD_ERR ) ; } mdb_printf ( "%<u>%-10s %-10s %-10s %-10s %s%</u>\n" , "ATTR ID" , "REGISTERED" , "LENGTH" , "BSWAP" , "NAME" ) ; for ( i = 0 ; i != sa_os . sa_num_attrs ; i ++ ) { mdb_readstr ( name , MAXPATHLEN , ( uintptr_t ) table [ i ] . sa_name ) ; mdb_printf ( "%5x   %8x %8x %8x          %-s\n" , ( int ) table [ i ] . sa_attr , ( int ) table [ i ] . sa_registered , ( int ) table [ i ] . sa_length , table [ i ] . sa_byteswap , name ) ; } return ( DCMD_OK ) ; } 