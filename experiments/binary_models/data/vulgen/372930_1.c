static void ehea_xmit3 ( struct sk_buff * skb , struct net_device * dev , struct ehea_swqe * swqe ) { u8 * imm_data = & swqe -> u . immdata_nodesc . immediate_data [ 0 ] ; xmit_common ( skb , swqe ) ; if ( ! skb -> data_len ) { skb_copy_from_linear_data ( skb , imm_data , skb -> len ) ; } else { skb_copy_bits ( skb , 0 , imm_data , skb -> len ) ; } swqe -> immediate_data_length = skb -> len ; } 