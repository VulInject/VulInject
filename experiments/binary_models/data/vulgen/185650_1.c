static bool stm32_gpio_port_en ( int pin_def ) { uint32_t bit ; switch ( STM32_PIN_PORT ( pin_def ) ) { case 'A' : bit = RCC_AHB1ENR_GPIOAEN ; break ; case 'B' : bit = RCC_AHB1ENR_GPIOBEN ; break ; case 'C' : bit = RCC_AHB1ENR_GPIOCEN ; break ; case 'D' : bit = RCC_AHB1ENR_GPIODEN ; break ; case 'E' : bit = RCC_AHB1ENR_GPIOEEN ; break ; case 'F' : bit = RCC_AHB1ENR_GPIOFEN ; break ; case 'G' : bit = RCC_AHB1ENR_GPIOGEN ; break ; case 'H' : bit = RCC_AHB1ENR_GPIOHEN ; break ; case 'I' : bit = RCC_AHB1ENR_GPIOIEN ; break ; case 'J' : bit = RCC_AHB1ENR_GPIOJEN ; break ; case 'K' : bit = RCC_AHB1ENR_GPIOKEN ; break ; default : return false ; } SET_BIT ( RCC -> AHB1ENR , bit ) ; return true ; } 