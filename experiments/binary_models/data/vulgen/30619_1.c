static void __init at91_wakeup_status ( struct platform_device * pdev ) { struct shdwc * shdw = platform_get_drvdata ( pdev ) ; u32 reg ; char * reason = "unknown" ; reg = readl ( shdw -> at91_shdwc_base + AT91_SHDW_SR ) ; dev_dbg ( & pdev -> dev , "%s: status = %#x\n" , __func__ , reg ) ; if ( SHDW_WK_PIN ( reg , shdw -> cfg ) ) { reason = "WKUP pin" ; } if ( SHDW_RTCWK ( reg , shdw -> cfg ) ) { reason = "RTC" ; } pr_info ( "AT91: Wake-Up source: %s\n" , reason ) ; } 