static void readttfapplefvar ( FILE * ttf , FILE * util , struct ttfinfo * info ) { int dataoff , countsizepairs , axiscount , instancecount , instancesize , nameid ; uint32_t tag ; char * name ; int i , j ; fseek ( ttf , info -> fvar_start , SEEK_SET ) ; printf ( "\nfvar table (at %d) (Font Variations)\n" , info -> fvar_start ) ; printf ( "\t version=%g\n" , getfixed ( ttf ) ) ; printf ( "\t offset to data=%d\n" , dataoff = getushort ( ttf ) ) ; printf ( "\t # size pairs=%d\n" , countsizepairs = getushort ( ttf ) ) ; printf ( "\t Axis count=%d\n" , axiscount = getushort ( ttf ) ) ; info -> fvar_axiscount = axiscount ; printf ( "\t Axis size=%d\n" , getushort ( ttf ) ) ; printf ( "\t Instance count=%d\n" , instancecount = getushort ( ttf ) ) ; printf ( "\t Instance size=%d\n" , instancesize = getushort ( ttf ) ) ; for ( i = 0 ; i < axiscount ; ++ i ) { printf ( "\t  Axis %d\n" , i ) ; tag = getlong ( ttf ) ; printf ( "\t    Axis Tag '%c%c%c%c'\n" , ( char ) ( ( tag >> 24 ) & 0xff ) , ( char ) ( ( tag >> 16 ) & 0xff ) , ( char ) ( ( tag >> 8 ) & 0xff ) , ( char ) ( tag & 0xff ) ) ; printf ( "\t    minValue=%g\n" , getfixed ( ttf ) ) ; printf ( "\t    defaultValue=%g\n" , getfixed ( ttf ) ) ; printf ( "\t    maxValue=%g\n" , getfixed ( ttf ) ) ; printf ( "\t    flags=%x\n" , ( unsigned int ) ( getushort ( ttf ) ) ) ; nameid = getushort ( ttf ) ; name = getttfname ( util , info , nameid ) ; printf ( "\t    nameid=%d (%s)\n" , nameid , name == NULL ?"Not Found" : name ) ; free ( name ) ; } for ( i = 0 ; i < instancecount ; ++ i ) { printf ( "\t  Instance %d\n" , i ) ; nameid = getushort ( ttf ) ; name = getttfname ( util , info , nameid ) ; printf ( "\t    nameid=%d (%s)\n" , nameid , name == NULL ?"Not Found" : name ) ; printf ( "\t    flags=%x\n" , ( unsigned int ) ( getushort ( ttf ) ) ) ; printf ( "\t    Blend coefficients: " ) ; for ( j = 0 ; j < axiscount ; ++ j ) { printf ( "%g, " , getfixed ( ttf ) ) ; } printf ( "\n" ) ; free ( name ) ; } } 