void pool_knl_connection_free ( pool_knl_connection_t * prov ) { if ( prov -> pkc_log != NULL ) { ( void ) log_walk ( prov -> pkc_log , log_item_release ) ; log_free ( prov -> pkc_log ) ; } if ( prov -> pkc_elements != NULL ) { dict_map ( prov -> pkc_elements , pool_knl_elem_free_cb , NULL ) ; dprintf ( "dict length is %llu\n" , dict_length ( prov -> pkc_leaks ) ) ; dict_map ( prov -> pkc_leaks , pool_knl_elem_printf_cb , prov -> pkc_elements ) ; assert ( dict_length ( prov -> pkc_leaks ) == 0 ) ; dict_free ( & prov -> pkc_leaks ) ; dict_free ( & prov -> pkc_elements ) ; } free ( prov ) ; } 