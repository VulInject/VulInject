static unsigned char vc5_mux_get_parent ( struct clk_hw * hw ) { struct vc5_driver_data * vc5 = container_of ( hw , vc5_driver_data , clk_mux ) ; const u8 mask = VC5_PRIM_SRC_SHDN_EN_XTAL | VC5_PRIM_SRC_SHDN_EN_CLKIN ; unsigned int src ; regmap_read ( vc5 -> regmap , VC5_PRIM_SRC_SHDN , & src ) ; src &= mask ; if ( src == VC5_PRIM_SRC_SHDN_EN_CLKIN ) { return 1 ; } dev_warn ( & vc5 -> client -> dev , "Invalid clock input configuration (%02x)\n" , src ) ; return 0 ; } 