static void codec_vp9_set_mpred_mv ( struct amvdec_core * core , struct codec_vp9 * vp9 ) { int mpred_mv_rd_end_addr ; amvdec_write_dos ( core , HEVC_MPRED_CTRL3 , 0x24122412 ) ; amvdec_write_dos ( core , HEVC_MPRED_ABV_START_ADDR , vp9 -> workspace_paddr + MPRED_ABV_OFFSET ) ; amvdec_clear_dos_bits ( core , HEVC_MPRED_CTRL4 , BIT ( 6 ) ) ; if ( use_prev_frame_mvs ) { amvdec_write_dos_bits ( core , HEVC_MPRED_CTRL4 , BIT ( 6 ) ) ; } amvdec_write_dos ( core , HEVC_MPRED_MV_WR_START_ADDR , codec_vp9_get_frame_mv_paddr ( vp9 , vp9 -> cur_frame ) ) ; amvdec_write_dos ( core , HEVC_MPRED_MV_WPTR , codec_vp9_get_frame_mv_paddr ( vp9 , vp9 -> cur_frame ) ) ; amvdec_write_dos ( core , HEVC_MPRED_MV_RD_START_ADDR , codec_vp9_get_frame_mv_paddr ( vp9 , vp9 -> prev_frame ) ) ; amvdec_write_dos ( core , HEVC_MPRED_MV_RPTR , codec_vp9_get_frame_mv_paddr ( vp9 , vp9 -> prev_frame ) ) ; mpred_mv_rd_end_addr = codec_vp9_get_frame_mv_paddr ( vp9 , vp9 -> prev_frame ) + ( vp9 -> lcu_total * MV_MEM_UNIT ) ; amvdec_write_dos ( core , HEVC_MPRED_MV_RD_END_ADDR , mpred_mv_rd_end_addr ) ; } 