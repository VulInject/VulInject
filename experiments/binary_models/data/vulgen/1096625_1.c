int ZLIB_INTERNAL _tr_tally ( deflate_state * s , unsigned dist , unsigned lc ) { s -> sym_buf [ s -> sym_next ++ ] = dist ; s -> sym_buf [ s -> sym_next ++ ] = dist >> 8 ; s -> sym_buf [ s -> sym_next ++ ] = lc ; if ( dist == 0 ) { s -> dyn_ltree [ lc ] . Freq ++ ; } else { s -> matches ++ ; dist -- ; s -> dyn_ltree [ _length_code [ lc ] + LITERALS + 1 ] . Freq ++ ; s -> dyn_dtree [ d_code ( dist ) ] . Freq ++ ; } return ( s -> sym_next == s -> sym_end ) ; } 