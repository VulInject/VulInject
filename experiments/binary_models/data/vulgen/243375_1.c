static struct acpi_iort_node * iort_node_get_id ( struct acpi_iort_node * node , u32 * id_out , int index ) { struct acpi_iort_node * parent ; struct acpi_iort_id_mapping * map ; map = ACPI_ADD_PTR ( acpi_iort_id_mapping , node , node -> mapping_offset + index * sizeof ( * map ) ) ; if ( ! map -> output_reference ) { pr_err ( FW_BUG "[node %p type %d] ID map has NULL parent reference\n" , node , node -> type ) ; return NULL ; } parent = ACPI_ADD_PTR ( acpi_iort_node , iort_table , map -> output_reference ) ; if ( map -> flags & ACPI_IORT_ID_SINGLE_MAPPING ) { if ( node -> type == ACPI_IORT_NODE_NAMED_COMPONENT || node -> type == ACPI_IORT_NODE_PCI_ROOT_COMPLEX || node -> type == ACPI_IORT_NODE_SMMU_V3 || node -> type == ACPI_IORT_NODE_PMCG ) { * id_out = map -> output_base ; return parent ; } } return NULL ; } 