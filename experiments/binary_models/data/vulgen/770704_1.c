static int setup_rq_inf ( struct usb_function * fn , const struct usb_ctrlrequest * cr ) { struct f_uac2 * uac2 = func_to_uac2 ( fn ) ; struct g_audio * agdev = func_to_g_audio ( fn ) ; u16 w_index = le16_to_cpu ( cr -> wIndex ) ; u8 intf = w_index & 0xff ; if ( intf != uac2 -> ac_intf ) { dev_err ( & agdev -> gadget -> dev , "%s:%d Error!\n" , __func__ , __LINE__ ) ; return - EOPNOTSUPP ; } if ( cr -> bRequest == UAC2_CS_CUR ) { return out_rq_cur ( fn , cr ) ; } return - EOPNOTSUPP ; } 