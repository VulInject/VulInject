static MpegTSFilter * mpegts_open_section_filter ( MpegTSContext * ts , unsigned int pid , SectionCallback * section_cb , void * opaque , int check_crc ) { MpegTSFilter * filter ; MpegTSSectionFilter * sec ; uint8_t * section_buf = av_mallocz ( MAX_SECTION_SIZE ) ; if ( ! section_buf ) { return NULL ; } if ( ! ( filter = mpegts_open_filter ( ts , pid , MPEGTS_SECTION ) ) ) { return NULL ; } sec = & filter -> u . section_filter ; sec -> section_cb = section_cb ; sec -> opaque = opaque ; sec -> section_buf = section_buf ; sec -> check_crc = check_crc ; sec -> last_ver = - 1 ; return filter ; } 