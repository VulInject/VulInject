void ps_plog ( const char * fmt , ... ) { va_list args ; if ( log_fp == NULL ) { char log_fname [ 256 ] ; ( void ) sprintf ( log_fname , "/tmp/tdlog.%d" , EC_SWORD ( getpid ( ) ) ) ; if ( ( log_fp = fopen ( log_fname , "w" ) ) == NULL ) { ( void ) fprintf ( stderr , "unable to open %s, logging " "redirected to stderr" , log_fname ) ; log_fp = stderr ; } } va_start ( args , fmt ) ; ( void ) vfprintf ( log_fp , fmt , args ) ; va_end ( args ) ; ( void ) fputc ( '\n' , log_fp ) ; ( void ) fflush ( log_fp ) ; } 