static void msdc_reset_hw ( struct msdc_host * host ) { u32 val ; sdr_set_bits ( host -> base + MSDC_CFG , MSDC_CFG_RST ) ; while ( readl ( host -> base + MSDC_CFG ) & MSDC_CFG_RST ) { cpu_relax ( ) ; } sdr_set_bits ( host -> base + MSDC_FIFOCS , MSDC_FIFOCS_CLR ) ; while ( readl ( host -> base + MSDC_FIFOCS ) & MSDC_FIFOCS_CLR ) { cpu_relax ( ) ; } writel ( val , host -> base + MSDC_INT ) ; } 