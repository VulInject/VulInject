m32r_supply_register ( , , , ) { int regno ; int num_regs = sizeof ( m32r_regnames ) / sizeof ( m32r_regnames [ 0 ] ) ; for ( regno = 0 ; regno < num_regs ; regno ++ ) { if ( strncmp ( regname , m32r_regnames [ regno ] , regnamelen ) == 0 ) { break ; } } if ( regno >= num_regs ) { return ; } if ( regno == ACCL_REGNUM ) { monitor_supply_register ( ACCH_REGNUM , val ) ; val = strchr ( val , ':' ) ; if ( val != NULL ) { monitor_supply_register ( ACCL_REGNUM , val + 1 ) ; } } else { monitor_supply_register ( regno , val ) ; if ( regno == PSW_REGNUM ) { char * zero = "00000000" , * one = "00000001" ; monitor_supply_register ( SM_REGNUM , ( psw & 0x80 ) ?one : zero ) ; monitor_supply_register ( BSM_REGNUM , ( psw & 0x8000 ) ?one : zero ) ; monitor_supply_register ( IE_REGNUM , ( psw & 0x40 ) ?one : zero ) ; monitor_supply_register ( BIE_REGNUM , ( psw & 0x4000 ) ?one : zero ) ; monitor_supply_register ( COND_REGNUM , ( psw & 0x1 ) ?one : zero ) ; monitor_supply_register ( CBR_REGNUM , ( psw & 0x1 ) ?one : zero ) ; monitor_supply_register ( BPC_REGNUM , zero ) ; monitor_supply_register ( BCARRY_REGNUM , zero ) ; } if ( regno == SPI_REGNUM || regno == SPU_REGNUM ) { ULONGEST stackmode , psw ; regcache_cooked_read_unsigned ( current_regcache , PSW_REGNUM , & psw ) ; stackmode = psw & 0x80 ; if ( regno == SPI_REGNUM && ! stackmode ) { monitor_supply_register ( SP_REGNUM , val ) ; } if ( regno == SPU_REGNUM && stackmode ) { monitor_supply_register ( SP_REGNUM , val ) ; } } } } 