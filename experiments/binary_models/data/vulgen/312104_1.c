static int roff_als ( ROFF_ARGS ) { char * oldn , * newn , * end , * value ; size_t oldsz , newsz , valsz ; newn = oldn = buf -> buf + pos ; if ( * newn == '\0' ) { return ROFF_IGN ; } newsz = roff_getname ( r , & oldn , ln , pos ) ; if ( newn [ newsz ] == '\\' || newn [ newsz ] == '\t' || * oldn == '\0' ) { return ROFF_IGN ; } end = oldn ; oldsz = roff_getname ( r , & end , ln , oldn - buf -> buf ) ; if ( oldsz == 0 ) { return ROFF_IGN ; } valsz = mandoc_asprintf ( & value , ".%.*s \\$@\\\"\n" , ( int ) oldsz , oldn ) ; roff_setstrn ( & r -> strtab , newn , newsz , value , valsz , 0 ) ; roff_setstrn ( & r -> rentab , newn , newsz , NULL , 0 , 0 ) ; return ROFF_IGN ; } 