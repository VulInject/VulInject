static void process_ack ( struct ceph_connection * con ) { struct ceph_msg * m ; u64 ack = le64_to_cpu ( con -> in_temp_ack ) ; u64 seq ; while ( ! list_empty ( & con -> out_sent ) ) { m = list_first_entry ( & con -> out_sent , ceph_msg , list_head ) ; seq = le64_to_cpu ( m -> hdr . seq ) ; if ( seq > ack ) { break ; } dout ( "got ack for seq %llu type %d at %p\n" , seq , le16_to_cpu ( m -> hdr . type ) , m ) ; m -> ack_stamp = jiffies ; ceph_msg_remove ( m ) ; } } 