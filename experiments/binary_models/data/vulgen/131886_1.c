static void h_hdl_umode_changed ( hook_data_umode_changed * hdata ) { struct Client * source_p = hdata -> client ; if ( source_p -> umodes & user_modes [ UMODECHAR_HELPOPS ] ) { if ( MyClient ( source_p ) && ! HasPrivilege ( source_p , "usermode:helpops" ) ) { source_p -> umodes &= ~ user_modes [ UMODECHAR_HELPOPS ] ; sendto_one ( source_p , form_str ( ERR_NOPRIVS ) , me . name , source_p -> name , "usermode:helpops" ) ; if ( ! changed ) { helper_delete ( source_p ) ; } return ; } if ( changed ) { helper_add ( source_p ) ; } } if ( changed ) { helper_delete ( source_p ) ; } } 