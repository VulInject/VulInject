nms_adpcm_read_s ( , , ) { NMS_ADPCM_PRIVATE * pnms ; int readcount , count ; sf_count_t total = 0 ; pnms = ( NMS_ADPCM_PRIVATE * ) psf -> codec_data ; while ( len > 0 ) { readcount = ( len > 0x10000000 ) ?0x10000000 : ( int ) len ; count = nms_adpcm_read_block ( psf , pnms , ptr , readcount ) ; total += count ; len -= count ; if ( count != readcount ) { break ; } } return total ; } 