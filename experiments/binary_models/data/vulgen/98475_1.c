static void cmdbuf_hw_error ( amd_iommu_t * iommu , uint32_t * event ) { uint32_t physaddr_lo ; uint32_t physaddr_hi ; uint8_t type ; const char * hwerr ; const char * driver = ddi_driver_name ( iommu -> aiomt_dip ) ; int instance = ddi_get_instance ( iommu -> aiomt_dip ) ; const char * f = "cmdbuf_hw_error" ; ASSERT ( AMD_IOMMU_REG_GET32 ( & event [ 1 ] , AMD_IOMMU_EVENT_TYPE ) == AMD_IOMMU_EVENT_CMDBUF_HW_ERROR ) ; type = AMD_IOMMU_REG_GET32 ( & event [ 1 ] , AMD_IOMMU_EVENT_CMDBUF_HWERR_TYPE ) ; hwerr = get_hw_error ( type ) ; physaddr_lo = AMD_IOMMU_REG_GET32 ( & event [ 2 ] , AMD_IOMMU_EVENT_CMDBUF_HWERR_PHYS_LO ) ; physaddr_hi = event [ 3 ] ; } 