static int power_up_device ( struct drxk_state * state ) { int status ; u8 data = 0 ; u16 retry_count ; dprintk ( 1 , "\n" ) ; status = i2c_read1 ( state , state -> demod_address , & data ) ; if ( status < 0 ) { { data = 0 ; status = i2c_write ( state , state -> demod_address , & data , 1 ) ; usleep_range ( 10000 , 11000 ) ; retry_count ++ ; if ( status < 0 ) { continue ; } status = i2c_read1 ( state , state -> demod_address , & data ) ; } status < 0 && ( retry_count < DRXK_MAX_RETRIES_POWERUP ) ; if ( status < 0 && retry_count >= DRXK_MAX_RETRIES_POWERUP ) { error } } status = write16 ( state , SIO_CC_PWD_MODE__A , SIO_CC_PWD_MODE_LEVEL_NONE ) ; if ( status < 0 ) { error } status = write16 ( state , SIO_CC_UPDATE__A , SIO_CC_UPDATE_KEY ) ; if ( status < 0 ) { error } status = write16 ( state , SIO_CC_PLL_LOCK__A , 1 ) ; if ( status < 0 ) { error } state -> m_current_power_mode = DRX_POWER_UP ; error if ( status < 0 ) { pr_err ( "Error %d on %s\n" , status , __func__ ) ; } return status ; } 