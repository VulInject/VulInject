static void compiler_globals_dtor ( zend_compiler_globals * compiler_globals ) { if ( compiler_globals -> function_table != GLOBAL_FUNCTION_TABLE ) { uint32_t n = compiler_globals -> copied_functions_count ; if ( zend_hash_num_elements ( compiler_globals -> function_table ) <= n ) { compiler_globals -> function_table -> nNumUsed = 0 ; } else { Bucket * p = compiler_globals -> function_table -> arData ; compiler_globals -> function_table -> nNumOfElements -= n ; while ( n != 0 ) { ZVAL_UNDEF ( & p -> val ) ; p ++ ; n -- ; } } zend_hash_destroy ( compiler_globals -> function_table ) ; free ( compiler_globals -> function_table ) ; } if ( compiler_globals -> class_table != GLOBAL_CLASS_TABLE ) { zend_hash_graceful_reverse_destroy ( compiler_globals -> class_table ) ; free ( compiler_globals -> class_table ) ; } if ( compiler_globals -> auto_globals != GLOBAL_AUTO_GLOBALS_TABLE ) { zend_hash_destroy ( compiler_globals -> auto_globals ) ; free ( compiler_globals -> auto_globals ) ; } if ( compiler_globals -> script_encoding_list ) { pefree ( ( char * ) compiler_globals -> script_encoding_list , 1 ) ; } if ( compiler_globals -> map_ptr_real_base ) { free ( compiler_globals -> map_ptr_real_base ) ; compiler_globals -> map_ptr_base = ZEND_MAP_PTR_BIASED_BASE ( NULL ) ; compiler_globals -> map_ptr_size = 0 ; } } 