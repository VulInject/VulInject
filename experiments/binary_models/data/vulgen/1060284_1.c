static void populate_link_ncu_properties ( nwam_ncu_handle_t ncuh , nwamd_ncu_t * ncu_data ) { nwam_value_t ncu_prop ; nwam_error_t err ; char * * mac_addr ; uint64_t * uintval ; uint_t numvalues ; if ( ( err = nwamd_get_ncu_uint ( ncuh , & ncu_prop , & uintval , & numvalues , NWAM_NCU_PROP_ACTIVATION_MODE ) ) != NWAM_SUCCESS ) { nlog ( LOG_ERR , "populate_link_ncu_properties: could not get %s value: %s" , NWAM_NCU_PROP_ACTIVATION_MODE , nwam_strerror ( err ) ) ; } else { ncu_data -> ncu_link . nwamd_link_activation_mode = uintval [ 0 ] ; } if ( ncu_data -> ncu_link . nwamd_link_activation_mode == NWAM_ACTIVATION_MODE_PRIORITIZED ) { ncu_data -> ncu_enabled = B_TRUE ; if ( ( err = nwamd_get_ncu_uint ( ncuh , & ncu_prop , & uintval , & numvalues , NWAM_NCU_PROP_PRIORITY_MODE ) ) != NWAM_SUCCESS ) { nlog ( LOG_ERR , "populate_link_ncu_properties: " "could not get %s value: %s" , NWAM_NCU_PROP_PRIORITY_MODE , nwam_strerror ( err ) ) ; } else { ncu_data -> ncu_link . nwamd_link_priority_mode = uintval [ 0 ] ; nwam_value_free ( ncu_prop ) ; } if ( ( err = nwamd_get_ncu_uint ( ncuh , & ncu_prop , & uintval , & numvalues , NWAM_NCU_PROP_PRIORITY_GROUP ) ) != NWAM_SUCCESS ) { nlog ( LOG_ERR , "populate_link_ncu_properties: " "could not get %s value: %s" , NWAM_NCU_PROP_PRIORITY_GROUP , nwam_strerror ( err ) ) ; } else { ncu_data -> ncu_link . nwamd_link_priority_group = uintval [ 0 ] ; nwam_value_free ( ncu_prop ) ; } } if ( ( err = nwamd_get_ncu_string ( ncuh , & ncu_prop , & mac_addr , & numvalues , NWAM_NCU_PROP_LINK_MAC_ADDR ) ) != NWAM_SUCCESS ) { nlog ( LOG_DEBUG , "populate_link_ncu_properties: could not get %s value: %s" , NWAM_NCU_PROP_LINK_MAC_ADDR , nwam_strerror ( err ) ) ; ncu_data -> ncu_link . nwamd_link_mac_addr = NULL ; } else { ncu_data -> ncu_link . nwamd_link_mac_addr = strdup ( * mac_addr ) ; ncu_data -> ncu_link . nwamd_link_mac_addr_len = strlen ( * mac_addr ) ; nwam_value_free ( ncu_prop ) ; } if ( ( err = nwamd_get_ncu_uint ( ncuh , & ncu_prop , & uintval , & numvalues , NWAM_NCU_PROP_LINK_MTU ) ) != NWAM_SUCCESS ) { nlog ( LOG_DEBUG , "populate_link_ncu_properties: could not get %s value: %s" , NWAM_NCU_PROP_LINK_MTU , nwam_strerror ( err ) ) ; ncu_data -> ncu_link . nwamd_link_mtu = 0 ; } else { ncu_data -> ncu_link . nwamd_link_mtu = uintval [ 0 ] ; nwam_value_free ( ncu_prop ) ; } if ( ( err = nwamd_get_ncu_string ( ncuh , & ncu_prop , & ncu_data -> ncu_link . nwamd_link_autopush , & ncu_data -> ncu_link . nwamd_link_num_autopush , NWAM_NCU_PROP_LINK_AUTOPUSH ) ) != NWAM_SUCCESS ) { nlog ( LOG_DEBUG , "populate_link_ncu_properties: could not get %s value: %s" , NWAM_NCU_PROP_LINK_AUTOPUSH , nwam_strerror ( err ) ) ; ncu_data -> ncu_link . nwamd_link_num_autopush = 0 ; } } 