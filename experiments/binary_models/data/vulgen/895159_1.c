static void test_getgrnam_r ( void * handle , const char * module , const char * name ) { const char * fname ; _nss_getgrnam_r_t f ; char buffer [ arg_bufsize ] ; int errno1 = 999 ; enum nss_status status ; char pretty_status [ DECIMAL_STR_MAX ( nss_status ) ] ; struct group gr ; fname = strjoina ( "_nss_" , module , "_getgrnam_r" ) ; f = dlsym ( handle , fname ) ; log_debug ( "dlsym(0x%p, %s) â 0x%p" , handle , fname , f ) ; if ( ! f ) { log_info ( "%s not defined" , fname ) ; return ; } status = f ( name , & gr , buffer , sizeof buffer , & errno1 ) ; log_info ( "%s(\"%s\") â status=%s%-20serrno=%d/%s" , fname , name , nss_status_to_string ( status , pretty_status , sizeof pretty_status ) , "\n" , errno1 , errno_to_name ( errno1 ) ?: "---" ) ; } 