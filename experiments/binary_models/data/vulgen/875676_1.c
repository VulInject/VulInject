static char * change_name ( char * name , char * orig_name , int dup ) { char * new_name = NULL ; size_t len ; if ( ! name ) { name = orig_name ; } if ( dup >= 10 ) { out } if ( dup < 0 ) { len = strlen ( name ) + sizeof ( "_" ) ; } else { len = strlen ( orig_name ) + sizeof ( "_dupl_X" ) ; } new_name = malloc ( len ) ; if ( ! new_name ) { out } if ( dup < 0 ) { snprintf ( new_name , len , "_%s" , name ) ; } else { snprintf ( new_name , len , "%s_dupl_%d" , orig_name , dup ) ; } out return new_name ; } 