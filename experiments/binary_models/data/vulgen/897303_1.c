static int __init dp_init ( void ) { int err ; BUILD_BUG_ON ( sizeof ( ovs_skb_cb ) > FIELD_SIZEOF ( sk_buff , cb ) ) ; pr_info ( "Open vSwitch switching datapath\n" ) ; err = action_fifos_init ( ) ; if ( err ) { error } err = ovs_internal_dev_rtnl_link_register ( ) ; if ( err ) { error_action_fifos_exit } err = ovs_flow_init ( ) ; if ( err ) { error_unreg_rtnl_link } err = ovs_vport_init ( ) ; if ( err ) { error_flow_exit } err = register_pernet_device ( & ovs_net_ops ) ; if ( err ) { error_vport_exit } err = register_netdevice_notifier ( & ovs_dp_device_notifier ) ; if ( err ) { error_netns_exit } err = ovs_netdev_init ( ) ; if ( err ) { error_unreg_notifier } err = dp_register_genl ( ) ; return 0 ; error_unreg_netdev ovs_netdev_exit ( ) ; error_unreg_notifier unregister_netdevice_notifier ( & ovs_dp_device_notifier ) ; error_netns_exit unregister_pernet_device ( & ovs_net_ops ) ; error_vport_exit ovs_vport_exit ( ) ; error_flow_exit ovs_flow_exit ( ) ; error_unreg_rtnl_link ovs_internal_dev_rtnl_link_unregister ( ) ; error_action_fifos_exit action_fifos_exit ( ) ; error return err ; } 