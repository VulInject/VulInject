int test__join_cgroup ( const char * path ) { int fd ; if ( ! env . test -> need_cgroup_cleanup ) { if ( setup_cgroup_environment ( ) ) { fprintf ( stderr , "#%d %s: Failed to setup cgroup environment\n" , env . test -> test_num , env . test -> test_name ) ; return - 1 ; } env . test -> need_cgroup_cleanup = true ; } if ( fd < 0 ) { fprintf ( stderr , "#%d %s: Failed to create cgroup '%s' (errno=%d)\n" , env . test -> test_num , env . test -> test_name , path , errno ) ; return fd ; } if ( join_cgroup ( path ) ) { fprintf ( stderr , "#%d %s: Failed to join cgroup '%s' (errno=%d)\n" , env . test -> test_num , env . test -> test_name , path , errno ) ; return - 1 ; } return fd ; } 