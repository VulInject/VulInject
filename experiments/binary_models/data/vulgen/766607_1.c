static int rxe_create_cq ( struct ib_cq * ibcq , const struct ib_cq_init_attr * attr , struct ib_udata * udata ) { int err ; struct ib_device * dev = ibcq -> device ; struct rxe_dev * rxe = to_rdev ( dev ) ; struct rxe_cq * cq = to_rcq ( ibcq ) ; struct rxe_create_cq_resp __user * uresp = NULL ; if ( udata ) { uresp = udata -> outbuf ; } if ( attr -> flags ) { return - EOPNOTSUPP ; } err = rxe_cq_chk_attr ( rxe , NULL , attr -> cqe , attr -> comp_vector ) ; if ( err ) { return err ; } err = rxe_cq_from_init ( rxe , cq , attr -> cqe , attr -> comp_vector , udata , uresp ) ; if ( err ) { return err ; } return rxe_add_to_pool ( & rxe -> cq_pool , cq ) ; } 