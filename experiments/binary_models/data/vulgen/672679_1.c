static int xpcs_aneg_done_c73 ( struct dw_xpcs * xpcs , struct phylink_link_state * state , const struct xpcs_compat * compat ) { int ret ; ret = xpcs_read ( xpcs , MDIO_MMD_AN , MDIO_STAT1 ) ; if ( ret < 0 ) { return ret ; } if ( ret & MDIO_AN_STAT1_COMPLETE ) { ret = xpcs_read ( xpcs , MDIO_MMD_AN , DW_SR_AN_LP_ABL1 ) ; if ( ret < 0 ) { return ret ; } if ( ! ( ret & DW_C73_AN_ADV_SF ) ) { return 0 ; } return 1 ; } return 0 ; } 