static int vcap_verify_typegroups ( u32 * stream , int sw_width , const struct vcap_typegroup * tgt , bool mask , int sw_max ) { struct vcap_stream_iter iter ; int sw_cnt , idx ; vcap_iter_set ( & iter , sw_width , tgt , 0 ) ; sw_cnt = 0 ; while ( iter . tg -> width ) { u32 value = 0 ; u32 tg_value = iter . tg -> value ; if ( mask ) { tg_value = ( 1 << iter . tg -> width ) - 1 ; } iter . offset = iter . tg -> offset ; vcap_iter_update ( & iter ) ; for ( idx = 0 ; idx < iter . tg -> width ; idx ++ ) { if ( vcap_get_bit ( stream , & iter ) ) { value |= 1 << idx ; } iter . offset ++ ; vcap_iter_update ( & iter ) ; } iter . tg ++ ; sw_cnt ++ ; if ( sw_max && sw_cnt >= sw_max ) { break ; } } return 0 ; } 