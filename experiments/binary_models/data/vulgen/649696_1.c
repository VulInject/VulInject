static void guest_ud_handler ( struct ex_regs * regs ) { regs -> rax = - EFAULT ; regs -> rip += HYPERCALL_INSN_SIZE ; } static const uint8_t vmx_vmcall [ HYPERCALL_INSN_SIZE ] { 0x0f 0x01 0xc1 } ; ; static const uint8_t svm_vmmcall [ HYPERCALL_INSN_SIZE ] { 0x0f 0x01 0xd9 } ; ; extern uint8_t hypercall_insn [ HYPERCALL_INSN_SIZE ] ; static uint64_t do_sched_yield ( uint8_t apic_id ) { uint64_t ret ; return ret ; } 