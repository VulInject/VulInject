static GFINLINE void gf_trig_pseudo_polarize ( GF_Point2D * vec ) { Fixed theta ; Fixed yi , i ; Fixed x , y ; const Fixed * arctanptr ; x = vec -> x ; y = vec -> y ; theta = 0 ; if ( x < 0 ) { x = - x ; y = - y ; } if ( y > 0 ) { theta = - theta ; } arctanptr = gf_trig_arctan_table ; if ( y < 0 ) { yi = y + ( x << 1 ) ; x = x - ( y << 1 ) ; y = yi ; theta -= * arctanptr ++ ; } else { yi = y - ( x << 1 ) ; x = x + ( y << 1 ) ; y = yi ; theta += * arctanptr ++ ; } i = 0 ; { if ( y < 0 ) { yi = y + ( x >> i ) ; x = x - ( y >> i ) ; y = yi ; theta -= * arctanptr ++ ; } else { yi = y - ( x >> i ) ; x = x + ( y >> i ) ; y = yi ; theta += * arctanptr ++ ; } } ++ i < GF_TRIG_MAX_ITERS ; if ( theta >= 0 ) { theta = GF_PAD_ROUND ( theta , 32 ) ; } else { theta = - GF_PAD_ROUND ( - theta , 32 ) ; } vec -> x = x ; vec -> y = ANGLE_DEG_TO_RAD ( theta ) ; } 