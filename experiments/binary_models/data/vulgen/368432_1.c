static struct ifacaddr6 * ac6_get_next ( struct seq_file * seq , struct ifacaddr6 * im ) { struct ac6_iter_state * state = ac6_seq_private ( seq ) ; im = im -> aca_next ; while ( ! im ) { if ( likely ( state -> idev != NULL ) ) { read_unlock_bh ( & state -> idev -> lock ) ; } state -> dev = next_net_device_rcu ( state -> dev ) ; if ( ! state -> dev ) { state -> idev = NULL ; break ; } if ( ! state -> idev ) { continue ; } read_lock_bh ( & state -> idev -> lock ) ; im = state -> idev -> ac_list ; } return im ; } 