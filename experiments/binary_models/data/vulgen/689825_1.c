static mblk_t * prependb ( mblk_t * mp , size_t len , size_t align ) { mblk_t * newmp ; if ( align == 0 ) { align = 8 ; } if ( DB_REF ( mp ) > 1 || mp -> b_datap -> db_base + len > mp -> b_rptr || ( ( uint_t ) ( ( uintptr_t ) mp -> b_rptr - len ) % align ) != 0 ) { if ( ( newmp = allocb ( len , BPRI_LO ) ) == NULL ) { return ( NULL ) ; } newmp -> b_wptr = newmp -> b_rptr + len ; newmp -> b_cont = mp ; return ( newmp ) ; } mp -> b_rptr -= len ; return ( mp ) ; } 