static void fq_pie_reset ( struct Qdisc * sch ) { struct fq_pie_sched_data * q = qdisc_priv ( sch ) ; u32 idx ; INIT_LIST_HEAD ( & q -> new_flows ) ; INIT_LIST_HEAD ( & q -> old_flows ) ; for ( idx = 0 ; idx < q -> flows_cnt ; idx ++ ) { struct fq_pie_flow * flow = q -> flows + idx ; rtnl_kfree_skbs ( flow -> head , flow -> tail ) ; flow -> head = NULL ; pie_vars_init ( & flow -> vars ) ; } } 