uint32_t app_button_init ( app_button_cfg_t const * p_buttons , uint8_t button_count , uint32_t detection_delay ) { uint32_t err_code ; if ( ! nrf_drv_gpiote_is_init ( ) ) { err_code = nrf_drv_gpiote_init ( ) ; VERIFY_SUCCESS ( err_code ) ; } mp_buttons = p_buttons ; m_button_count = button_count ; m_detection_delay = detection_delay ; m_pin_state = 0 ; m_pin_transition = 0 ; while ( button_count -- ) { app_button_cfg_t const * p_btn = & p_buttons [ button_count ] ; nrf_drv_gpiote_in_config_t config = GPIOTE_CONFIG_IN_SENSE_TOGGLE ( false ) ; config . pull = p_btn -> pull_cfg ; err_code = nrf_drv_gpiote_in_init ( p_btn -> pin_no , & config , gpiote_event_handler ) ; VERIFY_SUCCESS ( err_code ) ; } return app_timer_create ( & m_detection_delay_timer_id , APP_TIMER_MODE_SINGLE_SHOT , detection_delay_timeout_handler ) ; } 