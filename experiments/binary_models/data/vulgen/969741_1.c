static bool convert_link_ksettings_to_legacy_settings ( struct ethtool_cmd * legacy_settings , const struct ethtool_link_ksettings * link_ksettings ) { bool retval = true ; retval &= ethtool_convert_link_mode_to_legacy_u32 ( & legacy_settings -> supported , link_ksettings -> link_modes . supported ) ; retval &= ethtool_convert_link_mode_to_legacy_u32 ( & legacy_settings -> advertising , link_ksettings -> link_modes . advertising ) ; retval &= ethtool_convert_link_mode_to_legacy_u32 ( & legacy_settings -> lp_advertising , link_ksettings -> link_modes . lp_advertising ) ; ethtool_cmd_speed_set ( legacy_settings , link_ksettings -> base . speed ) ; legacy_settings -> duplex = link_ksettings -> base . duplex ; legacy_settings -> port = link_ksettings -> base . port ; legacy_settings -> phy_address = link_ksettings -> base . phy_address ; legacy_settings -> autoneg = link_ksettings -> base . autoneg ; legacy_settings -> mdio_support = link_ksettings -> base . mdio_support ; legacy_settings -> eth_tp_mdix = link_ksettings -> base . eth_tp_mdix ; legacy_settings -> eth_tp_mdix_ctrl = link_ksettings -> base . eth_tp_mdix_ctrl ; return retval ; } 