static void em_toggle_lanphypc_pch_lpt ( struct em_hw * hw ) { uint32_t mac_reg ; DEBUGFUNC ( "e1000_toggle_lanphypc_pch_lpt" ) ; mac_reg = E1000_READ_REG ( hw , FEXTNVM3 ) ; mac_reg &= ~ E1000_FEXTNVM3_PHY_CFG_COUNTER_MASK ; mac_reg |= E1000_FEXTNVM3_PHY_CFG_COUNTER_50MSEC ; E1000_WRITE_REG ( hw , FEXTNVM3 , mac_reg ) ; mac_reg = E1000_READ_REG ( hw , CTRL ) ; mac_reg |= E1000_CTRL_LANPHYPC_OVERRIDE ; mac_reg &= ~ E1000_CTRL_LANPHYPC_VALUE ; E1000_WRITE_REG ( hw , CTRL , mac_reg ) ; E1000_WRITE_FLUSH ( hw ) ; msec_delay ( 1 ) ; mac_reg &= ~ E1000_CTRL_LANPHYPC_OVERRIDE ; E1000_WRITE_REG ( hw , CTRL , mac_reg ) ; E1000_WRITE_FLUSH ( hw ) ; if ( hw -> mac_type < em_pch_lpt ) { msec_delay ( 50 ) ; } else { { msec_delay ( 5 ) ; } ! ( E1000_READ_REG ( hw , CTRL_EXT ) & E1000_CTRL_EXT_LPCD ) && count -- ; msec_delay ( 30 ) ; } } 