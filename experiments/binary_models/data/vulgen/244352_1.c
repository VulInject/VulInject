extern void acct_gather_interconnect_p_conf_set ( s_p_hashtbl_t * tbl ) { char * save , * tmp , * token , * save_ptr = NULL ; if ( ! tbl ) { return ; } if ( ! s_p_get_string ( & sysfs_interfaces , "SysfsInterfaces" , tbl ) ) { debug ( "no interfaces set to poll" ) ; return ; } if ( ! running_in_slurmstepd ( ) ) { return ; } save = tmp = xstrdup ( sysfs_interfaces ) ; while ( ( token = strtok_r ( tmp , "," , & save_ptr ) ) ) { interface_stats_t * iface = xmalloc ( sizeof ( * iface ) ) ; iface -> name = xstrdup ( token ) ; iface -> rx_bytes_file = xstrdup_printf ( RX_BYTES_FMT , token ) ; iface -> tx_bytes_file = xstrdup_printf ( TX_BYTES_FMT , token ) ; iface -> rx_packets_file = xstrdup_printf ( RX_PACKETS_FMT , token ) ; iface -> tx_packets_file = xstrdup_printf ( TX_PACKETS_FMT , token ) ; iface -> rx_bytes_start = _load ( iface -> rx_bytes_file , 0 ) ; iface -> tx_bytes_start = _load ( iface -> tx_bytes_file , 0 ) ; iface -> rx_packets_start = _load ( iface -> rx_packets_file , 0 ) ; iface -> tx_packets_start = _load ( iface -> tx_packets_file , 0 ) ; list_push ( interfaces , iface ) ; tmp = NULL ; } } 