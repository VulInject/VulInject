static void update_sumcols0 ( STable_cellinfo * sumcols , STable_rowinfo * lastrow , int pos , int len , int icell , int ispan , int allocated_sumcols ) { int i ; if ( len > 0 ) { int sumpos = pos ; int prevsumpos = sumcols [ icell + ispan ] . pos ; int advance ; if ( ispan > 0 ) { if ( lastrow -> cells [ icell ] . pos + len > sumpos ) { sumpos = lastrow -> cells [ icell ] . pos + len ; } if ( sumcols [ icell + ispan - 1 ] . pos + sumcols [ icell + ispan - 1 ] . len > sumpos ) { sumpos = sumcols [ icell + ispan - 1 ] . pos + sumcols [ icell + ispan - 1 ] . len ; } } advance = sumpos - prevsumpos ; if ( advance > 0 ) { for ( i = icell + ispan ; i < allocated_sumcols ; i ++ ) { if ( ispan > 0 && sumcols [ i ] . colspan < - 1 ) { if ( i + sumcols [ i ] . colspan < icell + ispan ) { advance = sumpos - sumcols [ i ] . pos ; if ( i > 0 ) { advance = HTMAX ( advance , sumcols [ i - 1 ] . pos + sumcols [ i - 1 ] . len - ( sumcols [ i ] . pos ) ) ; } } } if ( sumcols [ i ] . pos >= 0 ) { sumcols [ i ] . pos += advance ; } else { sumcols [ i ] . pos = sumpos ; break ; } } } } } 