static void trace_me ( void ) { r_sys_signal ( SIGTRAP , SIG_IGN ) ; if ( ptrace ( PT_TRACE_ME , 0 , 0 , 0 ) != 0 ) { r_sys_perror ( "ptrace-traceme" ) ; } r_sys_signal ( SIGABRT , inferior_abort_handler ) ; if ( ptrace ( PT_TRACE_ME , 0 , 0 , 0 ) != 0 ) { r_sys_perror ( "ptrace-traceme" ) ; } ptrace ( PT_SIGEXC , r_sys_getpid ( ) , NULL , 0 ) ; if ( ptrace ( PTRACE_TRACEME , 0 , NULL , NULL ) != 0 ) { r_sys_perror ( "ptrace-traceme" ) ; } } 