static ssize_t chp_measurement_chars_read ( struct file * filp , struct kobject * kobj , struct bin_attribute * bin_attr , char * buf , loff_t off , size_t count ) { struct channel_path * chp ; struct device * device ; device = container_of ( kobj , device , kobj ) ; chp = to_channelpath ( device ) ; return memory_read_from_buffer ( buf , count , & off , & chp -> cmg_chars , sizeof ( chp -> cmg_chars ) ) ; } static struct bin_attribute chp_measurement_chars_attr = { . attr = { . name = "measurement_chars" . mode = S_IRUSR } . size = sizeof ( cmg_chars ) . read = chp_measurement_chars_read } ; 