static int __init fwnet_init ( void ) { int err ; err = fw_core_add_descriptor ( & rfc2374_unit_directory ) ; if ( err ) { return err ; } err = fw_core_add_descriptor ( & rfc3146_unit_directory ) ; if ( err ) { out } fwnet_packet_task_cache = kmem_cache_create ( "packet_task" , sizeof ( fwnet_packet_task ) , 0 , 0 , NULL ) ; if ( ! fwnet_packet_task_cache ) { err = - ENOMEM ; out2 } err = driver_register ( & fwnet_driver . driver ) ; if ( ! err ) { return 0 ; } out2 fw_core_remove_descriptor ( & rfc3146_unit_directory ) ; out fw_core_remove_descriptor ( & rfc2374_unit_directory ) ; return err ; } 