static void grapper_model_log_handler ( void * data , raptor_log_message * message ) { grapper_state * state = ( grapper_state * ) data ; if ( message -> level >= RAPTOR_LOG_LEVEL_ERROR ) { state -> errors_count ++ ; if ( state -> error ) { g_free ( state -> error ) ; } state -> error = g_strdup ( message -> text ) ; grapper_view_add_error_message ( state , state -> error , message -> locator , 1 ) ; } else { state -> warnings_count ++ ; if ( state -> error ) { g_free ( state -> error ) ; } state -> error = g_strdup ( message -> text ) ; grapper_view_add_error_message ( state , state -> error , message -> locator , 0 ) ; } } 