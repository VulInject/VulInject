BOOL MutexCloseHandle ( HANDLE handle ) { WINPR_MUTEX * mutex = ( WINPR_MUTEX * ) handle ; int rc ; if ( ! MutexIsHandled ( handle ) ) { return FALSE ; } if ( ( rc = pthread_mutex_destroy ( & mutex -> mutex ) ) ) { WLog_ERR ( TAG , "pthread_mutex_destroy failed with %s [%d]" , strerror ( rc ) , rc ) ; { size_t used = 0 , i ; void * stack = winpr_backtrace ( 20 ) ; char * * msg = NULL ; if ( stack ) { msg = winpr_backtrace_symbols ( stack , & used ) ; } if ( msg ) { for ( i = 0 ; i < used ; i ++ ) { WLog_ERR ( TAG , "%2" PRIdz ": %s" , i , msg [ i ] ) ; } } free ( msg ) ; winpr_backtrace_free ( stack ) ; } } free ( handle ) ; return TRUE ; } 