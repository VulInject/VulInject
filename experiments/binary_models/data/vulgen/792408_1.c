void pciconfig_dump ( void * instance ) { struct e1000g * Adapter = ( e1000g * ) instance ; ddi_acc_handle_t handle ; uint8_t cap_ptr ; uint8_t next_ptr ; off_t offset ; handle = Adapter -> osdep . cfg_handle ; e1000g_log ( Adapter , CE_CONT , "Begin dump PCI config space\n" ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_VENID:\t0x%x\n" , pci_config_get16 ( handle , PCI_CONF_VENID ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_DEVID:\t0x%x\n" , pci_config_get16 ( handle , PCI_CONF_DEVID ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_COMMAND:\t0x%x\n" , pci_config_get16 ( handle , PCI_CONF_COMM ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_STATUS:\t0x%x\n" , pci_config_get16 ( handle , PCI_CONF_STAT ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_REVID:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_REVID ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_PROG_CLASS:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_PROGCLASS ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_SUB_CLASS:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_SUBCLASS ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_CACHE_LINESZ:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_CACHE_LINESZ ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_LATENCY_TIMER:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_LATENCY_TIMER ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_HEADER_TYPE:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_HEADER ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_BIST:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_BIST ) ) ; pciconfig_bar ( Adapter , PCI_CONF_BASE0 , "PCI_CONF_BASE0" ) ; pciconfig_bar ( Adapter , PCI_CONF_BASE1 , "PCI_CONF_BASE1" ) ; pciconfig_bar ( Adapter , PCI_CONF_BASE2 , "PCI_CONF_BASE2" ) ; pciconfig_bar ( Adapter , PCI_CONF_BASE3 , "PCI_CONF_BASE3" ) ; pciconfig_bar ( Adapter , PCI_CONF_BASE4 , "PCI_CONF_BASE4" ) ; pciconfig_bar ( Adapter , PCI_CONF_BASE5 , "PCI_CONF_BASE5" ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_CIS:\t0x%x\n" , pci_config_get32 ( handle , PCI_CONF_CIS ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_SUBVENID:\t0x%x\n" , pci_config_get16 ( handle , PCI_CONF_SUBVENID ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_SUBSYSID:\t0x%x\n" , pci_config_get16 ( handle , PCI_CONF_SUBSYSID ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_ROM:\t0x%x\n" , pci_config_get32 ( handle , PCI_CONF_ROM ) ) ; cap_ptr = pci_config_get8 ( handle , PCI_CONF_CAP_PTR ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_CAP_PTR:\t0x%x\n" , cap_ptr ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_ILINE:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_ILINE ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_IPIN:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_IPIN ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_MIN_G:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_MIN_G ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_CONF_MAX_L:\t0x%x\n" , pci_config_get8 ( handle , PCI_CONF_MAX_L ) ) ; offset = cap_ptr ; e1000g_log ( Adapter , CE_CONT , "PCI_PM_CAP_ID:\t0x%x\n" , pci_config_get8 ( handle , offset ) ) ; next_ptr = pci_config_get8 ( handle , offset + 1 ) ; e1000g_log ( Adapter , CE_CONT , "PCI_PM_NEXT_PTR:\t0x%x\n" , next_ptr ) ; e1000g_log ( Adapter , CE_CONT , "PCI_PM_CAP:\t0x%x\n" , pci_config_get16 ( handle , offset + PCI_PMCAP ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_PM_CSR:\t0x%x\n" , pci_config_get16 ( handle , offset + PCI_PMCSR ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_PM_CSR_BSE:\t0x%x\n" , pci_config_get8 ( handle , offset + PCI_PMCSR_BSE ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_PM_DATA:\t0x%x\n" , pci_config_get8 ( handle , offset + PCI_PMDATA ) ) ; offset = next_ptr ; e1000g_log ( Adapter , CE_CONT , "PCI_MSI_CAP_ID:\t0x%x\n" , pci_config_get8 ( handle , offset ) ) ; next_ptr = pci_config_get8 ( handle , offset + 1 ) ; e1000g_log ( Adapter , CE_CONT , "PCI_MSI_NEXT_PTR:\t0x%x\n" , next_ptr ) ; e1000g_log ( Adapter , CE_CONT , "PCI_MSI_CTRL:\t0x%x\n" , pci_config_get16 ( handle , offset + PCI_MSI_CTRL ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_MSI_ADDR:\t0x%x\n" , pci_config_get32 ( handle , offset + PCI_MSI_ADDR_OFFSET ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_MSI_ADDR_HI:\t0x%x\n" , pci_config_get32 ( handle , offset + 0x8 ) ) ; e1000g_log ( Adapter , CE_CONT , "PCI_MSI_DATA:\t0x%x\n" , pci_config_get16 ( handle , offset + 0xC ) ) ; offset = next_ptr ; e1000g_log ( Adapter , CE_CONT , "PCIE_CAP_ID:\t0x%x\n" , pci_config_get8 ( handle , offset + PCIE_CAP_ID ) ) ; next_ptr = pci_config_get8 ( handle , offset + PCIE_CAP_NEXT_PTR ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_CAP_NEXT_PTR:\t0x%x\n" , next_ptr ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_PCIECAP:\t0x%x\n" , pci_config_get16 ( handle , offset + PCIE_PCIECAP ) ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_DEVCAP:\t0x%x\n" , pci_config_get32 ( handle , offset + PCIE_DEVCAP ) ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_DEVCTL:\t0x%x\n" , pci_config_get16 ( handle , offset + PCIE_DEVCTL ) ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_DEVSTS:\t0x%x\n" , pci_config_get16 ( handle , offset + PCIE_DEVSTS ) ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_LINKCAP:\t0x%x\n" , pci_config_get32 ( handle , offset + PCIE_LINKCAP ) ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_LINKCTL:\t0x%x\n" , pci_config_get16 ( handle , offset + PCIE_LINKCTL ) ) ; e1000g_log ( Adapter , CE_CONT , "PCIE_LINKSTS:\t0x%x\n" , pci_config_get16 ( handle , offset + PCIE_LINKSTS ) ) ; } 