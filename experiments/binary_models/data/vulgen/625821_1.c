static void bfa_port_get_stats_isr ( struct bfa_port_s * port , bfa_status_t status ) { port -> stats_status = status ; port -> stats_busy = BFA_FALSE ; if ( status == BFA_STATUS_OK ) { struct timeval tv ; memcpy ( port -> stats , port -> stats_dma . kva , sizeof ( bfa_port_stats_u ) ) ; do_gettimeofday ( & tv ) ; port -> stats -> fc . secs_reset = tv . tv_sec - port -> stats_reset_time ; } if ( port -> stats_cbfn ) { port -> stats_cbfn ( port -> stats_cbarg , status ) ; port -> stats_cbfn = NULL ; } } 