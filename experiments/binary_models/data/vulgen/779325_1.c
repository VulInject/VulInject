static void byteswap_record ( dmu_replay_record_t * drr ) { drr -> drr_type = BSWAP_32 ( drr -> drr_type ) ; drr -> drr_payloadlen = BSWAP_32 ( drr -> drr_payloadlen ) ; switch ( drr -> drr_type ) { case DRR_BEGIN : DO64 ( drr_begin . drr_magic ) ; DO64 ( drr_begin . drr_versioninfo ) ; DO64 ( drr_begin . drr_creation_time ) ; DO32 ( drr_begin . drr_type ) ; DO32 ( drr_begin . drr_flags ) ; DO64 ( drr_begin . drr_toguid ) ; DO64 ( drr_begin . drr_fromguid ) ; break ; case DRR_OBJECT : DO64 ( drr_object . drr_object ) ; DO32 ( drr_object . drr_type ) ; DO32 ( drr_object . drr_bonustype ) ; DO32 ( drr_object . drr_blksz ) ; DO32 ( drr_object . drr_bonuslen ) ; DO32 ( drr_object . drr_raw_bonuslen ) ; DO64 ( drr_object . drr_toguid ) ; DO64 ( drr_object . drr_maxblkid ) ; break ; case DRR_FREEOBJECTS : DO64 ( drr_freeobjects . drr_firstobj ) ; DO64 ( drr_freeobjects . drr_numobjs ) ; DO64 ( drr_freeobjects . drr_toguid ) ; break ; case DRR_WRITE : DO64 ( drr_write . drr_object ) ; DO32 ( drr_write . drr_type ) ; DO64 ( drr_write . drr_offset ) ; DO64 ( drr_write . drr_logical_size ) ; DO64 ( drr_write . drr_toguid ) ; ZIO_CHECKSUM_BSWAP ( & drr -> drr_u . drr_write . drr_key . ddk_cksum ) ; DO64 ( drr_write . drr_key . ddk_prop ) ; DO64 ( drr_write . drr_compressed_size ) ; break ; case DRR_WRITE_BYREF : DO64 ( drr_write_byref . drr_object ) ; DO64 ( drr_write_byref . drr_offset ) ; DO64 ( drr_write_byref . drr_length ) ; DO64 ( drr_write_byref . drr_toguid ) ; DO64 ( drr_write_byref . drr_refguid ) ; DO64 ( drr_write_byref . drr_refobject ) ; DO64 ( drr_write_byref . drr_refoffset ) ; ZIO_CHECKSUM_BSWAP ( & drr -> drr_u . drr_write_byref . drr_key . ddk_cksum ) ; DO64 ( drr_write_byref . drr_key . ddk_prop ) ; break ; case DRR_WRITE_EMBEDDED : DO64 ( drr_write_embedded . drr_object ) ; DO64 ( drr_write_embedded . drr_offset ) ; DO64 ( drr_write_embedded . drr_length ) ; DO64 ( drr_write_embedded . drr_toguid ) ; DO32 ( drr_write_embedded . drr_lsize ) ; DO32 ( drr_write_embedded . drr_psize ) ; break ; case DRR_FREE : DO64 ( drr_free . drr_object ) ; DO64 ( drr_free . drr_offset ) ; DO64 ( drr_free . drr_length ) ; DO64 ( drr_free . drr_toguid ) ; break ; case DRR_SPILL : DO64 ( drr_spill . drr_object ) ; DO64 ( drr_spill . drr_length ) ; DO64 ( drr_spill . drr_toguid ) ; DO64 ( drr_spill . drr_compressed_size ) ; DO32 ( drr_spill . drr_type ) ; break ; case DRR_OBJECT_RANGE : DO64 ( drr_object_range . drr_firstobj ) ; DO64 ( drr_object_range . drr_numslots ) ; DO64 ( drr_object_range . drr_toguid ) ; break ; case DRR_END : DO64 ( drr_end . drr_toguid ) ; ZIO_CHECKSUM_BSWAP ( & drr -> drr_u . drr_end . drr_checksum ) ; break ; } } 