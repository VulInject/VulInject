void PHY_SetTxPowerLimit ( struct adapter * Adapter , u8 * Regulation , u8 * Bandwidth , u8 * RateSection , u8 * RfPath , u8 * Channel , u8 * PowerLimit ) { struct hal_com_data * pHalData = GET_HAL_DATA ( Adapter ) ; u8 regulation = 0 , bandwidth = 0 , rateSection = 0 , channel ; s8 powerLimit = 0 , prevPowerLimit , channelIndex ; GetU1ByteIntegerFromStringInDecimal ( ( s8 * ) Channel , & channel ) ; GetU1ByteIntegerFromStringInDecimal ( ( s8 * ) PowerLimit , & powerLimit ) ; powerLimit = powerLimit > MAX_POWER_INDEX ?MAX_POWER_INDEX : powerLimit ; if ( eqNByte ( Regulation , ( u8 * ) ( "FCC" ) , 3 ) ) { regulation = 0 ; } if ( eqNByte ( Regulation , ( u8 * ) ( "MKK" ) , 3 ) ) { regulation = 1 ; } if ( eqNByte ( Regulation , ( u8 * ) ( "ETSI" ) , 4 ) ) { regulation = 2 ; } if ( eqNByte ( Regulation , ( u8 * ) ( "WW13" ) , 4 ) ) { regulation = 3 ; } if ( eqNByte ( RateSection , ( u8 * ) ( "CCK" ) , 3 ) && eqNByte ( RfPath , ( u8 * ) ( "1T" ) , 2 ) ) { rateSection = 0 ; } if ( eqNByte ( RateSection , ( u8 * ) ( "OFDM" ) , 4 ) && eqNByte ( RfPath , ( u8 * ) ( "1T" ) , 2 ) ) { rateSection = 1 ; } if ( eqNByte ( RateSection , ( u8 * ) ( "HT" ) , 2 ) && eqNByte ( RfPath , ( u8 * ) ( "1T" ) , 2 ) ) { rateSection = 2 ; } else { return ; } if ( eqNByte ( Bandwidth , ( u8 * ) ( "20M" ) , 3 ) ) { bandwidth = 0 ; } if ( eqNByte ( Bandwidth , ( u8 * ) ( "40M" ) , 3 ) ) { bandwidth = 1 ; } channelIndex = phy_GetChannelIndexOfTxPowerLimit ( channel ) ; if ( channelIndex == - 1 ) { return ; } prevPowerLimit = pHalData -> TxPwrLimit_2_4G [ regulation ] [ bandwidth ] [ rateSection ] [ channelIndex ] [ RF_PATH_A ] ; } 