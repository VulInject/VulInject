static void asd_link_reset_err_tasklet ( struct asd_ascb * ascb , struct done_list_struct * dl , int phy_id ) { struct asd_ha_struct * asd_ha = ascb -> ha ; struct sas_ha_struct * sas_ha = & asd_ha -> sas_ha ; struct asd_sas_phy * sas_phy = sas_ha -> sas_phy [ phy_id ] ; struct asd_phy * phy = & asd_ha -> phys [ phy_id ] ; u8 lr_error = dl -> status_block [ 1 ] ; u8 retries_left = dl -> status_block [ 2 ] ; switch ( lr_error ) { case 0 : ASD_DPRINTK ( "phy%d: Receive ID timer expired\n" , phy_id ) ; break ; case 1 : ASD_DPRINTK ( "phy%d: Loss of signal\n" , phy_id ) ; break ; case 2 : ASD_DPRINTK ( "phy%d: Loss of dword sync\n" , phy_id ) ; break ; case 3 : ASD_DPRINTK ( "phy%d: Receive FIS timeout\n" , phy_id ) ; break ; default : ASD_DPRINTK ( "phy%d: unknown link reset error code: 0x%x\n" , phy_id , lr_error ) ; break ; } asd_turn_led ( asd_ha , phy_id , 0 ) ; sas_phy_disconnected ( sas_phy ) ; asd_deform_port ( asd_ha , phy ) ; sas_notify_port_event ( sas_phy , PORTE_LINK_RESET_ERR , GFP_ATOMIC ) ; out } 