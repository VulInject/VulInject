static uint32_t cost_calc ( yuv_block_t * org_block , yuv_block_t * rec_block , int stride , int width , int height , int sub , int nbits , double lambda , int bitdepth ) { uint64_t cost ; uint64_t ssd_y , ssd_u , ssd_v ; ssd_y = ssd_calc ( org_block -> y , rec_block -> y , stride , stride , width , height ) ; ssd_u = ssd_calc ( org_block -> u , rec_block -> u , stride >> sub , stride >> sub , width >> sub , height >> sub ) ; ssd_v = ssd_calc ( org_block -> v , rec_block -> v , stride >> sub , stride >> sub , width >> sub , height >> sub ) ; if ( cost > 1 << 30 ) { cost = 1 << 30 ; } return cost ; } 