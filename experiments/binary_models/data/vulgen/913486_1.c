void HELPER ex ( CPUS390XState * env , uint32_t ilen , uint64_t r1 , uint64_t addr ) { uint64_t insn = cpu_lduw_code ( env , addr ) ; uint8_t opc = insn >> 8 ; insn |= r1 & 0xff ; insn <<= 48 ; switch ( get_ilen ( opc ) ) { case 2 : break ; case 4 : insn |= ( uint64_t ) cpu_lduw_code ( env , addr + 2 ) << 32 ; break ; case 6 : insn |= ( uint64_t ) ( uint32_t ) cpu_ldl_code ( env , addr + 2 ) << 16 ; break ; default : g_assert_not_reached ( ) ; } if ( ( opc & 0xf0 ) == 0xd0 ) { uint32_t * dx_helper ( CPUS390XState * , uint32_t , uint64_t , uint64_t , uintptr_t ) static const dx_helper dx [ 16 ] { [ 0x0 ] = do_helper_trt_bkwd [ 0x2 ] = do_helper_mvc [ 0x4 ] = do_helper_nc [ 0x5 ] = do_helper_clc [ 0x6 ] = do_helper_oc [ 0x7 ] = do_helper_xc [ 0xc ] = do_helper_tr [ 0xd ] = do_helper_trt_fwd } ; ; dx_helper helper = dx [ opc & 0xf ] ; } if ( opc == 0x0a ) { env -> int_svc_code = extract64 ( insn , 48 , 8 ) ; env -> int_svc_ilen = ilen ; helper_exception ( env , EXCP_SVC ) ; g_assert_not_reached ( ) ; } env -> ex_value = insn | ilen ; } 