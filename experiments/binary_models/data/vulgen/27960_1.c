static inline void ahash_unmap ( struct device * dev , struct ahash_edesc * edesc , struct ahash_request * req , int dst_len ) { struct caam_hash_state * state = ahash_request_ctx ( req ) ; if ( edesc -> src_nents ) { dma_unmap_sg ( dev , req -> src , edesc -> src_nents , DMA_TO_DEVICE ) ; } if ( edesc -> dst_dma ) { dma_unmap_single ( dev , edesc -> dst_dma , dst_len , DMA_FROM_DEVICE ) ; } if ( state -> buf_dma ) { dma_unmap_single ( dev , state -> buf_dma , * current_buflen ( state ) , DMA_TO_DEVICE ) ; state -> buf_dma = 0 ; } } 