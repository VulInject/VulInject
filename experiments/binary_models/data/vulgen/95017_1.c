int ov7660_init_controls ( struct sd * sd ) { struct v4l2_ctrl_handler * hdl = & sd -> gspca_dev . ctrl_handler ; sd -> gspca_dev . vdev . ctrl_handler = hdl ; v4l2_ctrl_new_std ( hdl , & ov7660_ctrl_ops , V4L2_CID_AUTO_WHITE_BALANCE , 0 , 1 , 1 , 1 ) ; v4l2_ctrl_new_std_menu ( hdl , & ov7660_ctrl_ops , V4L2_CID_EXPOSURE_AUTO , 1 , 0 , V4L2_EXPOSURE_AUTO ) ; sd -> autogain = v4l2_ctrl_new_std ( hdl , & ov7660_ctrl_ops , V4L2_CID_AUTOGAIN , 0 , 1 , 1 , 1 ) ; sd -> gain = v4l2_ctrl_new_std ( hdl , & ov7660_ctrl_ops , V4L2_CID_GAIN , 0 , 255 , 1 , OV7660_DEFAULT_GAIN ) ; sd -> hflip = v4l2_ctrl_new_std ( hdl , & ov7660_ctrl_ops , V4L2_CID_HFLIP , 0 , 1 , 1 , 0 ) ; sd -> vflip = v4l2_ctrl_new_std ( hdl , & ov7660_ctrl_ops , V4L2_CID_VFLIP , 0 , 1 , 1 , 0 ) ; if ( hdl -> error ) { pr_err ( "Could not initialize controls\n" ) ; return hdl -> error ; } v4l2_ctrl_auto_cluster ( 2 , & sd -> autogain , 0 , false ) ; v4l2_ctrl_cluster ( 2 , & sd -> hflip ) ; return 0 ; } 