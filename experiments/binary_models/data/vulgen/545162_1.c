static void dump_roi ( AVFilterContext * ctx , const AVFrameSideData * sd ) { int nb_rois ; const AVRegionOfInterest * roi ; uint32_t roi_size ; roi = ( const AVRegionOfInterest * ) sd -> data ; if ( ! roi_size || sd -> size % roi_size != 0 ) { av_log ( ctx , AV_LOG_ERROR , "Invalid AVRegionOfInterest.self_size.\n" ) ; return ; } nb_rois = sd -> size / roi_size ; for ( int i = 0 ; i < nb_rois ; i ++ ) { roi = ( const AVRegionOfInterest * ) ( sd -> data + roi_size * i ) ; av_log ( ctx , AV_LOG_INFO , "index: %d, region: (%d, %d) ->(%d, %d), qp offset: %d/%d.\n" , i , roi -> left , roi -> top , roi -> right , roi -> bottom , roi -> qoffset . num , roi -> qoffset . den ) ; } } 