static void load_hosts ( const char * file ) { char * tmp ; char current [ PATH_MAX ] ; DEBUG_MSG ( "load_hosts %s" , file ) ; SAFE_CALLOC ( tmp , strlen ( file ) + 1 , sizeof ( char ) ) ; getcwd ( current , PATH_MAX ) ; if ( ! strncmp ( current , file , strlen ( current ) ) ) { snprintf ( tmp , strlen ( file ) + 1 , "./%s" , file + strlen ( current ) ) ; } else { snprintf ( tmp , strlen ( file ) , "%s" , file ) ; } DEBUG_MSG ( "load_hosts path == %s" , tmp ) ; scan_load_hosts ( tmp ) ; SAFE_FREE ( tmp ) ; gtkui_host_list ( ) ; } 