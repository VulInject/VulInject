void build_fadt ( GArray * tbl , BIOSLinker * linker , const AcpiFadtData * f , const char * oem_id , const char * oem_table_id ) { int off ; AcpiTable table = { . sig = "FACP" . rev = f -> rev . oem_id = oem_id . oem_table_id = oem_table_id } ; acpi_table_begin ( & table , tbl ) ; off = tbl -> len ; build_append_int_noprefix ( tbl , 0 , 4 ) ; if ( f -> facs_tbl_offset ) { bios_linker_loader_add_pointer ( linker , ACPI_BUILD_TABLE_FILE , off , 4 , ACPI_BUILD_TABLE_FILE , * f -> facs_tbl_offset ) ; } off = tbl -> len ; build_append_int_noprefix ( tbl , 0 , 4 ) ; if ( f -> dsdt_tbl_offset ) { bios_linker_loader_add_pointer ( linker , ACPI_BUILD_TABLE_FILE , off , 4 , ACPI_BUILD_TABLE_FILE , * f -> dsdt_tbl_offset ) ; } build_append_int_noprefix ( tbl , f -> int_model , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , f -> sci_int , 2 ) ; build_append_int_noprefix ( tbl , f -> smi_cmd , 4 ) ; build_append_int_noprefix ( tbl , f -> acpi_enable_cmd , 1 ) ; build_append_int_noprefix ( tbl , f -> acpi_disable_cmd , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , f -> pm1a_evt . address , 4 ) ; build_append_int_noprefix ( tbl , 0 , 4 ) ; build_append_int_noprefix ( tbl , f -> pm1a_cnt . address , 4 ) ; build_append_int_noprefix ( tbl , 0 , 4 ) ; build_append_int_noprefix ( tbl , 0 , 4 ) ; build_append_int_noprefix ( tbl , f -> pm_tmr . address , 4 ) ; build_append_int_noprefix ( tbl , f -> gpe0_blk . address , 4 ) ; build_append_int_noprefix ( tbl , 0 , 4 ) ; build_append_int_noprefix ( tbl , f -> pm1a_evt . bit_width / 8 , 1 ) ; build_append_int_noprefix ( tbl , f -> pm1a_cnt . bit_width / 8 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , f -> pm_tmr . bit_width / 8 , 1 ) ; build_append_int_noprefix ( tbl , f -> gpe0_blk . bit_width / 8 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , f -> plvl2_lat , 2 ) ; build_append_int_noprefix ( tbl , f -> plvl3_lat , 2 ) ; build_append_int_noprefix ( tbl , 0 , 2 ) ; build_append_int_noprefix ( tbl , 0 , 2 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , f -> rtc_century , 1 ) ; build_append_int_noprefix ( tbl , 0 , 2 ) ; build_append_int_noprefix ( tbl , 0 , 1 ) ; build_append_int_noprefix ( tbl , f -> flags , 4 ) ; if ( f -> rev == 1 ) { done } build_append_gas_from_struct ( tbl , & f -> reset_reg ) ; build_append_int_noprefix ( tbl , f -> reset_val , 1 ) ; if ( ( f -> rev >= 6 ) || ( ( f -> rev == 5 ) && f -> minor_ver > 0 ) ) { build_append_int_noprefix ( tbl , f -> arm_boot_arch , 2 ) ; build_append_int_noprefix ( tbl , f -> minor_ver , 1 ) ; } else { build_append_int_noprefix ( tbl , 0 , 3 ) ; } build_append_int_noprefix ( tbl , 0 , 8 ) ; off = tbl -> len ; build_append_int_noprefix ( tbl , 0 , 8 ) ; if ( f -> xdsdt_tbl_offset ) { bios_linker_loader_add_pointer ( linker , ACPI_BUILD_TABLE_FILE , off , 8 , ACPI_BUILD_TABLE_FILE , * f -> xdsdt_tbl_offset ) ; } build_append_gas_from_struct ( tbl , & f -> pm1a_evt ) ; build_append_gas ( tbl , AML_AS_SYSTEM_MEMORY , 0 , 0 , 0 , 0 ) ; build_append_gas_from_struct ( tbl , & f -> pm1a_cnt ) ; build_append_gas ( tbl , AML_AS_SYSTEM_MEMORY , 0 , 0 , 0 , 0 ) ; build_append_gas ( tbl , AML_AS_SYSTEM_MEMORY , 0 , 0 , 0 , 0 ) ; build_append_gas_from_struct ( tbl , & f -> pm_tmr ) ; build_append_gas_from_struct ( tbl , & f -> gpe0_blk ) ; build_append_gas ( tbl , AML_AS_SYSTEM_MEMORY , 0 , 0 , 0 , 0 ) ; build_append_gas_from_struct ( tbl , & f -> sleep_ctl ) ; build_append_gas_from_struct ( tbl , & f -> sleep_sts ) ; assert ( f -> rev == 5 ) ; done acpi_table_end ( linker , & table ) ; } 