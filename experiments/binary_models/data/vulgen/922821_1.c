static int bfin_bf54x_fb_check_var ( struct fb_var_screeninfo * var , struct fb_info * info ) { switch ( var -> bits_per_pixel ) { case 24 : var -> red . offset = 16 ; var -> green . offset = 8 ; var -> blue . offset = 0 ; var -> red . length = var -> green . length = var -> blue . length = 8 ; var -> transp . offset = 0 ; var -> transp . length = 0 ; var -> transp . msb_right = 0 ; var -> red . msb_right = 0 ; var -> green . msb_right = 0 ; var -> blue . msb_right = 0 ; break ; default : pr_debug ( "%s: depth not supported: %u BPP\n" , __func__ , var -> bits_per_pixel ) ; return - EINVAL ; } if ( info -> var . xres != var -> xres || info -> var . yres != var -> yres || info -> var . xres_virtual != var -> xres_virtual || info -> var . yres_virtual != var -> yres_virtual ) { pr_debug ( "%s: Resolution not supported: X%u x Y%u \n" , __func__ , var -> xres , var -> yres ) ; return - EINVAL ; } return 0 ; } 