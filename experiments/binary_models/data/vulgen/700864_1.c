void _dbg_get_obj_xavp_val ( sr_xavp_t * avp , srjson_doc_t * jdoc , srjson_t * * jobj ) { static char _pv_xavp_buf [ 128 ] ; int result = 0 ; switch ( avp -> val . type ) { case SR_XTYPE_NULL : * jobj = srjson_CreateNull ( jdoc ) ; break ; case SR_XTYPE_LONG : * jobj = srjson_CreateNumber ( jdoc , avp -> val . v . l ) ; break ; case SR_XTYPE_STR : * jobj = srjson_CreateStr ( jdoc , avp -> val . v . s . s , avp -> val . v . s . len ) ; break ; case SR_XTYPE_TIME : result = snprintf ( _pv_xavp_buf , 128 , "%lu" , ( long unsigned ) avp -> val . v . t ) ; break ; case SR_XTYPE_LLONG : result = snprintf ( _pv_xavp_buf , 128 , "%lld" , avp -> val . v . ll ) ; break ; case SR_XTYPE_XAVP : result = snprintf ( _pv_xavp_buf , 128 , "<<xavp:%p>>" , avp -> val . v . xavp ) ; break ; case SR_XTYPE_DATA : result = snprintf ( _pv_xavp_buf , 128 , "<<data:%p>>" , avp -> val . v . data ) ; break ; default : LM_WARN ( "unknown data type\n" ) ; * jobj = srjson_CreateNull ( jdoc ) ; } if ( result < 0 ) { * jobj = srjson_CreateNull ( jdoc ) ; } if ( * jobj == NULL ) { * jobj = srjson_CreateStr ( jdoc , _pv_xavp_buf , 128 ) ; } } 