static Datum ExecHashSubPlan ( SubPlanState * node , ExprContext * econtext , bool * isNull ) { SubPlan * subplan = node -> subplan ; PlanState * planstate = node -> planstate ; TupleTableSlot * slot ; if ( subplan -> parParam != NIL || node -> args != NIL ) { elog ( ERROR , "hashed subplan with direct correlation not supported" ) ; } * isNull = false ; if ( ! node -> havehashrows && ! node -> havenullrows ) { return BoolGetDatum ( false ) ; } node -> projLeft -> pi_exprContext = econtext ; slot = ExecProject ( node -> projLeft ) ; if ( slotNoNulls ( slot ) ) { if ( node -> havehashrows && FindTupleHashEntry ( node -> hashtable , slot , node -> cur_eq_comp , node -> lhs_hash_funcs ) != NULL ) { ExecClearTuple ( slot ) ; return BoolGetDatum ( true ) ; } if ( node -> havenullrows && findPartialMatch ( node -> hashnulls , slot , node -> cur_eq_funcs ) ) { ExecClearTuple ( slot ) ; * isNull = true ; return BoolGetDatum ( false ) ; } ExecClearTuple ( slot ) ; return BoolGetDatum ( false ) ; } if ( node -> hashnulls == NULL ) { ExecClearTuple ( slot ) ; return BoolGetDatum ( false ) ; } if ( slotAllNulls ( slot ) ) { ExecClearTuple ( slot ) ; * isNull = true ; return BoolGetDatum ( false ) ; } if ( node -> havenullrows && findPartialMatch ( node -> hashnulls , slot , node -> cur_eq_funcs ) ) { ExecClearTuple ( slot ) ; * isNull = true ; return BoolGetDatum ( false ) ; } if ( node -> havehashrows && findPartialMatch ( node -> hashtable , slot , node -> cur_eq_funcs ) ) { ExecClearTuple ( slot ) ; * isNull = true ; return BoolGetDatum ( false ) ; } ExecClearTuple ( slot ) ; return BoolGetDatum ( false ) ; } 