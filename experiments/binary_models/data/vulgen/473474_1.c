static void dumpimageproc ( FILE * file , BDFChar * bdfc , BDFFont * font ) { SplineFont * sf = font -> sf ; int width = bdfc -> xmax - bdfc -> xmin + 1 , height = bdfc -> ymax - bdfc -> ymin + 1 ; int i ; struct psfilter ps ; fprintf ( file , "  /%s { %d 0 %d %d %d %d setcachedevice \n" , bdfc -> sc -> name , ( int ) rint ( bdfc -> width * scale ) , ( int ) rint ( bdfc -> xmin * scale ) , ( int ) rint ( bdfc -> ymin * scale ) , ( int ) rint ( ( 1 + bdfc -> xmax ) * scale ) , ( int ) rint ( ( 1 + bdfc -> ymax ) * scale ) ) ; fprintf ( file , "\t%g %g translate %g %g scale %d %d true [%d 0 0 %d 0 0] {<~\n" , bdfc -> xmin * scale , bdfc -> ymax * scale , width * scale , height * scale , width , height , width , - height ) ; InitFilter ( & ps , ( DumpChar ) fputc , file ) ; if ( bdfc -> bytes_per_line == ( width + 7 ) / 8 ) { FilterStr ( & ps , ( uint8_t * ) bdfc -> bitmap , height * bdfc -> bytes_per_line ) ; } else { for ( i = 0 ; i < height ; ++ i ) { FilterStr ( & ps , ( uint8_t * ) ( bdfc -> bitmap + i * bdfc -> bytes_per_line ) , ( width + 7 ) / 8 ) ; } } FlushFilter ( & ps ) ; fprintf ( file , "} imagemask } bind def\n" ) ; } 