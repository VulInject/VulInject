ecma_compare_ecma_strings_relational ( , ) { const lit_utf8_byte_t * utf8_string1_p , * utf8_string2_p ; lit_utf8_size_t utf8_string1_size , utf8_string2_size ; lit_utf8_byte_t uint32_to_string_buffer1 [ ECMA_MAX_CHARS_IN_STRINGIFIED_UINT32 ] ; lit_utf8_byte_t uint32_to_string_buffer2 [ ECMA_MAX_CHARS_IN_STRINGIFIED_UINT32 ] ; if ( ECMA_IS_DIRECT_STRING ( string1_p ) ) { if ( ECMA_GET_DIRECT_STRING_TYPE ( string1_p ) != ECMA_DIRECT_STRING_UINT ) { utf8_string1_p = ecma_string_get_chars_fast ( string1_p , & utf8_string1_size ) ; } else { utf8_string1_size = ecma_uint32_to_utf8_string ( ( uint32_t ) ECMA_GET_DIRECT_STRING_VALUE ( string1_p ) , uint32_to_string_buffer1 , ECMA_MAX_CHARS_IN_STRINGIFIED_UINT32 ) ; utf8_string1_p = uint32_to_string_buffer1 ; } } else { JERRY_ASSERT ( string1_p -> refs_and_container >= ECMA_STRING_REF_ONE ) ; if ( ECMA_STRING_GET_CONTAINER ( string1_p ) != ECMA_STRING_CONTAINER_UINT32_IN_DESC ) { utf8_string1_p = ecma_string_get_chars_fast ( string1_p , & utf8_string1_size ) ; } else { utf8_string1_size = ecma_uint32_to_utf8_string ( string1_p -> u . uint32_number , uint32_to_string_buffer1 , ECMA_MAX_CHARS_IN_STRINGIFIED_UINT32 ) ; utf8_string1_p = uint32_to_string_buffer1 ; } } if ( ECMA_IS_DIRECT_STRING ( string2_p ) ) { if ( ECMA_GET_DIRECT_STRING_TYPE ( string2_p ) != ECMA_DIRECT_STRING_UINT ) { utf8_string2_p = ecma_string_get_chars_fast ( string2_p , & utf8_string2_size ) ; } else { utf8_string2_size = ecma_uint32_to_utf8_string ( ( uint32_t ) ECMA_GET_DIRECT_STRING_VALUE ( string2_p ) , uint32_to_string_buffer2 , ECMA_MAX_CHARS_IN_STRINGIFIED_UINT32 ) ; utf8_string2_p = uint32_to_string_buffer2 ; } } else { JERRY_ASSERT ( string2_p -> refs_and_container >= ECMA_STRING_REF_ONE ) ; if ( ECMA_STRING_GET_CONTAINER ( string2_p ) != ECMA_STRING_CONTAINER_UINT32_IN_DESC ) { utf8_string2_p = ecma_string_get_chars_fast ( string2_p , & utf8_string2_size ) ; } else { utf8_string2_size = ecma_uint32_to_utf8_string ( string2_p -> u . uint32_number , uint32_to_string_buffer2 , ECMA_MAX_CHARS_IN_STRINGIFIED_UINT32 ) ; utf8_string2_p = uint32_to_string_buffer2 ; } } return lit_compare_utf8_strings_relational ( utf8_string1_p , utf8_string1_size , utf8_string2_p , utf8_string2_size ) ; } 