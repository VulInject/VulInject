static int capture_legacy_g_parm ( struct file * file , void * fh , struct v4l2_streamparm * a ) { struct capture_priv * priv = video_drvdata ( file ) ; struct v4l2_subdev_frame_interval fi ; int ret ; if ( a -> type != V4L2_BUF_TYPE_VIDEO_CAPTURE ) { return - EINVAL ; } fi . pad = priv -> src_sd_pad ; ret = v4l2_subdev_call ( priv -> src_sd , video , g_frame_interval , & fi ) ; if ( ret < 0 ) { return ret ; } a -> parm . capture . capability = V4L2_CAP_TIMEPERFRAME ; a -> parm . capture . timeperframe = fi . interval ; return 0 ; } 