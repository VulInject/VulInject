static void csr_ipi_write_buf ( int cpu , struct task_struct * idle ) { unsigned long startargs [ 4 ] ; startargs [ 0 ] = ( unsigned long ) & smp_bootstrap ; startargs [ 1 ] = ( unsigned long ) __KSTK_TOS ( idle ) ; startargs [ 2 ] = ( unsigned long ) task_thread_info ( idle ) ; pr_debug ( "CPU#%d, func_pc=%lx, sp=%lx, gp=%lx\n" , cpu , startargs [ 0 ] , startargs [ 1 ] , startargs [ 2 ] ) ; csr_mail_send ( startargs [ 3 ] , cpu_logical_map ( cpu ) , 3 ) ; csr_mail_send ( startargs [ 2 ] , cpu_logical_map ( cpu ) , 2 ) ; csr_mail_send ( startargs [ 1 ] , cpu_logical_map ( cpu ) , 1 ) ; csr_mail_send ( startargs [ 0 ] , cpu_logical_map ( cpu ) , 0 ) ; } 