static struct komeda_component * * komeda_pipeline_get_component_pos ( struct komeda_pipeline * pipe , int id ) { struct komeda_dev * mdev = pipe -> mdev ; struct komeda_pipeline * temp = NULL ; struct komeda_component * * pos = NULL ; switch ( id ) { case KOMEDA_COMPONENT_LAYER0 : case KOMEDA_COMPONENT_LAYER1 : case KOMEDA_COMPONENT_LAYER2 : case KOMEDA_COMPONENT_LAYER3 : pos = to_cpos ( pipe -> layers [ id - KOMEDA_COMPONENT_LAYER0 ] ) ; break ; case KOMEDA_COMPONENT_WB_LAYER : pos = to_cpos ( pipe -> wb_layer ) ; break ; case KOMEDA_COMPONENT_COMPIZ0 : case KOMEDA_COMPONENT_COMPIZ1 : temp = mdev -> pipelines [ id - KOMEDA_COMPONENT_COMPIZ0 ] ; pos = to_cpos ( temp -> compiz ) ; break ; case KOMEDA_COMPONENT_SCALER0 : case KOMEDA_COMPONENT_SCALER1 : pos = to_cpos ( pipe -> scalers [ id - KOMEDA_COMPONENT_SCALER0 ] ) ; break ; case KOMEDA_COMPONENT_SPLITTER : pos = to_cpos ( pipe -> splitter ) ; break ; case KOMEDA_COMPONENT_MERGER : pos = to_cpos ( pipe -> merger ) ; break ; case KOMEDA_COMPONENT_IPS0 : case KOMEDA_COMPONENT_IPS1 : temp = mdev -> pipelines [ id - KOMEDA_COMPONENT_IPS0 ] ; if ( ! temp ) { DRM_ERROR ( "ips-%d doesn't exist.\n" , id ) ; return NULL ; } pos = to_cpos ( temp -> improc ) ; break ; case KOMEDA_COMPONENT_TIMING_CTRLR : pos = to_cpos ( pipe -> ctrlr ) ; break ; default : pos = NULL ; DRM_ERROR ( "Unknown pipeline resource ID: %d.\n" , id ) ; break ; } return pos ; } 