static int buffer_uint64_roundtrip ( BUFFER * wb , NUMBER_ENCODING encoding , uint64_t value , const char * expected ) { int errors = 0 ; buffer_flush ( wb ) ; buffer_print_uint64_encoded ( wb , encoding , value ) ; if ( expected ) { errors += buffer_expect ( wb , expected ) ; } if ( v != value ) { error ( "BUFFER: string '%s' does resolves to %llu, expected %llu" , buffer_tostring ( wb ) , ( unsigned long long ) v , ( unsigned long long ) value ) ; errors ++ ; } buffer_flush ( wb ) ; return errors ; } 