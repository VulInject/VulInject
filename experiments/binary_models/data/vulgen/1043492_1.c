static void printl ( const char * fmt , ... ) { va_list args ; int len ; struct timespec64 now ; char tbuf [ 256 ] ; va_start ( args , fmt ) ; getnstimeofday64 ( & now ) ; now = timespec64_sub ( now , dccpw . tstart ) ; len = sprintf ( tbuf , "%lu.%06lu " , ( unsigned long ) now . tv_sec , ( unsigned long ) now . tv_nsec / NSEC_PER_USEC ) ; va_end ( args ) ; kfifo_in_locked ( & dccpw . fifo , tbuf , len , & dccpw . lock ) ; wake_up ( & dccpw . wait ) ; } 