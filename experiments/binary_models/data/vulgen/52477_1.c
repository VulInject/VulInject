void usbnet_skb_return ( struct usbnet * dev , struct sk_buff * skb ) { struct pcpu_sw_netstats * stats64 = this_cpu_ptr ( dev -> stats64 ) ; int status ; if ( test_bit ( EVENT_RX_PAUSED , & dev -> flags ) ) { skb_queue_tail ( & dev -> rxq_pause , skb ) ; return ; } if ( skb -> protocol == 0 ) { skb -> protocol = eth_type_trans ( skb , dev -> net ) ; } u64_stats_update_begin ( & stats64 -> syncp ) ; stats64 -> rx_packets ++ ; stats64 -> rx_bytes += skb -> len ; u64_stats_update_end ( & stats64 -> syncp ) ; netif_dbg ( dev , rx_status , dev -> net , "<rx, len %zu, type 0x%x\n" , skb -> len + sizeof ( ethhdr ) , skb -> protocol ) ; memset ( skb -> cb , 0 , sizeof ( skb_data ) ) ; if ( skb_defer_rx_timestamp ( skb ) ) { return ; } status = netif_rx ( skb ) ; } 