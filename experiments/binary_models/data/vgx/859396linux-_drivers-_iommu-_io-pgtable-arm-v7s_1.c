static arm_v7s_iopte arm_v7s_split_cont ( struct arm_v7s_io_pgtable * data , unsigned long iova , int idx , int lvl , arm_v7s_iopte * ptep ) { struct io_pgtable * iop = & data -> iop ; arm_v7s_iopte pte ; size_t size = ARM_V7S_BLOCK_SIZE ( lvl ) ; int i ; pte = * ptep ; ptep -= idx & ( ARM_V7S_CONT_PAGES - 1 ) ; pte = arm_v7s_cont_to_pte ( pte , lvl ) ; for ( i = 0 ; i < ARM_V7S_CONT_PAGES ; i ++ ) { ptep [ i ] = pte + i * size ; } __arm_v7s_pte_sync ( ptep , ARM_V7S_CONT_PAGES , & iop -> cfg ) ; size *= ARM_V7S_CONT_PAGES ; io_pgtable_tlb_flush_walk ( iop , iova , size , size ) ; return pte ; } 