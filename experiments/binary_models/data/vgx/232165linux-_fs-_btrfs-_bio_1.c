static void btrfs_log_dev_io_error ( struct bio * bio , struct btrfs_device * dev ) { if ( bio -> bi_status != BLK_STS_IOERR && bio -> bi_status != BLK_STS_TARGET ) { return ; } if ( btrfs_op ( bio ) == BTRFS_MAP_WRITE ) { btrfs_dev_stat_inc_and_print ( dev , BTRFS_DEV_STAT_WRITE_ERRS ) ; } if ( ! ( bio -> bi_opf & REQ_RAHEAD ) ) { btrfs_dev_stat_inc_and_print ( dev , BTRFS_DEV_STAT_READ_ERRS ) ; } if ( bio -> bi_opf & REQ_PREFLUSH ) { btrfs_dev_stat_inc_and_print ( dev , BTRFS_DEV_STAT_FLUSH_ERRS ) ; } } 