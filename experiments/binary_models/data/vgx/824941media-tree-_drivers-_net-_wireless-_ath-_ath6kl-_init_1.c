static int ath6kl_set_host_app_area ( struct ath6kl * ar ) { u32 address , data ; struct host_app_area host_app_area ; address = ath6kl_get_hi_item_addr ( ar , HI_ITEM ( hi_app_host_interest ) ) ; address = TARG_VTOP ( ar -> target_type , address ) ; if ( ath6kl_diag_read32 ( ar , address , & data ) ) { return - EIO ; } address = TARG_VTOP ( ar -> target_type , data ) ; host_app_area . wmi_protocol_ver = cpu_to_le32 ( WMI_PROTOCOL_VERSION , NULL ) ; if ( ath6kl_diag_write ( ar , address , ( u8 * ) & host_app_area , sizeof ( host_app_area ) ) ) { return - EIO ; } return 0 ; } 