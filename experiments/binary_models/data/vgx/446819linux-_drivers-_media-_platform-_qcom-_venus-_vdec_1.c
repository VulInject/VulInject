static int vdec_check_src_change ( struct venus_inst * inst ) { int ret ; if ( inst -> subscriptions & V4L2_EVENT_SOURCE_CHANGE ) { return 0 ; } if ( inst -> codec_state != VENUS_DEC_STATE_INIT ) { done } ret = wait_event_timeout ( inst -> reconf_wait , inst -> reconfig , msecs_to_jiffies ( 100 ) ) ; if ( ! ret ) { return - EINVAL ; } if ( ! ( inst -> codec_state == VENUS_DEC_STATE_CAPTURE_SETUP ) || ! inst -> reconfig ) { dev_dbg ( inst -> core -> dev , VDBGH "wrong state\n" ) ; } done return 0 ; } 