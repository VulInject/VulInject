static MagickBooleanType WriteINFOImage ( const ImageInfo * image_info , Image * image , ExceptionInfo * exception ) { const char * format ; MagickBooleanType status ; MagickOffsetType scene ; size_t number_scenes ; assert ( image_info != ( const ImageInfo * ) NULL ) ; assert ( image_info -> signature == MagickCoreSignature ) ; assert ( image != ( Image * ) NULL ) ; assert ( image -> signature == MagickCoreSignature ) ; if ( IsEventLogging ( ) != MagickFalse ) { ( void ) LogMagickEvent ( TraceEvent , GetMagickModule ( ) , "%s" , image -> filename ) ; } status = OpenBlob ( image_info , image , WriteBlobMode , exception ) ; if ( status == MagickFalse ) { return ( status ) ; } scene = 0 ; number_scenes = GetImageListLength ( image ) ; { format = GetImageOption ( image_info , "format" ) ; if ( format == ( char * ) NULL ) { ( void ) CopyMagickString ( image -> filename , image -> magick_filename , MagickPathExtent ) ; image -> magick_columns = image -> columns ; image -> magick_rows = image -> rows ; ( void ) IdentifyImage ( image , GetBlobFileHandle ( image ) , image_info -> verbose , exception ) ; } else { char * text ; text = InterpretImageProperties ( ( ImageInfo * ) image_info , image , format , exception ) ; if ( text != ( char * ) NULL ) { ( void ) WriteBlobString ( image , text ) ; text = DestroyString ( text ) ; } } image = SyncNextImageInList ( image ) ; status = SetImageProgress ( image , SaveImagesTag , scene ++ , number_scenes ) ; if ( status == MagickFalse ) { break ; } } image_info -> adjoin != MagickFalse ; ( void ) CloseBlob ( image ) ; return ( MagickTrue ) ; } 