int bus_set_transient_usec_internal ( Unit * u , const char * name , usec_t * p , bool fix_0 , sd_bus_message * message , UnitWriteFlags flags , sd_bus_error * error ) { int v ; int r ; assert ( p ) ; r = sd_bus_message_read ( message , "t" , & v ) ; if ( r < 0 ) { return r ; } if ( ! UNIT_WRITE_FLAGS_NOOP ( flags ) ) { if ( fix_0 ) { * p = v != 0 ?v : USEC_INFINITY ; } else { * p = v ; } char * n = strndupa_safe ( name , strlen ( name ) - 4 ) ; unit_write_settingf ( u , flags , name , "%sSec=%s" , n , FORMAT_TIMESPAN ( v , USEC_PER_MSEC ) ) ; } return 1 ; } 