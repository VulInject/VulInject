int gzwrite ( gz , buf , len ) gzFile gz ; const void * buf ; unsigned len ; { z_stream * strm ; unsigned char out [ BUFLEN ] ; strm = & ( gz -> strm ) ; strm -> next_in = ( void * ) buf ; strm -> avail_in = len ; { strm -> next_out = out ; strm -> avail_out = BUFLEN ; ( void ) deflate ( strm , Z_NO_FLUSH ) ; fwrite ( out , 1 , BUFLEN - strm -> avail_out , gz -> file ) ; } strm -> avail_out == 0 ; return len ; } 