int __igc_access_xmdio_reg ( struct igc_hw * hw , uint16_t address , uint8_t dev_addr , uint16_t * data , bool read ) { int ret_val ; DEBUGFUNC ( "__igc_access_xmdio_reg" ) ; ret_val = hw -> phy . ops . write_reg ( hw , IGC_MMDAC , dev_addr ) ; ret_val = hw -> phy . ops . write_reg ( hw , IGC_MMDAAD , address ) ; if ( ret_val ) { return ret_val ; } ret_val = hw -> phy . ops . write_reg ( hw , IGC_MMDAC , IGC_MMDAC_FUNC_DATA | dev_addr ) ; if ( ret_val ) { return ret_val ; } if ( read ) { ret_val = hw -> phy . ops . read_reg ( hw , IGC_MMDAAD , data ) ; } else { ret_val = hw -> phy . ops . write_reg ( hw , IGC_MMDAAD , * data ) ; } if ( ret_val ) { return ret_val ; } ret_val = hw -> phy . ops . write_reg ( hw , IGC_MMDAC , 0 ) ; if ( ret_val ) { return ret_val ; } return ret_val ; } 