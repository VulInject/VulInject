static int lgrp_plat_latency_verify ( memnode_phys_addr_map_t * memnode_info , lgrp_plat_latency_stats_t * lat_stats ) { int i ; int j ; u_longlong_t t1 ; u_longlong_t t2 ; ASSERT ( memnode_info != NULL && lat_stats != NULL ) ; if ( max_mem_nodes == 1 || lgrp_topo_levels < 2 || lat_stats -> latencies [ 0 ] [ 0 ] == 0 ) { return ( 0 ) ; } for ( i = 0 ; i < lgrp_plat_node_cnt ; i ++ ) { for ( j = 0 ; j < lgrp_plat_node_cnt ; j ++ ) { if ( ! memnode_info [ j ] . exists ) { continue ; } t1 = lat_stats -> latencies [ i ] [ j ] ; t2 = lat_stats -> latencies [ j ] [ i ] ; if ( t1 == 0 || t2 == 0 || t1 == t2 ) { continue ; } return ( - 1 ) ; } } t1 = lat_stats -> latencies [ 0 ] [ 0 ] ; for ( i = 1 ; i < lgrp_plat_node_cnt ; i ++ ) { if ( ! memnode_info [ i ] . exists ) { continue ; } t2 = lat_stats -> latencies [ i ] [ i ] ; if ( t2 == 0 ) { continue ; } if ( t1 == 0 ) { t1 = t2 ; continue ; } if ( t1 != t2 ) { return ( - 2 ) ; } } if ( t1 ) { for ( i = 0 ; i < lgrp_plat_node_cnt ; i ++ ) { for ( j = 0 ; j < lgrp_plat_node_cnt ; j ++ ) { if ( ! memnode_info [ j ] . exists ) { continue ; } t2 = lat_stats -> latencies [ i ] [ j ] ; if ( i == j || t2 == 0 ) { continue ; } if ( t1 >= t2 ) { return ( - 3 ) ; } } } } return ( 0 ) ; } 