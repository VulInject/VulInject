static void mall_destroy ( struct tcf_proto * tp , bool rtnl_held , struct netlink_ext_ack * extack ) { struct cls_mall_head * head = rtnl_dereference ( tp -> root ) ; tcf_unbind_filter ( tp , & head -> res ) ; if ( ! tc_skip_hw ( head -> flags ) ) { mall_destroy_hw_filter ( tp , head , ( unsigned long ) head , extack ) ; } if ( tcf_exts_get_net ( & head -> exts ) ) { tcf_queue_work ( & head -> rwork , mall_destroy_work ) ; } else { __mall_destroy ( head ) ; } } 