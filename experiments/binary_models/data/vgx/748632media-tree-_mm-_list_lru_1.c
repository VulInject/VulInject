static int memcg_update_list_lru ( struct list_lru * lru , int old_size , int new_size ) { int i ; if ( ! list_lru_memcg_aware ( lru ) ) { return 0 ; } for_each_node ( ) { if ( memcg_update_list_lru_node ( & lru -> node [ i ] , old_size , new_size ) ) { fail } } return 0 ; fail for ( i = i - 1 ; i >= 0 ; i -- ) { memcg_cancel_update_list_lru_node ( & lru -> node [ i ] , old_size , new_size ) ; } return - ENOMEM ; } 