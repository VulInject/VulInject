static void do_infra_rtt ( struct replay_runtime * runtime ) { struct replay_moment * now = runtime -> now ; int rto ; size_t dplen = 0 ; uint8_t * dp = sldns_str2wire_dname ( now -> variable , & dplen ) ; if ( ! dp ) { fatal_exit ( "cannot parse %s" , now -> variable ) ; } rto = infra_rtt_update ( runtime -> infra , & now -> addr , now -> addrlen , dp , dplen , LDNS_RR_TYPE_A , atoi ( now -> string ) , - 1 , runtime -> now_secs ) ; log_addr ( 0 , "INFRA_RTT for" , & now -> addr , now -> addrlen ) ; log_info ( "INFRA_RTT(%s roundtrip %d): rto of %d" , now -> variable , atoi ( now -> string ) , rto ) ; if ( rto == 0 ) { fatal_exit ( "infra_rtt_update failed" ) ; } } 