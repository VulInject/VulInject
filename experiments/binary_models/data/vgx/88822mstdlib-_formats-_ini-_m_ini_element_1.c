M_ini_element_t * M_ini_element_duplicate ( const M_ini_element_t * elem ) { M_ini_element_t * dup_elem ; dup_elem = M_ini_element_create ( elem -> type ) ; switch ( elem -> type ) { case M_INI_ELEMENT_TYPE_COMMENT : M_ini_element_comment_set_val ( dup_elem , M_ini_element_comment_get_val ( elem ) ) ; break ; case M_INI_ELEMENT_TYPE_SECTION : M_ini_element_section_set_name ( dup_elem , M_ini_element_section_get_name ( elem ) ) ; M_ini_element_section_set_comment ( dup_elem , M_ini_element_section_get_comment ( elem ) ) ; break ; case M_INI_ELEMENT_TYPE_KV : M_ini_element_kv_set_key ( dup_elem , M_ini_element_kv_get_key ( elem ) ) ; M_ini_element_kv_set_val ( dup_elem , M_ini_element_kv_get_val ( elem ) ) ; M_ini_element_kv_set_comment ( dup_elem , M_ini_element_kv_get_comment ( elem ) ) ; break ; case M_INI_ELEMENT_TYPE_EMPTY_LINE : case M_INI_ELEMENT_TYPE_UNKNOWN : break ; } return dup_elem ; } 