static Accum accum_add ( Accum a , Accum b ) { Accum ret ; accum_init ( & ret ) ; if ( a . sign != b . sign ) { b . sign = ! b . sign ; return accum_sub ( a , b , 0 ) ; } if ( ( b . exp == a . exp ) && int128_gt ( b . mant , a . mant ) ) { return accum_add ( b , a ) ; } while ( a . exp > b . exp ) { if ( int128_gethi ( a . mant ) & ( 1ULL << 62 ) ) { break ; } else { a = accum_norm_left ( a ) ; } } while ( a . exp > b . exp ) { b = accum_norm_right ( b , a . exp - b . exp ) ; } if ( int128_gt ( b . mant , a . mant ) ) { return accum_add ( b , a ) ; } ret . sign = a . sign ; ret . exp = a . exp ; assert ( ! int128_gt ( b . mant , a . mant ) ) ; ret . mant = int128_add ( a . mant , b . mant ) ; ret . guard = b . guard ; ret . round = b . round ; ret . sticky = b . sticky ; return ret ; } 