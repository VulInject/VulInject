static void s3c2410_hcd_oc ( struct s3c2410_hcd_info * info , int port_oc ) { struct s3c2410_hcd_port * port ; unsigned long flags ; int portno ; port = & info -> port [ 0 ] ; local_irq_save ( flags ) ; for ( portno = 0 ; portno < 2 ; port ++ , portno ++ ) { if ( port_oc & ( 1 << portno ) && port -> flags & S3C_HCDFLG_USED ) { port -> oc_status = 1 ; port -> oc_changed = 1 ; s3c2410_usb_set_power ( info , portno + 1 , 0 ) ; } } local_irq_restore ( flags ) ; } 