static int skl_tplg_get_pvt_data ( struct snd_soc_tplg_dapm_widget * tplg_w , struct skl * skl , struct device * dev , struct skl_module_cfg * mconfig ) { struct snd_soc_tplg_vendor_array * array ; int num_blocks , block_size = 0 , block_type , off = 0 ; char * data ; int ret ; array = ( snd_soc_tplg_vendor_array * ) tplg_w -> priv . data ; ret = skl_tplg_get_desc_blocks ( dev , array ) ; num_blocks = ret ; off += array -> size ; array = ( snd_soc_tplg_vendor_array * ) ( tplg_w -> priv . data + off ) ; while ( num_blocks > 0 ) { ret = skl_tplg_get_desc_blocks ( dev , array ) ; if ( ret < 0 ) { return ret ; } block_type = ret ; off += array -> size ; array = ( snd_soc_tplg_vendor_array * ) ( tplg_w -> priv . data + off ) ; ret = skl_tplg_get_desc_blocks ( dev , array ) ; if ( ret < 0 ) { return ret ; } block_size = ret ; off += array -> size ; array = ( snd_soc_tplg_vendor_array * ) ( tplg_w -> priv . data + off ) ; data = ( tplg_w -> priv . data + off ) ; if ( block_type == SKL_TYPE_TUPLE ) { ret = skl_tplg_get_tokens ( dev , data , skl , mconfig , block_size ) ; if ( ret < 0 ) { return ret ; } -- num_blocks ; } else { if ( mconfig -> formats_config . caps_size > 0 ) { memcpy ( mconfig -> formats_config . caps , data , mconfig -> formats_config . caps_size ) ; } -- num_blocks ; } } return 0 ; } 