static int soc_compr_set_metadata ( struct snd_compr_stream * cstream , struct snd_compr_metadata * metadata ) { struct snd_soc_pcm_runtime * rtd = cstream -> private_data ; struct snd_soc_platform * platform = rtd -> platform ; struct snd_soc_dai * cpu_dai = rtd -> cpu_dai ; int ret = 0 ; if ( cpu_dai -> driver -> cops && cpu_dai -> driver -> cops -> set_metadata ) { ret = cpu_dai -> driver -> cops -> set_metadata ( cstream , metadata , cpu_dai ) ; } if ( platform -> driver -> compr_ops && platform -> driver -> compr_ops -> set_metadata ) { ret = platform -> driver -> compr_ops -> set_metadata ( cstream , metadata ) ; } return ret ; } 