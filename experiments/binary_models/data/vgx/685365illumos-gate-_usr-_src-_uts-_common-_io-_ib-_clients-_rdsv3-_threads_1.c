void rdsv3_send_worker ( struct rdsv3_work_s * work ) { struct rdsv3_connection * conn = __containerof ( work , rdsv3_connection , c_send_w . work ) ; int ret ; RDSV3_DPRINTF4 ( "rdsv3_send_worker" , "Enter(work: %p)" , work ) ; if ( rdsv3_conn_state ( conn ) == RDSV3_CONN_UP ) { ret = rdsv3_send_xmit ( conn ) ; RDSV3_DPRINTF5 ( "rdsv3" , "conn %p ret %d" , conn , ret ) ; switch ( ret ) { case - EAGAIN : rdsv3_stats_inc ( s_send_immediate_retry ) ; rdsv3_queue_delayed_work ( rdsv3_wq , & conn -> c_send_w , 0 ) ; break ; case - ENOMEM : rdsv3_stats_inc ( s_send_delayed_retry , NULL ) ; rdsv3_queue_delayed_work ( rdsv3_wq , & conn -> c_send_w , 2 ) ; default : break ; } } RDSV3_DPRINTF4 ( "rdsv3_send_worker" , "Return(work: %p)" , work ) ; } 