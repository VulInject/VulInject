static void print_error ( duk_context * ctx , FILE * f ) { if ( duk_is_object ( ctx , - 1 ) && duk_has_prop_string ( ctx , - 1 , "stack" ) ) { duk_get_prop_string ( ctx , - 1 , "stack" ) ; if ( duk_is_string ( ctx , - 1 ) ) { fprintf ( f , "%s\n" , duk_get_string ( ctx , - 1 ) ) ; fflush ( f ) ; duk_pop_2 ( ctx , NULL ) ; return ; } else { duk_pop ( ctx ) ; } } duk_to_string ( ctx , - 1 ) ; fprintf ( f , "%s\n" , duk_get_string ( ctx , - 1 ) ) ; fflush ( f ) ; duk_pop ( ctx ) ; } 