void update_preferences_helpers ( void ) { Widget shell , browser_cascade , editor_cascade ; if ( get_widget_by_name ( & shell , globals . widgets . top_level , Xdvi_PREFS_DIALOG_NAME , False ) && get_widget_by_name ( & browser_cascade , shell , Xdvi_BROWSER_COMBO_NAME , True ) && get_widget_by_name ( & editor_cascade , shell , Xdvi_EDITOR_COMBO_NAME , True ) ) { Widget browser_list_w , editor_list_w ; XmString str ; int i ; Boolean found = False ; XtVaGetValues ( browser_cascade , XmNlist , & browser_list_w , NULL ) ; XtVaGetValues ( editor_cascade , XmNlist , & editor_list_w , NULL ) ; for ( i = 0 ; m_browser_list [ i ] != NULL ; i ++ ) { if ( globals . curr_browser != NULL ) { if ( strcmp ( globals . curr_browser , m_browser_list [ i ] ) == 0 ) { found = True ; break ; } } if ( resource . browser != NULL ) { if ( strcmp ( resource . browser , m_browser_list [ i ] ) == 0 ) { found = True ; break ; } } } if ( ! found ) { i = 0 ; } str = XmStringCreateLtoR ( ( char * ) m_browser_list [ i ] , "UNMARKED" ) ; XmComboBoxSelectItem ( browser_cascade , str ) ; XmStringFree ( str ) ; for ( i = 0 ; m_editor_list [ i ] != NULL ; i ++ ) { if ( globals . curr_editor != NULL ) { if ( strcmp ( globals . curr_editor , m_editor_list [ i ] ) == 0 ) { found = True ; break ; } } if ( resource . editor != NULL ) { if ( strcmp ( resource . editor , m_editor_list [ i ] ) == 0 ) { found = True ; break ; } } } if ( ! found ) { i = 0 ; } str = XmStringCreateLtoR ( ( char * ) m_editor_list [ i ] , "UNMARKED" ) ; XmComboBoxSelectItem ( editor_cascade , str ) ; XmStringFree ( str ) ; Widget browser_menu , editor_menu ; if ( get_widget_by_name ( & browser_menu , shell , Xdvi_BROWSER_MENU_NAME , True ) && get_widget_by_name ( & editor_menu , shell , Xdvi_EDITOR_MENU_NAME , True ) ) { int i , num_buttons ; WidgetList buttons ; XtVaGetValues ( browser_menu , XmNnumChildren , & num_buttons , XmNchildren , & buttons , NULL ) ; for ( i = 0 ; i < num_buttons ; i ++ ) { XmString str ; char * ptr ; XtVaGetValues ( buttons [ i ] , XmNlabelString , & str , NULL ) ; XmStringGetLtoR ( str , G_charset , & ptr ) ; if ( globals . curr_browser != NULL ) { if ( strcmp ( globals . curr_browser , ptr ) == 0 ) { break ; } } if ( resource . browser != NULL ) { if ( strcmp ( resource . browser , ptr ) == 0 ) { break ; } } } if ( i >= num_buttons ) { i = 0 ; } XtVaSetValues ( browser_cascade , XmNmenuHistory , buttons [ i ] , NULL ) ; XtVaGetValues ( editor_menu , XmNnumChildren , & num_buttons , XmNchildren , & buttons , NULL ) ; for ( i = 0 ; i < num_buttons ; i ++ ) { XmString str ; char * ptr ; XtVaGetValues ( buttons [ i ] , XmNlabelString , & str , NULL ) ; XmStringGetLtoR ( str , G_charset , & ptr ) ; if ( globals . curr_editor != NULL ) { if ( strcmp ( globals . curr_editor , ptr ) == 0 ) { break ; } } if ( resource . editor != NULL ) { if ( strcmp ( resource . editor , ptr ) == 0 ) { break ; } } } if ( i >= num_buttons ) { i = 0 ; } XtVaSetValues ( editor_cascade , XmNmenuHistory , buttons [ i ] , NULL ) ; } } } 