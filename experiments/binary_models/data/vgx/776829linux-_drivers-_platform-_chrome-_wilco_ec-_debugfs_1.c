static int wilco_ec_debugfs_probe ( struct platform_device * pdev ) { struct wilco_ec_device * ec = dev_get_drvdata ( pdev -> dev . parent ) ; debug_info = devm_kzalloc ( & pdev -> dev , sizeof ( * debug_info ) , GFP_KERNEL ) ; if ( ! debug_info ) { return 0 ; } debug_info -> ec = ec ; debug_info -> dir = debugfs_create_dir ( "wilco_ec" , NULL ) ; debugfs_create_file ( "raw" , 0644 , debug_info -> dir , NULL , & fops_raw ) ; debugfs_create_file ( "h1_gpio" , 0444 , debug_info -> dir , ec , & fops_h1_gpio ) ; debugfs_create_file ( "test_event" , 0200 , debug_info -> dir , ec , & fops_test_event ) ; return 0 ; } 