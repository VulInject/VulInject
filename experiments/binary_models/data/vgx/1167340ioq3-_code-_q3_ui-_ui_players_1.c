static void UI_SwingAngles ( float destination , float swingTolerance , float clampTolerance , float speed , float * angle , qboolean * swinging ) { int swing ; float move ; float scale ; if ( ! * swinging ) { swing = AngleSubtract ( * angle , destination ) ; if ( swing > swingTolerance || swing < - swingTolerance ) { * swinging = qtrue ; } } if ( ! * swinging ) { return ; } swing = AngleSubtract ( destination , * angle ) ; scale = fabs ( swing ) ; if ( scale < swingTolerance * 0.5 ) { scale = 0.5 ; } if ( scale < swingTolerance ) { scale = 1.0 ; } else { scale = 2.0 ; } if ( swing >= 0 ) { move = uis . frametime * scale * speed ; if ( move >= swing ) { move = swing ; * swinging = qfalse ; } * angle = AngleMod ( * angle + move ) ; } if ( swing < 0 ) { move = uis . frametime * scale * - speed ; if ( move <= swing ) { move = swing ; * swinging = qfalse ; } * angle = AngleMod ( * angle + move ) ; } swing = AngleSubtract ( destination , * angle ) ; if ( swing > clampTolerance ) { * angle = AngleMod ( destination - ( clampTolerance - 1 ) ) ; } if ( swing < - clampTolerance ) { * angle = AngleMod ( destination + ( clampTolerance - 1 ) ) ; } } 