bool netmap_tx_queues_empty ( void * p ) { sendpacket_t * sp = p ; struct netmap_ring * txring ; assert ( sp ) ; txring = NETMAP_TXRING ( sp -> nm_if , sp -> cur_tx_ring ) ; while ( NETMAP_TX_RING_EMPTY ( txring ) ) { ++ sp -> cur_tx_ring ; if ( sp -> cur_tx_ring > sp -> last_tx_ring ) { sp -> cur_tx_ring = 0 ; return true ; } txring = NETMAP_TXRING ( sp -> nm_if , sp -> cur_tx_ring ) ; } ioctl ( sp -> handle . fd , NIOCTXSYNC , NULL ) ; return false ; } 