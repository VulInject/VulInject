static u8 omap_w1_read_byte ( void * _hdq ) { struct hdq_data * hdq_data = _hdq ; u8 val = 0 ; int ret ; ret = pm_runtime_get_sync ( hdq_data -> dev ) ; if ( ret < 0 ) { pm_runtime_put_noidle ( hdq_data -> dev , NULL ) ; return - 1 ; } ret = hdq_read_byte ( hdq_data , & val ) ; if ( ret ) { val = - 1 ; } pm_runtime_mark_last_busy ( hdq_data -> dev ) ; pm_runtime_put_autosuspend ( hdq_data -> dev ) ; return val ; } 