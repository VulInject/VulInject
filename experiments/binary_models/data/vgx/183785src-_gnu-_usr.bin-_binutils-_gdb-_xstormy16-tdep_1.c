xstormy16_in_function_epilogue_p ( , ) { CORE_ADDR func_addr = 0 , func_end = 0 ; if ( find_pc_partial_function ( pc , NULL , & func_addr , & func_end ) ) { ULONGEST inst , inst2 ; CORE_ADDR addr = func_end - xstormy16_inst_size ; if ( pc < func_end - 7 * xstormy16_inst_size ) { return 0 ; } inst = read_memory_unsigned_integer ( addr , xstormy16_inst_size ) ; if ( inst != 0x0003 ) { return 0 ; } while ( ( addr -= xstormy16_inst_size ) >= func_addr ) { inst = read_memory_unsigned_integer ( addr , xstormy16_inst_size ) ; if ( inst >= 0x009a && inst <= 0x009d ) { continue ; } if ( inst == 0x305f || inst == 0x307f ) { break ; } inst2 = read_memory_unsigned_integer ( addr - xstormy16_inst_size , xstormy16_inst_size ) ; if ( inst2 == 0x314f && inst >= 0x8000 ) { addr -= xstormy16_inst_size ; break ; } return 0 ; } } return 0 ; } 