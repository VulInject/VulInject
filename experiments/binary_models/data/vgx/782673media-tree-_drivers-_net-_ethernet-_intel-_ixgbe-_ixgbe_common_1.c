void ixgbe_set_mac_anti_spoofing ( struct ixgbe_hw * hw , bool enable , int vf ) { int vf_target_reg = vf >> 3 ; int vf_target_shift = vf % 8 ; u32 pfvfspoof ; pfvfspoof = IXGBE_READ_REG ( hw , IXGBE_PFVFSPOOF ( vf_target_reg ) ) ; if ( enable ) { pfvfspoof |= BIT ( vf_target_shift ) ; } else { pfvfspoof &= ~ BIT ( vf_target_shift ) ; } IXGBE_WRITE_REG ( hw , IXGBE_PFVFSPOOF ( vf_target_reg ) , pfvfspoof ) ; } 