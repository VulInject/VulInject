static void write_enc ( PDF pdf , char * * glyph_names , struct avl_table * tx_tree , int fe_objnum ) { int i_old , * p ; struct avl_traverser t ; assert ( glyph_names != NULL ) ; assert ( tx_tree != NULL ) ; assert ( fe_objnum != 0 ) ; pdf_begin_obj ( pdf , fe_objnum , OBJSTM_ALWAYS ) ; pdf_begin_dict ( pdf , NULL ) ; pdf_dict_add_name ( pdf , "Type" , "Encoding" ) ; pdf_add_name ( pdf , "Differences" ) ; pdf_begin_array ( pdf ) ; avl_t_init ( & t , tx_tree ) ; for ( i_old = - 2 , p = ( int * ) avl_t_first ( & t , tx_tree ) ; p != NULL ; p = ( int * ) avl_t_next ( & t ) ) { if ( * p == i_old + 1 ) { pdf_add_name ( pdf , glyph_names [ * p ] ) ; } else { pdf_add_int ( pdf , * p ) ; pdf_add_name ( pdf , glyph_names [ * p ] ) ; } i_old = * p ; } pdf_end_array ( pdf ) ; pdf_end_dict ( pdf ) ; pdf_end_obj ( pdf ) ; } 