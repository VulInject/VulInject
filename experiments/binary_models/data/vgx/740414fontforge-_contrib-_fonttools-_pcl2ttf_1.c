static int filecheck ( FILE * file , int off , int len ) { unsigned int sum = 0 , chunk ; int i , len4 = len / 4 ; fseek ( file , off , SEEK_SET ) ; for ( i = 0 ; i < len4 ; ++ i ) { chunk = getlong ( file ) ; sum += chunk ; } if ( ( len & 3 ) == 1 ) { chunk = getc ( file ) << 24 ; } if ( ( len & 3 ) == 2 ) { chunk = getshort ( file ) << 16 ; } if ( ( len & 3 ) == 3 ) { chunk = getshort ( file ) << 16 ; chunk |= getc ( file ) << 8 ; } else { chunk = 0 ; } sum += chunk ; return ( sum ) ; } 