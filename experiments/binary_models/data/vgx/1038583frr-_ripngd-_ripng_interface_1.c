static void ripng_connect_set ( struct interface * ifp , int set ) { struct ripng_interface * ri = ifp -> info ; struct ripng * ripng = ri -> ripng ; struct listnode * node , * nnode ; struct connected * connected ; struct prefix_ipv6 address ; for ( ALL_LIST_ELEMENTS ( ifp -> connected , node , nnode , connected ) ; ) { struct prefix * p ; p = connected -> address ; address . family = AF_INET6 ; address . prefix = p -> u . prefix6 ; address . prefixlen = p -> prefixlen ; apply_mask_ipv6 ( & address ) ; if ( set ) { if ( ( ripng_enable_if_lookup ( ripng , connected -> ifp -> name ) >= 0 ) || ( ripng_enable_network_lookup2 ( connected ) >= 0 ) ) { ripng_redistribute_add ( ripng , ZEBRA_ROUTE_CONNECT , RIPNG_ROUTE_INTERFACE , & address , connected -> ifp -> ifindex , NULL , 0 ) ; } } else { ripng_redistribute_delete ( ripng , ZEBRA_ROUTE_CONNECT , RIPNG_ROUTE_INTERFACE , & address , connected -> ifp -> ifindex ) ; if ( ripng_redistribute_check ( ripng , ZEBRA_ROUTE_CONNECT ) ) { ripng_redistribute_add ( ripng , ZEBRA_ROUTE_CONNECT , RIPNG_ROUTE_REDISTRIBUTE , & address , connected -> ifp -> ifindex , NULL , 0 ) ; } } } } 