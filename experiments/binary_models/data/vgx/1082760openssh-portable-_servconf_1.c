static int valid_rdomain ( const char * name ) { return sys_valid_rdomain ( name ) ; const char * errstr ; long long num ; struct rt_tableinfo info ; int mib [ 6 ] ; size_t miblen = sizeof ( mib ) ; if ( name == NULL ) { return 1 ; } num = strtonum ( name , 0 , 255 , & errstr ) ; if ( errstr != NULL ) { return 0 ; } mib [ 0 ] = CTL_NET ; mib [ 1 ] = PF_ROUTE ; mib [ 4 ] = NET_RT_TABLE ; mib [ 5 ] = ( int ) num ; if ( sysctl ( mib , 6 , & info , & miblen , NULL , 0 ) == - 1 ) { return 0 ; } return 1 ; error ( "Routing domains are not supported on this platform" ) ; return 0 ; } 