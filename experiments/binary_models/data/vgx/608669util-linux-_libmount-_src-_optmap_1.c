const struct libmnt_optmap * mnt_optmap_get_entry ( struct libmnt_optmap const * * maps , int nmaps , const char * name , size_t namelen , const struct libmnt_optmap * * mapent ) { int i ; assert ( maps ) ; assert ( nmaps ) ; assert ( name ) ; assert ( namelen ) ; if ( mapent ) { * mapent = NULL ; } for ( i = 0 ; i < nmaps ; i ++ ) { const struct libmnt_optmap * map = maps [ i ] ; const struct libmnt_optmap * ent ; const char * p ; for ( ent = map ; ent && ent -> name ; ent ++ ) { if ( ent -> mask & MNT_PREFIX ) { if ( startswith ( name , ent -> name ) ) { if ( mapent ) { * mapent = ent ; } return map ; } continue ; } if ( strncmp ( ent -> name , name , namelen ) != 0 ) { continue ; } p = ent -> name + namelen ; if ( * p == '\0' || * p == '=' || * p == '[' ) { if ( mapent ) { * mapent = ent ; } return map ; } } } return NULL ; } 