static int ov13b10_write_reg ( struct ov13b10 * ov13b , u16 reg , u32 len , u32 __val ) { struct i2c_client * client = v4l2_get_subdevdata ( & ov13b -> sd ) ; int buf_i , val_i ; u8 buf [ 6 ] , * val_p ; __be32 val ; buf [ 0 ] = reg >> 8 ; buf [ 1 ] = reg & 0xff ; val = cpu_to_be32 ( __val ) ; val_p = ( u8 * ) & val ; buf_i = 2 ; val_i = 4 - len ; while ( val_i < 4 ) { buf [ buf_i ++ ] = val_p [ val_i ++ ] ; } if ( i2c_master_send ( client , buf , len + 2 ) != len + 2 ) { return - EIO ; } return 0 ; } 