static int home_on_retry_deactivate ( sd_event_source * s , uint64_t usec , void * userdata ) { Home * h = ASSERT_PTR ( userdata ) ; HomeState state ; h -> retry_deactivate_event_source = sd_event_source_disable_unref ( h -> retry_deactivate_event_source ) ; state = home_get_state ( h ) ; if ( ! HOME_STATE_MAY_RETRY_DEACTIVATE ( state ) ) { return 0 ; } if ( IN_SET ( state , HOME_ACTIVE , HOME_LINGERING ) ) { log_info ( "Again trying to deactivate home directory." ) ; ( void ) home_deactivate_internal ( h , false , NULL ) ; } else { home_start_retry_deactivate ( h ) ; } return 0 ; } 