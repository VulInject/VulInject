int base507c_new_ ( const struct nv50_wndw_func * func , const u32 * format , struct nouveau_drm * drm , int head , s32 oclass , u32 interlock_data , struct nv50_wndw * * pwndw ) { struct nvif_disp_chan_v0 args = { . id = head } ; struct nouveau_display * disp = nouveau_display ( drm -> dev ) ; struct nv50_disp * disp50 = nv50_disp ( drm -> dev ) ; struct nv50_wndw * wndw ; int ret ; ret = nv50_wndw_new_ ( func , drm -> dev , DRM_PLANE_TYPE_PRIMARY , "base" , head , format , BIT ( head ) , NV50_DISP_INTERLOCK_BASE , interlock_data , & wndw ) ; if ( * pwndw = wndw , ret ) { return ret ; } ret = nv50_dmac_create ( & drm -> client . device , & disp -> disp . object , & oclass , head , & args , sizeof ( args ) , disp50 -> sync -> offset , & wndw -> wndw ) ; if ( ret ) { NV_ERROR ( drm , "base%04x allocation failed: %d\n" , oclass , ret ) ; return ret ; } wndw -> ntfy = NV50_DISP_BASE_NTFY ( wndw -> id , NULL ) ; wndw -> sema = NV50_DISP_BASE_SEM0 ( wndw -> id ) ; wndw -> data = 0x00000000 ; return 0 ; } 