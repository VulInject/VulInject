char * copy_argv ( char * const * argv ) { size_t len = 0 , n ; char * buf ; if ( argv == NULL ) { return ( NULL ) ; } for ( n = 0 ; argv [ n ] ; n ++ ) { len += strlen ( argv [ n ] ) + 1 ; } buf = malloc ( len ) ; if ( buf == NULL ) { return ( NULL ) ; } strlcpy ( buf , argv [ 0 ] , len ) ; for ( n = 1 ; argv [ n ] ; n ++ ) { strlcat ( buf , " " , len ) ; strlcat ( buf , argv [ n ] , len ) ; } return ( buf ) ; } 