static inline void auide_insw ( unsigned long port , void * addr , u32 count ) { _auide_hwif * ahwif = & auide_hwif ; chan_tab_t * ctp ; au1x_ddma_desc_t * dp ; if ( ! au1xxx_dbdma_put_dest ( ahwif -> rx_chan , virt_to_phys ( addr ) , count << 1 , DDMA_FLAGS_NOIE ) ) { printk ( KERN_ERR "%s failed %d\n" , __func__ , __LINE__ ) ; return ; } ctp = * ( ( chan_tab_t * * ) ahwif -> rx_chan ) ; dp = ctp -> cur_ptr ; while ( dp -> dscr_cmd0 & DSCR_CMD0_V ) { } ctp -> cur_ptr = au1xxx_ddma_get_nextptr_virt ( dp , NULL ) ; } 