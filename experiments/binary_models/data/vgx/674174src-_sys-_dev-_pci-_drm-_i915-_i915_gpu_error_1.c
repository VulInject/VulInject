static struct i915_vma_coredump * create_vma_coredump ( const struct intel_gt * gt , struct i915_vma * vma , const char * name , struct i915_vma_compress * compress ) { struct i915_vma_coredump * ret ; struct i915_vma_resource * vma_res ; bool lockdep_cookie ; if ( ! vma ) { return NULL ; } vma_res = vma -> resource ; if ( i915_vma_resource_hold ( vma_res , & lockdep_cookie ) ) { ret = i915_vma_coredump_create ( gt , vma_res , compress , name ) ; i915_vma_resource_unhold ( vma_res , lockdep_cookie ) ; } return ret ; } 