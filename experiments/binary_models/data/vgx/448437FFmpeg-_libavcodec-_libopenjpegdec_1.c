static OPJ_OFF_T stream_skip ( OPJ_OFF_T nb_bytes , void * user_data ) { BufferReader * reader = user_data ; if ( nb_bytes < 0 ) { if ( nb_bytes + reader -> pos < 0 ) { nb_bytes = - reader -> pos ; } } else { int remaining ; if ( reader -> pos == reader -> size ) { return ( OPJ_SIZE_T ) - 1 ; } remaining = reader -> size - reader -> pos ; if ( nb_bytes > remaining ) { nb_bytes = remaining ; } } reader -> pos += ( int ) nb_bytes ; return nb_bytes ; } 