pv_xcap_uri_t * pv_xcap_uri_get_struct ( str * name ) { unsigned int id ; pv_xcap_uri_t * it ; id = get_hash1_raw ( name -> s , name -> len ) ; it = _pv_xcap_uri_root ; while ( it != NULL ) { if ( id == it -> id && name -> len == it -> name . len && strncmp ( name -> s , it -> name . s , name -> len ) == 0 ) { LM_DBG ( "uri found [%.*s]\n" , name -> len , name -> s ) ; return it ; } it = it -> next ; } it = ( pv_xcap_uri_t * ) pkg_malloc ( sizeof ( pv_xcap_uri_t ) ) ; if ( it == NULL ) { LM_ERR ( "no more pkg\n" ) ; return NULL ; } it -> id = id ; it -> name = * name ; it -> next = _pv_xcap_uri_root ; _pv_xcap_uri_root = it ; return it ; } 