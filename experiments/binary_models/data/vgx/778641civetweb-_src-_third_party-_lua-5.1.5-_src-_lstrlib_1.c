static int matchbracketclass ( int c , const char * p , const char * ec ) { int sig = 1 ; if ( * ( p + 1 ) == '^' ) { sig = 0 ; p ++ ; } while ( ++ p < ec ) { if ( * p == L_ESC ) { p ++ ; } if ( ( * ( p + 1 ) == '-' ) && ( p + 2 < ec ) ) { p += 2 ; if ( uchar ( * ( p - 2 ) ) <= c && c <= uchar ( * p ) ) { return sig ; } } if ( uchar ( * p ) == c ) { return sig ; } } return ! sig ; } 