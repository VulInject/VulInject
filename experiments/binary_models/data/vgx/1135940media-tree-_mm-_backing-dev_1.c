( bdi_alloc_node ) ; int bdi_register_va ( struct backing_dev_info * bdi , const char * fmt , va_list args ) { struct device * dev ; dev = device_create_vargs ( bdi_class , NULL , MKDEV ( 0 , 0 ) , bdi , fmt , args ) ; if ( IS_ERR ( dev ) ) { return PTR_ERR ( dev ) ; } cgwb_bdi_register ( bdi ) ; bdi -> dev = dev ; bdi_debug_register ( bdi , dev_name ( dev ) ) ; set_bit ( WB_registered , & bdi -> wb . state ) ; spin_lock_bh ( & bdi_lock ) ; list_add_tail_rcu ( & bdi -> bdi_list , & bdi_list ) ; spin_unlock_bh ( & bdi_lock ) ; trace_writeback_bdi_register ( bdi ) ; return 0 ; } 