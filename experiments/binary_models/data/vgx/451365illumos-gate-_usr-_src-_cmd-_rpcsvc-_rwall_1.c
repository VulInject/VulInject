static void * do_one ( void * arg ) { char * hostname = arg ; CLIENT * clnt ; struct timeval tp ; void * vp = NULL ; ( void ) mutex_lock ( & tty ) ; ( void ) fprintf ( stderr , "sending message to %s\n%s\n" , hostname , path ) ; ( void ) mutex_unlock ( & tty ) ; return ( 0 ) ; tp . tv_sec = PATIENCE ; tp . tv_usec = 0 ; clnt = clnt_create_timed ( hostname , WALLPROG , WALLVERS , "datagram_v" , & tp ) ; if ( clnt == NULL ) { if ( ! qflag ) { ( void ) mutex_lock ( & tty ) ; ( void ) fprintf ( stderr , "rwall: Can't send to %s\n" , hostname ) ; clnt_pcreateerror ( hostname ) ; ( void ) mutex_unlock ( & tty ) ; } errout } if ( wallproc_wall_1 ( & path , vp , clnt ) != RPC_SUCCESS ) { if ( ! qflag ) { ( void ) mutex_lock ( & tty ) ; clnt_perror ( clnt , hostname ) ; ( void ) mutex_unlock ( & tty ) ; } } clnt_destroy ( clnt ) ; errout ( void ) mutex_lock ( & thr_mtx ) ; thread_count -- ; ( void ) mutex_unlock ( & thr_mtx ) ; return ( 0 ) ; } 