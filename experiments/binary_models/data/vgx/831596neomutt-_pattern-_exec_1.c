static int match_addrlist ( struct Pattern * pat , bool match_personal , int n , ... ) { va_list ap ; va_start ( ap , n ) ; while ( n -- > 0 ) { struct AddressList * al = va_arg ( ap , AddressList * ) ; struct Address * a ; TAILQ_FOREACH ( , , ) { if ( pat -> all_addr ^ ( ( ! pat -> is_alias || alias_reverse_lookup ( a ) ) && ( ( a -> mailbox && patmatch ( pat , a -> mailbox ) ) || ( match_personal && a -> personal && patmatch ( pat , a -> personal ) ) ) ) ) { va_end ( ap ) ; return ! pat -> all_addr ; } } } va_end ( ap ) ; return pat -> all_addr ; } 