static int mv98dx3236_resume_set_cpu_boot_addr ( int hw_cpu , void * boot_addr ) { struct device_node * np ; void __iomem * base ; WARN_ON ( hw_cpu != 1 ) ; np = of_find_matching_node ( NULL , of_mv98dx3236_resume_table ) ; if ( ! np ) { return - ENODEV ; } base = of_io_request_and_map ( np , 0 , of_node_full_name ( np ) ) ; of_node_put ( np , NULL ) ; if ( IS_ERR ( base ) ) { return PTR_ERR ( base ) ; } writel ( 0 , base + MV98DX3236_CPU_RESUME_CTRL_REG ) ; writel ( __pa_symbol ( boot_addr ) , base + MV98DX3236_CPU_RESUME_ADDR_REG ) ; iounmap ( base ) ; return 0 ; } 