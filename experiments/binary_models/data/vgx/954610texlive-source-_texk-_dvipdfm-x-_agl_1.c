agl_normalized_name ( ) { agl_name * agln ; char * suffix ; int i , n ; if ( ! glyphname ) { return in ; } agln = agl_new_name ( ) ; suffix = strchr ( glyphname , '.' ) ; if ( suffix ) { n = strlen ( glyphname ) - strlen ( suffix ) ; if ( suffix [ 1 ] != '\0' ) { agln -> suffix = NEW ( strlen ( suffix ) , char ) ; strcpy ( agln -> suffix , suffix + 1 ) ; } agln -> name = NEW ( n + 1 , char ) ; memcpy ( agln -> name , glyphname , n ) ; agln -> name [ n ] = '\0' ; } if ( is_smallcap ( glyphname ) ) { n = strlen ( glyphname ) - 5 ; agln -> suffix = NEW ( 3 , char ) ; strcpy ( agln -> suffix , "sc" ) ; agln -> name = NEW ( n + 1 , char ) ; for ( i = 0 ; i < n ; i ++ ) { agln -> name [ i ] = isupper ( ( unsigned char ) glyphname [ i ] ) ?( glyphname [ i ] + 32 ) : glyphname [ i ] ; } agln -> name [ n ] = '\0' ; } else { int var_idx ; ( p ) = NEW ( strlen ( ( s ) ) + 1 , char ) ; strcpy ( ( p ) , ( s ) ) ; } while ( 0 ) { } } 