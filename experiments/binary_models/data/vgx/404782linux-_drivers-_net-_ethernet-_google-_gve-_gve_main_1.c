int gve_adjust_queues ( struct gve_priv * priv , struct gve_queue_config new_rx_config , struct gve_queue_config new_tx_config ) { int err ; if ( netif_carrier_ok ( priv -> dev ) ) { err = gve_close ( priv -> dev ) ; if ( err ) { return err ; } priv -> tx_cfg = new_tx_config ; priv -> rx_cfg = new_rx_config ; err = gve_open ( priv -> dev ) ; if ( err ) { err } return 0 ; } priv -> tx_cfg = new_tx_config ; priv -> rx_cfg = new_rx_config ; return 0 ; err netif_err ( priv , drv , priv -> dev , "Adjust queues failed! !!! DISABLING ALL QUEUES !!!\n" ) ; gve_turndown ( priv , NULL ) ; return err ; } 