static int bcsp_close ( struct hci_uart * hu ) { struct bcsp_struct * bcsp = hu -> priv ; timer_shutdown_sync ( & bcsp -> tbcsp ) ; hu -> priv = NULL ; BT_DBG ( "hu %p" , hu ) ; skb_queue_purge ( & bcsp -> unack ) ; skb_queue_purge ( & bcsp -> rel ) ; skb_queue_purge ( & bcsp -> unrel ) ; if ( bcsp -> rx_skb ) { kfree_skb ( bcsp -> rx_skb ) ; bcsp -> rx_skb = NULL ; } return 0 ; } 