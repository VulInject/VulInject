static void set_dcd_rst_v2 ( struct imx_header * imxhdr , uint32_t dcd_len , char * name , int lineno ) { if ( ! imxhdr -> header . hdr_v2 . boot_data . plugin ) { dcd_v2_t * dcd_v2 = & imxhdr -> header . hdr_v2 . data . dcd_table ; struct dcd_v2_cmd * d = gd_last_cmd ; int len ; if ( ! d ) { d = & dcd_v2 -> dcd_cmd ; } len = be16_to_cpu ( d -> write_dcd_command . length ) ; if ( len > 4 ) { d = ( dcd_v2_cmd * ) ( ( ( char * ) d ) + len ) ; } len = ( char * ) d - ( char * ) & dcd_v2 -> header ; dcd_v2 -> header . tag = DCD_HEADER_TAG ; dcd_v2 -> header . length = cpu_to_be16 ( len , NULL ) ; dcd_v2 -> header . version = DCD_VERSION ; } } 