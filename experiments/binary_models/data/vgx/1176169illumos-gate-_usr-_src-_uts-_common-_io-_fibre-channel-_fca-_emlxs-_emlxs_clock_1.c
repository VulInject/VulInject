static void emlxs_timer_check_clean_address ( emlxs_port_t * port ) { emlxs_hba_t * hba = HBA ; emlxs_buf_t * sbp ; port -> clean_address_timer = 0 ; sbp = port -> clean_address_sbp ; if ( ! sbp ) { return ; } port -> clean_address_sbp = 0 ; EMLXS_MSGF ( EMLXS_CONTEXT , & emlxs_els_completion_msg , "Clean Address timeout: sid=%x prev=%x RATOV %d" , port -> did , port -> prev_did , hba -> fc_ratov ) ; if ( EMLXS_SLI_REG_DID ( port , FABRIC_DID , & port -> fabric_sparam , sbp , NULL , NULL ) == 0 ) { return ; } emlxs_pkt_complete ( sbp , IOSTAT_LOCAL_REJECT , IOERR_NO_RESOURCES , 1 ) ; return ; } 