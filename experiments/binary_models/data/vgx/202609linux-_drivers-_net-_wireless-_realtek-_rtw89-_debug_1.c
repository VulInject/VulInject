static int rtw89_debug_mac_dbg_port_dump ( struct rtw89_dev * rtwdev , struct seq_file * m , u32 sel ) { const struct rtw89_mac_dbg_port_info * info ; u8 val8 ; u16 val16 ; u32 val32 ; u32 i ; info = rtw89_debug_mac_dbg_port_sel ( m , rtwdev , sel ) ; if ( ! info ) { rtw89_err ( rtwdev , "failed to select debug port %d\n" , sel ) ; return - EINVAL ; } case RTW89_DBG_PORT_SEL_ # # __sel : seq_puts ( m , "Dump debug port " # __sel ":\n" ) ; break ; sel { case_DBG_SEL ( PTCL_C0 ) ; case_DBG_SEL ( PTCL_C1 , NULL ) ; case_DBG_SEL ( SCH_C0 ) ; case_DBG_SEL ( SCH_C1 ) ; case_DBG_SEL ( TMAC_C0 ) ; case_DBG_SEL ( TMAC_C1 ) ; case_DBG_SEL ( RMAC_C0 ) ; case_DBG_SEL ( RMAC_C1 ) ; case_DBG_SEL ( RMACST_C0 ) ; case_DBG_SEL ( RMACST_C1 ) ; case_DBG_SEL ( TRXPTCL_C0 ) ; case_DBG_SEL ( TRXPTCL_C1 ) ; case_DBG_SEL ( TX_INFOL_C0 ) ; case_DBG_SEL ( TX_INFOH_C0 ) ; case_DBG_SEL ( TX_INFOL_C1 ) ; case_DBG_SEL ( TX_INFOH_C1 ) ; case_DBG_SEL ( TXTF_INFOL_C0 ) ; case_DBG_SEL ( TXTF_INFOH_C0 ) ; case_DBG_SEL ( TXTF_INFOL_C1 ) ; case_DBG_SEL ( TXTF_INFOH_C1 ) ; case_DBG_SEL ( WDE_BUFMGN_FREEPG ) ; case_DBG_SEL ( WDE_BUFMGN_QUOTA ) ; case_DBG_SEL ( WDE_BUFMGN_PAGELLT ) ; case_DBG_SEL ( WDE_BUFMGN_PKTINFO ) ; case_DBG_SEL ( WDE_QUEMGN_PREPKT ) ; case_DBG_SEL ( WDE_QUEMGN_NXTPKT ) ; case_DBG_SEL ( WDE_QUEMGN_QLNKTBL ) ; case_DBG_SEL ( WDE_QUEMGN_QEMPTY ) ; case_DBG_SEL ( PLE_BUFMGN_FREEPG ) ; case_DBG_SEL ( PLE_BUFMGN_QUOTA ) ; case_DBG_SEL ( PLE_BUFMGN_PAGELLT ) ; case_DBG_SEL ( PLE_BUFMGN_PKTINFO ) ; case_DBG_SEL ( PLE_QUEMGN_PREPKT ) ; case_DBG_SEL ( PLE_QUEMGN_NXTPKT ) ; case_DBG_SEL ( PLE_QUEMGN_QLNKTBL ) ; case_DBG_SEL ( PLE_QUEMGN_QEMPTY ) ; case_DBG_SEL ( PKTINFO ) ; case_DBG_SEL ( DSPT_HDT_TX0 ) ; case_DBG_SEL ( DSPT_HDT_TX1 ) ; case_DBG_SEL ( DSPT_HDT_TX2 ) ; case_DBG_SEL ( DSPT_HDT_TX3 ) ; case_DBG_SEL ( DSPT_HDT_TX4 ) ; case_DBG_SEL ( DSPT_HDT_TX5 ) ; case_DBG_SEL ( DSPT_HDT_TX6 ) ; case_DBG_SEL ( DSPT_HDT_TX7 ) ; case_DBG_SEL ( DSPT_HDT_TX8 ) ; case_DBG_SEL ( DSPT_HDT_TX9 ) ; case_DBG_SEL ( DSPT_HDT_TXA ) ; case_DBG_SEL ( DSPT_HDT_TXB ) ; case_DBG_SEL ( DSPT_HDT_TXC ) ; case_DBG_SEL ( DSPT_HDT_TXD ) ; case_DBG_SEL ( DSPT_HDT_TXE ) ; case_DBG_SEL ( DSPT_HDT_TXF ) ; case_DBG_SEL ( DSPT_CDT_TX0 ) ; case_DBG_SEL ( DSPT_CDT_TX1 ) ; case_DBG_SEL ( DSPT_CDT_TX3 ) ; case_DBG_SEL ( DSPT_CDT_TX4 ) ; case_DBG_SEL ( DSPT_CDT_TX5 ) ; case_DBG_SEL ( DSPT_CDT_TX6 ) ; case_DBG_SEL ( DSPT_CDT_TX7 ) ; case_DBG_SEL ( DSPT_CDT_TX8 ) ; case_DBG_SEL ( DSPT_CDT_TX9 ) ; case_DBG_SEL ( DSPT_CDT_TXA ) ; case_DBG_SEL ( DSPT_CDT_TXB ) ; case_DBG_SEL ( DSPT_CDT_TXC ) ; case_DBG_SEL ( DSPT_HDT_RX0 ) ; case_DBG_SEL ( DSPT_HDT_RX1 ) ; case_DBG_SEL ( DSPT_HDT_RX2 ) ; case_DBG_SEL ( DSPT_HDT_RX3 ) ; case_DBG_SEL ( DSPT_HDT_RX4 ) ; case_DBG_SEL ( DSPT_HDT_RX5 ) ; case_DBG_SEL ( DSPT_CDT_RX_P0 ) ; case_DBG_SEL ( DSPT_CDT_RX_P0_0 ) ; case_DBG_SEL ( DSPT_CDT_RX_P0_1 ) ; case_DBG_SEL ( DSPT_CDT_RX_P0_2 ) ; case_DBG_SEL ( DSPT_CDT_RX_P1 ) ; case_DBG_SEL ( DSPT_STF_CTRL ) ; case_DBG_SEL ( DSPT_ADDR_CTRL ) ; case_DBG_SEL ( DSPT_WDE_INTF ) ; case_DBG_SEL ( DSPT_PLE_INTF ) ; case_DBG_SEL ( DSPT_FLOW_CTRL ) ; case_DBG_SEL ( PCIE_TXDMA ) ; case_DBG_SEL ( PCIE_RXDMA ) ; case_DBG_SEL ( PCIE_CVT ) ; case_DBG_SEL ( PCIE_CXPL ) ; case_DBG_SEL ( PCIE_IO ) ; case_DBG_SEL ( PCIE_MISC ) ; case_DBG_SEL ( PCIE_MISC2 ) ; } } , , info sel_addr seq_printf ( m , "Read addr = 0x%X\n" , info -> rd_addr ) ; for ( i = info -> srt ; i <= info -> end ; i ++ ) { switch ( info -> sel_byte ) { case 1 : default : rtw89_write8_mask ( rtwdev , info -> sel_addr , info -> sel_msk , i ) ; seq_printf ( m , "0x%02X: " , i ) ; break ; case 2 : rtw89_write16_mask ( rtwdev , info -> sel_addr , info -> sel_msk , i ) ; seq_printf ( m , "0x%04X: " , i ) ; break ; case 4 : rtw89_write32_mask ( rtwdev , info -> sel_addr , info -> sel_msk , i ) ; seq_printf ( m , "0x%04X: " , i ) ; break ; } udelay ( 10 ) ; switch ( info -> rd_byte ) { case 1 : default : val8 = rtw89_read8_mask ( rtwdev , info -> rd_addr , info -> rd_msk ) ; seq_printf ( m , "0x%02X\n" , val8 ) ; break ; case 2 : val16 = rtw89_read16_mask ( rtwdev , info -> rd_addr , info -> rd_msk ) ; seq_printf ( m , "0x%04X\n" , val16 ) ; break ; case 4 : val32 = rtw89_read32_mask ( rtwdev , info -> rd_addr , info -> rd_msk ) ; seq_printf ( m , "0x%08X\n" , val32 ) ; break ; } } return 0 ; 