int _init ( void ) { int error ; if ( ( error = ddi_soft_state_init ( & acpinex_softstates , sizeof ( acpinex_softstate_t ) , 8 ) ) != 0 ) { cmn_err ( CE_WARN , "acpinex: failed to initialize soft state structure." ) ; return ( error ) ; } acpinex_event_init ( ) ; if ( ( error = mod_install ( & modlinkage ) ) != 0 ) { cmn_err ( CE_WARN , "acpinex: failed to install module." ) ; ddi_soft_state_fini ( & acpinex_softstates ) ; return ( error ) ; } mutex_init ( & acpinex_lock , MUTEX_DRIVER , NULL ) ; return ( 0 ) ; } 