void log_resource_usage ( gboolean reset_delta , const char * format , ... ) { va_list ap ; GString * log_str = g_string_new ( "" ) ; double user_time ; int sys_time ; get_resource_usage ( & user_time , & sys_time ) ; if ( reset_delta || last_user_time == 0.0 ) { last_user_time = user_time ; last_sys_time = sys_time ; } g_string_append_printf ( log_str , "user %.3f +%.3f sys %.3f +%.3f " , user_time , user_time - last_user_time , sys_time , sys_time - last_sys_time ) ; va_start ( ap , format ) ; g_string_append_vprintf ( log_str , format , ap ) ; va_end ( ap ) ; ws_warning ( "%s" , log_str -> str ) ; g_string_free ( log_str , TRUE ) ; } 