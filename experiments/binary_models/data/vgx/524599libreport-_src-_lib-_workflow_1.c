GHashTable * libreport_load_workflow_config_data ( const char * path ) { g_workflow_list = g_hash_table_new_full ( g_str_hash , g_str_equal , g_free , ( GDestroyNotify ) free_workflow ) ; if ( path == NULL ) { path = WORKFLOWS_DIR ; } GList * workflow_files = libreport_get_file_list ( path , "xml" ) ; while ( workflow_files ) { file_obj_t * file = ( file_obj_t * ) workflow_files -> data ; workflow_t * workflow = get_workflow ( file -> filename ) ; bool nw_workflow = ( ! workflow ) ; if ( nw_workflow ) { workflow = new_workflow ( file -> filename ) ; } load_workflow_description_from_file ( workflow , file -> fullpath ) ; if ( nw_workflow ) { g_hash_table_replace ( g_workflow_list , g_strdup ( wf_get_name ( workflow ) ) , workflow ) ; } libreport_free_file_obj ( file ) ; workflow_files = g_list_delete_link ( workflow_files , workflow_files ) ; } return g_workflow_list ; } 