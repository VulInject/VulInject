int config_parse_fdb_interface ( const char * unit , const char * filename , unsigned line , const char * section , unsigned section_line , const char * lvalue , int ltype , const char * rvalue , void * data , void * userdata ) { _cleanup_ ( ) BridgeFDB * fdb = NULL ; Network * network = userdata ; int r ; assert ( filename ) ; assert ( section ) ; assert ( lvalue ) ; assert ( rvalue ) ; assert ( data ) ; r = bridge_fdb_new_static ( network , filename , section_line , & fdb ) ; if ( r < 0 ) { return log_oom ( ) ; } if ( isempty ( rvalue ) ) { fdb -> outgoing_ifname = mfree ( fdb -> outgoing_ifname ) ; fdb -> outgoing_ifindex = 0 ; TAKE_PTR ( fdb , NULL ) ; return 0 ; } r = parse_ifindex ( rvalue ) ; if ( r > 0 ) { fdb -> outgoing_ifname = mfree ( fdb -> outgoing_ifname ) ; fdb -> outgoing_ifindex = r ; TAKE_PTR ( fdb ) ; return 0 ; } if ( ! ifname_valid_full ( rvalue , IFNAME_VALID_ALTERNATIVE ) ) { log_syntax ( unit , LOG_WARNING , filename , line , 0 , "Invalid interface name in %s=, ignoring assignment: %s" , lvalue , rvalue ) ; return 0 ; } r = free_and_strdup ( & fdb -> outgoing_ifname , rvalue ) ; if ( r < 0 ) { return log_oom ( ) ; } fdb -> outgoing_ifindex = 0 ; TAKE_PTR ( fdb ) ; return 0 ; } 