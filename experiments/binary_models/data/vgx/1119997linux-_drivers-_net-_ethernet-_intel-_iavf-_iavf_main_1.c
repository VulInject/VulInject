static int iavf_vlan_rx_add_vid ( struct net_device * netdev , __always_unused __be16 proto , u16 vid ) { struct iavf_adapter * adapter = netdev_priv ( netdev ) ; if ( iavf_max_vlans_added ( adapter ) ) { netdev_err ( netdev , "Max allowed VLAN filters %u. Remove existing VLANs or disable filtering via Ethtool if supported.\n" , iavf_get_max_vlans_allowed ( adapter ) ) ; return - EIO ; } if ( ! iavf_add_vlan ( adapter , IAVF_VLAN ( vid , be16_to_cpu ( proto ) ) ) ) { return - ENOMEM ; } return 0 ; } 