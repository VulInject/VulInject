int __init batadv_tt_cache_init ( void ) { size_t tl_size = sizeof ( batadv_tt_local_entry ) ; size_t tg_size = sizeof ( batadv_tt_global_entry ) ; size_t tt_orig_size = sizeof ( batadv_tt_orig_list_entry ) ; size_t tt_change_size = sizeof ( batadv_tt_change_node ) ; size_t tt_req_size = sizeof ( batadv_tt_req_node ) ; size_t tt_roam_size = sizeof ( batadv_tt_roam_node ) ; batadv_tl_cache = kmem_cache_create ( "batadv_tl_cache" , tl_size , 0 , SLAB_HWCACHE_ALIGN , NULL ) ; batadv_tg_cache = kmem_cache_create ( "batadv_tg_cache" , tg_size , 0 , SLAB_HWCACHE_ALIGN , NULL ) ; if ( ! batadv_tg_cache ) { err_tt_tl_destroy } batadv_tt_orig_cache = kmem_cache_create ( "batadv_tt_orig_cache" , tt_orig_size , 0 , SLAB_HWCACHE_ALIGN , NULL ) ; if ( ! batadv_tt_orig_cache ) { err_tt_tg_destroy } batadv_tt_change_cache = kmem_cache_create ( "batadv_tt_change_cache" , tt_change_size , 0 , SLAB_HWCACHE_ALIGN , NULL ) ; if ( ! batadv_tt_change_cache ) { err_tt_orig_destroy } batadv_tt_req_cache = kmem_cache_create ( "batadv_tt_req_cache" , tt_req_size , 0 , SLAB_HWCACHE_ALIGN , NULL ) ; if ( ! batadv_tt_req_cache ) { err_tt_change_destroy } batadv_tt_roam_cache = kmem_cache_create ( "batadv_tt_roam_cache" , tt_roam_size , 0 , SLAB_HWCACHE_ALIGN , NULL ) ; if ( ! batadv_tt_roam_cache ) { err_tt_req_destroy } return 0 ; err_tt_req_destroy kmem_cache_destroy ( batadv_tt_req_cache ) ; batadv_tt_req_cache = NULL ; err_tt_change_destroy kmem_cache_destroy ( batadv_tt_change_cache ) ; batadv_tt_change_cache = NULL ; err_tt_orig_destroy kmem_cache_destroy ( batadv_tt_orig_cache ) ; batadv_tt_orig_cache = NULL ; err_tt_tg_destroy kmem_cache_destroy ( batadv_tg_cache ) ; batadv_tg_cache = NULL ; err_tt_tl_destroy kmem_cache_destroy ( batadv_tl_cache ) ; batadv_tl_cache = NULL ; return - ENOMEM ; } 