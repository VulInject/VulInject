EXPORTED int gzuc_member_end ( struct gzuncat * gz , off_t * offset ) { int r = 0 ; if ( gz -> file_eof ) { done } if ( gz -> current_offset >= 0 ) { char discard [ 16 * 1024 ] ; while ( ( r = gzuc_read ( gz , discard , sizeof ( discard ) ) ) > 0 ) { } if ( gz -> file_eof ) { done } if ( r < 0 ) { done } } gz -> next_offset = lseek ( gz -> fd , 0 , SEEK_CUR ) ; done inflateEnd ( & gz -> strm ) ; gz -> current_offset = - 1 ; gz -> member_eof = - 1 ; gz -> bytes_read = 0 ; if ( ! r && offset ) { * offset = gz -> next_offset ; } return r ; } 