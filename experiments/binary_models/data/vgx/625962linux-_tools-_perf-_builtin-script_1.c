static int evsel__do_check_stype ( struct evsel * evsel , u64 sample_type , const char * sample_msg , enum perf_output_field field , bool allow_user_set ) { struct perf_event_attr * attr = & evsel -> core . attr ; int type = output_type ( attr -> type ) ; const char * evname ; if ( attr -> sample_type & sample_type ) { return 0 ; } if ( output [ type ] . user_set_fields & field ) { if ( allow_user_set ) { return 0 ; } evname = evsel__name ( evsel , NULL ) ; pr_err ( "Samples for '%s' event do not have %s attribute set. " "Cannot print '%s' field.\n" , evname , sample_msg , output_field2str ( field ) ) ; return - 1 ; } output [ type ] . fields &= ~ field ; evname = evsel__name ( evsel ) ; pr_debug ( "Samples for '%s' event do not have %s attribute set. " "Skipping '%s' field.\n" , evname , sample_msg , output_field2str ( field ) ) ; return 0 ; } 