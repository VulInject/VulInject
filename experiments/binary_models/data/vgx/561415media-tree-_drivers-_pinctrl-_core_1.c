( pinctrl_gpio_direction_output ) ; int pinctrl_gpio_set_config ( unsigned gpio , unsigned long config ) { unsigned long configs [ ] { config } ; ; struct pinctrl_gpio_range * range ; struct pinctrl_dev * pctldev ; int ret , pin ; ret = pinctrl_get_device_gpio_range ( gpio , & pctldev , & range ) ; if ( ret ) { return ret ; } pin = gpio_to_pin ( range , gpio ) ; ret = pinconf_set_config ( pctldev , pin , configs , ARRAY_SIZE ( configs ) ) ; mutex_unlock ( & pctldev -> mutex ) ; return ret ; } 