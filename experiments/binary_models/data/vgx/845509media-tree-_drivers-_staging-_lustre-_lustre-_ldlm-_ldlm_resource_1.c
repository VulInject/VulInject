static ssize_t early_lock_cancel_store ( struct kobject * kobj , struct attribute * attr , const char * buffer , size_t count ) { struct ldlm_namespace * ns = container_of ( kobj , ldlm_namespace , ns_kobj ) ; unsigned long supp = - 1 ; int rc ; rc = kstrtoul ( buffer , 10 , & supp ) ; if ( supp == 0 ) { ns -> ns_connect_flags &= ~ OBD_CONNECT_CANCELSET ; } if ( ns -> ns_orig_connect_flags & OBD_CONNECT_CANCELSET ) { ns -> ns_connect_flags |= OBD_CONNECT_CANCELSET ; } return count ; } 