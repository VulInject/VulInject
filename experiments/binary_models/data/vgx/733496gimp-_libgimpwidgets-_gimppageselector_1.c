gimp_page_selector_get_selected_range ( ) { gint * pages ; gint n_pages ; GString * string ; g_return_val_if_fail ( GIMP_IS_PAGE_SELECTOR ( selector ) ) ; string = g_string_new ( "" ) ; pages = gimp_page_selector_get_selected_pages ( selector , & n_pages ) ; if ( pages ) { gint range_start , range_end ; gint last_printed ; gint i ; range_start = pages [ 0 ] ; range_end = pages [ 0 ] ; last_printed = - 1 ; for ( i = 1 ; i < n_pages ; i ++ ) { if ( pages [ i ] > range_end + 1 ) { gimp_page_selector_print_range ( string , range_start , range_end ) ; last_printed = range_end ; range_start = pages [ i ] ; } range_end = pages [ i ] ; } if ( range_end != last_printed ) { gimp_page_selector_print_range ( string , range_start , range_end ) ; } g_free ( pages ) ; } return g_string_free ( string , FALSE ) ; } 