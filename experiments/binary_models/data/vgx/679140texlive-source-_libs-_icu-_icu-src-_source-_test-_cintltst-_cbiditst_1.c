static void doTests ( UBiDi * pBiDi , UBiDi * pLine , UBool countRunsFirst ) { int testNumber ; UChar string [ MAXLEN ] ; UErrorCode errorCode ; int lineStart ; UBiDiLevel paraLevel ; for ( testNumber = 0 ; testNumber < bidiTestCount ; ++ testNumber ) { errorCode = U_ZERO_ERROR ; getStringFromDirProps ( tests [ testNumber ] . text , tests [ testNumber ] . length , string ) ; paraLevel = tests [ testNumber ] . paraLevel ; ubidi_setPara ( pBiDi , string , - 1 , paraLevel , NULL , & errorCode ) ; if ( U_SUCCESS ( errorCode ) ) { log_verbose ( "ubidi_setPara(tests[%d], paraLevel %d) ok, direction %d paraLevel=%d\n" , testNumber , paraLevel , ubidi_getDirection ( pBiDi ) , paraLevel ) ; lineStart = tests [ testNumber ] . lineStart ; if ( lineStart == - 1 ) { doTest ( pBiDi , testNumber , tests + testNumber , 0 , countRunsFirst ) ; } else { ubidi_setLine ( pBiDi , lineStart , tests [ testNumber ] . lineLimit , pLine , & errorCode ) ; if ( U_SUCCESS ( errorCode ) ) { log_verbose ( "ubidi_setLine(%d, %d) ok, direction %d paraLevel=%d\n" , lineStart , tests [ testNumber ] . lineLimit , ubidi_getDirection ( pLine ) , ubidi_getParaLevel ( pLine ) ) ; doTest ( pLine , testNumber , tests + testNumber , lineStart , countRunsFirst ) ; } else { log_err ( "ubidi_setLine(tests[%d], %d, %d) failed with errorCode %s\n" , testNumber , lineStart , tests [ testNumber ] . lineLimit , myErrorName ( errorCode ) ) ; } } } else { log_err ( "ubidi_setPara(tests[%d], paraLevel %d) failed with errorCode %s\n" , testNumber , paraLevel , myErrorName ( errorCode ) ) ; } } } 