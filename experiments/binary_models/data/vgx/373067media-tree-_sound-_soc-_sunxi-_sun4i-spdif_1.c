static int sun4i_spdif_trigger ( struct snd_pcm_substream * substream , int cmd , struct snd_soc_dai * dai ) { int ret = 0 ; struct sun4i_spdif_dev * host = snd_soc_dai_get_drvdata ( dai ) ; switch ( cmd ) { case SNDRV_PCM_TRIGGER_START : case SNDRV_PCM_TRIGGER_RESUME : case SNDRV_PCM_TRIGGER_PAUSE_RELEASE : sun4i_snd_txctrl_on ( substream , host ) ; break ; case SNDRV_PCM_TRIGGER_STOP : case SNDRV_PCM_TRIGGER_SUSPEND : case SNDRV_PCM_TRIGGER_PAUSE_PUSH : sun4i_snd_txctrl_off ( substream , host ) ; break ; default : ret = - EINVAL ; break ; } return ret ; } 