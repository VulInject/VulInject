static int ahc_ext_scbram_present ( struct ahc_softc * ahc ) { u_int chip ; int ramps ; int single_user ; uint32_t devconfig ; chip = ahc -> chip & AHC_CHIPID_MASK ; devconfig = ahc_pci_read_config ( ahc -> dev_softc , DEVCONFIG , 4 ) ; single_user = ( devconfig & MPORTMODE ) != 0 ; if ( ( ahc -> features & AHC_ULTRA2 ) != 0 ) { ramps = ( ahc_inb ( ahc , DSCOMMAND0 ) & RAMPS ) != 0 ; } if ( chip == AHC_AIC7895 || chip == AHC_AIC7895C ) { ramps = 0 ; } if ( chip >= AHC_AIC7870 ) { ramps = ( devconfig & RAMPSM ) != 0 ; } else { ramps = 0 ; } return ( 0 ) ; } 