static int udevInterfaceIsActive ( virInterfacePtr ifinfo ) { struct udev * udev = udev_ref ( driver -> udev ) ; struct udev_device * dev ; g_autoptr ( ) def = NULL ; int status = - 1 ; dev = udev_device_new_from_subsystem_sysname ( udev , "net" , ifinfo -> name ) ; if ( ! dev ) { virReportError ( VIR_ERR_NO_INTERFACE , _ ( "couldn't find interface named '%s'" ) , ifinfo -> name ) ; cleanup } if ( ! ( def = udevGetMinimalDefForDevice ( dev ) ) ) { cleanup } if ( virInterfaceIsActiveEnsureACL ( ifinfo -> conn , def ) < 0 ) { cleanup } status = STREQ ( udev_device_get_sysattr_value ( dev , "operstate" ) , "up" ) ; udev_device_unref ( dev ) ; cleanup return status ; } 