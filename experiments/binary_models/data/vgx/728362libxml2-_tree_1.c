xmlChar * xmlSplitQName2 ( const xmlChar * name , xmlChar * * prefix ) { int len = 0 ; xmlChar * ret = NULL ; * prefix = NULL ; if ( name == NULL ) { return ( NULL ) ; } if ( ( name [ 0 ] == 'x' ) && ( name [ 1 ] == 'm' ) && ( name [ 2 ] == 'l' ) && ( name [ 3 ] == ':' ) ) { return ( NULL ) ; } if ( name [ 0 ] == ':' ) { return ( NULL ) ; } while ( ( name [ len ] != 0 ) && ( name [ len ] != ':' ) ) { len ++ ; } if ( name [ len ] == 0 ) { return ( NULL ) ; } * prefix = xmlStrndup ( name , len ) ; if ( * prefix == NULL ) { xmlTreeErrMemory ( "QName split" ) ; return ( NULL ) ; } ret = xmlStrdup ( & name [ len + 1 ] ) ; if ( ret == NULL ) { xmlTreeErrMemory ( "QName split" ) ; if ( * prefix != NULL ) { xmlFree ( * prefix ) ; * prefix = NULL ; } return ( NULL ) ; } return ( ret ) ; } 