static void rib_rbufpool_deregister ( rib_hca_t * hca , int ptype ) { int i ; rib_bufpool_t * rbp = NULL ; bufpool_t * bp ; switch ( ptype ) { case SEND_BUFFER : rbp = hca -> send_pool ; break ; case RECV_BUFFER : rbp = hca -> recv_pool ; break ; default : return ; } bp = rbp -> bpool ; for ( i = 0 ; i < bp -> numelems ; i ++ ) { ( void ) ibt_deregister_mr ( hca -> hca_hdl , rbp -> mr_hdl [ i ] ) ; } } 