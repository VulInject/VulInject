static int rza1_irqc_alloc ( struct irq_domain * domain , unsigned int virq , unsigned int nr_irqs , void * arg ) { struct rza1_irqc_priv * priv = domain -> host_data ; struct irq_fwspec * fwspec = arg ; unsigned int hwirq = fwspec -> param [ 0 ] ; struct irq_fwspec spec ; int i ; int ret ; ret = irq_domain_set_hwirq_and_chip ( domain , virq , hwirq , & priv -> chip , priv ) ; if ( ret ) { return ret ; } spec . fwnode = & priv -> dev -> of_node -> fwnode ; spec . param_count = priv -> map [ hwirq ] . args_count ; for ( i = 0 ; i < spec . param_count ; i ++ ) { spec . param [ i ] = priv -> map [ hwirq ] . args [ i ] ; } return irq_domain_alloc_irqs_parent ( domain , virq , nr_irqs , & spec ) ; } 