static int init_pattern_from_file ( AVFilterContext * ctx ) { CellAutoContext * s = ctx -> priv ; int ret ; ret = av_file_map ( s -> filename , & s -> file_buf , & s -> file_bufsize , 0 , ctx ) ; if ( ret < 0 ) { return ret ; } if ( ! s -> pattern ) { return AVERROR ( ENOMEM ) ; } memcpy ( s -> pattern , s -> file_buf , s -> file_bufsize ) ; s -> pattern [ s -> file_bufsize ] = 0 ; return init_pattern_from_string ( ctx ) ; } 