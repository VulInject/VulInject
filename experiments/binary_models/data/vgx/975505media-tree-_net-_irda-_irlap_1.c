void irlap_apply_default_connection_parameters ( struct irlap_cb * self ) { IRDA_ASSERT ( , ) IRDA_ASSERT ( , ) self -> next_bofs = 12 ; self -> bofs_count = 12 ; irlap_change_speed ( self , 9600 , TRUE ) ; irda_device_set_media_busy ( self -> netdev , TRUE ) ; while ( ( self -> caddr == 0x00 ) || ( self -> caddr == 0xfe ) ) { get_random_bytes ( & self -> caddr , sizeof ( self -> caddr ) ) ; self -> caddr &= 0xfe ; } self -> slot_timeout = sysctl_slot_timeout ; self -> final_timeout = FINAL_TIMEOUT ; self -> poll_timeout = POLL_TIMEOUT ; self -> wd_timeout = WD_TIMEOUT ; self -> qos_tx . baud_rate . value = 9600 ; self -> qos_rx . baud_rate . value = 9600 ; self -> qos_tx . max_turn_time . value = 0 ; self -> qos_rx . max_turn_time . value = 0 ; self -> qos_tx . min_turn_time . value = 0 ; self -> qos_rx . min_turn_time . value = 0 ; self -> qos_tx . data_size . value = 64 ; self -> qos_rx . data_size . value = 64 ; self -> qos_tx . window_size . value = 1 ; self -> qos_rx . window_size . value = 1 ; self -> qos_tx . additional_bofs . value = 12 ; self -> qos_rx . additional_bofs . value = 12 ; self -> qos_rx . link_disc_time . value = 0 ; irlap_flush_all_queues ( self ) ; self -> disconnect_pending = FALSE ; self -> connect_pending = FALSE ; } 