start_subfile ( , ) { struct subfile * subfile ; for ( subfile = subfiles ; subfile ; subfile = subfile -> next ) { if ( FILENAME_CMP ( subfile -> name , name ) == 0 ) { current_subfile = subfile ; return ; } } subfile = ( subfile * ) xmalloc ( sizeof ( subfile ) ) ; subfile -> next = subfiles ; subfiles = subfile ; current_subfile = subfile ; subfile -> name = ( name == NULL ) ?NULL : savestring ( name , strlen ( name ) ) ; subfile -> dirname = ( dirname == NULL ) ?NULL : savestring ( dirname , strlen ( dirname ) ) ; subfile -> line_vector = NULL ; subfile -> language = deduce_language_from_filename ( subfile -> name ) ; if ( subfile -> language == language_unknown && subfile -> next != NULL ) { subfile -> language = subfile -> next -> language ; } subfile -> debugformat = NULL ; if ( subfile -> name ) { struct subfile * s ; enum language sublang = deduce_language_from_filename ( subfile -> name ) ; if ( sublang == language_cplus || sublang == language_fortran ) { for ( s = subfiles ; s != NULL ; s = s -> next ) { if ( s -> language == language_c ) { s -> language = sublang ; } } } } if ( subfile -> language == language_c && subfile -> next != NULL && ( subfile -> next -> language == language_cplus || subfile -> next -> language == language_fortran ) ) { subfile -> language = subfile -> next -> language ; } } 