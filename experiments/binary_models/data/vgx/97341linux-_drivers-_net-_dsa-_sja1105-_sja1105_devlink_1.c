static int sja1105_region_static_config_snapshot ( struct devlink * dl , const struct devlink_region_ops * ops , struct netlink_ext_ack * extack , u8 * * data ) { struct dsa_switch * ds = dsa_devlink_to_ds ( dl ) ; struct sja1105_private * priv = ds -> priv ; size_t max_len , len ; len = sja1105_static_config_get_length ( & priv -> static_config ) ; max_len = sja1105_static_config_get_max_size ( priv ) ; * data = kcalloc ( max_len , sizeof ( u8 ) , GFP_KERNEL ) ; return static_config_buf_prepare_for_upload ( priv , * data , len ) ; } 