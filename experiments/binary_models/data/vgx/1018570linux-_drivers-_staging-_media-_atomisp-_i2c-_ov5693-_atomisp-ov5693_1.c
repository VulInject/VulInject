static int ov5693_detect ( struct i2c_client * client ) { struct i2c_adapter * adapter = client -> adapter ; u16 high , low ; int ret ; u16 id ; u8 revision ; ret = ov5693_read_reg ( client , OV5693_8BIT , OV5693_SC_CMMN_CHIP_ID_H , & high ) ; if ( ret ) { dev_err ( & client -> dev , "sensor_id_high = 0x%x\n" , high ) ; return - ENODEV ; } ret = ov5693_read_reg ( client , OV5693_8BIT , OV5693_SC_CMMN_CHIP_ID_L , & low ) ; if ( ret ) { return ret ; } id = ( ( ( ( u16 ) high ) << 8 ) | ( u16 ) low ) ; if ( id != OV5693_ID ) { dev_err ( & client -> dev , "sensor ID error 0x%x\n" , id ) ; return - ENODEV ; } ret = ov5693_read_reg ( client , OV5693_8BIT , OV5693_SC_CMMN_SUB_ID , & high ) ; revision = ( u8 ) high & 0x0f ; dev_dbg ( & client -> dev , "sensor_revision = 0x%x\n" , revision ) ; dev_dbg ( & client -> dev , "detect ov5693 success\n" ) ; return 0 ; } 