static int datadm_parse_devname ( char * str , datadm_sp_entry_t * sp_entry ) { int len , dlen , i , j = 0 ; char * drv_name = DATADM_DRV_NAME ; len = strlen ( str ) ; dlen = strlen ( drv_name ) ; for ( i = 0 ; i < len ; i ++ ) { if ( isspace ( str [ i ] ) && j == 0 ) { continue ; } else { if ( str [ i ] == drv_name [ j ] ) { j ++ ; if ( j == dlen ) { break ; } else { continue ; } } else { break ; } } } i ++ ; for ( ; i < len ; i ++ ) { if ( ! isspace ( str [ i ] ) ) { break ; } } if ( i >= len || str [ i ] != '=' ) { return ( - 1 ) ; } i ++ ; if ( i >= len ) { return ( - 1 ) ; } return ( datadm_parse_nonnull_str ( str + i , & sp_entry -> spe_devname ) ) ; } 