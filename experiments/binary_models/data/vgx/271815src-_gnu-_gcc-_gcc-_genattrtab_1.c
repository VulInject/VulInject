find_attr ( , ) { struct attr_desc * attr ; int index ; const char * name = * name_p ; if ( name == alternative_name ) { return NULL ; } index = name [ 0 ] & ( MAX_ATTRS_INDEX - 1 ) ; for ( attr = attrs [ index ] ; attr ; attr = attr -> next ) { if ( name == attr -> name ) { return attr ; } } for ( attr = attrs [ index ] ; attr ; attr = attr -> next ) { if ( name [ 0 ] == attr -> name [ 0 ] && ! strcmp ( name , attr -> name ) ) { * name_p = attr -> name ; return attr ; } } if ( ! create ) { return in ; } attr = oballoc ( sizeof ( attr_desc ) ) ; attr -> name = DEF_ATTR_STRING ( name ) ; attr -> first_value = attr -> default_val = NULL ; attr -> is_numeric = attr -> is_const = attr -> is_special = 0 ; attr -> next = attrs [ index ] ; attrs [ index ] = attr ; * name_p = attr -> name ; return attr ; } 