void mvs_do_release_task ( struct mvs_info * mvi , int phy_no , struct domain_device * dev ) { u32 slot_idx ; struct mvs_phy * phy ; struct mvs_port * port ; struct mvs_slot_info * slot , * slot2 ; phy = & mvi -> phy [ phy_no ] ; port = phy -> port ; mvs_int_rx ( mvi , false ) ; list_for_each_entry_safe ( , , , ) { struct sas_task * task ; slot_idx = ( u32 ) ( slot - mvi -> slot_info ) ; task = slot -> task ; if ( dev && task -> dev != dev ) { continue ; } mv_printk ( "Release slot [%x] tag[%x], task [%p]:\n" , slot_idx , slot -> slot_tag , task ) ; MVS_CHIP_DISP -> command_active ( mvi , slot_idx ) ; mvs_slot_complete ( mvi , slot_idx , 1 ) ; } } 