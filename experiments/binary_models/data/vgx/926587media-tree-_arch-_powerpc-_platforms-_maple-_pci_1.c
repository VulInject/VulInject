static int u3_agp_write_config ( struct pci_bus * bus , unsigned int devfn , int offset , int len , u32 val ) { struct pci_controller * hose ; volatile void __iomem * addr ; hose = pci_bus_to_host ( bus ) ; if ( hose == NULL ) { return PCIBIOS_DEVICE_NOT_FOUND ; } addr = u3_agp_cfg_access ( hose , bus -> number , devfn , offset ) ; switch ( len ) { case 1 : out_8 ( addr , val ) ; break ; case 2 : out_le16 ( addr , val ) ; break ; default : out_le32 ( addr , val ) ; break ; } return PCIBIOS_SUCCESSFUL ; } 