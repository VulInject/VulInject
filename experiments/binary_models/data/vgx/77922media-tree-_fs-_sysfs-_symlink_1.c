int sysfs_rename_link_ns ( kobject * kobj , kobject * targ , const char * old , const char * new , const void * new_ns ) ( kernfs_node * parent , * kn = NULL , const void * old_ns = NULL , int result , ( ! kobj ) parent = sysfs_root_kn , parent = kobj -> sd , ( targ -> sd ) old_ns = targ -> sd -> ns , result = - ENOENT , kn = kernfs_find_and_get_ns ( parent , old , old_ns ) , ( ! kn ) out ) ; result = - EINVAL ; if ( kernfs_type ( kn ) != KERNFS_LINK ) { out } if ( kn -> symlink . target_kn -> priv != targ ) { out } result = kernfs_rename_ns ( kn , parent , new , new_ns ) ; out kernfs_put ( kn , NULL ) ; return result ; 