static int bme680_write_raw ( struct iio_dev * indio_dev , struct iio_chan_spec const * chan , int val , int val2 , long mask ) { struct bme680_data * data = iio_priv ( indio_dev ) ; if ( val2 != 0 ) { return - EINVAL ; } switch ( mask ) { case IIO_CHAN_INFO_OVERSAMPLING_RATIO : { switch ( chan -> type ) { case IIO_TEMP : data -> oversampling_temp = val ; break ; case IIO_PRESSURE : data -> oversampling_press = val ; break ; case IIO_HUMIDITYRELATIVE : data -> oversampling_humid = val ; break ; default : return - EINVAL ; } return bme680_chip_config ( data ) ; } default : return - EINVAL ; } } 