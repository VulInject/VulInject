static int max6642_probe ( struct i2c_client * client , const struct i2c_device_id * id ) { struct device * dev = & client -> dev ; struct max6642_data * data ; struct device * hwmon_dev ; data = devm_kzalloc ( dev , sizeof ( max6642_data ) , GFP_KERNEL ) ; data -> client = client ; mutex_init ( & data -> update_lock ) ; max6642_init_client ( data , client ) ; hwmon_dev = devm_hwmon_device_register_with_groups ( & client -> dev , client -> name , data , max6642_groups ) ; return PTR_ERR_OR_ZERO ( hwmon_dev ) ; } 