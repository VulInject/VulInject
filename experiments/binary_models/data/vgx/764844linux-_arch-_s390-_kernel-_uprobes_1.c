static void sim_stor_event ( struct pt_regs * regs , void * addr , int len ) { if ( ! ( current -> thread . per_user . control & PER_EVENT_STORE ) ) { return ; } if ( ( void * ) current -> thread . per_user . start > ( addr + len ) ) { return ; } if ( ( void * ) current -> thread . per_user . end < addr ) { return ; } current -> thread . per_event . address = regs -> psw . addr ; current -> thread . per_event . cause = PER_EVENT_STORE >> 16 ; set_thread_flag ( TIF_PER_TRAP ) ; } 