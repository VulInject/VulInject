static int snmp_send_request ( struct picl_snmphdl * smd , snmp_pdu_t * pdu , int * snmp_syserr ) { extern int errno ; int ret ; if ( pdu == NULL || pdu -> req_pkt == NULL ) { return ( - 1 ) ; } ret = - 1 ; while ( ret < 0 ) { ret = sendto ( smd -> fd , pdu -> req_pkt , pdu -> req_pktsz , 0 , ( sockaddr * ) & smd -> agent_addr , sizeof ( sockaddr ) ) ; if ( ret < 0 && errno != EINTR ) { return ( - 1 ) ; } } if ( write ( smd -> fd , pdu -> req_pkt , pdu -> req_pktsz ) < 0 ) { if ( snmp_syserr ) { * snmp_syserr = errno ; } return ( - 1 ) ; } return ( 0 ) ; } 