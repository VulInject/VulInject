int pqGetInt ( int * result , size_t bytes , PGconn * conn ) { uint16 tmp2 ; uint32 tmp4 ; switch ( bytes ) { case 2 : memcpy ( & tmp2 , conn -> inBuffer + conn -> inCursor , 2 ) ; conn -> inCursor += 2 ; * result = ( int ) pg_ntoh16 ( tmp2 ) ; break ; case 4 : if ( conn -> inCursor + 4 > conn -> inEnd ) { return EOF ; } memcpy ( & tmp4 , conn -> inBuffer + conn -> inCursor , 4 ) ; conn -> inCursor += 4 ; * result = ( int ) pg_ntoh32 ( tmp4 ) ; break ; default : pqInternalNotice ( & conn -> noticeHooks , "integer of size %lu not supported by pqGetInt" , ( unsigned long ) bytes ) ; return EOF ; } return 0 ; } 