static int tas2770_dac_event ( struct snd_soc_dapm_widget * w , struct snd_kcontrol * kcontrol , int event ) { struct snd_soc_component * component = snd_soc_dapm_to_component ( w -> dapm ) ; struct tas2770_priv * tas2770 = snd_soc_component_get_drvdata ( component ) ; int ret ; switch ( event ) { case SND_SOC_DAPM_POST_PMU : ret = tas2770_update_pwr_ctrl ( tas2770 ) ; break ; case SND_SOC_DAPM_PRE_PMD : tas2770 -> dac_powered = 0 ; ret = tas2770_update_pwr_ctrl ( tas2770 ) ; break ; default : dev_err ( tas2770 -> dev , "Not supported evevt\n" ) ; return - EINVAL ; } return ret ; } 