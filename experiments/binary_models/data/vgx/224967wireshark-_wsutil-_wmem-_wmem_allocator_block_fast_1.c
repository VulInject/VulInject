static void wmem_block_fast_free_all ( void * private_data ) { wmem_block_fast_allocator_t * allocator = ( wmem_block_fast_allocator_t * ) private_data ; wmem_block_fast_hdr_t * cur , * nxt ; wmem_block_fast_jumbo_t * cur_jum , * nxt_jum ; cur = allocator -> block_list ; if ( cur ) { cur -> pos = WMEM_BLOCK_HEADER_SIZE ; nxt = cur -> next ; cur -> next = NULL ; cur = nxt ; } while ( cur ) { nxt = cur -> next ; wmem_free ( cur ) ; cur = nxt ; } cur_jum = allocator -> jumbo_list ; while ( cur_jum ) { nxt_jum = cur_jum -> next ; wmem_free ( NULL , cur_jum ) ; cur_jum = nxt_jum ; } allocator -> jumbo_list = NULL ; } 