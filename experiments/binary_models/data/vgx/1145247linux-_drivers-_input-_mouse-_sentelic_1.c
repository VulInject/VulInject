static int fsp_onpad_hscr ( struct psmouse * psmouse , bool enable ) { struct fsp_data * pad = psmouse -> private ; int val , v2 ; if ( fsp_reg_read ( psmouse , FSP_REG_SYSCTL5 , & v2 ) ) { return - EIO ; } pad -> hscroll = enable ; if ( enable ) { val |= ( FSP_BIT_FIX_HSCR | FSP_BIT_ONPAD_ENABLE ) ; v2 |= FSP_BIT_EN_MSID6 ; } else { val &= ~ FSP_BIT_FIX_HSCR ; v2 &= ~ ( FSP_BIT_EN_MSID6 | FSP_BIT_EN_MSID7 | FSP_BIT_EN_MSID8 ) ; } if ( fsp_reg_write ( psmouse , FSP_REG_ONPAD_CTL , val ) ) { return - EIO ; } if ( fsp_reg_write ( psmouse , FSP_REG_SYSCTL5 , v2 ) ) { return - EIO ; } return 0 ; } 