patch ( , , , , ) { int off ; struct lump * anchor ; if ( newstr == NULL ) { return - 2 ; } off = oldstr - msg -> buf ; if ( off < 0 ) { return - 3 ; } if ( ( anchor = del_lump ( msg , off , oldlen , 0 ) ) == 0 ) { LM_ERR ( "lumping with del_lump\n" ) ; return - 4 ; } if ( ( insert_new_lump_after ( anchor , newstr , newlen , 0 ) ) == 0 ) { LM_ERR ( "lumping with insert_new_lump_after\n" ) ; return - 5 ; } return 0 ; } 