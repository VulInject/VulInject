static int parse_pp2_client ( const char * pp2_client , int udp , sldns_buffer * proxy_buf ) { struct sockaddr_storage pp2_addr ; socklen_t pp2_addrlen = 0 ; if ( * pp2_client == 0 ) { return 0 ; } if ( ! extstrtoaddr ( pp2_client , & pp2_addr , & pp2_addrlen , UNBOUND_DNS_PORT ) ) { printf ( "fatal: bad proxy client specs '%s'\n" , pp2_client ) ; exit ( 1 ) ; } sldns_buffer_clear ( proxy_buf ) ; pp2_write_to_buf ( proxy_buf , & pp2_addr , ! udp ) ; sldns_buffer_flip ( proxy_buf ) ; return 1 ; } 