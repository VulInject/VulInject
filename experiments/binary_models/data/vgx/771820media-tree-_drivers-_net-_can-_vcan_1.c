static bool echo ; module_param ( echo , bool , S_IRUGO ) ; MODULE_PARM_DESC ( echo , "Echo sent frames (for testing). Default: 0 (Off)" ) ; static void vcan_rx ( struct sk_buff * skb , struct net_device * dev ) { struct canfd_frame * cfd = ( canfd_frame * ) skb -> data ; struct net_device_stats * stats = & dev -> stats ; stats -> rx_packets ++ ; stats -> rx_bytes += cfd -> len ; skb -> pkt_type = PACKET_BROADCAST ; skb -> dev = dev ; skb -> ip_summed = CHECKSUM_UNNECESSARY ; netif_rx_ni ( skb , NULL ) ; } 