static int previous_statement_was_synchronize ( void ) { struct statement * stmt ; struct position pos ; struct position prev_pos ; char * ident ; if ( __prev_stmt ) { prev_pos = __prev_stmt -> pos ; prev_pos . line -= 3 ; } else { prev_pos = __cur_stmt -> pos ; prev_pos . line -= 5 ; } FOR_EACH_PTR_REVERSE ( , ) { if ( stmt -> pos . line < prev_pos . line ) { return 0 ; } pos = stmt -> pos ; ident = get_macro_name ( pos ) ; if ( name_means_synchronize ( ident ) ) { return 1 ; } ident = pos_ident ( pos ) ; if ( ! ident ) { continue ; } if ( strcmp ( ident , "if" ) == 0 ) { pos . pos += 4 ; ident = pos_ident ( pos ) ; if ( ! ident ) { continue ; } } if ( name_means_synchronize ( ident ) ) { return 1 ; } } END_FOR_EACH_PTR_REVERSE ( stmt ) ; return 0 ; } 