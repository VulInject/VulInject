static int xenParseXMDiskList ( virConf * conf , virDomainDef * def ) { g_auto ( ) disks = NULL ; GStrv entries ; int hvm = def -> os . type == VIR_DOMAIN_OSTYPE_HVM ; int rc ; rc = virConfGetValueStringList ( conf , "disk" , false , & disks ) ; if ( rc <= 0 ) { return rc ; } for ( entries = disks ; * entries ; entries ++ ) { virDomainDiskDef * disk ; char * entry = * entries ; VIR_APPEND_ELEMENT ( def -> disks , def -> ndisks , disk ) ; } return 0 ; } 