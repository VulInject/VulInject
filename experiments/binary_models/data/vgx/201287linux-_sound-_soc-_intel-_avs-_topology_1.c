static int avs_control_load ( struct snd_soc_component * comp , int index , struct snd_kcontrol_new * ctmpl , struct snd_soc_tplg_ctl_hdr * hdr ) { struct snd_soc_tplg_vendor_array * tuples ; struct snd_soc_tplg_mixer_control * tmc ; struct avs_control_data * ctl_data ; struct soc_mixer_control * mc ; size_t block_size ; int ret ; switch ( le32_to_cpu ( hdr -> type ) ) { case SND_SOC_TPLG_TYPE_MIXER : tmc = container_of ( hdr , typeof ( * tmc ) , hdr ) ; tuples = tmc -> priv . array ; block_size = le32_to_cpu ( tmc -> priv . size ) ; break ; default : return - EINVAL ; } ctl_data = devm_kzalloc ( comp -> card -> dev , sizeof ( * ctl_data ) , GFP_KERNEL ) ; ret = parse_dictionary_entries ( comp , tuples , block_size , ctl_data , 1 , sizeof ( * ctl_data ) , AVS_TKN_KCONTROL_ID_U32 , control_parsers , ARRAY_SIZE ( control_parsers ) ) ; if ( ret ) { return ret ; } mc = ( soc_mixer_control * ) ctmpl -> private_value ; mc -> dobj . private = ctl_data ; return 0 ; } 