void mdescplugin_init ( void ) { int status ; status = ptree_get_root ( & root_node ) ; if ( status != PICL_SUCCESS ) { return ; } mdp = mdesc_devinit ( ) ; ( void ) update_devices ( OBP_CPU , DEV_ADD ) ; ( void ) update_devices ( OBP_CPU , DEV_REMOVE ) ; rootnode = md_root_node ( mdp ) ; status = ptree_walk_tree_by_class ( root_node , "cpu" , NULL , add_cpu_prop ) ; if ( status != PICL_SUCCESS ) { return ; } signal_devtree ( ) ; ( void ) disk_discovery ( ) ; ( void ) ptree_register_handler ( PICLEVENT_SYSEVENT_DEVICE_ADDED , dsc_handler , NULL ) ; ( void ) ptree_register_handler ( PICLEVENT_SYSEVENT_DEVICE_REMOVED , dsc_handler , NULL ) ; ( void ) ptree_register_handler ( PICLEVENT_DR_AP_STATE_CHANGE , dr_handler , NULL ) ; mdesc_devfini ( mdp ) ; } 