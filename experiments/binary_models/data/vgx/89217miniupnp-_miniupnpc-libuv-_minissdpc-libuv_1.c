int connectToMiniSSDPD ( const char * socketpath , void * user_connect_cb ( void * connect , void * userdata ) , void * userdata ) { if ( user_connect_cb == 0 ) { return MINISSDPC_INVALID_INPUT ; } if ( ! socketpath ) { socketpath = "/var/run/minissdpd.sock" ; } uv_pipe_t * p = malloc ( sizeof ( uv_pipe_t ) ) ; uv_connect_t * conn = malloc ( sizeof ( uv_connect_t ) ) ; struct userdata_s * us = malloc ( sizeof ( userdata_s ) ) ; us -> cb = user_connect_cb ; us -> userdata = userdata ; p -> data = us ; uv_pipe_connect ( conn , p , socketpath , & connect_cb ) ; return MINISSDPC_SUCCESS ; } 