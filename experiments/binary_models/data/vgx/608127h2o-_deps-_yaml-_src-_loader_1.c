static int yaml_parser_load_nodes ( yaml_parser_t * parser , struct loader_ctx * ctx ) static int yaml_parser_load_document ( yaml_parser_t * parser , yaml_event_t * event ) static int yaml_parser_load_alias ( yaml_parser_t * parser , yaml_event_t * event , struct loader_ctx * ctx ) static int yaml_parser_load_scalar ( yaml_parser_t * parser , yaml_event_t * event , struct loader_ctx * ctx ) static int yaml_parser_load_sequence ( yaml_parser_t * parser , yaml_event_t * event , struct loader_ctx * ctx ) static int yaml_parser_load_mapping ( yaml_parser_t * parser , yaml_event_t * event , struct loader_ctx * ctx ) static int yaml_parser_load_sequence_end ( yaml_parser_t * parser , yaml_event_t * event , struct loader_ctx * ctx ) static int yaml_parser_load_mapping_end ( yaml_parser_t * parser , yaml_event_t * event , struct loader_ctx * ctx ) YAML_DECLARE ( ) yaml_parser_load ( , ) { yaml_event_t event ; assert ( parser ) ; memset ( document , 0 , sizeof ( yaml_document_t ) ) ; if ( ! STACK_INIT ( parser , document -> nodes , yaml_node_t * ) ) { error } if ( ! parser -> stream_start_produced ) { if ( ! yaml_parser_parse ( parser , & event ) ) { error } assert ( event . type == YAML_STREAM_START_EVENT ) ; } if ( parser -> stream_end_produced ) { return 1 ; } if ( ! yaml_parser_parse ( parser , & event ) ) { error } if ( event . type == YAML_STREAM_END_EVENT ) { return 1 ; } if ( ! STACK_INIT ( parser , parser -> aliases , yaml_alias_data_t * ) ) { error } parser -> document = document ; if ( ! yaml_parser_load_document ( parser , & event ) ) { error } yaml_parser_delete_aliases ( parser ) ; parser -> document = NULL ; return 1 ; error yaml_parser_delete_aliases ( parser ) ; yaml_document_delete ( document ) ; parser -> document = NULL ; return 0 ; } 