static int gb_audio_resume ( struct device * dev ) { struct gb_bundle * bundle = to_gb_bundle ( dev ) ; struct gbaudio_module_info * gbmodule = greybus_get_drvdata ( bundle ) ; struct gbaudio_data_connection * dai ; int ret ; ret = gb_connection_enable ( gbmodule -> mgmt_connection ) ; if ( ret ) { dev_err ( dev , "%d:Error while enabling mgmt connection\n" , ret ) ; return ret ; } list_for_each_entry ( , , ) { ret = gb_connection_enable ( dai -> connection , NULL ) ; if ( ret ) { dev_err ( dev , "%d:Error while enabling %d:data connection\n" , ret , le16_to_cpu ( dai -> data_cport ) ) ; return ret ; } } return 0 ; } 