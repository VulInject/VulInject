static void nexthop_chain_add_top ( struct nexthop_chain * nc ) { struct nexthop * nh ; nh = calloc ( sizeof ( * nh ) , 1 ) ; if ( nc -> head . nexthop ) { nc -> current_top -> next = nh ; nh -> prev = nc -> current_top ; nc -> current_top = nh ; } else { nc -> head . nexthop = nc -> current_top = nh ; } nc -> current_recursive = NULL ; str_appendf ( & nc -> repr , "%p\n" , nh ) ; } 