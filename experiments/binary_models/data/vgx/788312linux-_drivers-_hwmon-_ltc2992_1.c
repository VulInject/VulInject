static umode_t ltc2992_is_visible ( const void * data , enum hwmon_sensor_types type , u32 attr , int channel ) { const struct ltc2992_state * st = data ; switch ( type ) { case hwmon_chip : switch ( attr ) { case hwmon_chip_in_reset_history : return 0200 ; } break ; case hwmon_in : switch ( attr ) { case hwmon_in_input : case hwmon_in_lowest : case hwmon_in_highest : case hwmon_in_min_alarm : case hwmon_in_max_alarm : return 0444 ; case hwmon_in_min : case hwmon_in_max : return 0644 ; } break ; case hwmon_curr : switch ( attr ) { case hwmon_curr_input : case hwmon_curr_lowest : case hwmon_curr_highest : case hwmon_curr_min_alarm : case hwmon_curr_max_alarm : break ; case hwmon_curr_min : case hwmon_curr_max : if ( st -> r_sense_uohm [ channel ] ) { return 0644 ; } break ; } break ; case hwmon_power : switch ( attr ) { case hwmon_power_input : case hwmon_power_input_lowest : case hwmon_power_input_highest : case hwmon_power_min_alarm : case hwmon_power_max_alarm : if ( st -> r_sense_uohm [ channel ] ) { return 0444 ; } break ; case hwmon_power_min : case hwmon_power_max : if ( st -> r_sense_uohm [ channel ] ) { return 0644 ; } break ; } break ; default : break ; } return 0 ; } 