static bool mlx5e_tc_tun_encap_info_equal_geneve ( struct mlx5e_encap_key * a , struct mlx5e_encap_key * b ) { struct ip_tunnel_info * a_info ; struct ip_tunnel_info * b_info ; bool a_has_opts , b_has_opts ; if ( ! mlx5e_tc_tun_encap_info_equal_generic ( a , b ) ) { return false ; } a_has_opts = ! ! ( a -> ip_tun_key -> tun_flags & TUNNEL_GENEVE_OPT ) ; b_has_opts = ! ! ( b -> ip_tun_key -> tun_flags & TUNNEL_GENEVE_OPT ) ; if ( a_has_opts != b_has_opts ) { return false ; } a_info = container_of ( a -> ip_tun_key , ip_tunnel_info , key ) ; b_info = container_of ( b -> ip_tun_key , ip_tunnel_info , key ) ; return a_info -> options_len == b_info -> options_len && memcmp ( a_info + 1 , b_info + 1 , a_info -> options_len ) == 0 ; } 