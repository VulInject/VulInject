static void os_cmd_ignore_del ( struct sourceinfo * si , int parc , char * parv [ ] ) { char * target = parv [ 0 ] ; mowgli_node_t * n , * tn ; struct svsignore * svsignore ; if ( target == NULL ) { command_fail ( si , fault_needmoreparams , STR_INSUFFICIENT_PARAMS , "IGNORE" ) ; command_fail ( si , fault_needmoreparams , _ ( "Syntax: IGNORE ADD|DEL|LIST|CLEAR<mask>" ) ) ; return ; } MOWGLI_ITER_FOREACH_SAFE ( , , ) { svsignore = ( svsignore * ) n -> data ; if ( ! strcasecmp ( svsignore -> mask , target ) ) { command_success_nodata ( si , _ ( "\2%s\2 has been removed from the services ignore list." ) , svsignore -> mask ) ; svsignore_delete ( svsignore , NULL ) ; wallops ( "\2%s\2 removed \2%s\2 from the services ignore list." , get_oper_name ( si ) , target ) ; logcommand ( si , CMDLOG_ADMIN , "IGNORE:DEL: \2%s\2" , target ) ; return ; } } command_fail ( si , fault_nosuch_target , _ ( "\2%s\2 was not found on the services ignore list." ) , target ) ; return ; } 