read_derived_bidi_class_txt ( ) { unsigned long c , c2 , l ; init_tab_derived_bidi_class_txt ( ) ; l = 0 ; while ( fgets ( buf , sizeof buf , f ) ) { int i ; register char typ ; const char * s = buf ; l ++ ; while ( * s == ' ' ) { s ++ ; } if ( s [ 0 ] == '#' || s [ 0 ] == '\0' || s [ 0 ] == '\n' ) { continue ; } i = sscanf ( s , "%lx ; %[^; ]" , & c , tp ) ; if ( i == 2 ) { c2 = c ; } else { i = sscanf ( s , "%lx..%lx ; %[^; ]" , & c , & c2 , tp ) - 1 ; } if ( i != 2 || c > c2 || c2 >= FRIBIDI_UNICODE_CHARS ) { die3 ( "invalid input at line %ld: %s" , l , s ) ; } typ = get_type ( tp , NULL ) ; for ( ; c <= c2 ; c ++ ) { table [ c ] = typ ; } } } 