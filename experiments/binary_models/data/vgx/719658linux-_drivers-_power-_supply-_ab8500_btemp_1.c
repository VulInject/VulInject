static int ab8500_btemp_get_temp ( struct ab8500_btemp * di ) { int temp ; if ( is_ab8500_3p3_or_earlier ( di -> parent ) ) { temp = di -> bat_temp * 10 ; } else { if ( di -> events . btemp_low ) { if ( temp > di -> btemp_ranges . btemp_low_limit ) { temp = di -> btemp_ranges . btemp_low_limit * 10 ; } else { temp = di -> bat_temp * 10 ; } } if ( di -> events . btemp_high ) { if ( temp < di -> btemp_ranges . btemp_high_limit ) { temp = di -> btemp_ranges . btemp_high_limit * 10 ; } else { temp = di -> bat_temp * 10 ; } } if ( di -> events . btemp_lowmed ) { if ( temp > di -> btemp_ranges . btemp_med_limit ) { temp = di -> btemp_ranges . btemp_med_limit * 10 ; } else { temp = di -> bat_temp * 10 ; } } if ( di -> events . btemp_medhigh ) { if ( temp < di -> btemp_ranges . btemp_med_limit ) { temp = di -> btemp_ranges . btemp_med_limit * 10 ; } else { temp = di -> bat_temp * 10 ; } } else { temp = di -> bat_temp * 10 ; } } return temp ; } 