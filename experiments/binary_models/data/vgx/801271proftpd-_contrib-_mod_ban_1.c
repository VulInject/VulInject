static void ban_mod_unload_ev ( const void * event_data , void * user_data ) { if ( strcmp ( "mod_ban.c" , ( const char * ) event_data ) == 0 ) { register unsigned int i ; for ( i = 0 ; ban_acttab [ i ] . act_action ; i ++ ) { ( void ) pr_ctrls_unregister ( & ban_module , ban_acttab [ i ] . act_action ) ; } if ( ban_timerno > 0 ) { ( void ) pr_timer_remove ( ban_timerno , & ban_module ) ; ban_timerno = - 1 ; } pr_event_unregister ( & ban_module , NULL ) ; if ( ban_pool ) { destroy_pool ( ban_pool ) ; ban_pool = NULL ; } if ( ban_tabfh ) { ( void ) pr_fsio_close ( ban_tabfh ) ; ban_tabfh = NULL ; } if ( ban_logfd > 0 ) { ( void ) close ( ban_logfd ) ; ban_logfd = - 1 ; } ban_engine = - 1 ; } } 