static int route_new_static ( Network * network , const char * filename , unsigned section_line , Route * * ret ) { _cleanup_ ( ) ConfigSection * n = NULL ; _cleanup_ ( ) Route * route = NULL ; int r ; assert ( network ) ; assert ( ret ) ; assert ( filename ) ; assert ( section_line > 0 ) ; r = config_section_new ( filename , section_line , & n ) ; if ( r < 0 ) { return r ; } route = hashmap_get ( network -> routes_by_section , n ) ; if ( route ) { * ret = TAKE_PTR ( route ) ; return 0 ; } if ( hashmap_size ( network -> routes_by_section ) >= routes_max ( ) ) { return - E2BIG ; } r = route_new ( & route ) ; if ( r < 0 ) { return r ; } route -> protocol = RTPROT_STATIC ; route -> network = network ; route -> section = TAKE_PTR ( n , NULL ) ; route -> source = NETWORK_CONFIG_SOURCE_STATIC ; r = hashmap_ensure_put ( & network -> routes_by_section , & config_section_hash_ops , route -> section , route ) ; if ( r < 0 ) { return r ; } * ret = TAKE_PTR ( route ) ; return 0 ; } 