static int op_sock_connect_next ( op_sock _fd , struct addrinfo * * _addr , int _ai_family ) { struct addrinfo * addr ; int err ; for ( addr = * _addr ; ; addr = addr -> ai_next ) { for ( ; addr != NULL && addr -> ai_family != _ai_family ; addr = addr -> ai_next ) { } * _addr = addr ; if ( connect ( _fd , addr -> ai_addr , addr -> ai_addrlen ) >= 0 ) { return 1 ; } err = op_errno ( ) ; if ( OP_LIKELY ( err == EINPROGRESS || err == EWOULDBLOCK ) ) { return 0 ; } } } 