noce_get_condition ( , ) rtx jump ; rtx * earliest ; { rtx cond , set , tmp , insn ; bool reverse ; if ( ! any_condjump_p ( jump ) ) { return NULL_RTX ; } set = pc_set ( jump ) ; reverse = ( GET_CODE ( XEXP ( SET_SRC ( set ) , 2 ) ) == LABEL_REF && XEXP ( XEXP ( SET_SRC ( set ) , 2 ) , 0 ) == JUMP_LABEL ( jump ) ) ; cond = XEXP ( SET_SRC ( set ) , 0 ) ; tmp = XEXP ( cond , 0 ) ; if ( REG_P ( tmp ) && GET_MODE_CLASS ( GET_MODE ( tmp ) ) == MODE_INT ) { * earliest = jump ; if ( reverse ) { cond = gen_rtx_fmt_ee ( reverse_condition ( GET_CODE ( cond ) ) , GET_MODE ( cond ) , tmp , XEXP ( cond , 1 ) ) ; } return cond ; } tmp = canonicalize_condition ( jump , cond , reverse , earliest , NULL_RTX ) ; for ( insn = * earliest ; insn != jump ; insn = NEXT_INSN ( insn ) ) { if ( INSN_P ( insn ) && modified_in_p ( tmp , insn ) ) { break ; } } if ( insn == jump ) { return tmp ; } tmp = XEXP ( tmp , 0 ) ; if ( ! REG_P ( tmp ) || GET_MODE_CLASS ( GET_MODE ( tmp ) ) != MODE_INT ) { return NULL_RTX ; } tmp = canonicalize_condition ( jump , cond , reverse , earliest , tmp ) ; if ( ! tmp ) { return NULL_RTX ; } for ( insn = * earliest ; insn != jump ; insn = NEXT_INSN ( insn ) ) { if ( INSN_P ( insn ) && modified_in_p ( tmp , insn ) ) { return NULL_RTX ; } } return tmp ; } 