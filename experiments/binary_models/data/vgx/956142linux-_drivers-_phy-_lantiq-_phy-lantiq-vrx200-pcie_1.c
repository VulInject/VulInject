static int ltq_vrx200_pcie_phy_wait_for_pll ( struct phy * phy ) { struct ltq_vrx200_pcie_phy_priv * priv = phy_get_drvdata ( phy ) ; int tmp ; int ret ; ret = regmap_read_poll_timeout ( priv -> phy_regmap , PCIE_PHY_PLL_STATUS , tmp , ( ( tmp & 0x0070 ) == 0x0070 ) , 10 , 10000 ) ; if ( ret ) { dev_err ( priv -> dev , "PLL Link timeout, PLL status = 0x%04x\n" , tmp ) ; return ret ; } return 0 ; } 