wwn_t bfa_fcs_lport_get_rport ( struct bfa_fcs_lport_s * port , wwn_t wwn , int index , int nrports , bfa_boolean_t bwwn ) { struct list_head * qh , * qe ; struct bfa_fcs_rport_s * rport = NULL ; int i ; struct bfa_fcs_s * fcs ; fcs = port -> fcs ; bfa_trc ( fcs , ( u32 ) nrports ) ; i = 0 ; qh = & port -> rport_q ; qe = bfa_q_first ( qh ) ; while ( ( qe != qh ) && ( i < nrports ) ) { rport = ( bfa_fcs_rport_s * ) qe ; if ( bfa_ntoh3b ( rport -> pid ) > 0xFFF000 ) { qe = bfa_q_next ( qe ) ; bfa_trc ( fcs , ( u32 ) rport -> pwwn ) ; bfa_trc ( fcs , rport -> pid ) ; bfa_trc ( fcs , i ) ; continue ; } if ( bwwn ) { if ( ! memcmp ( & wwn , & rport -> pwwn , 8 ) ) { break ; } } else { if ( i == index ) { break ; } } i ++ ; qe = bfa_q_next ( qe ) ; } bfa_trc ( fcs , i ) ; if ( rport ) { return rport -> pwwn ; } else { return ( wwn_t ) 0 ; } } 