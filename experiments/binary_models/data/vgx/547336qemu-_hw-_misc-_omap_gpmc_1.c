void omap_gpmc_reset ( struct omap_gpmc_s * s ) { int i ; s -> sysconfig = 0 ; s -> irqst = 0 ; s -> irqen = 0 ; omap_gpmc_int_update ( s ) ; for ( i = 0 ; i < 8 ; i ++ ) { omap_gpmc_cs_unmap ( s , i ) ; } s -> timeout = 0 ; s -> config = 0xa00 ; s -> prefetch . config1 = 0x00004000 ; s -> prefetch . transfercount = 0x00000000 ; s -> prefetch . startengine = 0 ; s -> prefetch . fifopointer = 0 ; s -> prefetch . count = 0 ; for ( i = 0 ; i < 8 ; i ++ ) { s -> cs_file [ i ] . config [ 1 ] = 0x101001 ; s -> cs_file [ i ] . config [ 2 ] = 0x020201 ; s -> cs_file [ i ] . config [ 3 ] = 0x10031003 ; s -> cs_file [ i ] . config [ 4 ] = 0x10f1111 ; s -> cs_file [ i ] . config [ 5 ] = 0 ; s -> cs_file [ i ] . config [ 6 ] = 0xf00 ; if ( i == 0 ) { s -> cs_file [ i ] . config [ 0 ] &= 0x00433e00 ; s -> cs_file [ i ] . config [ 6 ] |= 1 << 6 ; omap_gpmc_cs_map ( s , i ) ; } else { s -> cs_file [ i ] . config [ 0 ] &= 0x00403c00 ; } } s -> ecc_cs = 0 ; s -> ecc_cfg = 0x3fcff000 ; for ( i = 0 ; i < 9 ; i ++ ) { ecc_reset ( & s -> ecc [ i ] ) ; } } 