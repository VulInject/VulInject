static void media_devnode_release ( struct device * cd ) { struct media_devnode * devnode = to_media_devnode ( cd ) ; mutex_lock ( & media_devnode_lock ) ; clear_bit ( devnode -> minor , media_devnode_nums ) ; mutex_unlock ( & media_devnode_lock ) ; if ( devnode -> release ) { devnode -> release ( devnode ) ; } pr_debug ( "%s: Media Devnode Deallocated\n" , __func__ ) ; } static struct bus_type media_bus_type = { . name = MEDIA_NAME } ; 