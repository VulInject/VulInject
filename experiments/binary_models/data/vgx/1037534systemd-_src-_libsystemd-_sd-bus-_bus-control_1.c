static int validate_request_name_parameters ( sd_bus * bus , const char * name , uint64_t flags , uint32_t * ret_param ) { int param = 0 ; assert ( bus ) ; assert ( name ) ; assert ( ret_param ) ; assert_return ( ! ( flags & ~ ( SD_BUS_NAME_ALLOW_REPLACEMENT | SD_BUS_NAME_REPLACE_EXISTING | SD_BUS_NAME_QUEUE ) ) , - EINVAL ) ; assert_return ( service_name_is_valid ( name ) , - EINVAL ) ; assert_return ( name [ 0 ] != ':' , - EINVAL ) ; if ( ! bus -> bus_client ) { return - EINVAL ; } if ( STR_IN_SET ( name , "org.freedesktop.DBus" , "org.freedesktop.DBus.Local" ) ) { return - EINVAL ; } if ( ! BUS_IS_OPEN ( bus -> state ) ) { return - ENOTCONN ; } if ( flags & SD_BUS_NAME_ALLOW_REPLACEMENT ) { param |= BUS_NAME_ALLOW_REPLACEMENT ; } if ( flags & SD_BUS_NAME_REPLACE_EXISTING ) { param |= BUS_NAME_REPLACE_EXISTING ; } if ( ! ( flags & SD_BUS_NAME_QUEUE ) ) { param |= BUS_NAME_DO_NOT_QUEUE ; } * ret_param = param ; return 0 ; } 