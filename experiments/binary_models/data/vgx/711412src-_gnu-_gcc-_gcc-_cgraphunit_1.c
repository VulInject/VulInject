static struct pointer_set_t * visited_nodes ; static FILE * cgraph_dump_file ; static bool decide_is_function_needed ( struct cgraph_node * node , tree decl ) { tree origin ; if ( MAIN_NAME_P ( DECL_NAME ( decl ) ) && TREE_PUBLIC ( decl ) ) { node -> local . externally_visible = true ; return true ; } if ( node -> local . externally_visible ) { return true ; } if ( DECL_ASSEMBLER_NAME_SET_P ( decl ) && TREE_SYMBOL_REFERENCED ( DECL_ASSEMBLER_NAME ( decl ) ) ) { return true ; } if ( node -> needed ) { return true ; } if ( ( ( TREE_PUBLIC ( decl ) || ( ! optimize && ! node -> local . disregard_inline_limits && ! DECL_DECLARED_INLINE_P ( decl ) && ! node -> origin ) ) && ! flag_whole_program ) && ! DECL_COMDAT ( decl ) && ! DECL_EXTERNAL ( decl ) ) { return true ; } if ( DECL_STATIC_CONSTRUCTOR ( decl ) || DECL_STATIC_DESTRUCTOR ( decl ) ) { return true ; } if ( flag_unit_at_a_time ) { return false ; } if ( DECL_EXTERNAL ( decl ) ) { return false ; } for ( origin = decl_function_context ( decl ) ; origin ; origin = decl_function_context ( origin ) ) { if ( DECL_EXTERNAL ( origin ) ) { return false ; } } if ( DECL_COMDAT ( decl ) ) { return false ; } if ( ! DECL_INLINE ( decl ) || ( ! node -> local . disregard_inline_limits && ! DECL_DECLARED_INLINE_P ( decl ) && ( ! node -> local . inlinable || ! cgraph_default_inline_p ( node , NULL ) ) ) ) { return true ; } return false ; } 