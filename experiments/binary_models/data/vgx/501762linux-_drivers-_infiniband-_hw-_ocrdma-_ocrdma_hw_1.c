static void ocrdma_qp_cq_handler ( struct ocrdma_dev * dev , u16 cq_idx ) { unsigned long flags ; struct ocrdma_cq * cq ; if ( cq_idx >= OCRDMA_MAX_CQ ) { BUG ( ) ; } cq = dev -> cq_tbl [ cq_idx ] ; if ( cq -> ibcq . comp_handler ) { spin_lock_irqsave ( & cq -> comp_handler_lock , flags ) ; * cq -> ibcq . comp_handler ( & cq -> ibcq , cq -> ibcq . cq_context ) ; spin_unlock_irqrestore ( & cq -> comp_handler_lock , flags ) ; } ocrdma_qp_buddy_cq_handler ( dev , cq ) ; } 