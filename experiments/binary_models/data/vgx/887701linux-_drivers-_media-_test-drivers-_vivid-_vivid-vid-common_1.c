int vidioc_g_dv_timings ( struct file * file , void * _fh , struct v4l2_dv_timings * timings ) { struct vivid_dev * dev = video_drvdata ( file ) ; struct video_device * vdev = video_devdata ( file ) ; if ( vdev -> vfl_dir == VFL_DIR_RX ) { * timings = dev -> dv_timings_cap [ dev -> input ] ; } else { if ( ! vivid_is_hdmi_out ( dev ) ) { return - ENODATA ; } * timings = dev -> dv_timings_out ; } return 0 ; } 