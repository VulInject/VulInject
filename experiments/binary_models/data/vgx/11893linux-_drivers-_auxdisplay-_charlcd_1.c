void charlcd_poke ( struct charlcd * lcd ) { struct charlcd_priv * priv = charlcd_to_priv ( lcd ) ; cancel_delayed_work_sync ( & priv -> bl_work ) ; mutex_lock ( & priv -> bl_tempo_lock ) ; if ( ! priv -> bl_tempo && ! ( priv -> flags & LCD_FLAG_L ) ) { lcd -> ops -> backlight ( lcd , CHARLCD_ON ) ; } priv -> bl_tempo = true ; schedule_delayed_work ( & priv -> bl_work , LCD_BL_TEMPO_PERIOD * HZ ) ; mutex_unlock ( & priv -> bl_tempo_lock ) ; } 