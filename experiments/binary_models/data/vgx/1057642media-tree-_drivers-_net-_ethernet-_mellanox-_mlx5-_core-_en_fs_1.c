static void mlx5e_fill_addr_array ( struct mlx5e_priv * priv , int list_type , u8 addr_array [ ] [ ETH_ALEN ] , int size ) { bool is_uc = ( list_type == MLX5_NVPRT_LIST_TYPE_UC ) ; struct net_device * ndev = priv -> netdev ; struct mlx5e_l2_hash_node * hn ; struct hlist_head * addr_list ; struct hlist_node * tmp ; int i = 0 ; int hi ; addr_list = is_uc ?priv -> fs . l2 . netdev_uc : priv -> fs . l2 . netdev_mc ; if ( is_uc ) { ether_addr_copy ( addr_array [ i ++ ] , ndev -> dev_addr ) ; } if ( priv -> fs . l2 . broadcast_enabled ) { ether_addr_copy ( addr_array [ i ++ ] , ndev -> broadcast ) ; } mlx5e_for_each_hash_node ( , , , ) { if ( ether_addr_equal ( ndev -> dev_addr , hn -> ai . addr ) ) { continue ; } ether_addr_copy ( addr_array [ i ++ ] , hn -> ai . addr ) ; } } 