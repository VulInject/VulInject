void vgic_lpi_translation_cache_init ( struct kvm * kvm ) { struct vgic_dist * dist = & kvm -> arch . vgic ; unsigned int sz ; int i ; sz = atomic_read ( & kvm -> online_vcpus ) * LPI_DEFAULT_PCPU_CACHE_SIZE ; for ( i = 0 ; i < sz ; i ++ ) { struct vgic_translation_cache_entry * cte ; cte = kzalloc ( sizeof ( * cte ) , GFP_KERNEL_ACCOUNT ) ; if ( WARN_ON ( ! cte ) ) { break ; } INIT_LIST_HEAD ( & cte -> entry ) ; list_add ( & cte -> entry , & dist -> lpi_translation_cache ) ; } } 