static void bfusb_unlink_urbs ( struct bfusb_data * data ) { struct sk_buff * skb ; struct urb * urb ; BT_DBG ( "bfusb %p" , data ) ; while ( ( skb = skb_dequeue ( & data -> pending_q ) ) ) { urb = ( ( bfusb_data_scb * ) skb -> cb ) -> urb ; usb_kill_urb ( urb , NULL ) ; skb_queue_tail ( & data -> completed_q , skb ) ; } while ( ( urb = bfusb_get_completed ( data ) ) ) { usb_free_urb ( urb ) ; } } 