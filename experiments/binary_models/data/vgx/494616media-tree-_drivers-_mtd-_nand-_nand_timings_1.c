int onfi_init_data_interface ( struct nand_chip * chip , struct nand_data_interface * iface , enum nand_data_interface_type type , int timing_mode ) { if ( type != NAND_SDR_IFACE ) { return - EINVAL ; } * iface = onfi_sdr_timings [ timing_mode ] ; if ( chip -> onfi_version ) { struct nand_onfi_params * params = & chip -> onfi_params ; struct nand_sdr_timings * timings = & iface -> timings . sdr ; timings -> tPROG_max = 1000000UL * le16_to_cpu ( params -> t_prog ) ; timings -> tBERS_max = 1000000UL * le16_to_cpu ( params -> t_bers ) ; timings -> tR_max = 1000000UL * le16_to_cpu ( params -> t_r ) ; timings -> tCCS_min = 1000UL * le16_to_cpu ( params -> t_ccs ) ; } return 0 ; } 