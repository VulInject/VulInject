int odb_mkstemp ( struct strbuf * temp_filename , const char * pattern ) { int fd ; int mode = 0444 ; git_path_buf ( temp_filename , "objects/%s" , pattern ) ; fd = git_mkstemp_mode ( temp_filename -> buf , mode ) ; if ( 0 <= fd ) { return fd ; } git_path_buf ( temp_filename , "objects/%s" , pattern ) ; safe_create_leading_directories ( temp_filename -> buf , NULL ) ; return xmkstemp_mode ( temp_filename -> buf , mode ) ; } 