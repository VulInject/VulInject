static int tg3_nvram_exec_cmd ( struct tg3 * tp , u32 nvram_cmd ) { int i ; tw32 ( NVRAM_CMD , nvram_cmd ) ; for ( i = 0 ; i < NVRAM_CMD_TIMEOUT ; i ++ ) { usleep_range ( 10 , 40 ) ; if ( tr32 ( NVRAM_CMD ) & NVRAM_CMD_DONE ) { udelay ( 10 ) ; break ; } } return 0 ; } 