void rtw_iterate_stas ( struct rtw_dev * rtwdev , void * iterator ( void * data , struct ieee80211_sta * sta ) , void * data ) { struct rtw_iter_stas_data iter_data ; struct rtw_stas_entry * sta_entry , * tmp ; lockdep_assert_held ( & rtwdev -> mutex ) ; iter_data . rtwdev = rtwdev ; INIT_LIST_HEAD ( & iter_data . list ) ; ieee80211_iterate_stations_atomic ( rtwdev -> hw , rtw_collect_sta_iter , & iter_data ) ; list_for_each_entry_safe ( , , , ) { list_del_init ( & sta_entry -> list ) ; iterator ( data , sta_entry -> sta ) ; } } 