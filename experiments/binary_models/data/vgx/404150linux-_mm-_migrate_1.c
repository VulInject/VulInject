void putback_movable_pages ( struct list_head * l ) { struct folio * folio ; struct folio * folio2 ; list_for_each_entry_safe ( , , , ) { if ( unlikely ( folio_test_hugetlb ( folio ) ) ) { continue ; } list_del ( & folio -> lru ) ; if ( unlikely ( __folio_test_movable ( folio ) ) ) { VM_BUG_ON_FOLIO ( ! folio_test_isolated ( folio ) , folio ) ; folio_lock ( folio ) ; if ( folio_test_movable ( folio ) ) { putback_movable_folio ( folio ) ; } else { folio_clear_isolated ( folio ) ; } folio_unlock ( folio ) ; folio_put ( folio ) ; } else { node_stat_mod_folio ( folio , NR_ISOLATED_ANON + folio_is_file_lru ( folio ) , - folio_nr_pages ( folio ) ) ; folio_putback_lru ( folio ) ; } } } 