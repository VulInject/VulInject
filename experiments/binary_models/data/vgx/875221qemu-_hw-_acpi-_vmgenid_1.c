static void vmgenid_realize ( DeviceState * dev , Error * * errp ) { VmGenIdState * vms = VMGENID ( dev ) ; if ( ! bios_linker_loader_can_write_pointer ( ) ) { error_setg ( errp , "%s requires DMA write support in fw_cfg, " "which this machine type does not provide" , TYPE_VMGENID ) ; return ; } if ( ! find_vmgenid_dev ( ) ) { error_setg ( errp , "at most one %s device is permitted" , TYPE_VMGENID ) ; return ; } qemu_register_reset ( vmgenid_handle_reset , vms ) ; vmgenid_update_guest ( vms , NULL ) ; } 