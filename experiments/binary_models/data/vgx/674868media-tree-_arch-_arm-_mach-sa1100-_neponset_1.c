static void neponset_set_mctrl ( struct uart_port * port , u_int mctrl ) { void __iomem * base = nep_base ; u_int mdm_ctl0 ; mdm_ctl0 = readb_relaxed ( base + MDM_CTL_0 ) ; if ( port -> mapbase == _Ser1UTCR0 ) { if ( mctrl & TIOCM_RTS ) { mdm_ctl0 &= ~ MDM_CTL0_RTS2 ; } else { mdm_ctl0 |= MDM_CTL0_RTS2 ; } if ( mctrl & TIOCM_DTR ) { mdm_ctl0 &= ~ MDM_CTL0_DTR2 ; } else { mdm_ctl0 |= MDM_CTL0_DTR2 ; } } if ( port -> mapbase == _Ser3UTCR0 ) { if ( mctrl & TIOCM_RTS ) { mdm_ctl0 &= ~ MDM_CTL0_RTS1 ; } else { mdm_ctl0 |= MDM_CTL0_RTS1 ; } if ( mctrl & TIOCM_DTR ) { mdm_ctl0 &= ~ MDM_CTL0_DTR1 ; } else { mdm_ctl0 |= MDM_CTL0_DTR1 ; } } writeb_relaxed ( mdm_ctl0 , base + MDM_CTL_0 ) ; } 