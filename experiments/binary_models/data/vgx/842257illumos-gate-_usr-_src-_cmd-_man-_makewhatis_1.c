void mwpath ( char * path ) { FILE * fp = NULL ; struct dirent * * entries ; int nsections ; int i ; ( void ) signal ( SIGINT , trap_signal ) ; ( void ) signal ( SIGHUP , trap_signal ) ; ( void ) signal ( SIGQUIT , trap_signal ) ; ( void ) signal ( SIGTERM , trap_signal ) ; whatis_proto = new_sbuf ( ) ; whatis_final = new_sbuf ( ) ; nsections = scandir ( path , & entries , select_sections , alphasort ) ; if ( ( fp = open_whatis ( path ) ) == NULL ) { return ; } for ( i = 0 ; i < nsections ; i ++ ) { char section_dir [ MAXPATHLEN ] ; ( void ) snprintf ( section_dir , MAXPATHLEN , "%s/%s" , path , entries [ i ] -> d_name ) ; process_section ( section_dir ) ; free ( entries [ i ] ) ; } finish_whatis ( fp , path ) ; } 