enum AVChannel av_channel_from_string ( const char * str ) { int i ; char * endptr = ( char * ) str ; enum AVChannel id = AV_CHAN_NONE ; if ( ! strncmp ( str , "AMBI" , 4 ) ) { i = strtol ( str + 4 , NULL , 0 ) ; return AV_CHAN_AMBISONIC_BASE + i ; } for ( i = 0 ; i < FF_ARRAY_ELEMS ( channel_names ) ; i ++ ) { if ( channel_names [ i ] . name && ! strcmp ( str , channel_names [ i ] . name ) ) { return i ; } } if ( ! strncmp ( str , "USR" , 3 ) ) { const char * p = str + 3 ; id = strtol ( p , & endptr , 0 ) ; } if ( id >= 0 && ! * endptr ) { return id ; } return AV_CHAN_NONE ; } 