static void mts_do_sg ( struct urb * transfer ) { int status = transfer -> status ; MTS_INT_INIT ( ) ; MTS_DEBUG ( "Processing fragment %d of %d\n" , context -> fragment , scsi_sg_count ( context -> srb ) ) ; if ( unlikely ( status ) ) { set_host_byte ( context -> srb , ( status == - ENOENT ?DID_ABORT : DID_ERROR ) ) ; mts_transfer_cleanup ( transfer ) ; } context -> curr_sg = sg_next ( context -> curr_sg , NULL ) ; mts_int_submit_urb ( transfer , context -> data_pipe , sg_virt ( context -> curr_sg ) , context -> curr_sg -> length , sg_is_last ( context -> curr_sg ) ?mts_data_done : mts_do_sg ) ; } static const u8 mts_read_image_sig [ ] { 0x28 00 00 00 } ; ; static const u8 mts_read_image_sig_len = 4 ; static const unsigned char mts_direction [ 256 / 8 ] { 0x28 0x81 0x14 0x14 0x20 0x01 0x90 0x77 0x0C 0x20 0x00 0x04 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01 0x00 0x01 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 } ; ; 