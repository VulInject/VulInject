int pe__common_output_html ( pcmk__output_t * out , const pe_resource_t * rsc , const char * name , const pe_node_t * node , uint32_t show_opts ) { const char * kind = crm_element_value ( rsc -> xml , XML_ATTR_TYPE ) ; const char * target_role = NULL ; xmlNodePtr list_node = NULL ; const char * cl = NULL ; CRM_ASSERT ( rsc -> variant == pe_native ) ; CRM_ASSERT ( kind != NULL ) ; if ( rsc -> meta ) { const char * is_internal = g_hash_table_lookup ( rsc -> meta , XML_RSC_ATTR_INTERNAL_RSC ) ; if ( crm_is_true ( is_internal ) && ! pcmk_is_set ( show_opts , pcmk_show_implicit_rscs ) ) { crm_trace ( "skipping print of internal resource %s" , rsc -> id ) ; return pcmk_rc_no_output ; } target_role = g_hash_table_lookup ( rsc -> meta , XML_RSC_ATTR_TARGET_ROLE ) ; } if ( ! pcmk_is_set ( rsc -> flags , pe_rsc_managed ) ) { cl = "rsc-managed" ; } if ( pcmk_is_set ( rsc -> flags , pe_rsc_failed ) ) { cl = "rsc-failed" ; } if ( rsc -> variant == pe_native && ( rsc -> running_on == NULL ) ) { cl = "rsc-failed" ; } if ( pcmk__list_of_multiple ( rsc -> running_on ) ) { cl = "rsc-multiple" ; } if ( pcmk_is_set ( rsc -> flags , pe_rsc_failure_ignored ) ) { cl = "rsc-failure-ignored" ; } else { cl = "rsc-ok" ; } { gchar * s = pcmk__native_output_string ( rsc , name , node , show_opts , target_role , true ) ; list_node = pcmk__output_create_html_node ( out , "li" , NULL , NULL , NULL ) ; pcmk_create_html_node ( list_node , "span" , NULL , cl , s ) ; } return pcmk_rc_ok ; } 