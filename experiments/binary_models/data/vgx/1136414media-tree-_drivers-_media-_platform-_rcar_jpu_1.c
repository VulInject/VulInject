static int jpu_querycap ( struct file * file , void * priv , struct v4l2_capability * cap ) { struct jpu_ctx * ctx = fh_to_ctx ( priv ) ; if ( ctx -> encoder ) { strlcpy ( cap -> card , DRV_NAME " encoder" , sizeof ( cap -> card ) ) ; } else { strlcpy ( cap -> card , DRV_NAME " decoder" , sizeof ( cap -> card ) ) ; } strlcpy ( cap -> driver , DRV_NAME , sizeof ( cap -> driver ) ) ; snprintf ( cap -> bus_info , sizeof ( cap -> bus_info ) , "platform:%s" , dev_name ( ctx -> jpu -> dev ) ) ; cap -> device_caps |= V4L2_CAP_STREAMING | V4L2_CAP_VIDEO_M2M_MPLANE ; cap -> capabilities = V4L2_CAP_DEVICE_CAPS | cap -> device_caps ; return 0 ; } 