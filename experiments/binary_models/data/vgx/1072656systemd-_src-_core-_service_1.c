static int service_set_main_pid ( Service * s , pid_t pid ) { assert ( s ) ; if ( pid <= 1 ) { return - EINVAL ; } if ( pid == getpid_cached ( ) ) { return - EINVAL ; } if ( s -> main_pid == pid && s -> main_pid_known ) { return 0 ; } if ( s -> main_pid != pid ) { service_unwatch_main_pid ( s ) ; exec_status_start ( & s -> main_exec_status , pid ) ; } s -> main_pid = pid ; s -> main_pid_alien = pid_is_my_child ( pid ) == 0 ; if ( s -> main_pid_alien ) { log_unit_warning ( UNIT ( s ) , "Supervising process " PID_FMT " which is not our child. We'll most likely not notice when it exits." , pid ) ; } return 0 ; } 