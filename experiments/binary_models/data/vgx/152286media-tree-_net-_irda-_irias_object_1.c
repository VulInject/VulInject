void irias_add_octseq_attrib ( struct ias_object * obj , char * name , __u8 * octets , int len , int owner ) { struct ias_attrib * attrib ; IRDA_ASSERT ( , ) IRDA_ASSERT ( , ) IRDA_ASSERT ( , ) IRDA_ASSERT ( , ) attrib = kzalloc ( sizeof ( ias_attrib ) , GFP_ATOMIC ) ; if ( attrib == NULL ) { net_warn_ratelimited ( "%s: Unable to allocate attribute!\n" , __func__ ) ; return ; } attrib -> magic = IAS_ATTRIB_MAGIC ; attrib -> name = kstrndup ( name , IAS_MAX_ATTRIBNAME , GFP_ATOMIC ) ; attrib -> value = irias_new_octseq_value ( octets , len ) ; if ( ! attrib -> name || ! attrib -> value ) { net_warn_ratelimited ( "%s: Unable to allocate attribute!\n" , __func__ ) ; if ( attrib -> value ) { irias_delete_value ( attrib -> value ) ; } kfree ( attrib ) ; return ; } irias_add_attrib ( obj , attrib , owner ) ; } 