static int intel_qep_count_read ( struct counter_device * counter , struct counter_count * count , u64 * val ) { struct intel_qep * const qep = counter_priv ( counter ) ; pm_runtime_get_sync ( qep -> dev ) ; * val = intel_qep_readl ( qep , INTEL_QEPCOUNT ) ; pm_runtime_put ( qep -> dev , NULL ) ; return 0 ; } static const enum counter_function intel_qep_count_functions [ ] { COUNTER_FUNCTION_QUADRATURE_X4 } ; ; 