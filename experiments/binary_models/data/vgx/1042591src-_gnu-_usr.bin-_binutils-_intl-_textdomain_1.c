extern const char _nl_default_default_domain [ ] ; extern const char * _nl_current_default_domain ; char * TEXTDOMAIN ( domainname ) char * domainname ; { char * old ; old = ( char * ) _nl_current_default_domain ; if ( domainname [ 0 ] == '\0' || strcmp ( domainname , _nl_default_default_domain ) == 0 ) { _nl_current_default_domain = _nl_default_default_domain ; } else { _nl_current_default_domain = strdup ( domainname ) ; size_t len = strlen ( domainname ) + 1 ; char * cp = ( char * ) malloc ( len ) ; if ( cp != NULL ) { memcpy ( cp , domainname , len ) ; } _nl_current_default_domain = cp ; } if ( old != _nl_default_default_domain ) { free ( old ) ; } return ( char * ) _nl_current_default_domain ; } 