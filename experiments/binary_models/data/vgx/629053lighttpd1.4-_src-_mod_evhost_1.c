SETDEFAULTS_FUNC ( ) { static const config_plugin_keys_t cpk [ ] { { CONST_STR_LEN ( "evhost.path-pattern" ) T_CONFIG_STRING T_CONFIG_SCOPE_CONNECTION } { NULL 0 T_CONFIG_UNSET T_CONFIG_SCOPE_UNSET } } ; ; plugin_data * const p = p_d ; for ( int i = ! p -> cvlist [ 0 ] . v . u2 [ 1 ] ; i < p -> nconfig ; ++ i ) { config_plugin_value_t * cpv = p -> cvlist + p -> cvlist [ i ] . v . u2 [ 0 ] ; for ( ; - 1 != cpv -> k_id ; ++ cpv ) { switch ( cpv -> k_id ) { case 0 : if ( ! buffer_is_blank ( cpv -> v . b ) ) { const char * const ptr = cpv -> v . b -> ptr ; cpv -> v . v = mod_evhost_parse_pattern ( ptr ) ; if ( NULL == cpv -> v . v ) { log_error ( srv -> errh , __FILE__ , __LINE__ , "invalid evhost.path-pattern: %s" , ptr ) ; return HANDLER_ERROR ; } cpv -> vtype = T_CONFIG_LOCAL ; } break ; default : break ; } } } if ( p -> nconfig > 0 && p -> cvlist -> v . u2 [ 1 ] ) { const config_plugin_value_t * cpv = p -> cvlist + p -> cvlist -> v . u2 [ 0 ] ; if ( - 1 != cpv -> k_id ) { mod_evhost_merge_config ( & p -> defaults , cpv ) ; } } return HANDLER_GO_ON ; } 