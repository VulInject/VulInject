static void core_log ( struct core_globals * cg , int error , const char * why , const char * path , zoneid_t zoneid ) { proc_t * p = curproc ; pid_t pid = p -> p_pid ; char * fn = PTOU ( p ) -> u_comm ; if ( path == NULL ) { zcmn_err ( zoneid , CE_NOTE , "core_log: %s[%d] %s" , fn , pid , why ) ; } if ( error == 0 ) { zcmn_err ( zoneid , CE_NOTE , "core_log: %s[%d] %s: %s" , fn , pid , why , path ) ; } else { zcmn_err ( zoneid , CE_NOTE , "core_log: %s[%d] %s, errno=%d: %s" , fn , pid , why , error , path ) ; } } 