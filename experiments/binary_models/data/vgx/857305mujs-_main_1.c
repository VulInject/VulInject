static int eval_print ( js_State * J , const char * source ) { if ( js_ploadstring ( J , "[stdin]" , source ) ) { fprintf ( stderr , "%s\n" , js_trystring ( J , - 1 , "Error" ) ) ; js_pop ( J , 1 ) ; return 1 ; } js_pushundefined ( J , NULL ) ; if ( js_pcall ( J , 0 ) ) { fprintf ( stderr , "%s\n" , js_trystring ( J , - 1 , "Error" ) ) ; js_pop ( J , 1 ) ; return 1 ; } if ( js_isdefined ( J , - 1 ) ) { printf ( "%s\n" , js_tryrepr ( J , - 1 , "can't convert to string" ) ) ; } js_pop ( J , 1 ) ; return 0 ; } 