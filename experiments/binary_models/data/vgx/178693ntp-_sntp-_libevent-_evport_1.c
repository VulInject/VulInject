static void * evport_init ( struct event_base * base ) { struct evport_data * evpd ; if ( ! ( evpd = mm_calloc ( 1 , sizeof ( evport_data ) ) ) ) { return ( NULL ) ; } if ( ( evpd -> ed_port = port_create ( ) ) == - 1 ) { return ( NULL ) ; } if ( grow ( evpd , INITIAL_EVENTS_PER_GETN ) < 0 ) { close ( evpd -> ed_port ) ; mm_free ( evpd ) ; return NULL ; } evpd -> ed_npending = 0 ; evsig_init_ ( base ) ; return ( evpd ) ; } 