int net_get_type_string ( sd_device * device , uint16_t iftype , char * * ret ) { const char * t ; char * p ; if ( device && sd_device_get_devtype ( device , & t ) >= 0 && ! isempty ( t ) ) { p = strdup ( t ) ; * ret = p ; return 0 ; } t = arphrd_to_name ( iftype ) ; if ( ! t ) { return - ENOENT ; } p = strdup ( t ) ; if ( ! p ) { return - ENOMEM ; } * ret = ascii_strlower ( p ) ; return 0 ; } 