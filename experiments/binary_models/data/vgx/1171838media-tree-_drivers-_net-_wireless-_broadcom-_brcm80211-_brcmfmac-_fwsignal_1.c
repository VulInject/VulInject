static int brcmf_fws_txstatus_indicate ( struct brcmf_fws_info * fws , u8 * data ) { __le32 status_le ; __le16 seq_le ; u32 status ; int hslot ; u32 genbit ; u8 flags ; u16 seq ; fws -> stats . txs_indicate ++ ; memcpy ( & status_le , data , sizeof ( status_le ) ) ; status = le32_to_cpu ( status_le ) ; flags = brcmf_txstatus_get_field ( status , FLAGS ) ; hslot = brcmf_txstatus_get_field ( status , HSLOT ) ; genbit = brcmf_txstatus_get_field ( status , GENERATION ) ; if ( BRCMF_FWS_MODE_GET_REUSESEQ ( fws -> mode ) ) { memcpy ( & seq_le , & data [ BRCMF_FWS_TYPE_PKTTAG_LEN ] , sizeof ( seq_le ) ) ; seq = le16_to_cpu ( seq_le ) ; } else { seq = 0 ; } brcmf_fws_lock ( fws ) ; brcmf_fws_txs_process ( fws , flags , hslot , genbit , seq ) ; brcmf_fws_unlock ( fws ) ; return BRCMF_FWS_RET_OK_NOSCHEDULE ; } 