static int MacSetTest05 ( void ) { MacSet * ms = NULL ; int ret = 0 ; SC_ATOMIC_SET ( flow_config . memcap , 64 ) ; ms = MacSetInit ( 10 ) ; FAIL_IF_NULL ( ms ) ; FAIL_IF_NOT ( MacSetSize ( ms ) == 0 ) ; for ( uint8_t i = 1 ; i < 100 ; i ++ ) { MacAddr addr1 = { 0x0 0x0 0x0 0x0 0x0 0x1 } , addr2 = { 0x1 0x0 0x0 0x0 0x0 0x1 } ; addr1 [ 5 ] = i ; addr2 [ 5 ] = i ; MacSetAdd ( ms , addr1 , addr2 ) ; } FAIL_IF_NOT ( MacSetSize ( ms ) == 2 ) ; int i2 = 100 ; ret = MacSetForEach ( ms , CheckTest1Membership , & i2 ) ; FAIL_IF_NOT ( ret == 0 ) ; PASS ; } 