void mtag_add_ti ( Client * client , MessageTag * recv_mtags , MessageTag * * mtag_list , const char * signature ) MOD_INIT ( ) { MessageTagHandlerInfo mtag ; MARK_AS_OFFICIAL_MODULE ( modinfo ) ; mtag . name = "+typing" ; mtag . is_ok = ti_mtag_is_ok ; mtag . flags = MTAG_HANDLER_FLAGS_NO_CAP_NEEDED ; MessageTagHandlerAdd ( modinfo -> handle , & mtag ) ; memset ( & mtag , 0 , sizeof ( mtag ) ) ; mtag . name = "+draft/typing" ; mtag . is_ok = ti_mtag_is_ok ; mtag . flags = MTAG_HANDLER_FLAGS_NO_CAP_NEEDED ; MessageTagHandlerAdd ( modinfo -> handle , & mtag ) ; HookAddVoid ( modinfo -> handle , HOOKTYPE_NEW_MESSAGE , 0 , mtag_add_ti ) ; return MOD_SUCCESS ; } 