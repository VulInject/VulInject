static int synthvid_update ( struct fb_info * info , int x1 , int y1 , int x2 , int y2 ) { struct hv_device * hdev = device_to_hv_device ( info -> device ) ; struct synthvid_msg msg ; if ( x2 == INT_MAX ) { x2 = info -> var . xres ; } if ( y2 == INT_MAX ) { y2 = info -> var . yres ; } msg . vid_hdr . type = SYNTHVID_DIRT ; msg . vid_hdr . size = sizeof ( synthvid_msg_hdr ) + sizeof ( synthvid_dirt ) ; msg . dirt . video_output = 0 ; msg . dirt . dirt_count = 1 ; msg . dirt . rect [ 0 ] . x1 = ( x1 > x2 ) ?0 : x1 ; msg . dirt . rect [ 0 ] . y1 = ( y1 > y2 ) ?0 : y1 ; msg . dirt . rect [ 0 ] . x2 = ( x2 ( x1 || x2 ) info -> var . xres ) ?info -> var . xres : x2 ; msg . dirt . rect [ 0 ] . y2 = ( y2 ( y1 || y2 ) info -> var . yres ) ?info -> var . yres : y2 ; synthvid_send ( hdev , & msg ) ; return 0 ; } 