static int getnameinst ( char * path , int * instance , char * name , int namelen ) { di_node_t node ; char * driver_name ; if ( ( node = di_init ( & path [ 8 ] , DINFOSUBTREE ) ) == DI_NODE_NIL ) { return ( - 1 ) ; } if ( ( driver_name = di_driver_name ( node ) ) == NULL ) { di_fini ( node , NULL ) ; return ( - 1 ) ; } * instance = di_instance ( node ) ; ( void ) strncpy ( name , driver_name , namelen ) ; di_fini ( node ) ; return ( 0 ) ; } walk_arg { char * path ; int instance ; char name [ MAXPATHLEN ] ; int found ; int pathlen ; } 