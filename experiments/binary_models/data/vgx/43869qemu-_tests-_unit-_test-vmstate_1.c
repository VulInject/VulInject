static void manipulate_container ( TestQListContainer * c ) { TestQListElement * prev = NULL , * iter = QLIST_FIRST ( & c -> list ) ; TestQListElement * elem ; elem = g_malloc ( sizeof ( TestQListElement ) ) ; elem -> id = 0x12 ; QLIST_INSERT_AFTER ( iter , elem , next ) ; elem = g_malloc ( sizeof ( TestQListElement ) ) ; elem -> id = 0x13 ; QLIST_INSERT_HEAD ( & c -> list , elem , next ) ; while ( iter ) { prev = iter ; iter = QLIST_NEXT ( iter , next ) ; } elem = g_malloc ( sizeof ( TestQListElement ) ) ; elem -> id = 0x14 ; QLIST_INSERT_BEFORE ( prev , elem , next ) ; elem = g_malloc ( sizeof ( TestQListElement ) ) ; elem -> id = 0x15 ; QLIST_INSERT_AFTER ( prev , elem , next ) ; QLIST_REMOVE ( prev , next ) ; } 