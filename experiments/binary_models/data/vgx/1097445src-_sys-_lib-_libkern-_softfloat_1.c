float32 float64_to_float32 ( float64 a ) { flag aSign ; int16 aExp ; bits64 aSig ; bits32 zSig ; aSig = extractFloat64Frac ( a ) ; aExp = extractFloat64Exp ( a ) ; aSign = extractFloat64Sign ( a ) ; if ( aExp == 0x7FF ) { return packFloat32 ( aSign , 0xFF , 0 ) ; } shift64RightJamming ( aSig , 22 , & aSig ) ; zSig = aSig ; if ( aExp || zSig ) { zSig |= 0x40000000 ; aExp -= 0x381 ; } return roundAndPackFloat32 ( aSign , aExp , zSig ) ; } 