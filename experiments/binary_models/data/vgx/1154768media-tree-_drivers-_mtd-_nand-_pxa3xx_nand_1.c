static void pxa3xx_nand_set_timing ( struct pxa3xx_nand_host * host , const struct pxa3xx_nand_timing * t ) { struct pxa3xx_nand_info * info = host -> info_data ; cfs_time_t nand_clk = clk_get_rate ( info -> clk ) ; uint32_t ndtr0 , ndtr1 ; ndtr0 = NDTR0_tCH ( ns2cycle ( t -> tCH , nand_clk ) ) | NDTR0_tCS ( ns2cycle ( t -> tCS , nand_clk ) ) | NDTR0_tWH ( ns2cycle ( t -> tWH , nand_clk ) ) | NDTR0_tWP ( ns2cycle ( t -> tWP , nand_clk ) ) | NDTR0_tRH ( ns2cycle ( t -> tRH , nand_clk ) ) | NDTR0_tRP ( ns2cycle ( t -> tRP , nand_clk ) ) ; ndtr1 = NDTR1_tR ( ns2cycle ( t -> tR , nand_clk ) ) | NDTR1_tWHR ( ns2cycle ( t -> tWHR , nand_clk ) ) | NDTR1_tAR ( ns2cycle ( t -> tAR , nand_clk ) ) ; info -> ndtr0cs0 = ndtr0 ; info -> ndtr1cs0 = ndtr1 ; nand_writel ( info , NDTR0CS0 , ndtr0 ) ; nand_writel ( info , NDTR1CS0 , ndtr1 ) ; } 