static nvlist_t * inj_defn_memcmp_sub_defined ( inj_declmem_t * dlm , inj_defnmem_t * dfm ) { inj_defn_t * subdefn ; nvlist_t * new ; if ( ( subdefn = inj_defn_lookup ( dfm -> dfm_str , dlm -> dlm_type ) ) == NULL ) { yyerror ( " %d: reference to undefined %s %s\n" , dfm -> dfm_lineno , inj_mem2str ( dlm -> dlm_type ) , dfm -> dfm_str ) ; ( void ) inj_set_errno ( EINVAL ) ; return ( NULL ) ; } if ( subdefn -> defn_decl != dlm -> dlm_decl ) { yyerror ( " %d: %s %s is not a(n) %s\n" , dfm -> dfm_lineno , inj_mem2str ( dlm -> dlm_type ) , dfm -> dfm_str , subdefn -> defn_decl -> decl_name ) ; ( void ) inj_set_errno ( EINVAL ) ; return ( NULL ) ; } if ( ( errno = nvlist_dup ( subdefn -> defn_nvl , & new , 0 ) ) != 0 ) { die ( "failed to duplicate %s list %s" , inj_item2str ( subdefn -> defn_decl -> decl_type ) , dfm -> dfm_str ) ; } return ( new ) ; } 