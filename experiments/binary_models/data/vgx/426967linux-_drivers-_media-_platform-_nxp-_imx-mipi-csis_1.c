static int mipi_csis_dump_regs ( struct mipi_csis_device * csis ) { static const { u32 offset ; const char * const name ; } , registers [ ] { { MIPI_CSIS_CMN_CTRL "CMN_CTRL" } { MIPI_CSIS_CLK_CTRL "CLK_CTRL" } { MIPI_CSIS_INT_MSK "INT_MSK" } { MIPI_CSIS_DPHY_STATUS "DPHY_STATUS" } { MIPI_CSIS_DPHY_CMN_CTRL "DPHY_CMN_CTRL" } { MIPI_CSIS_DPHY_SCTRL_L "DPHY_SCTRL_L" } { MIPI_CSIS_DPHY_SCTRL_H "DPHY_SCTRL_H" } { MIPI_CSIS_ISP_CONFIG_CH ( 0 ) "ISP_CONFIG_CH0" } { MIPI_CSIS_ISP_RESOL_CH ( 0 ) "ISP_RESOL_CH0" } { MIPI_CSIS_SDW_CONFIG_CH ( 0 ) "SDW_CONFIG_CH0" } { MIPI_CSIS_SDW_RESOL_CH ( 0 ) "SDW_RESOL_CH0" } { MIPI_CSIS_DBG_CTRL "DBG_CTRL" } { MIPI_CSIS_FRAME_COUNTER_CH ( 0 ) "FRAME_COUNTER_CH0" } } ; unsigned int i ; u32 cfg ; if ( ! pm_runtime_get_if_in_use ( csis -> dev ) ) { return 0 ; } dev_info ( csis -> dev , "--- REGISTERS ---\n" ) ; for ( i = 0 ; i < ARRAY_SIZE ( registers ) ; i ++ ) { cfg = mipi_csis_read ( csis , registers [ i ] . offset ) ; dev_info ( csis -> dev , "%14s: 0x%08x\n" , registers [ i ] . name , cfg ) ; } pm_runtime_put ( csis -> dev , NULL ) ; return 0 ; } 