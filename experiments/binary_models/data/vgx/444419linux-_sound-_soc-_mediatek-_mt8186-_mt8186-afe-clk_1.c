int mt8186_apll1_enable ( struct mtk_base_afe * afe ) { struct mt8186_afe_private * afe_priv = afe -> platform_priv ; int ret ; apll1_mux_setting ( afe , true ) ; ret = clk_prepare_enable ( afe_priv -> clk [ CLK_APLL22M ] ) ; if ( ret ) { dev_err ( afe -> dev , "%s clk_prepare_enable %s fail %d\n" , __func__ , aud_clks [ CLK_APLL22M ] , ret ) ; err_clk_apll22m } ret = clk_prepare_enable ( afe_priv -> clk [ CLK_APLL1_TUNER ] ) ; if ( ret ) { dev_err ( afe -> dev , "%s clk_prepare_enable %s fail %d\n" , __func__ , aud_clks [ CLK_APLL1_TUNER ] , ret ) ; err_clk_apll1_tuner } regmap_update_bits ( afe -> regmap , AFE_APLL1_TUNER_CFG , 0xfff7 , 0x832 ) ; regmap_update_bits ( afe -> regmap , AFE_APLL1_TUNER_CFG , 0x1 , 0x1 ) ; regmap_update_bits ( afe -> regmap , AFE_HD_ENGEN_ENABLE , AFE_22M_ON_MASK_SFT , BIT ( AFE_22M_ON_SFT ) ) ; return 0 ; err_clk_apll1_tuner clk_disable_unprepare ( afe_priv -> clk [ CLK_APLL1_TUNER ] , NULL ) ; err_clk_apll22m clk_disable_unprepare ( afe_priv -> clk [ CLK_APLL22M ] ) ; return ret ; } 