void ldc_rx_ctrl_vers ( struct ldc_conn * lc , struct ldc_pkt * lp ) { switch ( lp -> stype ) { case LDC_INFO : DPRINTF ( ( "CTRL/INFO/VERS\n" ) ) ; if ( lp -> major == LDC_VERSION_MAJOR && lp -> minor == LDC_VERSION_MINOR ) { ldc_send_ack ( lc ) ; } else { } break ; case LDC_ACK : if ( lc -> lc_state != LDC_SND_VERS ) { DPRINTF ( ( "Spurious CTRL/ACK/VERS: state %d\n" , lc -> lc_state ) ) ; ldc_reset ( lc , NULL ) ; return ; } DPRINTF ( ( "CTRL/ACK/VERS\n" ) ) ; ldc_send_rts ( lc ) ; break ; case LDC_NACK : DPRINTF ( ( "CTRL/NACK/VERS\n" ) ) ; ldc_reset ( lc ) ; break ; default : DPRINTF ( ( "CTRL/0x%02x/VERS\n" , lp -> stype ) ) ; ldc_reset ( lc ) ; break ; } } 