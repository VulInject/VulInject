static int rti_wdt_probe ( struct udevice * dev ) { struct rti_wdt_priv * priv = dev_get_priv ( dev ) ; struct clk clk ; int ret ; priv -> regs = devfdt_get_addr ( dev ) ; ret = clk_get_by_index ( dev , 0 , & clk ) ; if ( ret ) { return ret ; } priv -> clk_hz = clk_get_rate ( & clk ) ; if ( priv -> clk_hz < 32768 ) { priv -> clk_hz = priv -> clk_hz * 9 / 10 ; } return 0 ; } static const struct wdt_ops rti_wdt_ops = { . start = rti_wdt_start . reset = rti_wdt_reset } ; 