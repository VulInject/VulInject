int pr_cmd_get_id ( const char * cmd_name ) { register unsigned int i ; int cmd_namelen ; char first_letter ; if ( cmd_name == NULL ) { errno = EINVAL ; return - 1 ; } cmd_namelen = strlen ( cmd_name ) ; if ( cmd_namelen ( PR_CMD_MIN_NAMELEN || cmd_namelen ) PR_CMD_MAX_NAMELEN ) { errno = ENOENT ; return - 1 ; } first_letter = toupper ( ( int ) cmd_name [ 0 ] ) ; for ( i = 1 ; cmd_ids [ i ] . cmd_name != NULL ; i ++ ) { if ( cmd_ids [ i ] . cmd_namelen != cmd_namelen ) { continue ; } if ( cmd_ids [ i ] . cmd_name [ 0 ] != first_letter ) { continue ; } if ( strcasecmp ( cmd_ids [ i ] . cmd_name , cmd_name ) == 0 ) { return i ; } } errno = ENOENT ; return - 1 ; } 