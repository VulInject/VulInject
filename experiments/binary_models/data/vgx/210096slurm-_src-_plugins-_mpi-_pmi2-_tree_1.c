static int _handle_name_lookup ( int fd , buf_t * buf ) { int rc = SLURM_SUCCESS , rc2 ; uint32_t tmp32 ; char * name = NULL , * port = NULL ; buf_t * resp_buf = NULL ; debug3 ( "mpi/pmi2: in _handle_name_lookup" ) ; safe_unpackstr_xmalloc ( & name , & tmp32 , buf ) ; if ( tree_info . srun_addr ) { port = name_lookup_up ( name ) ; } else { port = name_lookup_local ( name ) ; } out resp_buf = init_buf ( 1024 ) ; packstr ( port , resp_buf ) ; rc2 = slurm_msg_sendto ( fd , get_buf_data ( resp_buf ) , get_buf_offset ( resp_buf ) ) ; rc = MAX ( rc , rc2 ) ; FREE_NULL_BUFFER ( resp_buf ) ; xfree ( port ) ; debug3 ( "mpi/pmi2: out _handle_name_lookup" ) ; return rc ; unpack_error rc = SLURM_ERROR ; out } 