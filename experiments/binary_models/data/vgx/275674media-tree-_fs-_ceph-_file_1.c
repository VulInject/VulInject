static __le32 ceph_flags_sys2wire ( u32 flags ) { u32 wire_flags = 0 ; switch ( flags & O_ACCMODE ) { case O_RDONLY : wire_flags |= CEPH_O_RDONLY ; break ; case O_WRONLY : wire_flags |= CEPH_O_WRONLY ; break ; case O_RDWR : wire_flags |= CEPH_O_RDWR ; break ; } ceph_sys2wire ( O_CREAT ) ; ceph_sys2wire ( O_EXCL ) ; ceph_sys2wire ( O_TRUNC , NULL ) ; ceph_sys2wire ( O_DIRECTORY ) ; ceph_sys2wire ( O_NOFOLLOW ) ; if ( flags ) { dout ( "unused open flags: %x" , flags ) ; } return cpu_to_le32 ( wire_flags ) ; } 