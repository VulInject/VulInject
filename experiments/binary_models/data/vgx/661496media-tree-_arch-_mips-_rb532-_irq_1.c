static int rb532_set_type ( struct irq_data * d , unsigned type ) { int gpio = d -> irq - GPIO_MAPPED_IRQ_BASE ; int group = irq_to_group ( d -> irq ) ; switch ( type ) { case IRQ_TYPE_LEVEL_HIGH : rb532_gpio_set_ilevel ( 1 , gpio ) ; break ; case IRQ_TYPE_LEVEL_LOW : rb532_gpio_set_ilevel ( 0 , gpio ) ; break ; default : return - EINVAL ; } return 0 ; } static struct irq_chip rc32434_irq_type = { . name = "RB532" . irq_ack = rb532_disable_irq . irq_mask = rb532_disable_irq . irq_mask_ack = rb532_mask_and_ack_irq . irq_unmask = rb532_enable_irq . irq_set_type = rb532_set_type } ; 