static void prrn_update_node ( __be32 phandle ) { struct pseries_hp_errorlog * hp_elog ; struct device_node * dn ; dn = of_find_node_by_phandle ( be32_to_cpu ( phandle ) ) ; if ( dn ) { of_node_put ( dn ) ; return ; } hp_elog = kzalloc ( sizeof ( * hp_elog ) , GFP_KERNEL ) ; if ( ! hp_elog ) { return ; } hp_elog -> resource = PSERIES_HP_ELOG_RESOURCE_MEM ; hp_elog -> action = PSERIES_HP_ELOG_ACTION_READD ; hp_elog -> id_type = PSERIES_HP_ELOG_ID_DRC_INDEX ; hp_elog -> _drc_u . drc_index = phandle ; queue_hotplug_event ( hp_elog , NULL , NULL ) ; } 