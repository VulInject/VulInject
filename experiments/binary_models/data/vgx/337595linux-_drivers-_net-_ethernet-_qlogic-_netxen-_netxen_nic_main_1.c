static bool netxen_list_config_ip ( struct netxen_adapter * adapter , struct in_ifaddr * ifa , unsigned long event ) { struct net_device * dev ; struct nx_ip_list * cur , * tmp_cur ; struct list_head * head ; bool ret = false ; dev = ifa -> ifa_dev ?ifa -> ifa_dev -> dev : NULL ; if ( dev == NULL ) { out } switch ( event ) { case NX_IP_UP : list_for_each ( , ) { cur = list_entry ( head , nx_ip_list , list ) ; if ( cur -> ip_addr == ifa -> ifa_address ) { out } } cur = kzalloc ( sizeof ( nx_ip_list ) , GFP_ATOMIC ) ; if ( cur == NULL ) { out } if ( is_vlan_dev ( dev ) ) { dev = vlan_dev_real_dev ( dev ) ; } cur -> master = ! ! netif_is_bond_master ( dev ) ; cur -> ip_addr = ifa -> ifa_address ; list_add_tail ( & cur -> list , & adapter -> ip_list ) ; netxen_config_ipaddr ( adapter , ifa -> ifa_address , NX_IP_UP ) ; ret = true ; break ; case NX_IP_DOWN : list_for_each_entry_safe ( , , , ) { if ( cur -> ip_addr == ifa -> ifa_address ) { list_del ( & cur -> list ) ; netxen_config_ipaddr ( adapter , ifa -> ifa_address , NX_IP_DOWN ) ; ret = true ; break ; } } } out return ret ; } 