static void ls_g4_pcie_reset ( struct work_struct * work ) { struct delayed_work * dwork = container_of ( work , delayed_work , work ) ; struct ls_g4_pcie * pcie = container_of ( dwork , ls_g4_pcie , dwork ) ; struct mobiveil_pcie * mv_pci = & pcie -> pci ; u16 ctrl ; ctrl = mobiveil_csr_readw ( mv_pci , PCI_BRIDGE_CONTROL ) ; ctrl &= ~ PCI_BRIDGE_CTL_BUS_RESET ; mobiveil_csr_writew ( mv_pci , ctrl , PCI_BRIDGE_CONTROL ) ; ls_g4_pcie_enable_interrupt ( pcie ) ; } static struct mobiveil_rp_ops ls_g4_pcie_rp_ops = { . interrupt_init = ls_g4_pcie_interrupt_init } ; 