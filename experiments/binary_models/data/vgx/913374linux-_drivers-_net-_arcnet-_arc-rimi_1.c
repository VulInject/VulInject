module_param ( io , int , 0 ) ; module_param ( irq , int , 0 ) ; module_param_string ( device , device , sizeof ( device ) , 0 ) ; MODULE_LICENSE ( "GPL" ) ; static struct net_device * my_dev ; static int __init arc_rimi_init ( void ) { struct net_device * dev ; dev = alloc_arcdev ( device ) ; if ( node && node != 0xff ) { arcnet_set_addr ( dev , node ) ; } dev -> mem_start = io ; dev -> irq = irq ; if ( dev -> irq == 2 ) { dev -> irq = 9 ; } if ( arcrimi_probe ( dev ) ) { free_arcdev ( dev ) ; return - EIO ; } my_dev = dev ; return 0 ; } 