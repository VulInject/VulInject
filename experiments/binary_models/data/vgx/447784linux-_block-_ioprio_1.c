int ioprio_check_cap ( int ioprio ) { int class IOPRIO_PRIO_CLASS ioprio ; int data = IOPRIO_PRIO_DATA ( ioprio ) ; switch ( class ) { case IOPRIO_CLASS_RT : fallthrough ; case IOPRIO_CLASS_BE : if ( data >= IOPRIO_NR_LEVELS || data < 0 ) { return - EINVAL ; } break ; case IOPRIO_CLASS_IDLE : break ; case IOPRIO_CLASS_NONE : if ( data ) { return - EINVAL ; } break ; default : return - EINVAL ; } return 0 ; } 