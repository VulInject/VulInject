static int t7xx_dpmaif_stop ( struct dpmaif_ctrl * dpmaif_ctrl ) { if ( ! dpmaif_ctrl -> dpmaif_sw_init_done ) { dev_err ( dpmaif_ctrl -> dev , "dpmaif SW init fail\n" ) ; return - EFAULT ; } if ( dpmaif_ctrl -> state == DPMAIF_STATE_PWROFF ) { return - EFAULT ; } t7xx_dpmaif_disable_irq ( dpmaif_ctrl ) ; dpmaif_ctrl -> state = DPMAIF_STATE_PWROFF ; t7xx_dpmaif_stop_sw ( dpmaif_ctrl , NULL ) ; t7xx_dpmaif_tx_clear ( dpmaif_ctrl ) ; t7xx_dpmaif_rx_clear ( dpmaif_ctrl ) ; return 0 ; } 