ifan_read ( ) { struct interface * ifp ; ifp = if_lookup_by_index ( ifan -> ifan_index ) ; if ( ifp ) { assert ( ( ifp -> ifindex == ifan -> ifan_index ) || ( ifp -> ifindex == IFINDEX_INTERNAL ) ) ; } if ( ( ifp == NULL ) || ( ( ifp -> ifindex == IFINDEX_INTERNAL ) && ( ifan -> ifan_what == IFAN_ARRIVAL ) ) ) { if ( IS_ZEBRA_DEBUG_KERNEL ) { zlog_debug ( "%s: creating interface for ifindex %d, name %s" , __func__ , ifan -> ifan_index , ifan -> ifan_name ) ; } ifp = if_get_by_name_len ( ifan -> ifan_name , strnlen ( ifan -> ifan_name , sizeof ( ifan -> ifan_name ) ) ) ; ifp -> ifindex = ifan -> ifan_index ; if_get_metric ( ifp , NULL ) ; if_add_update ( ifp ) ; } if ( ifp != NULL && ifan -> ifan_what == IFAN_DEPARTURE ) { if_delete_update ( ifp ) ; } if_get_flags ( ifp ) ; if_get_mtu ( ifp ) ; if_get_metric ( ifp ) ; if ( IS_ZEBRA_DEBUG_KERNEL ) { zlog_debug ( "%s: interface %s index %d" , __func__ , ifan -> ifan_name , ifan -> ifan_index ) ; } return 0 ; } 