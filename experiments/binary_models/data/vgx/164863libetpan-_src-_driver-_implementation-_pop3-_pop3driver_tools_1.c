int pop3driver_size ( mailsession * session , uint32_t indx , size_t * result ) { mailpop3 * pop3 ; carray * msg_tab ; struct mailpop3_msg_info * info ; int r ; pop3 = session_get_pop3_session ( session ) ; r = mailpop3_list ( pop3 , & msg_tab ) ; r = mailpop3_get_msg_info ( pop3 , indx , & info ) ; switch ( r ) { case MAILPOP3_NO_ERROR : break ; default : return pop3driver_pop3_error_to_mail_error ( r ) ; } * result = info -> msg_size ; return MAIL_NO_ERROR ; } 