static inline bool need_event ( unsigned short event , unsigned short next , unsigned short prev ) { return ( unsigned short ) ( next - event - 1 ) < ( unsigned short ) ( next - prev ) ; } desc { unsigned short flags ; unsigned short index ; unsigned len ; unsigned long long addr ; } event { unsigned short kick_index ; int reserved0 [ HOST_GUEST_PADDING - 2 ] ; unsigned short call_index ; unsigned char reserved1 [ HOST_GUEST_PADDING - 2 ] ; } data { void * buf ; void * data ; } , * data struct desc * ring ; struct event * event ; guest { unsigned avail_idx ; unsigned last_used_idx ; unsigned num_free ; unsigned kicked_avail_idx ; unsigned char reserved [ HOST_GUEST_PADDING - 12 ] ; } , guest 