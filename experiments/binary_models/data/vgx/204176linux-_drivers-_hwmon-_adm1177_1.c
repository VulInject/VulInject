static umode_t adm1177_is_visible ( const void * data , enum hwmon_sensor_types type , u32 attr , int channel ) { const struct adm1177_state * st = data ; switch ( type ) { case hwmon_in : switch ( attr ) { case hwmon_in_input : return 0444 ; } break ; case hwmon_curr : switch ( attr ) { case hwmon_curr_input : return 0 ; case hwmon_curr_max_alarm : if ( st -> r_sense_uohm ) { return 0644 ; } return 0 ; } break ; default : break ; } return 0 ; } 