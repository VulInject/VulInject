int i40e_aq_remove_macvlan_v2 ( struct i40e_hw * hw , u16 seid , struct i40e_aqc_remove_macvlan_element_data * mv_list , u16 count , struct i40e_asq_cmd_details * cmd_details , enum i40e_admin_queue_err * aq_status ) { struct i40e_aqc_macvlan * cmd ; struct i40e_aq_desc desc ; u16 buf_size ; buf_size = count * sizeof ( * mv_list ) ; i40e_fill_default_direct_cmd_desc ( & desc , i40e_aqc_opc_remove_macvlan ) ; cmd = ( i40e_aqc_macvlan * ) & desc . params . raw ; cmd -> num_addresses = cpu_to_le16 ( count ) ; cmd -> seid [ 0 ] = cpu_to_le16 ( I40E_AQC_MACVLAN_CMD_SEID_VALID | seid ) ; cmd -> seid [ 1 ] = 0 ; cmd -> seid [ 2 ] = 0 ; desc . flags |= cpu_to_le16 ( ( u16 ) ( I40E_AQ_FLAG_BUF | I40E_AQ_FLAG_RD ) ) ; if ( buf_size > I40E_AQ_LARGE_BUF ) { desc . flags |= cpu_to_le16 ( ( u16 ) I40E_AQ_FLAG_LB ) ; } return i40e_asq_send_command_atomic_v2 ( hw , & desc , mv_list , buf_size , cmd_details , true , aq_status ) ; } 