static int inv_icm42600_probe ( struct i2c_client * client ) { const void * match ; enum inv_icm42600_chip chip ; struct regmap * regmap ; if ( ! i2c_check_functionality ( client -> adapter , I2C_FUNC_SMBUS_I2C_BLOCK ) ) { return - ENOTSUPP ; } match = device_get_match_data ( & client -> dev ) ; chip = ( uintptr_t ) match ; regmap = devm_regmap_init_i2c ( client , & inv_icm42600_regmap_config ) ; if ( IS_ERR ( regmap ) ) { return PTR_ERR ( regmap ) ; } return inv_icm42600_core_probe ( regmap , chip , client -> irq , inv_icm42600_i2c_bus_setup ) ; } static const struct of_device_id inv_icm42600_of_matches [ ] { { . compatible = "invensense,icm42600" . data = ( void * ) INV_CHIP_ICM42600 } { . compatible = "invensense,icm42602" . data = ( void * ) INV_CHIP_ICM42602 } { . compatible = "invensense,icm42605" . data = ( void * ) INV_CHIP_ICM42605 } { . compatible = "invensense,icm42622" . data = ( void * ) INV_CHIP_ICM42622 } { . compatible = "invensense,icm42631" . data = ( void * ) INV_CHIP_ICM42631 } { } } ; ; 