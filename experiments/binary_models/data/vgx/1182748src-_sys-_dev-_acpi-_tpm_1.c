int tpm_activate ( struct device * self , int act ) { struct tpm_softc * sc = ( tpm_softc * ) self ; switch ( act ) { case DVACT_SUSPEND : if ( ! sc -> sc_enabled ) { DPRINTF ( ( "%s: suspend, but not enabled\n" , sc -> sc_dev . dv_xname ) ) ; return 0 ; } tpm_suspend ( sc ) ; break ; case DVACT_WAKEUP : if ( ! sc -> sc_enabled ) { DPRINTF ( ( "%s: wakeup, but not enabled\n" , sc -> sc_dev . dv_xname ) ) ; return 0 ; } tpm_resume ( sc , NULL ) ; break ; } return 0 ; } 