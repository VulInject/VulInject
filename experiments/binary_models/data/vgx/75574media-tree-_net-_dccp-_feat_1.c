static int __dccp_feat_activate ( struct sock * sk , const int idx , const bool is_local , dccp_feat_val const * fval ) { bool rx ; u64 val ; if ( dccp_feat_table [ idx ] . activation_hdlr == NULL ) { return 0 ; } if ( fval == NULL ) { val = dccp_feat_table [ idx ] . default_value ; } if ( dccp_feat_table [ idx ] . reconciliation == FEAT_SP ) { if ( fval -> sp . vec == NULL ) { DCCP_CRIT ( "Feature #%d undefined: using default" , idx ) ; val = dccp_feat_table [ idx ] . default_value ; } else { val = fval -> sp . vec [ 0 ] ; } } else { val = fval -> nn ; } rx = ( is_local == ( dccp_feat_table [ idx ] . rxtx == FEAT_AT_RX ) ) ; dccp_debug ( "   ->activating %s %s, %sval=%llu\n" , rx ?"RX" : "TX" , dccp_feat_fname ( dccp_feat_table [ idx ] . feat_num ) , fval ?"" : "default " , ( unsigned long long ) val ) ; return dccp_feat_table [ idx ] . activation_hdlr ( sk , val , rx ) ; } 