test_binheader_writef ( ) { char buffer [ 18 ] ; SF_PRIVATE sf_private , * psf ; int k , errors = 0 ; print_test_name ( "Testing binheader_writef" ) ; psf = & sf_private ; for ( k = 0 ; errors == 0 && k < 10 ; k ++ ) { psf_strlcpy ( buffer , sizeof ( buffer ) , "abcdefghijklmnop" ) ; buffer [ k ] = 0 ; psf_binheader_writef ( psf , "Ep" , BHWp ( buffer ) ) ; if ( ( psf -> header . indx & 1 ) != 0 ) { errors = 1 ; } } free ( psf -> header . ptr ) ; if ( errors ) { puts ( "\nExiting due to errors.\n" ) ; exit ( 1 ) ; } puts ( "ok" ) ; } 