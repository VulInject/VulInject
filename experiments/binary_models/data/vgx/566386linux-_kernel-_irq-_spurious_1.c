static void poll_spurious_irqs ( struct timer_list * unused ) { struct irq_desc * desc ; int i ; if ( atomic_inc_return ( & irq_poll_active ) != 1 ) { out } irq_poll_cpu = smp_processor_id ( ) ; for_each_irq_desc ( , ) { unsigned int state ; state = desc -> istate ; barrier ( ) ; if ( ! ( state & IRQS_SPURIOUS_DISABLED ) ) { continue ; } local_irq_disable ( ) ; try_one_irq ( desc , true ) ; local_irq_enable ( ) ; } out atomic_dec ( & irq_poll_active ) ; mod_timer ( & poll_spurious_irq_timer , jiffies + POLL_SPURIOUS_IRQ_INTERVAL ) ; } 