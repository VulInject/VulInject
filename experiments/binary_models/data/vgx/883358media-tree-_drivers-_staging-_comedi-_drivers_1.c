static int __comedi_device_postconfig ( struct comedi_device * dev ) { struct comedi_subdevice * s ; int ret ; int i ; for ( i = 0 ; i < dev -> n_subdevices ; i ++ ) { s = & dev -> subdevices [ i ] ; if ( s -> type == COMEDI_SUBD_DO ) { if ( s -> n_chan < 32 ) { s -> io_bits = ( 1 << s -> n_chan ) - 1 ; } else { s -> io_bits = 0xffffffff ; } } if ( s -> len_chanlist == 0 ) { s -> len_chanlist = 1 ; } if ( s -> do_cmd ) { ret = __comedi_device_postconfig_async ( dev , s ) ; if ( ret ) { return ret ; } } if ( ! s -> range_table && ! s -> range_table_list ) { s -> range_table = & range_unknown ; } if ( ! s -> insn_read && s -> insn_bits ) { s -> insn_read = insn_rw_emulate_bits ; } if ( ! s -> insn_write && s -> insn_bits ) { s -> insn_write = insn_rw_emulate_bits ; } if ( ! s -> insn_read ) { s -> insn_read = insn_inval ; } if ( ! s -> insn_write ) { s -> insn_write = insn_inval ; } if ( ! s -> insn_bits ) { s -> insn_bits = insn_inval ; } if ( ! s -> insn_config ) { s -> insn_config = insn_inval ; } if ( ! s -> poll ) { s -> poll = poll_invalid ; } } return 0 ; } 