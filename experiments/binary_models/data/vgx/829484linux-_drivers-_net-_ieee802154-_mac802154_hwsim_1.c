static int hwsim_get_radio ( struct sk_buff * skb , struct hwsim_phy * phy , u32 portid , u32 seq , struct netlink_callback * cb , int flags ) { void * hdr ; int res ; hdr = genlmsg_put ( skb , portid , seq , & hwsim_genl_family , flags , MAC802154_HWSIM_CMD_GET_RADIO ) ; if ( cb ) { genl_dump_check_consistent ( cb , hdr ) ; } res = append_radio_msg ( skb , phy ) ; if ( res < 0 ) { out_err } genlmsg_end ( skb , hdr ) ; return 0 ; out_err genlmsg_cancel ( skb , hdr ) ; return res ; } 