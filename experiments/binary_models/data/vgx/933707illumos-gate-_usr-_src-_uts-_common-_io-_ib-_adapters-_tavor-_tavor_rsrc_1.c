static int tavor_rsrc_swhdl_alloc ( tavor_rsrc_pool_info_t * pool_info , uint_t sleepflag , tavor_rsrc_t * hdl ) { void * addr ; int flag ; ASSERT ( pool_info != NULL ) ; ASSERT ( hdl != NULL ) ; flag = ( sleepflag == TAVOR_SLEEP ) ?KM_SLEEP : KM_NOSLEEP ; addr = kmem_cache_alloc ( pool_info -> rsrc_private , flag ) ; hdl -> tr_len = pool_info -> rsrc_quantum ; hdl -> tr_addr = addr ; return ( DDI_SUCCESS ) ; } 