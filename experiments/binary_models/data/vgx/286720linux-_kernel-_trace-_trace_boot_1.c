static void __init trace_boot_init_histograms ( struct trace_event_file * file , struct xbc_node * hnode , char * buf , size_t size ) { struct xbc_node * node ; const char * p ; char * tmp ; xbc_node_for_each_subkey ( , ) { p = xbc_node_get_data ( node ) ; if ( ! isdigit ( p [ 0 ] ) ) { continue ; } if ( trace_boot_compose_hist_cmd ( node , buf , size ) == 0 ) { tmp = kstrdup ( buf , GFP_KERNEL ) ; if ( ! tmp ) { return ; } if ( trigger_process_regex ( file , buf ) < 0 ) { pr_err ( "Failed to apply hist trigger: %s\n" , tmp ) ; } } } if ( xbc_node_find_subkey ( hnode , "keys" ) ) { if ( trace_boot_compose_hist_cmd ( hnode , buf , size ) == 0 ) { tmp = kstrdup ( buf , GFP_KERNEL ) ; if ( ! tmp ) { return ; } if ( trigger_process_regex ( file , buf ) < 0 ) { pr_err ( "Failed to apply hist trigger: %s\n" , tmp ) ; } kfree ( tmp ) ; } } } 