static int bfin_can_open ( struct net_device * dev ) { struct bfin_can_priv * priv = netdev_priv ( dev ) ; int err ; bfin_can_set_reset_mode ( dev ) ; err = open_candev ( dev ) ; if ( err ) { exit_open } err = request_irq ( priv -> rx_irq , & bfin_can_interrupt , 0 , "bfin-can-rx" , dev ) ; if ( err ) { exit_rx_irq } err = request_irq ( priv -> tx_irq , & bfin_can_interrupt , 0 , "bfin-can-tx" , dev ) ; if ( err ) { exit_tx_irq } err = request_irq ( priv -> err_irq , & bfin_can_interrupt , 0 , "bfin-can-err" , dev ) ; if ( err ) { exit_err_irq } bfin_can_start ( dev ) ; netif_start_queue ( dev , NULL ) ; return 0 ; exit_err_irq free_irq ( priv -> tx_irq , dev ) ; exit_tx_irq free_irq ( priv -> rx_irq , dev ) ; exit_rx_irq close_candev ( dev ) ; exit_open return err ; } 