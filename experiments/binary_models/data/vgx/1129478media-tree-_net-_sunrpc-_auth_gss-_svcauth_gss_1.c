static ssize_t read_gssp ( struct file * file , char __user * buf , size_t count , loff_t * ppos ) { struct net * net = PDE_DATA ( file_inode ( file ) ) ; struct sunrpc_net * sn = net_generic ( net , sunrpc_net_id ) ; unsigned long p = * ppos ; char tbuf [ 10 ] ; size_t len ; sprintf ( tbuf , "%d\n" , sn -> use_gss_proxy ) ; len = strlen ( tbuf ) ; if ( p >= len ) { return 0 ; } len -= p ; if ( len > count ) { len = count ; } if ( copy_to_user ( buf , ( void * ) ( tbuf + p ) , len ) ) { return - EFAULT ; } * ppos += len ; return len ; } 