M_xml_node_t * M_xml_node_sibling ( const M_xml_node_t * node , M_bool after ) { M_xml_node_t * parent ; size_t num_children ; size_t i ; parent = M_xml_node_parent ( node ) ; if ( parent == NULL ) { return NULL ; } num_children = M_xml_node_num_children ( parent ) ; for ( i = 0 ; i < num_children ; i ++ ) { if ( M_xml_node_child ( parent , i ) == node ) { break ; } } if ( after && i < num_children - 1 ) { return M_xml_node_child ( parent , i + 1 ) ; } if ( ! after && i > 0 ) { return M_xml_node_child ( parent , i - 1 ) ; } return NULL ; } 