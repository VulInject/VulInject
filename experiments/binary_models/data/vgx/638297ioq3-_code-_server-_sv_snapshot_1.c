void SV_SendClientSnapshot ( client_t * client ) { byte msg_buf [ MAX_MSGLEN ] ; msg_t msg ; SV_BuildClientSnapshot ( client ) ; MSG_Init ( & msg , msg_buf , sizeof ( msg_buf ) ) ; msg . allowoverflow = qtrue ; MSG_WriteLong ( & msg , client -> lastClientCommand ) ; SV_UpdateServerCommandsToClient ( client , & msg ) ; SV_WriteSnapshotToClient ( client , & msg ) ; SV_WriteVoipToClient ( client , & msg ) ; if ( msg . overflowed ) { Com_Printf ( "WARNING: msg overflowed for %s\n" , client -> name ) ; MSG_Clear ( & msg ) ; } SV_SendMessageToClient ( & msg , client ) ; } 