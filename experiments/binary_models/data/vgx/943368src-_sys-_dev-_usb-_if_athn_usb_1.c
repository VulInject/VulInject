void athn_usb_tx_status ( void * arg , struct ieee80211_node * ni ) { struct ar_wmi_evt_txstatus * ts = arg ; struct athn_node * an = ( athn_node * ) ni ; uint8_t rate_index = ( ts -> rate & AR_HTC_TXSTAT_RATE ) ; if ( ts -> flags & AR_HTC_TXSTAT_MCS ) { if ( isset ( ni -> ni_rxmcs , rate_index ) ) { ni -> ni_txmcs = rate_index ; } } if ( rate_index < ni -> ni_rates . rs_nrates ) { ni -> ni_txrate = rate_index ; } } 