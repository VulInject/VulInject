coff_print_symbol ( , , , ) { FILE * file = ( FILE * ) filep ; switch ( how ) { case bfd_print_symbol_name : fprintf ( file , "%s" , symbol -> name ) ; break ; case bfd_print_symbol_more : fprintf ( file , "coff %s %s" , coffsymbol ( symbol ) -> native ?"n" : "g" , coffsymbol ( symbol ) -> lineno ?"l" : " " ) ; break ; case bfd_print_symbol_all : if ( coffsymbol ( symbol ) -> native ) { int val ; unsigned int aux ; combined_entry_type * combined = coffsymbol ( symbol ) -> native ; combined_entry_type * root = obj_raw_syments ( abfd ) ; struct lineno_cache_entry * l = coffsymbol ( symbol ) -> lineno ; fprintf ( file , "[%3ld]" , ( long ) ( combined - root ) ) ; if ( ! combined -> fix_value ) { val = ( bfd_vma ) combined -> u . syment . n_value ; } else { val = combined -> u . syment . n_value - ( unsigned long ) root ; } fprintf ( file , "(sec %2d)(fl 0x%02x)(ty %3x)(scl %3d) (nx %d) 0x" , combined -> u . syment . n_scnum , combined -> u . syment . n_flags , combined -> u . syment . n_type , combined -> u . syment . n_sclass , combined -> u . syment . n_numaux ) ; fprintf_vma ( file , val ) ; fprintf ( file , " %s" , symbol -> name ) ; for ( aux = 0 ; aux < combined -> u . syment . n_numaux ; aux ++ ) { combined_entry_type * auxp = combined + aux + 1 ; long tagndx ; if ( auxp -> fix_tag ) { tagndx = auxp -> u . auxent . x_sym . x_tagndx . p - root ; } else { tagndx = auxp -> u . auxent . x_sym . x_tagndx . l ; } fprintf ( file , "\n" ) ; if ( bfd_coff_print_aux ( abfd , file , root , combined , auxp , aux ) ) { continue ; } switch ( combined -> u . syment . n_sclass ) { case C_FILE : fprintf ( file , "File " ) ; break ; case C_STAT : if ( combined -> u . syment . n_type == T_NULL ) { fprintf ( file , "AUX scnlen 0x%lx nreloc %d nlnno %d" , ( long ) auxp -> u . auxent . x_scn . x_scnlen , auxp -> u . auxent . x_scn . x_nreloc , auxp -> u . auxent . x_scn . x_nlinno ) ; if ( auxp -> u . auxent . x_scn . x_checksum != 0 || auxp -> u . auxent . x_scn . x_associated != 0 || auxp -> u . auxent . x_scn . x_comdat != 0 ) { fprintf ( file , " checksum 0x%lx assoc %d comdat %d" , auxp -> u . auxent . x_scn . x_checksum , auxp -> u . auxent . x_scn . x_associated , auxp -> u . auxent . x_scn . x_comdat ) ; } break ; } case C_EXT : if ( ISFCN ( combined -> u . syment . n_type ) ) { long next , llnos ; if ( auxp -> fix_end ) { next = ( auxp -> u . auxent . x_sym . x_fcnary . x_fcn . x_endndx . p - root ) ; } else { next = auxp -> u . auxent . x_sym . x_fcnary . x_fcn . x_endndx . l ; } llnos = auxp -> u . auxent . x_sym . x_fcnary . x_fcn . x_lnnoptr ; fprintf ( file , "AUX tagndx %ld ttlsiz 0x%lx lnnos %ld next %ld" , tagndx , auxp -> u . auxent . x_sym . x_misc . x_fsize , llnos , next ) ; break ; } default : fprintf ( file , "AUX lnno %d size 0x%x tagndx %ld" , auxp -> u . auxent . x_sym . x_misc . x_lnsz . x_lnno , auxp -> u . auxent . x_sym . x_misc . x_lnsz . x_size , tagndx ) ; if ( auxp -> fix_end ) { fprintf ( file , " endndx %ld" , ( ( long ) ( auxp -> u . auxent . x_sym . x_fcnary . x_fcn . x_endndx . p - root ) ) ) ; } break ; } } if ( l ) { fprintf ( file , "\n%s :" , l -> u . sym -> name ) ; l ++ ; while ( l -> line_number ) { fprintf ( file , "\n%4d : " , l -> line_number ) ; fprintf_vma ( file , l -> u . offset + symbol -> section -> vma ) ; l ++ ; } } } else { bfd_print_symbol_vandf ( abfd , ( void * ) file , symbol ) ; fprintf ( file , " %-5s %s %s %s" , symbol -> section -> name , coffsymbol ( symbol ) -> native ?"n" : "g" , coffsymbol ( symbol ) -> lineno ?"l" : " " , symbol -> name ) ; } } } 