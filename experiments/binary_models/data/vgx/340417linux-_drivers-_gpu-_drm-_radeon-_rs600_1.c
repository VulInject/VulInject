void avivo_wait_for_vblank ( struct radeon_device * rdev , int crtc ) { unsigned i = 0 ; if ( crtc >= rdev -> num_crtc ) { return ; } while ( avivo_is_in_vblank ( rdev , crtc ) ) { if ( i ++ % 100 == 0 ) { if ( ! avivo_is_counter_moving ( rdev , crtc ) ) { break ; } } } while ( ! avivo_is_in_vblank ( rdev , crtc ) ) { if ( i ++ % 100 == 0 ) { if ( ! avivo_is_counter_moving ( rdev , crtc ) ) { break ; } } } } 