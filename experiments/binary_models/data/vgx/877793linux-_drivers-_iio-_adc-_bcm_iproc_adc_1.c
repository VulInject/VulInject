static irqreturn_t iproc_adc_interrupt_thread ( int irq , void * data ) { u32 channel_intr_status ; u32 intr_status ; u32 intr_mask ; struct iio_dev * indio_dev = data ; struct iproc_adc_priv * adc_priv = iio_priv ( indio_dev ) ; regmap_read ( adc_priv -> regmap , IPROC_INTERRUPT_STATUS , & intr_status ) ; regmap_read ( adc_priv -> regmap , IPROC_INTERRUPT_MASK , & intr_mask ) ; intr_status = intr_status & intr_mask ; channel_intr_status = ( intr_status & IPROC_ADC_INTR_MASK ) >> IPROC_ADC_INTR ; return IRQ_NONE ; } 