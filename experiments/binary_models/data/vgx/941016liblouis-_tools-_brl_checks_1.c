int check_hyphenation_pos ( const char * tableList , const char * str , const char * expected ) { widechar * inbuf ; char * hyphens = NULL ; int inlen = strlen ( str ) ; int retval = 0 ; inbuf = malloc ( sizeof ( widechar ) * inlen ) ; inlen = _lou_extParseChars ( str , inbuf ) ; if ( ! inlen ) { fprintf ( stderr , "Cannot parse input string.\n" ) ; retval = 1 ; fail } hyphens = calloc ( inlen + 1 , sizeof ( char ) ) ; if ( ! lou_hyphenate ( tableList , inbuf , inlen , hyphens , 0 ) ) { fprintf ( stderr , "Hyphenation failed.\n" ) ; retval = 1 ; fail } if ( strcmp ( expected , hyphens ) ) { fprintf ( stderr , "Input:    '%s'\n" , str ) ; fprintf ( stderr , "Expected: '%s'\n" , expected ) ; fprintf ( stderr , "Received: '%s'\n" , hyphens ) ; retval = 1 ; } fail free ( hyphens ) ; return retval ; } 