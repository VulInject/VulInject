void ucycom_set ( void * addr , int portno , int reg , int onoff ) { struct ucycom_softc * sc = addr ; int err ; switch ( reg ) { case UCOM_SET_DTR : if ( onoff ) { SET ( sc -> sc_mcr , UCYCOM_DTR ) ; } else { CLR ( sc -> sc_mcr , UCYCOM_DTR ) ; } break ; case UCOM_SET_RTS : if ( onoff ) { SET ( sc -> sc_mcr , UCYCOM_RTS ) ; } else { CLR ( sc -> sc_mcr , UCYCOM_RTS ) ; } break ; case UCOM_SET_BREAK : break ; } sc -> sc_obuf [ 0 ] = sc -> sc_mcr ; err = uhidev_write ( sc -> sc_hdev . sc_parent , sc -> sc_obuf , sc -> sc_olen ) ; if ( err ) { DPRINTF ( ( "ucycom_set_status: err=%d\n" , err ) ) ; } } 