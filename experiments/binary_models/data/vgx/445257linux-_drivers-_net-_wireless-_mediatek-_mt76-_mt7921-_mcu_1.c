static int mt7921_mcu_uni_bss_bcnft ( struct mt7921_dev * dev , struct ieee80211_vif * vif , bool enable ) { struct mt7921_vif * mvif = ( mt7921_vif * ) vif -> drv_priv ; { { u8 bss_idx ; u8 pad [ 3 ] ; } , __packed hdr bcnft_tlv { __le16 tag ; __le16 len ; int bcn_interval ; u8 dtim_period ; u8 pad ; } , __packed bcnft } , __packed bcnft_req = { . hdr = { . bss_idx = mvif -> mt76 . idx } . bcnft = { . tag = cpu_to_le16 ( UNI_BSS_INFO_BCNFT ) . len = cpu_to_le16 ( sizeof ( bcnft_tlv ) ) . bcn_interval = cpu_to_le16 ( vif -> bss_conf . beacon_int ) . dtim_period = vif -> bss_conf . dtim_period } } if ( vif -> type != NL80211_IFTYPE_STATION ) { return 0 ; } return mt76_mcu_send_msg ( & dev -> mt76 , MCU_UNI_CMD ( BSS_INFO_UPDATE ) , & bcnft_req , sizeof ( bcnft_req ) , true ) ; } 