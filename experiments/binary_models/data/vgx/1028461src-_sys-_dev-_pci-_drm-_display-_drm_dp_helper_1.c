enum drm_mode_subconnector drm_dp_subconnector_type ( const u8 dpcd [ DP_RECEIVER_CAP_SIZE ] , const u8 port_cap [ 4 ] ) { int type ; if ( dpcd [ DP_DPCD_REV ] == DP_DPCD_REV_10 ) { type = dpcd [ DP_DOWNSTREAMPORT_PRESENT ] & DP_DWN_STRM_PORT_TYPE_MASK ; switch ( type ) { case DP_DWN_STRM_PORT_TYPE_TMDS : return DRM_MODE_SUBCONNECTOR_DVID ; case DP_DWN_STRM_PORT_TYPE_ANALOG : return DRM_MODE_SUBCONNECTOR_VGA ; case DP_DWN_STRM_PORT_TYPE_DP : return DRM_MODE_SUBCONNECTOR_DisplayPort ; case DP_DWN_STRM_PORT_TYPE_OTHER : default : return DRM_MODE_SUBCONNECTOR_Unknown ; } } type = port_cap [ 0 ] & DP_DS_PORT_TYPE_MASK ; switch ( type ) { case DP_DS_PORT_TYPE_DP : case DP_DS_PORT_TYPE_DP_DUALMODE : return DRM_MODE_SUBCONNECTOR_DisplayPort ; case DP_DS_PORT_TYPE_VGA : return DRM_MODE_SUBCONNECTOR_VGA ; case DP_DS_PORT_TYPE_DVI : return DRM_MODE_SUBCONNECTOR_DVID ; case DP_DS_PORT_TYPE_HDMI : return DRM_MODE_SUBCONNECTOR_HDMIA ; case DP_DS_PORT_TYPE_WIRELESS : return DRM_MODE_SUBCONNECTOR_Wireless ; case DP_DS_PORT_TYPE_NON_EDID : default : return DRM_MODE_SUBCONNECTOR_Unknown ; } } 