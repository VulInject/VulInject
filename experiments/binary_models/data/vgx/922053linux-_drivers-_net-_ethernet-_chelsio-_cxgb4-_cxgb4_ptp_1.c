int cxgb4_ptp_txtype ( struct adapter * adapter , u8 port ) { struct fw_ptp_cmd c ; int err ; c . op_to_portid = cpu_to_be32 ( FW_CMD_OP_V ( FW_PTP_CMD ) | FW_CMD_REQUEST_F | FW_CMD_WRITE_F | FW_PTP_CMD_PORTID_V ( port ) ) ; c . retval_len16 = cpu_to_be32 ( FW_CMD_LEN16_V ( sizeof ( c ) / 16 ) ) ; c . u . init . sc = FW_PTP_SC_TX_TYPE ; c . u . init . mode = cpu_to_be16 ( PTP_TS_NONE ) ; err = t4_wr_mbox ( adapter , adapter -> mbox , & c , sizeof ( c ) , NULL ) ; if ( err < 0 ) { dev_err ( adapter -> pdev_dev , "PTP: %s error %d\n" , __func__ , - err ) ; } return err ; } 