const char * get_expectfile ( const char * testname , const char * file ) { char * file_type ; _resultmap * rm ; if ( ! file || ! ( file_type = strrchr ( file , '.' ) ) ) { return in ; } file_type ++ ; for ( rm = resultmap ; rm != NULL ; rm = rm -> next ) { if ( strcmp ( testname , rm -> test ) == 0 && strcmp ( file_type , rm -> type ) == 0 ) { return rm -> resultfile ; } } return NULL ; } 