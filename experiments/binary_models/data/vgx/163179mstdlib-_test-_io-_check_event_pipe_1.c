static void pipe_writer_cb ( M_event_t * event , M_event_type_t type , M_io_t * comm , void * data ) { int mysize ; ( void ) event ; ( void ) data ; event_debug ( "pipe writer %p event %s triggered" , comm , event_type_str ( type ) ) ; switch ( type ) { case M_EVENT_TYPE_CONNECTED : M_atomic_inc_u64 ( & active_client_connections ) ; M_atomic_inc_u64 ( & client_connection_count ) ; M_io_write ( comm , ( const unsigned char * ) "HelloWorld" , 10 , & mysize ) ; event_debug ( "pipe writer %p wrote %zu bytes" , comm , mysize ) ; case M_EVENT_TYPE_DISCONNECTED : case M_EVENT_TYPE_ERROR : event_debug ( "pipe writer %p Freeing connection" , comm ) ; M_io_destroy ( comm ) ; M_atomic_dec_u64 ( & active_client_connections ) ; pipe_check_cleanup ( event ) ; break ; case M_EVENT_TYPE_READ : case M_EVENT_TYPE_WRITE : default : break ; } } 