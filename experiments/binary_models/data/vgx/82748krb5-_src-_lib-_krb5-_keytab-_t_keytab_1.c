int debug = 0 ; extern const krb5_kt_ops krb5_ktf_writable_ops ; if ( kret != err ) { com_err ( msg , kret , "" ) ; fflush ( stderr ) ; exit ( 1 ) ; } if ( debug ) { printf ( "%s went ok\n" , msg ) ; } if ( str == 0 ) { com_err ( msg , kret , "" ) ; exit ( 1 ) ; } if ( debug ) { printf ( "%s went ok\n" , msg ) ; } static void test_misc ( krb5_context context ) { krb5_error_code kret ; krb5_keytab ktid ; char defname [ BUFSIZ ] ; char * name ; fprintf ( stderr , "Testing miscellaneous error conditions\n" ) ; kret = krb5_kt_resolve ( context , "unknown_method_ep:/tmp/name" , & ktid ) ; CHECK_ERR ( kret , KRB5_KT_UNKNOWN_TYPE , "resolve unknown type" ) ; kret = krb5_kt_default_name ( context , defname , sizeof ( defname ) ) ; CHECK ( kret , "krb5_kt_default_name error" ) ; name = malloc ( strlen ( defname ) ) ; if ( ! name ) { fprintf ( stderr , "Out of memory in testing\n" ) ; exit ( 1 ) ; } kret = krb5_kt_default_name ( context , name , strlen ( defname ) ) ; CHECK_ERR ( kret , KRB5_CONFIG_NOTENUFSPACE , "krb5_kt_default_name limited" ) ; } 