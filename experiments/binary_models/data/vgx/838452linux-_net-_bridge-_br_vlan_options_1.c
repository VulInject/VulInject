static bool __vlan_tun_put ( struct sk_buff * skb , const struct net_bridge_vlan * v ) { __be32 tid = tunnel_id_to_key32 ( v -> tinfo . tunnel_id ) ; struct nlattr * nest ; if ( ! v -> tinfo . tunnel_dst ) { return true ; } nest = nla_nest_start ( skb , BRIDGE_VLANDB_ENTRY_TUNNEL_INFO ) ; if ( nla_put_u32 ( skb , BRIDGE_VLANDB_TINFO_ID , be32_to_cpu ( tid ) ) ) { nla_nest_cancel ( skb , nest ) ; return false ; } nla_nest_end ( skb , nest ) ; return true ; } 