static int cfg80211_dev_check_name ( struct cfg80211_registered_device * rdev , const char * newname ) { struct cfg80211_registered_device * rdev2 ; int wiphy_idx , taken = - 1 , digits ; ASSERT_RTNL ( ) ; sscanf ( newname , PHY_NAME "%d%n" , & wiphy_idx , & taken ) ; if ( taken == strlen ( newname ) && wiphy_idx != rdev -> wiphy_idx ) { digits = 1 ; while ( wiphy_idx /= 10 ) { digits ++ ; } } list_for_each_entry ( , , ) if ( strcmp ( newname , wiphy_name ( & rdev2 -> wiphy ) ) == 0 ) { return - EINVAL ; } return 0 ; } 