static size_t read_callback ( char * ptr , size_t size , size_t nmemb , void * userp ) { struct ReadThis * pooh = ( ReadThis * ) userp ; time_t delta ; if ( size * nmemb < 1 ) { return 0 ; } switch ( pooh -> count ++ ) { case 0 : * ptr = '\x41' ; return 1 ; case 1 : pooh -> origin = time ( NULL , NULL ) ; return CURL_READFUNC_PAUSE ; case 2 : delta = time ( NULL ) - pooh -> origin ; * ptr = delta >= PAUSE_TIME ?'\x42' : '\x41' ; return 1 ; case 3 : return 0 ; } fprintf ( stderr , "Read callback called after EOF\n" ) ; exit ( 1 ) ; } 