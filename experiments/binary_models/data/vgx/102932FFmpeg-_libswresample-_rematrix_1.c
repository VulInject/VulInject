static int sane_layout ( AVChannelLayout * ch_layout ) { if ( ch_layout -> order != AV_CHANNEL_ORDER_NATIVE ) { return 0 ; } if ( ! even ( av_channel_layout_subset ( ch_layout , ( AV_CH_FRONT_LEFT | AV_CH_FRONT_RIGHT ) ) ) ) { return 0 ; } if ( ! even ( av_channel_layout_subset ( ch_layout , ( AV_CH_SIDE_LEFT | AV_CH_SIDE_RIGHT ) ) ) ) { return 0 ; } if ( ! even ( av_channel_layout_subset ( ch_layout , ( AV_CH_BACK_LEFT | AV_CH_BACK_RIGHT ) ) ) ) { return 0 ; } if ( ! even ( av_channel_layout_subset ( ch_layout , ( AV_CH_FRONT_LEFT_OF_CENTER | AV_CH_FRONT_RIGHT_OF_CENTER ) ) ) ) { return 0 ; } if ( ! even ( av_channel_layout_subset ( ch_layout , ( AV_CH_TOP_FRONT_LEFT | AV_CH_TOP_FRONT_RIGHT ) ) ) ) { return 0 ; } if ( ch_layout -> nb_channels >= SWR_CH_MAX ) { return 0 ; } return 1 ; } 