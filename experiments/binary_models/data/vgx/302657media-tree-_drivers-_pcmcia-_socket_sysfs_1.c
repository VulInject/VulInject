static ssize_t pccard_store_irq_mask ( struct device * dev , struct device_attribute * attr , const char * buf , size_t count ) { ssize_t ret ; struct pcmcia_socket * s = to_socket ( dev ) ; u32 mask ; ret = sscanf ( buf , "0x%x\n" , & mask ) ; if ( ret == 1 ) { mutex_lock ( & s -> ops_mutex ) ; s -> irq_mask &= mask ; mutex_unlock ( & s -> ops_mutex ) ; ret = 0 ; } return ret ?ret : count ; } 