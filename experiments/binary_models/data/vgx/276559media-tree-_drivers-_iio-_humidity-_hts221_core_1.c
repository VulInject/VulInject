static int hts221_update_odr ( struct hts221_hw * hw , u8 odr ) { int i , err ; u8 val ; for ( i = 0 ; i < ARRAY_SIZE ( hts221_odr_table ) ; i ++ ) { if ( hts221_odr_table [ i ] . hz == odr ) { break ; } } val = HTS221_ENABLE_SENSOR | HTS221_BDU_MASK | hts221_odr_table [ i ] . val ; err = hts221_write_with_mask ( hw , HTS221_REG_CNTRL1_ADDR , HTS221_ODR_MASK , val ) ; if ( err < 0 ) { return err ; } hw -> odr = odr ; return 0 ; } 