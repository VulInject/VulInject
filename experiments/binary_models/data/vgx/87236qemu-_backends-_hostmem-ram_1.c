static void ram_backend_memory_alloc ( HostMemoryBackend * backend , Error * * errp ) { uint32_t ram_flags ; char * name ; if ( ! backend -> size ) { error_setg ( errp , "can't create backend with size 0" ) ; return ; } name = host_memory_backend_get_name ( backend ) ; ram_flags = backend -> share ?RAM_SHARED : 0 ; ram_flags |= backend -> reserve ?0 : RAM_NORESERVE ; memory_region_init_ram_flags_nomigrate ( & backend -> mr , OBJECT ( backend ) , name , backend -> size , ram_flags , errp ) ; } 