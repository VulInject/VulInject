static void ud_clear_margins ( struct vc_data * vc , struct fb_info * info , int color , int bottom_only ) { int cw = vc -> vc_font . width ; unsigned int ch = vc -> vc_font . height ; unsigned int rw = info -> var . xres - ( vc -> vc_cols * cw ) ; unsigned int bh = info -> var . yres - ( vc -> vc_rows * ch ) ; struct fb_fillrect region ; region . color = color ; region . rop = ROP_COPY ; if ( ( int ) rw > 0 && ! bottom_only ) { region . dy = 0 ; region . dx = info -> var . xoffset ; region . width = rw ; region . height = info -> var . yres_virtual ; info -> fbops -> fb_fillrect ( info , & region ) ; } if ( ( int ) bh > 0 ) { region . dy = info -> var . yoffset ; region . dx = info -> var . xoffset ; region . height = bh ; region . width = info -> var . xres ; info -> fbops -> fb_fillrect ( info , & region ) ; } } 