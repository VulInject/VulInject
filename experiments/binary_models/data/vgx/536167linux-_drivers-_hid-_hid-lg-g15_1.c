static enum led_brightness lg_g15_led_get ( struct led_classdev * led_cdev ) { struct lg_g15_led * g15_led = container_of ( led_cdev , lg_g15_led , cdev ) ; struct lg_g15_data * g15 = dev_get_drvdata ( led_cdev -> dev -> parent ) ; enum led_brightness brightness ; lg_g15_update_led_brightness ( g15 ) ; brightness = g15 -> leds [ g15_led -> led ] . brightness ; mutex_unlock ( & g15 -> mutex ) ; return brightness ; } 