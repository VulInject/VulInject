static void alternatives_smp_unlock ( const s32 * start , const s32 * end , u8 * text , u8 * text_end ) { const s32 * poff ; mutex_lock ( & text_mutex ) ; for ( poff = start ; poff < end ; poff ++ ) { u8 * ptr = ( u8 * ) poff + * poff ; if ( * ptr == 0xf0 ) { text_poke ( ptr , ( ( unsigned char [ ] ) { 0x3E } ) , 1 ) ; } } mutex_unlock ( & text_mutex ) ; } smp_alt_module { struct module * mod ; char * name ; const s32 * locks ; const s32 * locks_end ; u8 * text ; u8 * text_end ; struct list_head next ; } 