void getgregs ( ulwp_t * ulwp , gregset_t rs ) { lwpstatus_t status ; if ( getlwpstatus ( ulwp -> ul_lwpid , & status ) == 0 ) { rs [ EIP ] = status . pr_reg [ EIP ] ; rs [ EDI ] = status . pr_reg [ EDI ] ; rs [ ESI ] = status . pr_reg [ ESI ] ; rs [ EBP ] = status . pr_reg [ EBP ] ; rs [ EBX ] = status . pr_reg [ EBX ] ; rs [ UESP ] = status . pr_reg [ UESP ] ; } else { rs [ EDI ] = 0 ; rs [ ESI ] = 0 ; rs [ EBP ] = 0 ; rs [ EBX ] = 0 ; rs [ UESP ] = 0 ; } } 