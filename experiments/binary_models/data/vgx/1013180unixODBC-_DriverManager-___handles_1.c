DMHDESC __alloc_desc ( void ) { DMHDESC descriptor ; local_mutex_entry ( & mutex_lists ) ; descriptor = calloc ( sizeof ( * descriptor ) , 1 ) ; if ( descriptor ) { descriptor -> next_class_list = descriptor_root ; if ( descriptor_root ) { descriptor_root -> prev_class_list = descriptor ; } descriptor_root = descriptor ; descriptor -> type = HDESC_MAGIC ; setup_error_head ( & descriptor -> error , descriptor , SQL_HANDLE_DESC ) ; pthread_mutex_init ( & descriptor -> mutex , NULL ) ; mutex_init ( & descriptor -> mutex , USYNC_THREAD , NULL ) ; } local_mutex_exit ( & mutex_lists ) ; return descriptor ; } 