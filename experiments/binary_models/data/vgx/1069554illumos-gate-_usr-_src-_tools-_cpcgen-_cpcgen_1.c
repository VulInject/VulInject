static void cpcgen_determine_vendor ( const char * datadir ) { char * mappath ; struct stat st ; if ( asprintf ( & mappath , "%s/%s" , datadir , cpcgen_intel_mapfile ) == - 1 ) { err ( EXIT_FAILURE , "failed to construct path to mapfile" ) ; } if ( stat ( mappath , & st ) == 0 ) { cpcgen_mode = CPCGEN_MODE_INTEL ; } else { if ( errno != ENOENT ) { err ( EXIT_FAILURE , "stat(2) of %s failed unexpectedly" ) ; } cpcgen_mode = CPCGEN_MODE_AMD ; } } 