gboolean add_stonith_params ( const gchar * option_name , const gchar * optarg , gpointer data , GError * * error ) { char * name = NULL ; char * value = NULL ; int rc = 0 ; gboolean retval = TRUE ; crm_info ( "Scanning: -o %s" , optarg ) ; rc = pcmk__scan_nvpair ( optarg , & name , & value ) ; if ( rc != 2 ) { rc = pcmk_legacy2rc ( rc ) ; g_set_error ( error , PCMK__RC_ERROR , rc , "Invalid option: -o %s: %s" , optarg , pcmk_rc_str ( rc ) ) ; retval = FALSE ; } else { crm_info ( "Got: '%s'='%s'" , name , value ) ; options . params = stonith_key_value_add ( options . params , name , value ) ; } free ( value ) ; return retval ; } 