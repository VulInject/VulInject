static int FUN1 ( gdImagePtr VAR1 , int VAR2 , int VAR3 , VAR4 * VAR5 ) { my_cquantize_ptr VAR6 = NULL ; int VAR7 , VAR8 = 0 ; size_t VAR9 ; int VAR10 = VAR11 ; gdImagePtr VAR12 ; if ( VAR5 ) { VAR12 = FUN2 ( VAR1 -> VAR13 , VAR1 -> VAR14 ) ; * VAR5 = VAR12 ; } else { VAR12 = VAR1 ; } if ( ! VAR1 -> VAR15 ) { if ( VAR5 ) { FUN3 ( VAR12 , VAR1 , 0 , 0 , 0 , 0 , VAR1 -> VAR13 , VAR1 -> VAR14 ) ; * VAR5 = VAR12 ; } return VAR16 ; } if ( VAR1 -> VAR17 >= 0 ) { VAR10 -- ; } if ( VAR3 > VAR10 ) { VAR3 = VAR10 ; } if ( ! VAR5 ) { VAR12 -> VAR18 = FUN4 ( ( unsigned char * ) , VAR1 -> VAR14 ) ; if ( ! VAR12 -> VAR18 ) { VAR19 } for ( VAR7 = 0 ; ( VAR7 < VAR12 -> VAR14 ) ; VAR7 ++ ) { VAR12 -> VAR18 [ VAR7 ] = ( unsigned char * ) FUN4 ( ( unsigned char ) , VAR1 -> VAR13 ) ; if ( ! VAR12 -> VAR18 [ VAR7 ] ) { VAR19 } } } if ( VAR1 -> VAR20 == VAR21 ) { if ( VAR5 ) { FUN5 ( VAR12 ) ; } VAR12 = FUN6 ( VAR1 , VAR3 , VAR1 -> VAR22 ?VAR1 -> VAR22 : 2 ) ; if ( VAR5 ) { * VAR5 = VAR12 ; } if ( ! VAR12 ) { return VAR23 ; } else { FUN7 ( VAR1 ) ; FUN3 ( VAR1 , VAR12 , 0 , 0 , 0 , 0 , VAR1 -> VAR13 , VAR1 -> VAR14 ) ; FUN5 ( VAR12 ) ; } return VAR16 ; } if ( VAR1 -> VAR20 == VAR24 || VAR1 -> VAR20 == VAR25 ) { VAR26 * VAR27 = FUN8 ( VAR28 , free ) ; VAR29 * VAR30 ; VAR31 * VAR32 ; int VAR33 = 0 ; FUN9 ( VAR27 , VAR3 ) ; FUN10 ( VAR27 , VAR1 -> VAR22 ?VAR1 -> VAR22 : 9 ) ; if ( VAR1 -> VAR34 ) { FUN11 ( VAR27 , VAR1 -> VAR35 , VAR1 -> VAR34 ) ; } VAR30 = FUN12 ( VAR27 , VAR36 , VAR1 , VAR1 -> VAR13 , VAR1 -> VAR14 , 0 ) ; VAR32 = FUN13 ( VAR27 , VAR30 ) ; if ( ! VAR32 ) { FUN14 ( VAR30 ) ; FUN15 ( VAR27 ) ; VAR19 } FUN16 ( VAR32 , VAR2 ?1 : 0 ) ; if ( VAR37 == FUN17 ( VAR32 , VAR30 , VAR38 ) ) { VAR33 = 1 ; const VAR39 * VAR40 = FUN18 ( VAR32 ) ; VAR12 -> VAR17 = - 1 ; unsigned int VAR41 ; for ( VAR41 = 0 ; VAR41 < VAR40 -> VAR42 ; VAR41 ++ ) { VAR12 -> open [ VAR41 ] = 0 ; VAR12 -> VAR43 [ VAR41 ] = VAR40 -> VAR44 [ VAR41 ] . VAR45 * VAR46 / 255 ; VAR12 -> VAR47 [ VAR41 ] = VAR40 -> VAR44 [ VAR41 ] . VAR48 * VAR49 / 255 ; VAR12 -> VAR50 [ VAR41 ] = VAR40 -> VAR44 [ VAR41 ] . VAR51 * VAR52 / 255 ; int VAR53 = VAR40 -> VAR44 [ VAR41 ] . VAR54 * VAR55 / 255 ; if ( VAR56 < VAR57 ) { VAR53 = VAR57 - VAR53 ; } VAR12 -> VAR53 [ VAR41 ] = VAR53 ; if ( VAR12 -> VAR17 == - 1 && VAR53 == VAR57 ) { VAR12 -> VAR17 = VAR41 ; } } VAR12 -> VAR58 = VAR40 -> VAR42 ; } FUN19 ( VAR32 ) ; FUN14 ( VAR30 ) ; FUN15 ( VAR27 ) ; if ( VAR33 ) { if ( ! VAR5 ) { FUN7 ( VAR1 ) ; } return VAR16 ; } } VAR6 = ( VAR59 ) FUN4 ( sizeof ( VAR60 ) , 1 ) ; if ( ! VAR6 ) { VAR19 } VAR6 -> VAR61 = NULL ; VAR6 -> VAR62 = NULL ; VAR6 -> VAR63 = ( VAR64 ) FUN20 ( VAR65 * sizeof ( VAR66 ) ) ; for ( VAR7 = 0 ; VAR7 < VAR65 ; VAR7 ++ ) { VAR6 -> VAR63 [ VAR7 ] = ( VAR66 ) FUN20 ( VAR67 * VAR68 * sizeof ( VAR69 ) ) ; if ( ! VAR6 -> VAR63 [ VAR7 ] ) { VAR19 } } VAR6 -> VAR61 = ( VAR70 ) FUN20 ( 3 * sizeof ( VAR71 ) ) ; FUN21 ( VAR1 , VAR12 , VAR6 ) ; VAR9 = ( VAR72 ) ( ( VAR12 -> VAR13 + 2 ) * ( 3 * sizeof ( VAR71 ) ) ) ; VAR6 -> VAR61 = FUN22 ( VAR6 -> VAR61 , VAR9 ) ; if ( ! VAR6 -> VAR61 ) { VAR19 } memset ( VAR6 -> VAR61 , 0 , VAR9 ) ; VAR6 -> VAR73 = VAR23 ; FUN23 ( VAR6 -> VAR63 ) ; FUN24 ( VAR1 , VAR12 , VAR6 ) ; FUN25 ( VAR1 , VAR12 , VAR6 , VAR3 ) ; FUN23 ( VAR6 -> VAR63 ) ; if ( VAR2 ) { FUN26 ( VAR1 , VAR12 , VAR6 ) ; } else { FUN27 ( VAR1 , VAR12 , VAR6 ) ; } if ( VAR6 -> VAR74 ) { int VAR75 = - 1 ; int VAR76 = - 1 ; for ( VAR7 = 0 ; ( VAR7 < VAR77 -> VAR58 ) ; VAR7 ++ ) { if ( VAR77 -> VAR53 [ VAR7 ] > VAR75 ) { VAR76 = VAR7 ; VAR75 = VAR77 -> VAR53 [ VAR7 ] ; } } for ( VAR7 = 0 ; ( VAR7 < VAR77 -> VAR58 ) ; VAR7 ++ ) { if ( VAR77 -> VAR53 [ VAR7 ] == VAR75 ) { VAR77 -> VAR53 [ VAR7 ] = VAR57 ; } } } if ( VAR6 -> VAR78 ) { int VAR79 = 128 ; int VAR80 = - 1 ; for ( VAR7 = 0 ; ( VAR7 < VAR77 -> VAR58 ) ; VAR7 ++ ) { if ( VAR77 -> VAR53 [ VAR7 ] < VAR79 ) { VAR80 = VAR7 ; VAR79 = VAR77 -> VAR53 [ VAR7 ] ; } } for ( VAR7 = 0 ; ( VAR7 < VAR77 -> VAR58 ) ; VAR7 ++ ) { if ( VAR77 -> VAR53 [ VAR7 ] == VAR79 ) { VAR77 -> VAR53 [ VAR7 ] = VAR56 ; } } } if ( VAR1 -> VAR17 >= 0 ) { VAR12 -> VAR17 = VAR12 -> VAR58 ; VAR12 -> VAR58 ++ ; } VAR8 = VAR16 ; if ( ! VAR5 ) { FUN7 ( VAR1 ) ; } freeQuantizeData outOfMemory VAR8 = VAR23 ; if ( VAR1 -> VAR15 ) { if ( ! VAR5 ) { if ( VAR12 -> VAR18 ) { for ( VAR7 = 0 ; VAR7 < VAR12 -> VAR14 ; VAR7 ++ ) { if ( VAR12 -> VAR18 [ VAR7 ] ) { FUN28 ( VAR12 -> VAR18 [ VAR7 ] ) ; } } FUN28 ( VAR12 -> VAR18 ) ; } VAR12 -> VAR18 = NULL ; } else { FUN5 ( VAR12 ) ; * VAR5 = 0 ; } } freeQuantizeData if ( VAR6 ) { if ( VAR6 -> VAR63 ) { for ( VAR7 = 0 ; VAR7 < VAR65 ; VAR7 ++ ) { if ( VAR6 -> VAR63 [ VAR7 ] ) { FUN28 ( VAR6 -> VAR63 [ VAR7 ] ) ; } } FUN28 ( VAR6 -> VAR63 ) ; } if ( VAR6 -> VAR61 ) { FUN28 ( VAR6 -> VAR61 ) ; } if ( VAR6 -> VAR81 ) { FUN28 ( VAR6 -> VAR81 ) ; } FUN28 ( VAR6 ) ; } return VAR8 ; }