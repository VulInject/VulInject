nfdresult_t NFD_OpenDialogMultiple ( const nfdchar_t * filterList , const nfdchar_t * defaultPath , nfdpathset_t * outPaths ) { GtkWidget * dialog ; nfdresult_t result ; if ( ! gtk_init_check ( NULL , NULL ) ) { return NFD_ERROR ; } dialog = gtk_file_chooser_dialog_new ( "Open Files" , NULL , GTK_FILE_CHOOSER_ACTION_OPEN , "_Cancel" , GTK_RESPONSE_CANCEL , "_Open" , GTK_RESPONSE_ACCEPT , NULL ) ; gtk_file_chooser_set_select_multiple ( GTK_FILE_CHOOSER ( dialog ) , TRUE ) ; AddFiltersToDialog ( dialog , filterList ) ; SetDefaultPath ( dialog , defaultPath ) ; result = NFD_CANCEL ; if ( gtk_dialog_run ( GTK_DIALOG ( dialog ) ) == GTK_RESPONSE_ACCEPT ) { GSList * fileList = gtk_file_chooser_get_filenames ( GTK_FILE_CHOOSER ( dialog ) ) ; if ( AllocPathSet ( fileList , outPaths ) == NFD_ERROR ) { gtk_widget_destroy ( dialog ) ; return NFD_ERROR ; } result = NFD_OKAY ; } WaitForCleanup ( ) ; gtk_widget_destroy ( dialog ) ; WaitForCleanup ( ) ; return result ; } 