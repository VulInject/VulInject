void vmcore_cleanup ( void ) { struct list_head * pos , * next ; if ( proc_vmcore ) { proc_remove ( proc_vmcore ) ; proc_vmcore = NULL ; } list_for_each_safe ( , , ) { struct vmcore * m ; m = list_entry ( pos , vmcore , list ) ; list_del ( & m -> list ) ; } free_elfcorebuf ( ) ; } 