void sti_set ( struct sti_struct * sti , int src_y , int src_x , int height , int width , u8 color ) { struct sti_blkmv_inptr * inptr = & sti -> sti_data -> blkmv_inptr ; struct sti_blkmv_inptr inptr_default = { . fg_color = color . bg_color = color . src_x = src_x . src_y = src_y . dest_x = src_x . dest_y = src_y . width = width . height = height } ; struct sti_blkmv_outptr * outptr = & sti -> sti_data -> blkmv_outptr ; s32 ret ; cfs_time_t flags ; { spin_lock_irqsave ( & sti -> lock , flags ) ; * inptr = inptr_default ; ret = sti_call ( sti , sti -> block_move , & clear_blkmv_flags , inptr , outptr , sti -> glob_cfg ) ; spin_unlock_irqrestore ( & sti -> lock , flags ) ; } ret == 1 ; } 