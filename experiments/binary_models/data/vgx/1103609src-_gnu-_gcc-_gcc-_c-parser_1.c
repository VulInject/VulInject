c_parser_postfix_expression_after_primary ( , ) { tree ident , idx , exprlist ; while ( true ) { switch ( c_parser_peek_token ( parser ) -> type ) { case CPP_OPEN_SQUARE : c_parser_consume_token ( parser ) ; idx = c_parser_expression ( parser ) . value ; c_parser_skip_until_found ( parser , CPP_CLOSE_SQUARE , "expected %<]%>" ) ; expr . value = build_array_ref ( expr . value , idx ) ; break ; case CPP_OPEN_PAREN : c_parser_consume_token ( parser ) ; if ( c_parser_next_token_is ( parser , CPP_CLOSE_PAREN ) ) { exprlist = NULL_TREE ; } else { exprlist = c_parser_expr_list ( parser , true ) ; } c_parser_skip_until_found ( parser , CPP_CLOSE_PAREN , "expected %<)%>" ) ; expr . value = build_function_call ( expr . value , exprlist ) ; expr . original_code = ERROR_MARK ; break ; case CPP_DOT : c_parser_consume_token ( parser ) ; expr = default_function_array_conversion ( expr ) ; if ( c_parser_next_token_is ( parser , CPP_NAME ) ) { ident = c_parser_peek_token ( parser ) -> value ; } else { c_parser_error ( parser , "expected identifier" ) ; expr . value = error_mark_node ; expr . original_code = ERROR_MARK ; return expr ; } c_parser_consume_token ( parser ) ; expr . value = build_component_ref ( expr . value , ident ) ; expr . original_code = ERROR_MARK ; break ; case CPP_DEREF : c_parser_consume_token ( parser ) ; expr = default_function_array_conversion ( expr ) ; if ( c_parser_next_token_is ( parser , CPP_NAME ) ) { ident = c_parser_peek_token ( parser ) -> value ; } else { c_parser_error ( parser , "expected identifier" ) ; expr . value = error_mark_node ; expr . original_code = ERROR_MARK ; return expr ; } c_parser_consume_token ( parser ) ; expr . value = build_component_ref ( build_indirect_ref ( expr . value , "->" ) , ident ) ; expr . original_code = ERROR_MARK ; break ; case CPP_PLUS_PLUS : c_parser_consume_token ( parser ) ; expr = default_function_array_conversion ( expr ) ; expr . value = build_unary_op ( POSTINCREMENT_EXPR , expr . value , 0 ) ; expr . original_code = ERROR_MARK ; break ; case CPP_MINUS_MINUS : c_parser_consume_token ( parser ) ; expr = default_function_array_conversion ( expr ) ; expr . value = build_unary_op ( POSTDECREMENT_EXPR , expr . value , 0 ) ; expr . original_code = ERROR_MARK ; break ; default : return expr ; } } } 