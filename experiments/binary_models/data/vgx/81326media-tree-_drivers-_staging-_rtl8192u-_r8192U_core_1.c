int write_nic_byte_E ( struct net_device * dev , int indx , u8 data ) { int status ; struct r8192_priv * priv = ( r8192_priv * ) ieee80211_priv ( dev ) ; struct usb_device * udev = priv -> udev ; u8 * usbdata = kzalloc ( sizeof ( data ) , GFP_KERNEL ) ; if ( ! usbdata ) { return - ENOMEM ; } * usbdata = data ; status = usb_control_msg ( udev , usb_sndctrlpipe ( udev , 0 ) , RTL8187_REQ_SET_REGS , RTL8187_REQT_WRITE , indx | 0xfe00 , 0 , usbdata , 1 , HZ / 2 ) ; if ( status < 0 ) { netdev_err ( dev , "write_nic_byte_E TimeOut! status: %d\n" , status ) ; return status ; } return 0 ; } 