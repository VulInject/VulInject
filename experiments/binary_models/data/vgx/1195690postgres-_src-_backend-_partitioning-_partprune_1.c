static PartClauseMatchStatus match_boolean_partition_clause ( Oid partopfamily , Expr * clause , Expr * partkey , Expr * * outconst ) { Expr * leftop ; * outconst = NULL ; if ( ! IsBuiltinBooleanOpfamily ( partopfamily ) ) { return PARTCLAUSE_UNSUPPORTED ; } if ( IsA ( clause , BooleanTest ) ) { BooleanTest * btest = ( BooleanTest * ) clause ; leftop = btest -> arg ; if ( IsA ( leftop , RelabelType ) ) { leftop = ( ( RelabelType * ) leftop ) -> arg ; } if ( equal ( leftop , partkey ) ) { * outconst = ( btest -> booltesttype == IS_TRUE || btest -> booltesttype == IS_NOT_FALSE ) ?( Expr * ) makeBoolConst ( true , false ) : ( Expr * ) makeBoolConst ( false , false ) ; } if ( * outconst ) { return PARTCLAUSE_MATCH_CLAUSE ; } } else { bool is_not_clause = is_notclause ( clause ) ; leftop = is_not_clause ?get_notclausearg ( clause ) : clause ; if ( IsA ( leftop , RelabelType ) ) { leftop = ( ( RelabelType * ) leftop ) -> arg ; } if ( equal ( leftop , partkey ) ) { * outconst = is_not_clause ?( Expr * ) makeBoolConst ( false , false ) : ( Expr * ) makeBoolConst ( true , false ) ; } if ( equal ( negate_clause ( ( Node * ) leftop ) , partkey ) ) { * outconst = ( Expr * ) makeBoolConst ( false , false ) ; } if ( * outconst ) { return PARTCLAUSE_MATCH_CLAUSE ; } } return PARTCLAUSE_NOMATCH ; } 