void ptp_clock_event ( struct ptp_clock * ptp , struct ptp_clock_event * event ) { struct pps_event_time evt ; switch ( event -> type ) { case PTP_CLOCK_ALARM : break ; case PTP_CLOCK_EXTTS : enqueue_external_timestamp ( & ptp -> tsevq , event ) ; wake_up_interruptible ( & ptp -> tsev_wq ) ; break ; case PTP_CLOCK_PPS : pps_get_ts ( & evt ) ; pps_event ( ptp -> pps_source , & evt , PTP_PPS_EVENT , NULL ) ; break ; case PTP_CLOCK_PPSUSR : pps_event ( ptp -> pps_source , & event -> pps_times , PTP_PPS_EVENT ) ; break ; } } 