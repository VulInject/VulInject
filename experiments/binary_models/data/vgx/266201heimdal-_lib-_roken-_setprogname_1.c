ROKEN_LIB_FUNCTION void ROKEN_LIB_CALL setprogname ( const char * argv0 ) { const char * p ; p = strrchr ( argv0 , '/' ) ; { const char * pb ; pb = strrchr ( ( p != NULL ) ?p : argv0 , '\\' ) ; if ( pb != NULL ) { p = pb ; } } if ( p == NULL ) { p = argv0 ; } else { p ++ ; } { char * fn = strdup ( p ) ; char * ext ; strlwr ( fn ) ; ext = strrchr ( fn , '.' ) ; if ( ext != NULL && strcmp ( ext , ".exe" ) == 0 ) { * ext = '\0' ; } __progname = fn ; } __progname = p ; } 