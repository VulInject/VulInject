int main ( ) { int ret = 0 ; void * libaa ; libaa = dlopen ( "libaa.so" , RTLD_LAZY | RTLD_GLOBAL ) ; if ( libaa == NULL ) { printf ( "dlopen(\"libaa.so\", RTLD_LAZY|RTLD_GLOBAL) FAILED\n" ) ; return ( 1 ) ; } libaa = dlopen ( "libaa.so" , RTLD_LAZY | RTLD_GLOBAL ) ; dlclose ( libaa , NULL ) ; if ( dlsym ( RTLD_DEFAULT , "aaSymbol" ) == NULL ) { printf ( "dlsym(RTLD_DEFAULT, \"aaSymbol\") == NULL\n" ) ; ret = 1 ; } dlclose ( libaa ) ; return ( ret ) ; } 