static rdpPeerChannel * wts_get_dvc_channel_by_id ( WTSVirtualChannelManager * vcm , UINT32 ChannelId ) { int index ; int count ; BOOL found = FALSE ; rdpPeerChannel * channel = NULL ; WINPR_ASSERT ( vcm ) ; ArrayList_Lock ( vcm -> dynamicVirtualChannels , NULL ) ; count = ArrayList_Count ( vcm -> dynamicVirtualChannels ) ; for ( index = 0 ; index < count ; index ++ ) { channel = ( rdpPeerChannel * ) ArrayList_GetItem ( vcm -> dynamicVirtualChannels , index ) ; WINPR_ASSERT ( channel ) ; if ( channel -> channelId == ChannelId ) { found = TRUE ; break ; } } ArrayList_Unlock ( vcm -> dynamicVirtualChannels ) ; return found ?channel : NULL ; } 