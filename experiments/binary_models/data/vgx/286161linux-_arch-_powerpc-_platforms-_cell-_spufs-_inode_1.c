static int spufs_dir_close ( struct inode * inode , struct file * file ) { struct inode * parent ; struct dentry * dir ; int ret ; dir = file -> f_path . dentry ; parent = d_inode ( dir -> d_parent ) ; inode_lock_nested ( parent , I_MUTEX_PARENT ) ; ret = spufs_rmdir ( parent , dir ) ; inode_unlock ( parent ) ; WARN_ON ( ret , NULL ) ; return dcache_dir_close ( inode , file ) ; } 