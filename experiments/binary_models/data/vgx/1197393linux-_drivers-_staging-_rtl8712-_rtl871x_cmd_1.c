int r8712_getrfreg_cmd ( struct _adapter * padapter , u8 offset , u8 * pval ) { struct cmd_obj * ph2c ; struct readRF_parm * prdrfparm ; struct cmd_priv * pcmdpriv = & padapter -> cmdpriv ; ph2c = kmalloc ( sizeof ( * ph2c ) , GFP_ATOMIC ) ; if ( ! ph2c ) { return - ENOMEM ; } prdrfparm = kmalloc ( sizeof ( * prdrfparm ) , GFP_ATOMIC ) ; if ( ! prdrfparm ) { return - ENOMEM ; } INIT_LIST_HEAD ( & ph2c -> list ) ; ph2c -> cmdcode = GEN_CMD_CODE ( _GetRFReg ) ; ph2c -> parmbuf = ( unsigned char * ) prdrfparm ; ph2c -> cmdsz = sizeof ( readRF_parm ) ; ph2c -> rsp = pval ; ph2c -> rspsz = sizeof ( readRF_rsp ) ; prdrfparm -> offset = offset ; r8712_enqueue_cmd ( pcmdpriv , ph2c ) ; return 0 ; } 