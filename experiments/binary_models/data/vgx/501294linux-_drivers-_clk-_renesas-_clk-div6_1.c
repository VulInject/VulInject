static u8 cpg_div6_clock_get_parent ( struct clk_hw * hw ) { struct div6_clock * clock = to_div6_clock ( hw ) ; unsigned int i ; u8 hw_index ; hw_index = ( readl ( clock -> reg ) & clock -> src_mask ) >> __ffs ( clock -> src_mask ) ; for ( i = 0 ; i < clk_hw_get_num_parents ( hw ) ; i ++ ) { if ( clock -> parents [ i ] == hw_index ) { return i ; } } pr_err ( "%s: %s DIV6 clock set to invalid parent %u\n" , __func__ , clk_hw_get_name ( hw ) , hw_index ) ; return 0 ; } 