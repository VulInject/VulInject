slurp_symtab ( ) { long symcount ; unsigned int size ; if ( ( bfd_get_file_flags ( abfd ) & HAS_SYMS ) == 0 ) { return ; } symcount = bfd_read_minisymbols ( abfd , FALSE , ( void * ) & syms , & size ) ; if ( symcount == 0 ) { symcount = bfd_read_minisymbols ( abfd , TRUE , ( void * ) & syms , & size ) ; } if ( symcount < 0 ) { bfd_fatal ( bfd_get_filename ( abfd ) ) ; } } static bfd_vma pc ; static const char * filename ; static const char * functionname ; static unsigned int line ; static bfd_boolean found ; static void find_address_in_section ( bfd * abfd , asection * section , void * data ATTRIBUTE_UNUSED ) { bfd_vma vma ; bfd_size_type size ; if ( found ) { return ; } if ( ( bfd_get_section_flags ( abfd , section ) & SEC_ALLOC ) == 0 ) { return ; } vma = bfd_get_section_vma ( abfd , section ) ; if ( pc < vma ) { return ; } size = bfd_get_section_size ( section ) ; found = bfd_find_nearest_line ( abfd , section , syms , pc - vma , & filename , & functionname , & line ) ; } 