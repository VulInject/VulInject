module_param ( gbufsize , int , 0444 ) ; MODULE_PARM_DESC ( gbufsize , "size of the capture buffers, default is 614400 (will be rounded up to a page multiple)" ) ; static int video_nr = - 1 ; module_param ( video_nr , int , 0444 ) ; MODULE_PARM_DESC ( video_nr , "video device to register (0=/dev/video0, etc)" ) ; static struct meye meye ; static void * rvmalloc ( unsigned long size ) { void * mem ; unsigned long adr ; size = PAGE_ALIGN ( size ) ; mem = vmalloc_32 ( size ) ; if ( mem ) { adr = ( unsigned long ) mem ; while ( size > 0 ) { SetPageReserved ( vmalloc_to_page ( ( void * ) adr ) ) ; adr += PAGE_SIZE ; size -= PAGE_SIZE ; } } return mem ; } 