static int do_md5sum ( struct cmd_tbl * cmdtp , int flag , int argc , char * const argv [ ] ) { unsigned long addr , len ; unsigned int i ; u8 output [ 16 ] ; void * buf ; addr = hextoul ( argv [ 1 ] , NULL ) ; len = hextoul ( argv [ 2 ] , NULL ) ; buf = map_sysmem ( addr , len ) ; md5_wd ( buf , len , output , CHUNKSZ_MD5 ) ; unmap_sysmem ( buf ) ; printf ( "md5 for %08lx ... %08lx ==>" , addr , addr + len - 1 ) ; for ( i = 0 ; i < 16 ; i ++ ) { printf ( "%02x" , output [ i ] ) ; } printf ( "\n" ) ; if ( argc > 3 ) { store_result ( output , argv [ 3 ] ) ; } return 0 ; } 