static int i2c_mii_write_default_c45 ( struct mii_bus * bus , int phy_id , int devad , int reg , u16 val ) { struct i2c_adapter * i2c = bus -> priv ; struct i2c_msg msg ; int ret ; u8 data [ 5 ] , * p ; p = data ; if ( devad >= 0 ) { * p ++ = devad ; * p ++ = reg >> 8 ; } * p ++ = reg ; * p ++ = val >> 8 ; * p ++ = val ; msg . addr = i2c_mii_phy_addr ( phy_id ) ; msg . flags = 0 ; msg . len = p - data ; msg . buf = data ; ret = i2c_transfer ( i2c , & msg , 1 ) ; return ret < 0 ?ret : 0 ; } 