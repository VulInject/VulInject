static u32 bnxt_re_get_priority_mask ( struct bnxt_re_dev * rdev ) { u32 prio_map = 0 , tmp_map = 0 ; struct net_device * netdev ; struct dcb_app app ; netdev = rdev -> netdev ; app . selector = IEEE_8021QAZ_APP_SEL_ETHERTYPE ; app . protocol = ETH_P_IBOE ; tmp_map = dcb_ieee_getapp_mask ( netdev , & app ) ; prio_map = tmp_map ; app . selector = IEEE_8021QAZ_APP_SEL_DGRAM ; app . protocol = ROCE_V2_UDP_DPORT ; tmp_map = dcb_ieee_getapp_mask ( netdev , & app ) ; prio_map |= tmp_map ; if ( ! prio_map ) { prio_map = - EFAULT ; } return prio_map ; } 