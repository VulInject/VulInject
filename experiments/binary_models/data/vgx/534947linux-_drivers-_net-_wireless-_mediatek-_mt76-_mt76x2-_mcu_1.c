int mt76x2_mcu_load_cr ( struct mt76x02_dev * dev , u8 type , u8 temp_level , u8 channel ) { { u8 cr_mode ; u8 temp ; u8 ch ; u8 _pad0 ; __le32 cfg ; } , __packed __aligned ( 4 ) msg = { . cr_mode = type . temp = temp_level . ch = channel } u32 val ; val = BIT ( 31 ) ; val |= ( mt76x02_eeprom_get ( dev , MT_EE_NIC_CONF_0 ) >> 8 ) & 0x00ff ; val |= ( mt76x02_eeprom_get ( dev , MT_EE_NIC_CONF_1 ) << 8 ) & 0xff00 ; msg . cfg = cpu_to_le32 ( val , NULL ) ; return mt76_mcu_send_msg ( & dev -> mt76 , CMD_LOAD_CR , & msg , sizeof ( msg ) , true ) ; } 