void dce_set_blender_mode ( struct dce_hwseq * hws , unsigned int blnd_inst , enum blnd_mode mode ) { uint32_t feedthrough = 1 ; int blnd_mode = 0 ; uint32_t multiplied_mode = 0 ; uint32_t alpha_mode = 2 ; switch ( mode ) { case BLND_MODE_OTHER_PIPE : feedthrough = 0 ; blnd_mode = 1 ; alpha_mode = 0 ; break ; case BLND_MODE_BLENDING : feedthrough = 0 ; blnd_mode = 2 ; alpha_mode = 0 ; multiplied_mode = 1 ; break ; case BLND_MODE_CURRENT_PIPE : default : if ( REG ( BLND_CONTROL [ blnd_inst ] ) == REG ( BLNDV_CONTROL ) || blnd_inst == 0 ) { feedthrough = 0 ; } break ; } REG_UPDATE ( BLND_CONTROL [ blnd_inst ] , BLND_MODE , blnd_mode ) ; if ( hws -> masks -> BLND_ALPHA_MODE != 0 ) { REG_UPDATE_3 ( BLND_CONTROL [ blnd_inst ] , BLND_FEEDTHROUGH_EN , feedthrough , BLND_ALPHA_MODE , alpha_mode , BLND_MULTIPLIED_MODE , multiplied_mode ) ; } } 