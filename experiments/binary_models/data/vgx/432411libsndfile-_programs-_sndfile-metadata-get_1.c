main ( int argc , char * argv [ ] ) { SNDFILE * file ; SF_INFO sfinfo ; SF_BROADCAST_INFO_2K binfo ; const char * progname ; const char * filename = NULL ; int start ; progname = program_name ( argv [ 0 ] ) ; if ( argc < 2 || strcmp ( argv [ 1 ] , "--help" ) == 0 || strcmp ( argv [ 1 ] , "-h" ) == 0 ) { usage_exit ( progname , 0 ) ; } if ( argv [ argc - 1 ] [ 0 ] != '-' ) { filename = argv [ argc - 1 ] ; start = 1 ; } if ( argv [ 1 ] [ 0 ] != '-' ) { filename = argv [ 1 ] ; start = 2 ; } else { printf ( "Error : Either the first or the last command line parameter should be a filename.\n\n" ) ; exit ( 1 ) ; } if ( ( file = sf_open ( filename , SFM_READ , & sfinfo ) ) == NULL ) { printf ( "Error : Open of file '%s' failed : %s\n\n" , filename , sf_strerror ( file ) ) ; exit ( 1 ) ; } memset ( & binfo , 0 , sizeof ( binfo ) ) ; if ( sf_command ( file , SFC_GET_BROADCAST_INFO , & binfo , sizeof ( binfo ) ) == 0 ) { memset ( & binfo , 0 , sizeof ( binfo ) ) ; } process_args ( file , & binfo , argc - 2 , argv + start ) ; sf_close ( file ) ; return 0 ; } 