( MAC_OS_X_VERSION_MAX_ALLOWED < MAC_OS_X_VERSION_10_5 ) ; short ResourceIndex FT_EXPORT_DEF ( ) FT_GetFile_From_Mac_Name ( , , ) { FT_UNUSED ( fontName ) ; FT_UNUSED ( pathSpec ) ; FT_UNUSED ( face_index , NULL ) ; return FT_THROW ( Unimplemented_Feature ) ; } static OSStatus FT_ATSFontGetFileReference ( ATSFontRef ats_font_id , FSRef * ats_font_ref ) { ( MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_5 ) OSStatus err ; err = ATSFontGetFileReference ( ats_font_id , ats_font_ref ) ; return err ; FT_UNUSED ( ats_font_id ) ; FT_UNUSED ( ats_font_ref ) ; return fnfErr ; OSStatus err ; FSSpec spec ; err = ATSFontGetFileSpecification ( ats_font_id , & spec ) ; if ( noErr == err ) { err = FSpMakeFSRef ( & spec , ats_font_ref ) ; } return err ; } static FT_Error FT_GetFileRef_From_Mac_ATS_Name ( const char * fontName , FSRef * ats_font_ref , FT_Long * face_index ) { CFStringRef cf_fontName ; ATSFontRef ats_font_id ; * face_index = 0 ; cf_fontName = CFStringCreateWithCString ( NULL , fontName , kCFStringEncodingMacRoman ) ; ats_font_id = ATSFontFindFromName ( cf_fontName , kATSOptionFlagsUnRestrictedScope ) ; CFRelease ( cf_fontName ) ; if ( ats_font_id == 0 || ats_font_id == 0xFFFFFFFFUL ) { return FT_THROW ( Unknown_File_Format ) ; } if ( noErr != FT_ATSFontGetFileReference ( ats_font_id , ats_font_ref ) ) { return FT_THROW ( Unknown_File_Format ) ; } { ATSFontRef id2 = ats_font_id - 1 ; FSRef ref2 ; while ( id2 > 0 ) { } } } 