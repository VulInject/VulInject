int h2o_qpack_encoder_handle_input ( h2o_qpack_encoder_t * qpack , const uint8_t * * _src , const uint8_t * src_end , const char * * err_desc ) { const uint8_t * src = * _src ; int ret ; while ( src != src_end && ret == 0 ) { switch ( * src >> 6 ) { case 0 : { int64_t insert_count ; if ( ( ret = decode_int ( & insert_count , & src , src_end , 6 ) ) != 0 ) { Exit } ret = handle_table_state_synchronize ( qpack , insert_count , err_desc ) ; } break ; default : { int64_t stream_id ; if ( ( ret = decode_int ( & stream_id , & src , src_end , 7 ) ) != 0 ) { Exit } ret = handle_header_ack ( qpack , stream_id , err_desc ) ; } break ; case 1 : { int64_t stream_id ; if ( ( ret = decode_int ( & stream_id , & src , src_end , 6 ) ) != 0 ) { Exit } ret = handle_stream_cancellation ( qpack , stream_id , err_desc ) ; } break ; } * _src = src ; } Exit if ( ret == H2O_HTTP3_ERROR_INCOMPLETE ) { ret = 0 ; } return ( int ) ret ; } 