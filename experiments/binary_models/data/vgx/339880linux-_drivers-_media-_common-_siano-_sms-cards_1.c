( sms_board_event ) ; static int sms_set_gpio ( struct smscore_device_t * coredev , int pin , int enable ) { int lvl , ret ; u32 gpio ; struct smscore_config_gpio gpioconfig = { . direction = SMS_GPIO_DIRECTION_OUTPUT . pullupdown = SMS_GPIO_PULLUPDOWN_NONE . inputcharacteristics = SMS_GPIO_INPUTCHARACTERISTICS_NORMAL . outputslewrate = SMS_GPIO_OUTPUT_SLEW_RATE_FAST . outputdriving = SMS_GPIO_OUTPUTDRIVING_S_4mA } ; if ( pin < 0 ) { gpio = pin * - 1 ; lvl = enable ?0 : 1 ; } else { gpio = pin ; lvl = enable ?1 : 0 ; } ret = smscore_configure_gpio ( coredev , gpio , & gpioconfig ) ; if ( ret < 0 ) { return ret ; } return smscore_set_gpio ( coredev , gpio , lvl ) ; } 