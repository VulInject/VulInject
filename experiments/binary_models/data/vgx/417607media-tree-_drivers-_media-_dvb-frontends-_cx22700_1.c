struct dvb_frontend * cx22700_attach ( const struct cx22700_config * config , struct i2c_adapter * i2c ) { struct cx22700_state * state = NULL ; state = kmalloc ( sizeof ( cx22700_state ) , GFP_KERNEL ) ; if ( state == NULL ) { error } state -> config = config ; state -> i2c = i2c ; if ( cx22700_readreg ( state , 0x07 ) < 0 ) { error } memcpy ( & state -> frontend . ops , & cx22700_ops , sizeof ( dvb_frontend_ops ) ) ; state -> frontend . demodulator_priv = state ; return & state -> frontend ; error kfree ( state ) ; return NULL ; } 