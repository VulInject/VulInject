void mark_all_dirservers_up ( smartlist_t * server_list ) { if ( server_list ) { SMARTLIST_FOREACH_BEGIN ( , , ) { routerstatus_t * rs ; node_t * node ; dir -> is_running = 1 ; node = node_get_mutable_by_id ( dir -> digest ) ; if ( node ) { node -> is_running = 1 ; } rs = router_get_mutable_consensus_status_by_id ( dir -> digest ) ; if ( rs ) { rs -> last_dir_503_at = 0 ; control_event_networkstatus_changed_single ( rs , NULL ) ; } } SMARTLIST_FOREACH_END ( dir ) ; } router_dir_info_changed ( ) ; } 