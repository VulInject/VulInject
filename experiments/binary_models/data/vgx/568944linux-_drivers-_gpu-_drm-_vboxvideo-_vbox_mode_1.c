static int vbox_primary_atomic_check ( struct drm_plane * plane , struct drm_atomic_state * state ) { struct drm_plane_state * new_state = drm_atomic_get_new_plane_state ( state , plane ) ; struct drm_crtc_state * crtc_state = NULL ; if ( new_state -> crtc ) { crtc_state = drm_atomic_get_existing_crtc_state ( state , new_state -> crtc ) ; } return drm_atomic_helper_check_plane_state ( new_state , crtc_state , DRM_PLANE_NO_SCALING , DRM_PLANE_NO_SCALING , false , true ) ; } 