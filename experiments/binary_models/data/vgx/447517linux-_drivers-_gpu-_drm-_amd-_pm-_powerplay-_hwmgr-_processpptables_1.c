static int get_platform_power_management_table ( struct pp_hwmgr * hwmgr , ATOM_PPLIB_PPM_Table * atom_ppm_table ) { struct phm_ppm_table * ptr = kzalloc ( sizeof ( phm_ppm_table ) , GFP_KERNEL ) ; ptr -> ppm_design = atom_ppm_table -> ucPpmDesign ; ptr -> cpu_core_number = le16_to_cpu ( atom_ppm_table -> usCpuCoreNumber ) ; ptr -> platform_tdp = le32_to_cpu ( atom_ppm_table -> ulPlatformTDP ) ; ptr -> small_ac_platform_tdp = le32_to_cpu ( atom_ppm_table -> ulSmallACPlatformTDP ) ; ptr -> platform_tdc = le32_to_cpu ( atom_ppm_table -> ulPlatformTDC ) ; ptr -> small_ac_platform_tdc = le32_to_cpu ( atom_ppm_table -> ulSmallACPlatformTDC ) ; ptr -> apu_tdp = le32_to_cpu ( atom_ppm_table -> ulApuTDP ) ; ptr -> dgpu_tdp = le32_to_cpu ( atom_ppm_table -> ulDGpuTDP ) ; ptr -> dgpu_ulv_power = le32_to_cpu ( atom_ppm_table -> ulDGpuUlvPower ) ; ptr -> tj_max = le32_to_cpu ( atom_ppm_table -> ulTjmax ) ; hwmgr -> dyn_state . ppm_parameter_table = ptr ; return 0 ; } 