int read_spd_init ( struct dimm_config * dimm_config , int dimm_index ) { u8 busno = OCTEON_TWSI_GET_BUS ( dimm_config -> spd_addrs [ dimm_index ] ) ; u8 cmdno = dimm_config -> spd_addrs [ dimm_index ] ; struct udevice * dev_i2c ; u8 * spd_data ; int ret ; dimm_config -> spd_cached [ dimm_index ] = 1 ; spd_data = dimm_config -> spd_data [ dimm_index ] ; ret = i2c_get_chip_for_busnum ( busno , cmdno , 2 , & dev_i2c ) ; if ( ret ) { debug ( "Cannot find SPL EEPROM: %d\n" , ret ) ; return - ENODEV ; } ret = dm_i2c_read ( dev_i2c , 0 , spd_data , SPD_EEPROM_SIZE ) ; return ret ; } 