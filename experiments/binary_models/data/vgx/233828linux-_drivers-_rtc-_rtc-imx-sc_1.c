static int imx_sc_rtc_probe ( struct platform_device * pdev ) { int ret ; ret = imx_scu_get_handle ( & rtc_ipc_handle ) ; device_init_wakeup ( & pdev -> dev , true ) ; imx_sc_rtc = devm_rtc_allocate_device ( & pdev -> dev ) ; if ( IS_ERR ( imx_sc_rtc ) ) { return PTR_ERR ( imx_sc_rtc ) ; } imx_sc_rtc -> ops = & imx_sc_rtc_ops ; imx_sc_rtc -> range_min = 0 ; imx_sc_rtc -> range_max = U32_MAX ; ret = devm_rtc_register_device ( imx_sc_rtc ) ; if ( ret ) { return ret ; } imx_scu_irq_register_notifier ( & imx_sc_rtc_alarm_sc_notifier ) ; return 0 ; } 