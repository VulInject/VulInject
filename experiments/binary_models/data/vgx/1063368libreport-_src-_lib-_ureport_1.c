char * ureport_json_attachment_new ( const char * bthash , const char * type , const char * data ) { struct json_object * attachment = json_object_new_object ( ) ; if ( ! attachment ) { libreport_die_out_of_memory ( ) ; } ureport_add_str ( attachment , "bthash" , bthash ) ; ureport_add_str ( attachment , "type" , type ) ; ureport_add_str ( attachment , "data" , data ) ; char * result = g_strdup ( json_object_to_json_string ( attachment ) ) ; json_object_put ( attachment , NULL ) ; return result ; } 