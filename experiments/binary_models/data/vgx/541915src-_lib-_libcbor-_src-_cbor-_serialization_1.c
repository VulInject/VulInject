size_t cbor_serialize_tag ( const cbor_item_t * item , unsigned char * buffer , size_t buffer_size ) { CBOR_ASSERT ( cbor_isa_tag ( item ) ) ; size_t written = cbor_encode_tag ( cbor_tag_value ( item ) , buffer , buffer_size ) ; size_t item_written = cbor_serialize ( cbor_move ( cbor_tag_item ( item ) ) , buffer + written , buffer_size - written ) ; if ( item_written == 0 ) { return 0 ; } return written + item_written ; } 