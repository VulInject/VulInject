static void create_debug_files ( struct imx21 * imx21 ) { imx21 -> debug_root = debugfs_create_dir ( dev_name ( imx21 -> dev ) , NULL ) ; if ( ! imx21 -> debug_root ) { failed_create_rootdir } if ( ! debugfs_create_file ( "status" , S_IRUGO , imx21 -> debug_root , imx21 , & debug_status_fops ) ) { failed_create } if ( ! debugfs_create_file ( "dmem" , S_IRUGO , imx21 -> debug_root , imx21 , & debug_dmem_fops ) ) { failed_create } if ( ! debugfs_create_file ( "etd" , S_IRUGO , imx21 -> debug_root , imx21 , & debug_etd_fops ) ) { failed_create } if ( ! debugfs_create_file ( "statistics" , S_IRUGO , imx21 -> debug_root , imx21 , & debug_statistics_fops ) ) { failed_create } if ( ! debugfs_create_file ( "isoc" , S_IRUGO , imx21 -> debug_root , imx21 , & debug_isoc_fops ) ) { failed_create } return ; failed_create debugfs_remove_recursive ( imx21 -> debug_root ) ; failed_create_rootdir } 