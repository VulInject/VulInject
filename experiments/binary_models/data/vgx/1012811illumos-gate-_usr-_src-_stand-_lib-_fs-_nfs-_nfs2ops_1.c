{ read_stat = CLNT_CALL ( root_CLIENT , NFSPROC_READ , xdr_readargs , ( caddr_t ) & read_args , xdr_readres , ( caddr_t ) & read_res , timeout ) ; if ( read_stat == RPC_TIMEDOUT ) { dprintf ( "NFS read(%d) timed out. Retrying...\n" , read_args . count ) ; if ( errno == ETIMEDOUT ) { framing_errs ++ ; } if ( framing_errs > NFS_MAX_FERRS && read_args . count > NFS_READ_DECR ) { read_args . count -= NFS_READ_DECR ; nfs_readsize -= NFS_READ_DECR ; dprintf ( "NFS Read size now %d.\n" , nfs_readsize ) ; timeout . tv_sec = NFS_REXMIT_MIN ; framing_errs = 0 ; } else { if ( timeout . tv_sec < NFS_REXMIT_MAX ) { timeout . tv_sec ++ ; } else { timeout . tv_sec = 0 ; } } } } read_stat == RPC_TIMEDOUT ; if ( read_stat != RPC_SUCCESS ) { return ( - 1 ) ; } readcnt = read_res . readres_u . reply . data . data_len ; if ( readcnt == 0 ) { break ; } if ( readcnt < read_args . count ) { if ( ( boothowto & DBFLAGS ) == DBFLAGS ) { printf ( "nfsread(): partial read %d" " instead of %d\n" , readcnt , read_args . count ) ; } done = TRUE ; } count += readcnt ; filep -> offset += readcnt ; buf_offset += readcnt ; read_args . offset += readcnt ; if ( ( blks_read ++ & 0x3 ) == 0 ) { printf ( "%c\b" , ind [ pos ++ & 3 ] ) ; } ( count < size && ! done ) ; return ( count ) ; 