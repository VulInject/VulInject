static int get_clock_voltage_dependency_table ( struct pp_hwmgr * hwmgr , struct phm_clock_voltage_dependency_table * * ptable , const ATOM_PPLIB_Clock_Voltage_Dependency_Table * table ) { unsigned long i ; struct phm_clock_voltage_dependency_table * dep_table ; dep_table = kmalloc ( struct_size ( dep_table , entries , table -> ucNumEntries ) , GFP_KERNEL ) ; if ( NULL == dep_table ) { return - ENOMEM ; } dep_table -> count = ( unsigned long ) table -> ucNumEntries ; for ( i = 0 ; i < dep_table -> count ; i ++ ) { dep_table -> entries [ i ] . clk = ( ( unsigned long ) table -> entries [ i ] . ucClockHigh << 16 ) | le16_to_cpu ( table -> entries [ i ] . usClockLow ) ; dep_table -> entries [ i ] . v = ( unsigned long ) le16_to_cpu ( table -> entries [ i ] . usVoltage ) ; } * ptable = dep_table ; return 0 ; } 