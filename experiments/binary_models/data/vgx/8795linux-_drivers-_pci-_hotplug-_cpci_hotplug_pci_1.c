u8 cpci_get_attention_status ( struct slot * slot ) { int hs_cap ; u16 hs_csr ; hs_cap = pci_bus_find_capability ( slot -> bus , slot -> devfn , PCI_CAP_ID_CHSWP ) ; if ( ! hs_cap ) { return 0 ; } if ( pci_bus_read_config_word ( slot -> bus , slot -> devfn , hs_cap + 2 , & hs_csr ) ) { return 0 ; } return hs_csr & 0x0008 ?1 : 0 ; } 