const tOptionValue * optionFindValue ( const tOptDesc * odesc , char const * name , char const * val ) { const tOptionValue * res = NULL ; if ( ( odesc == NULL ) || ( OPTST_GET_ARGTYPE ( odesc -> fOptState ) != OPARG_TYPE_HIERARCHY ) ) { errno = EINVAL ; } if ( odesc -> optCookie == NULL ) { errno = ENOENT ; } else { { tArgList * argl = odesc -> optCookie ; int argct = argl -> useCt ; void * * poptv = ( void * * ) ( argl -> apzArgs ) ; if ( argct == 0 ) { errno = ENOENT ; break ; } if ( name == NULL ) { res = ( tOptionValue * ) * poptv ; break ; } while ( -- argct >= 0 ) { const tOptionValue * ov = * ( poptv ++ ) ; const tOptionValue * rv = optionGetValue ( ov , name ) ; if ( val == NULL ) { res = ov ; break ; } } if ( res == NULL ) { errno = ENOENT ; } } false ; } return res ; } 