static void reset_options ( void ) { free ( opt_table ) ; opt_table = NULL ; opt_count = opt_num_short = opt_num_short_arg = opt_num_long = 0 ; } static char * output = NULL ; static int saved_vprintf ( const char * fmt , va_list ap ) { char * p ; int ret = vasprintf ( & p , fmt , ap ) ; if ( output ) { output = realloc ( output , strlen ( output ) + strlen ( p ) + 1 ) ; strcat ( output , p ) ; } else { output = p ; } return ret ; } 