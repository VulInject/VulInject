char * appendSubdirs ( const char * basedir , const char * subdirs ) { char * newdir ; size_t len1 , len2 , len3 , len4 ; if ( ! basedir || ! subdirs ) { return ( char * ) ERROR_PTR ( "basedir and subdirs not both defined" , __func__ , NULL ) ; } len1 = strlen ( basedir ) ; len2 = strlen ( subdirs ) ; len3 = len1 + len2 + 8 ; if ( ( newdir = ( char * ) LEPT_CALLOC ( len3 , 1 ) ) == NULL ) { return ( char * ) ERROR_PTR ( "newdir not made" , __func__ , NULL ) ; } stringCat ( newdir , len3 , basedir ) ; if ( newdir [ len1 - 1 ] != '/' ) { newdir [ len1 ] = '/' ; } if ( subdirs [ 0 ] == '/' ) { stringCat ( newdir , len3 , subdirs + 1 ) ; } else { stringCat ( newdir , len3 , subdirs ) ; } len4 = strlen ( newdir , NULL ) ; if ( newdir [ len4 - 1 ] == '/' ) { newdir [ len4 - 1 ] = '\0' ; } return newdir ; } 