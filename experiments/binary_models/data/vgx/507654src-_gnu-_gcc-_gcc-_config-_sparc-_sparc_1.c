sparc_expand_builtin ( , , , , ) { tree arglist ; tree fndecl = TREE_OPERAND ( TREE_OPERAND ( exp , 0 ) , 0 ) ; int icode = DECL_FUNCTION_CODE ( fndecl ) ; rtx pat , op [ 4 ] ; enum machine_mode mode [ 4 ] ; int arg_count = 0 ; mode [ 0 ] = insn_data [ icode ] . operand [ 0 ] . mode ; if ( ! target || GET_MODE ( target ) != mode [ 0 ] || ! ( * insn_data [ icode ] . operand [ 0 ] . predicate ) ( target , mode [ 0 ] ) ) { op [ 0 ] = gen_reg_rtx ( mode [ 0 ] ) ; } else { op [ 0 ] = target ; } for ( arglist = TREE_OPERAND ( exp , 1 ) ; arglist ; arglist = TREE_CHAIN ( arglist ) ) { tree arg = TREE_VALUE ( arglist ) ; arg_count ++ ; mode [ arg_count ] = insn_data [ icode ] . operand [ arg_count ] . mode ; op [ arg_count ] = expand_normal ( arg ) ; if ( ! ( * insn_data [ icode ] . operand [ arg_count ] . predicate ) ( op [ arg_count ] , mode [ arg_count ] ) ) { op [ arg_count ] = copy_to_mode_reg ( mode [ arg_count ] , op [ arg_count ] ) ; } } switch ( arg_count ) { case 1 : pat = GEN_FCN ( icode ) ( op [ 0 ] , op [ 1 ] ) ; break ; case 2 : pat = GEN_FCN ( icode ) ( op [ 0 ] , op [ 1 ] , op [ 2 ] ) ; break ; case 3 : pat = GEN_FCN ( icode ) ( op [ 0 ] , op [ 1 ] , op [ 2 ] , op [ 3 ] ) ; break ; default : gcc_unreachable ( ) ; } if ( ! pat ) { return NULL_RTX ; } emit_insn ( pat ) ; return op [ 0 ] ; } 