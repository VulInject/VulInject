iq2000_cgen_rebuild_tables ( ) { int i ; CGEN_BITSET * isas = cd -> isas ; unsigned int machs = cd -> machs ; cd -> int_insn_p = CGEN_INT_INSN_P ; cd -> default_insn_bitsize = UNSET ; cd -> base_insn_bitsize = UNSET ; cd -> min_insn_bitsize = 65535 ; cd -> max_insn_bitsize = 0 ; for ( i = 0 ; i < MAX_ISAS ; ++ i ) { if ( cgen_bitset_contains ( isas , i ) ) { const CGEN_ISA * isa = & iq2000_cgen_isa_table [ i ] ; if ( cd -> default_insn_bitsize == UNSET ) { cd -> default_insn_bitsize = isa -> default_insn_bitsize ; } if ( isa -> default_insn_bitsize == cd -> default_insn_bitsize ) { } else { cd -> default_insn_bitsize = CGEN_SIZE_UNKNOWN ; } if ( cd -> base_insn_bitsize == UNSET ) { cd -> base_insn_bitsize = isa -> base_insn_bitsize ; } if ( isa -> base_insn_bitsize == cd -> base_insn_bitsize ) { } else { cd -> base_insn_bitsize = CGEN_SIZE_UNKNOWN ; } if ( isa -> min_insn_bitsize < cd -> min_insn_bitsize ) { cd -> min_insn_bitsize = isa -> min_insn_bitsize ; } if ( isa -> max_insn_bitsize > cd -> max_insn_bitsize ) { cd -> max_insn_bitsize = isa -> max_insn_bitsize ; } } } for ( i = 0 ; i < MAX_MACHS ; ++ i ) { if ( ( ( 1 << i ) & machs ) != 0 ) { const CGEN_MACH * mach = & iq2000_cgen_mach_table [ i ] ; if ( mach -> insn_chunk_bitsize != 0 ) { if ( cd -> insn_chunk_bitsize != 0 && cd -> insn_chunk_bitsize != mach -> insn_chunk_bitsize ) { fprintf ( stderr , "iq2000_cgen_rebuild_tables: conflicting insn-chunk-bitsize values: `%d' vs. `%d'\n" , cd -> insn_chunk_bitsize , mach -> insn_chunk_bitsize ) ; abort ( ) ; } cd -> insn_chunk_bitsize = mach -> insn_chunk_bitsize ; } } } build_hw_table ( cd ) ; build_ifield_table ( cd ) ; build_operand_table ( cd , NULL ) ; build_insn_table ( cd ) ; } 