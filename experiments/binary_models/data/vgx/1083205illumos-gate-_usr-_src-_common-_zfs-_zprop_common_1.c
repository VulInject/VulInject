size_t zprop_width ( int prop , boolean_t * fixed , zfs_type_t type ) { zprop_desc_t * prop_tbl , * pd ; const zprop_index_t * idx ; int ret ; int i ; ASSERT ( prop != ZPROP_INVAL && prop != ZPROP_CONT ) ; ASSERT ( prop < zprop_get_numprops ( type ) ) ; prop_tbl = zprop_get_proptable ( type ) ; pd = & prop_tbl [ prop ] ; * fixed = B_TRUE ; ret = strlen ( pd -> pd_colname ) ; switch ( pd -> pd_proptype ) { case PROP_TYPE_NUMBER : if ( ret < 5 ) { ret = 5 ; } if ( prop == ZFS_PROP_CREATION ) { * fixed = B_FALSE ; } if ( prop == ZPOOL_PROP_HEALTH ) { ret = 8 ; } break ; case PROP_TYPE_INDEX : idx = prop_tbl [ prop ] . pd_table ; for ( i = 0 ; idx [ i ] . pi_name != NULL ; i ++ ) { if ( strlen ( idx [ i ] . pi_name ) > ret ) { ret = strlen ( idx [ i ] . pi_name ) ; } } break ; case PROP_TYPE_STRING : * fixed = B_FALSE ; break ; } return ( ret ) ; } 