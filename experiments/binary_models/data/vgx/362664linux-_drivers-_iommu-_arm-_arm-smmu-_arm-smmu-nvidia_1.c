static irqreturn_t nvidia_smmu_context_fault_bank ( int irq , struct arm_smmu_device * smmu , int idx , int inst ) { u32 fsr , fsynr , cbfrsynra ; unsigned long iova ; void __iomem * gr1_base = nvidia_smmu_page ( smmu , inst , 1 ) ; void __iomem * cb_base = nvidia_smmu_page ( smmu , inst , smmu -> numpage + idx ) ; fsr = readl_relaxed ( cb_base + ARM_SMMU_CB_FSR ) ; fsynr = readl_relaxed ( cb_base + ARM_SMMU_CB_FSYNR0 ) ; iova = readq_relaxed ( cb_base + ARM_SMMU_CB_FAR ) ; cbfrsynra = readl_relaxed ( gr1_base + ARM_SMMU_GR1_CBFRSYNRA ( idx ) ) ; dev_err_ratelimited ( smmu -> dev , "Unhandled context fault: fsr=0x%x, iova=0x%08lx, fsynr=0x%x, cbfrsynra=0x%x, cb=%d\n" , fsr , iova , fsynr , cbfrsynra , idx ) ; writel_relaxed ( fsr , cb_base + ARM_SMMU_CB_FSR ) ; return IRQ_HANDLED ; } 