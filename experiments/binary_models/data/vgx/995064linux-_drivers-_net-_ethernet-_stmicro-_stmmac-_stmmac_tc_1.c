static int tc_add_basic_flow ( struct stmmac_priv * priv , struct flow_cls_offload * cls , struct stmmac_flow_entry * entry ) { struct flow_rule * rule = flow_cls_offload_flow_rule ( cls ) ; struct flow_dissector * dissector = rule -> match . dissector ; struct flow_match_basic match ; flow_rule_match_basic ( rule , & match ) ; entry -> ip_proto = match . key -> ip_proto ; return 0 ; } 