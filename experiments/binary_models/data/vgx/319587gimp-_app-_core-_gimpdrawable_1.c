gimp_drawable_steal_buffer ( , ) { GeglBuffer * buffer ; GeglBuffer * replacement_buffer ; g_return_if_fail ( GIMP_IS_DRAWABLE ( drawable ) ) ; g_return_if_fail ( GIMP_IS_DRAWABLE ( src_drawable ) ) ; buffer = gimp_drawable_get_buffer ( src_drawable ) ; g_return_if_fail ( buffer != NULL ) ; g_object_ref ( buffer ) ; replacement_buffer = gegl_buffer_new ( GEGL_RECTANGLE ( 0 , 0 , 1 , 1 ) , gegl_buffer_get_format ( buffer ) ) ; gimp_drawable_set_buffer ( src_drawable , FALSE , replacement_buffer ) ; gimp_drawable_set_buffer ( drawable , FALSE , NULL , buffer ) ; g_object_unref ( replacement_buffer ) ; g_object_unref ( buffer ) ; } 