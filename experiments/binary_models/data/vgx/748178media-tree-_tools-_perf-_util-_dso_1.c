void dso__delete ( struct dso * dso ) { int i ; if ( ! RB_EMPTY_NODE ( & dso -> rb_node ) ) { pr_err ( "DSO %s is still in rbtree when being deleted!\n" , dso -> long_name ) ; } for ( i = 0 ; i < MAP__NR_TYPES ; ++ i ) { symbols__delete ( & dso -> symbols [ i ] ) ; } if ( dso -> short_name_allocated ) { zfree ( ( char * * ) & dso -> short_name ) ; dso -> short_name_allocated = false ; } if ( dso -> long_name_allocated ) { zfree ( ( char * * ) & dso -> long_name ) ; dso -> long_name_allocated = false ; } dso__data_close ( dso ) ; auxtrace_cache__free ( dso -> auxtrace_cache ) ; dso_cache__free ( dso ) ; dso__free_a2l ( dso ) ; zfree ( & dso -> symsrc_filename ) ; pthread_mutex_destroy ( & dso -> lock ) ; } 