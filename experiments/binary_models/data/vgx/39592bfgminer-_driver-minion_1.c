void minion_queue_flush ( struct thr_info * const thr ) { struct cgpu_info * const proc = thr -> cgpu ; struct minion_bus * const mbus = proc -> device_data ; struct minion_chip * const chip = thr -> cgpu_data ; const uint8_t chipid = chip -> chipid ; struct spi_port * const spi = mbus -> spi ; static const uint8_t flushcmd [ 4 ] { 0xfb 0xff 0xff 0xff } ; ; minion_set ( spi , chipid , MRA_RESET , flushcmd , sizeof ( flushcmd ) ) ; minion_refill_queue ( thr ) ; } 