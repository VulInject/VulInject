struct s_table * init_hash_table ( ) { int i ; _tm_table = ( s_table * ) shm_malloc ( sizeof ( s_table ) ) ; if ( ! _tm_table ) { SHM_MEM_ERROR ; error0 } if ( lock_initialize ( ) == - 1 ) { error1 } for ( i = 0 ; i < TABLE_ENTRIES ; i ++ ) { init_entry_lock ( _tm_table , ( _tm_table -> entries ) + i ) ; _tm_table -> entries [ i ] . next_label = kam_rand ( ) ; clist_init ( & _tm_table -> entries [ i ] , next_c , prev_c ) ; } return _tm_table ; error1 free_hash_table ( ) ; error0 return 0 ; } 