static int aldebaran_set_performance_level ( struct smu_context * smu , enum amd_dpm_forced_level level ) { struct smu_dpm_context * smu_dpm = & ( smu -> smu_dpm ) ; struct smu_13_0_dpm_context * dpm_context = smu_dpm -> dpm_context ; struct smu_13_0_dpm_table * gfx_table = & dpm_context -> dpm_tables . gfx_table ; struct smu_umd_pstate_table * pstate_table = & smu -> pstate_table ; if ( ( smu_dpm -> dpm_level == AMD_DPM_FORCED_LEVEL_PERF_DETERMINISM ) && ( level != AMD_DPM_FORCED_LEVEL_PERF_DETERMINISM ) ) { smu_cmn_send_smc_msg ( smu , SMU_MSG_DisableDeterminism ) ; pstate_table -> gfxclk_pstate . curr . max = gfx_table -> max ; } switch ( level ) { case AMD_DPM_FORCED_LEVEL_PERF_DETERMINISM : return 0 ; case AMD_DPM_FORCED_LEVEL_HIGH : case AMD_DPM_FORCED_LEVEL_LOW : case AMD_DPM_FORCED_LEVEL_PROFILE_STANDARD : case AMD_DPM_FORCED_LEVEL_PROFILE_MIN_SCLK : case AMD_DPM_FORCED_LEVEL_PROFILE_MIN_MCLK : case AMD_DPM_FORCED_LEVEL_PROFILE_PEAK : default : break ; } return smu_v13_0_set_performance_level ( smu , level ) ; } 