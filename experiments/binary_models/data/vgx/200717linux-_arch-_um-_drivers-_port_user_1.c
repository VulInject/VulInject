static int port_open ( int input , int output , int primary , void * d , char * * dev_out ) { struct port_chan * data = d ; int fd , err ; fd = port_wait ( data -> kernel_data ) ; if ( ( fd >= 0 ) && data -> raw ) { CATCH_EINTR ( err = tcgetattr ( fd , & data -> tt ) ) ; err = raw ( fd ) ; if ( err ) { return err ; } } * dev_out = data -> dev ; return fd ; } 