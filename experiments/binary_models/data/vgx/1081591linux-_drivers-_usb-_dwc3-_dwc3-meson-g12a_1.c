static int __maybe_unused dwc3_meson_g12a_suspend ( struct device * dev ) { struct dwc3_meson_g12a * priv = dev_get_drvdata ( dev ) ; int i , ret ; if ( priv -> vbus && priv -> otg_phy_mode == PHY_MODE_USB_HOST ) { ret = regulator_disable ( priv -> vbus ) ; if ( ret ) { return ret ; } } for ( i = 0 ; i < PHY_COUNT ; ++ i ) { phy_power_off ( priv -> phys [ i ] ) ; phy_exit ( priv -> phys [ i ] ) ; } reset_control_rearm ( priv -> reset , NULL ) ; return 0 ; } 