gimp_version ( , ) { gchar * version ; gchar * temp ; version = g_strdup_printf ( localized ?_ ( "%s version %s" ) : "%s version %s" , GIMP_NAME , GIMP_VERSION ) ; temp = g_strconcat ( version , "\n" , NULL ) ; g_free ( version ) ; version = temp ; if ( be_verbose ) { gchar * verbose_info ; gchar * lib_versions ; gchar * flatpak_info = NULL ; lib_versions = gimp_library_versions ( localized ) ; verbose_info = g_strdup_printf ( "git-describe: %s\n" "Build: %s rev %d for %s\n" "# C compiler #\n%s\n" "# Libraries #\n%s" , GIMP_GIT_VERSION , GIMP_BUILD_ID , gimp_version_get_revision ( ) , GIMP_BUILD_PLATFORM_FAMILY , CC_VERSION , lib_versions ) ; g_free ( lib_versions ) ; if ( g_file_get_contents ( "/.flatpak-info" , & flatpak_info , NULL , NULL ) ) { temp = g_strdup_printf ( "\n# Flatpak info #\n%s" , flatpak_info ) ; flatpak_info = temp ; } temp = g_strconcat ( version , verbose_info , flatpak_info , NULL ) ; g_free ( version ) ; g_free ( verbose_info ) ; g_free ( flatpak_info ) ; version = temp ; } return version ; } 