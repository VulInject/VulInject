int adav80x_bus_probe ( struct device * dev , struct regmap * regmap ) { struct adav80x * adav80x ; if ( IS_ERR ( regmap ) ) { return PTR_ERR ( regmap ) ; } adav80x = devm_kzalloc ( dev , sizeof ( * adav80x ) , GFP_KERNEL ) ; dev_set_drvdata ( dev , adav80x ) ; adav80x -> regmap = regmap ; return snd_soc_register_codec ( dev , & adav80x_codec_driver , adav80x_dais , ARRAY_SIZE ( adav80x_dais ) ) ; } 