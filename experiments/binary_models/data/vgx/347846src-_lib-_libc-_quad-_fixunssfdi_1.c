u_quad_t __fixunssfdi ( float f ) { double x , toppart ; union uu t ; if ( f < 0 ) { return ( UQUAD_MAX ) ; } if ( f >= 18446744073709551615.0 ) { return ( UQUAD_MAX ) ; } x = f ; toppart = ( x - ONE_HALF ) / ONE ; t . ul [ H ] = ( unsigned int ) toppart ; t . ul [ L ] = 0 ; x -= ( double ) t . uq ; if ( x < 0 ) { t . ul [ H ] -- ; x += UINT_MAX ; } if ( x > UINT_MAX ) { t . ul [ H ] ++ ; x -= UINT_MAX ; } t . ul [ L ] = ( u_int ) x ; return ( t . uq ) ; } 