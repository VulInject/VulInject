int ufs_reclaim ( struct vnode * vp ) { struct inode * ip ; extern int prtactive ; if ( prtactive && vp -> v_usecount != 0 ) { vprint ( "ufs_reclaim: pushing active" , vp ) ; } ip = VTOI ( vp ) ; if ( ip -> i_flag & IN_LAZYMOD ) { ip -> i_flag |= IN_MODIFIED ; UFS_UPDATE ( ip , 0 ) ; } ufs_ihashrem ( ip ) ; cache_purge ( vp ) ; if ( ip -> i_devvp ) { vrele ( ip -> i_devvp ) ; } if ( ip -> i_dirhash != NULL ) { ufsdirhash_free ( ip ) ; } ufs_quota_delete ( ip , NULL ) ; return ( 0 ) ; } 