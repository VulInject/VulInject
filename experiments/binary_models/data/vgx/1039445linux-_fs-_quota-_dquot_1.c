static void do_get_dqblk ( struct dquot * dquot , struct qc_dqblk * di ) { struct mem_dqblk * dm = & dquot -> dq_dqb ; spin_lock ( & dquot -> dq_dqb_lock ) ; di -> d_spc_hardlimit = dm -> dqb_bhardlimit ; di -> d_spc_softlimit = dm -> dqb_bsoftlimit ; di -> d_ino_hardlimit = dm -> dqb_ihardlimit ; di -> d_ino_softlimit = dm -> dqb_isoftlimit ; di -> d_space = dm -> dqb_curspace + dm -> dqb_rsvspace ; di -> d_ino_count = dm -> dqb_curinodes ; di -> d_spc_timer = dm -> dqb_btime ; di -> d_ino_timer = dm -> dqb_itime ; spin_unlock ( & dquot -> dq_dqb_lock ) ; } 