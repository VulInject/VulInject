static int pci_vt9p_send ( struct l9p_request * req , const struct iovec * iov __unused , const size_t niov __unused , const size_t iolen , void * arg __unused ) { struct pci_vt9p_request * preq = req -> lr_aux ; struct pci_vt9p_softc * sc = preq -> vsr_sc ; preq -> vsr_iolen = iolen ; pthread_mutex_lock ( & sc -> vsc_mtx ) ; vq_relchain ( & sc -> vsc_vq , preq -> vsr_idx , preq -> vsr_iolen ) ; vq_endchains ( & sc -> vsc_vq , 1 ) ; pthread_mutex_unlock ( & sc -> vsc_mtx ) ; return ( 0 ) ; } 