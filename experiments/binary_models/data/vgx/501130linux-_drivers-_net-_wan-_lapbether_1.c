( lapbeth_init_driver ) ; static void __exit lapbeth_cleanup_driver ( void ) { struct lapbethdev * lapbeth ; struct list_head * entry , * tmp ; dev_remove_pack ( & lapbeth_packet_type ) ; unregister_netdevice_notifier ( & lapbeth_dev_notifier ) ; rtnl_lock ( ) ; list_for_each_safe ( , , ) { lapbeth = list_entry ( entry , lapbethdev , node ) ; dev_put ( lapbeth -> ethdev ) ; unregister_netdevice ( lapbeth -> axdev , NULL ) ; } rtnl_unlock ( ) ; } 