static void infc_session_proxy_connection_notify_status_cb ( InfXmlConnection * connection , GParamSpec * pspec , gpointer user_data ) { InfcSessionProxy * proxy ; InfXmlConnectionStatus status ; proxy = INFC_SESSION_PROXY ( user_data , NULL ) ; g_object_get ( G_OBJECT ( connection ) , "status" , & status , NULL ) ; if ( status == INF_XML_CONNECTION_CLOSED || status == INF_XML_CONNECTION_CLOSING ) { infc_session_proxy_release_connection ( proxy ) ; } } 