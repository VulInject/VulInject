static int wl3501_close ( struct net_device * dev ) { struct wl3501_card * this = netdev_priv ( dev ) ; int rc = - ENODEV ; unsigned long flags ; struct pcmcia_device * link ; link = this -> p_dev ; spin_lock_irqsave ( & this -> lock , flags ) ; link -> open -- ; netif_stop_queue ( dev ) ; wl3501_ack_interrupt ( this , NULL ) ; wl3501_block_interrupt ( this ) ; rc = 0 ; printk ( KERN_INFO "%s: WL3501 closed\n" , dev -> name ) ; spin_unlock_irqrestore ( & this -> lock , flags ) ; return rc ; } 