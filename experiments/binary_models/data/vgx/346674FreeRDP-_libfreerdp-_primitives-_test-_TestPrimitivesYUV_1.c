int TestPrimitivesYUV ( int argc , char * argv [ ] ) { BOOL large = ( argc > 1 ) ; int x ; int rc = - 1 ; WINPR_UNUSED ( argc ) ; WINPR_UNUSED ( argv ) ; prim_test_setup ( FALSE ) ; primitives_t * prims = primitives_get ( ) ; for ( x = 0 ; x < 5 ; x ++ ) { prim_size_t roi ; if ( argc > 1 ) { int crc = sscanf ( argv [ 1 ] , "%" PRIu32 "x%" PRIu32 , & roi . width , & roi . height ) ; if ( crc != 2 ) { roi . width = 1920 ; roi . height = 1080 ; } } else { get_size ( large , & roi . width , & roi . height ) ; } printf ( "-------------------- GENERIC ------------------------\n" ) ; if ( ! TestPrimitiveYUV ( generic , roi , TRUE ) ) { printf ( "TestPrimitiveYUV (444) failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; printf ( "------------------- OPTIMIZED -----------------------\n" ) ; if ( ! TestPrimitiveYUV ( prims , roi , TRUE ) ) { printf ( "TestPrimitiveYUV (444) failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; printf ( "-------------------- GENERIC ------------------------\n" ) ; if ( ! TestPrimitiveYUV ( generic , roi , FALSE ) ) { printf ( "TestPrimitiveYUV (420) failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; printf ( "------------------- OPTIMIZED -----------------------\n" ) ; if ( ! TestPrimitiveYUV ( prims , roi , FALSE ) ) { printf ( "TestPrimitiveYUV (420) failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; printf ( "-------------------- GENERIC ------------------------\n" ) ; if ( ! TestPrimitiveYUVCombine ( generic , roi ) ) { printf ( "TestPrimitiveYUVCombine failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; printf ( "------------------- OPTIMIZED -----------------------\n" ) ; if ( ! TestPrimitiveYUVCombine ( prims , roi ) ) { printf ( "TestPrimitiveYUVCombine failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; printf ( "------------------- OPTIMIZED -----------------------\n" ) ; if ( ! TestPrimitiveRgbToLumaChroma ( prims , roi , 1 ) ) { printf ( "TestPrimitiveRgbToLumaChroma failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; printf ( "-------------------- GENERIC ------------------------\n" ) ; if ( ! TestPrimitiveRgbToLumaChroma ( prims , roi , 2 ) ) { printf ( "TestPrimitiveYUVCombine failed.\n" ) ; end } printf ( "---------------------- END --------------------------\n" ) ; } rc = 0 ; end return rc ; } 