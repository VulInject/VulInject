git_patch_parse_ctx * git_patch_parse_ctx_init ( const char * content , size_t content_len , const git_patch_options * opts ) { git_patch_parse_ctx * ctx ; git_patch_options default_opts = GIT_PATCH_OPTIONS_INIT ; if ( ( ctx = git__calloc ( 1 , sizeof ( git_patch_parse_ctx ) ) ) == NULL ) { return in ; } if ( ( git_parse_ctx_init ( & ctx -> parse_ctx , content , content_len ) ) < 0 ) { git__free ( ctx ) ; return NULL ; } if ( opts ) { memcpy ( & ctx -> opts , opts , sizeof ( git_patch_options ) ) ; } else { memcpy ( & ctx -> opts , & default_opts , sizeof ( git_patch_options ) ) ; } GIT_REFCOUNT_INC ( ctx ) ; return ctx ; } 