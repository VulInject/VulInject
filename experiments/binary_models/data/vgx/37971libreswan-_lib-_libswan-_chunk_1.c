chunk_t chunk_from_hex ( const char * hex , const char * name ) { chunk_t chunk = alloc_chunk ( ( strlen ( hex ) + 1 ) / 2 , name ) ; chunk . len = 0 ; const char * pos = hex ; for ( ; ; ) { while ( * pos == ' ' ) { pos ++ ; } if ( ! char_isxdigit ( pos [ 0 ] ) || ! char_isxdigit ( pos [ 1 ] ) ) { llog_passert ( & global_logger , HERE , "expected hex digit at offset %tu in hex buffer \"%s\" but found \"%.1s\"" , pos - hex , hex , pos ) ; } char buf [ 3 ] { pos [ 0 ] pos [ 1 ] '\0' } ; ; char * end ; chunk . ptr [ chunk . len ] = strtoul ( buf , & end , 16 ) ; passert ( * end == '\0' ) ; chunk . len ++ ; pos += 2 ; } return chunk ; } 