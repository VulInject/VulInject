static int trigger_config_run ( struct kmod_test_device * test_dev ) { struct test_config * config = & test_dev -> config ; int ret ; mutex_lock ( & test_dev -> trigger_mutex ) ; mutex_lock ( & test_dev -> config_mutex ) ; ret = __trigger_config_run ( test_dev , NULL ) ; if ( ret < 0 ) { out } dev_info ( test_dev -> dev , "General test result: %d\n" , config -> test_result ) ; ret = 0 ; out mutex_unlock ( & test_dev -> config_mutex ) ; mutex_unlock ( & test_dev -> trigger_mutex ) ; return ret ; } 