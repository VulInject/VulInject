int gf100_bar_oneinit ( struct nvkm_bar * base ) { static struct lock_class_key bar1_lock ; static struct lock_class_key bar3_lock ; struct gf100_bar * bar = gf100_bar ( base ) ; int ret ; if ( bar -> base . func -> kmap ) { ret = gf100_bar_ctor_vm ( bar , & bar -> bar [ 0 ] , & bar3_lock , 3 ) ; } ret = gf100_bar_ctor_vm ( bar , & bar -> bar [ 1 ] , & bar1_lock , 1 ) ; if ( ret ) { return ret ; } return 0 ; } 