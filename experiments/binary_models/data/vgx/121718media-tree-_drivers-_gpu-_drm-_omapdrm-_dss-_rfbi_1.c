static int rfbi_enable_te ( bool enable , unsigned line ) { u32 l ; DSSDBG ( "te %d line %d mode %d\n" , enable , line , rfbi . te_mode ) ; l = rfbi_read_reg ( RFBI_CONFIG ( 0 ) ) ; l &= ~ ( 0x3 << 2 ) ; if ( enable ) { rfbi . te_enabled = 1 ; l |= rfbi . te_mode << 2 ; } else { rfbi . te_enabled = 0 ; } rfbi_write_reg ( RFBI_CONFIG ( 0 ) , l ) ; rfbi_write_reg ( RFBI_LINE_NUMBER , line ) ; return 0 ; } 