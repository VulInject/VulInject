static int drm_atomic_replace_property_blob_from_id ( struct drm_device * dev , struct drm_property_blob * * blob , uint64_t blob_id , ssize_t expected_size , ssize_t expected_elem_size , bool * replaced ) { struct drm_property_blob * new_blob = NULL ; if ( blob_id != 0 ) { new_blob = drm_property_lookup_blob ( dev , blob_id ) ; if ( expected_size > 0 && new_blob -> length != expected_size ) { drm_property_blob_put ( new_blob ) ; return - EINVAL ; } if ( expected_elem_size > 0 && new_blob -> length % expected_elem_size != 0 ) { drm_property_blob_put ( new_blob ) ; return - EINVAL ; } } * replaced |= drm_property_replace_blob ( blob , new_blob ) ; drm_property_blob_put ( new_blob ) ; return 0 ; } 