static unsigned int ioc4_variant ( struct ioc4_driver_data * idd ) { struct pci_dev * pdev = NULL ; int found = 0 ; { pdev = pci_get_device ( PCI_VENDOR_ID_QLOGIC , PCI_DEVICE_ID_QLOGIC_ISP12160 , pdev ) ; if ( pdev && idd -> idd_pdev -> bus -> number == pdev -> bus -> number && 3 == PCI_SLOT ( pdev -> devfn ) ) { found = 1 ; } } pdev && ! found ; if ( NULL != pdev ) { pci_dev_put ( pdev , NULL ) ; return IOC4_VARIANT_IO9 ; } pdev = NULL ; { pdev = pci_get_device ( PCI_VENDOR_ID_VITESSE , PCI_DEVICE_ID_VITESSE_VSC7174 , pdev ) ; if ( pdev && idd -> idd_pdev -> bus -> number == pdev -> bus -> number && 3 == PCI_SLOT ( pdev -> devfn ) ) { found = 1 ; } } pdev && ! found ; if ( NULL != pdev ) { pci_dev_put ( pdev ) ; return IOC4_VARIANT_IO10 ; } return IOC4_VARIANT_PCI_RT ; } 