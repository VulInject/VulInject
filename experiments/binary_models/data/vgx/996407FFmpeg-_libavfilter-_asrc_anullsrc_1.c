static int activate ( AVFilterContext * ctx ) { ANullContext * null = ctx -> priv ; AVFilterLink * outlink = ctx -> outputs [ 0 ] ; if ( null -> duration >= 0 && null -> pts >= null -> duration ) { ff_outlink_set_status ( outlink , AVERROR_EOF , null -> pts ) ; return 0 ; } if ( ff_outlink_frame_wanted ( outlink ) ) { AVFrame * samplesref = ff_get_audio_buffer ( outlink , null -> duration >= 0 ?FFMIN ( null -> nb_samples , null -> duration - null -> pts ) : null -> nb_samples ) ; samplesref -> pts = null -> pts ; null -> pts += samplesref -> nb_samples ; return ff_filter_frame ( outlink , samplesref ) ; } return FFERROR_NOT_READY ; } 