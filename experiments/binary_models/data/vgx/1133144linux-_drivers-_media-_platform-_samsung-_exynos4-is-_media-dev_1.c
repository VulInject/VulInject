static int fimc_md_register_platform_entities ( struct fimc_md * fmd , struct device_node * parent ) { struct device_node * node ; int ret = 0 ; for_each_available_child_of_node ( , ) { struct platform_device * pdev ; int plat_entity = - 1 ; pdev = of_find_device_by_node ( node ) ; if ( of_node_name_eq ( node , CSIS_OF_NODE_NAME ) ) { plat_entity = IDX_CSIS ; } if ( of_node_name_eq ( node , FIMC_IS_OF_NODE_NAME ) ) { plat_entity = IDX_IS_ISP ; } if ( of_node_name_eq ( node , FIMC_LITE_OF_NODE_NAME ) ) { plat_entity = IDX_FLITE ; } if ( of_node_name_eq ( node , FIMC_OF_NODE_NAME ) && ! of_property_read_bool ( node , "samsung,lcd-wb" ) ) { plat_entity = IDX_FIMC ; } if ( plat_entity >= 0 ) { ret = fimc_md_register_platform_entity ( fmd , pdev , plat_entity ) ; } put_device ( & pdev -> dev ) ; if ( ret < 0 ) { of_node_put ( node ) ; break ; } } return ret ; } 