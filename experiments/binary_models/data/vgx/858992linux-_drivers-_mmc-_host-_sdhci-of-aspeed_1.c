static void aspeed_sdhci_configure_phase ( struct sdhci_host * host , unsigned long rate ) { struct aspeed_sdhci_tap_param _taps = { 0 } , * taps = & _taps ; struct mmc_clk_phase * params ; struct aspeed_sdhci * sdhci ; struct device * dev ; dev = mmc_dev ( host -> mmc ) ; sdhci = sdhci_pltfm_priv ( sdhci_priv ( host ) ) ; params = & sdhci -> phase_map . phase [ host -> timing ] ; aspeed_sdhci_phases_to_taps ( dev , rate , params , taps ) ; aspeed_sdc_set_phase_taps ( sdhci -> parent , sdhci -> phase_desc , taps ) ; dev_dbg ( dev , "Using taps [%d, %d] for [%d, %d]degrees of phase correction at %luHz (%d)\n" , taps -> in & ASPEED_SDHCI_NR_TAPS , taps -> out & ASPEED_SDHCI_NR_TAPS , params -> in_deg , params -> out_deg , rate , host -> timing ) ; } 