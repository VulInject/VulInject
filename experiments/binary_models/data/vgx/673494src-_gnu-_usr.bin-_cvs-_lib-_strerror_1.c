init_error_tables ( ) { const struct error_info * eip ; int nbytes ; if ( num_error_names == 0 ) { for ( eip = error_table ; eip -> name != NULL ; eip ++ ) { if ( eip -> value >= num_error_names ) { num_error_names = eip -> value + 1 ; } } } if ( error_names == NULL ) { nbytes = num_error_names * sizeof ( char * ) ; if ( ( error_names = ( char * * ) malloc ( nbytes ) ) != NULL ) { memset ( error_names , 0 , nbytes ) ; for ( eip = error_table ; eip -> name != NULL ; eip ++ ) { error_names [ eip -> value ] = eip -> name ; } } } if ( sys_errlist == NULL ) { nbytes = num_error_names * sizeof ( char * ) ; if ( ( sys_errlist = ( char * * ) malloc ( nbytes ) ) != NULL ) { sys_nerr = num_error_names ; for ( eip = error_table ; eip -> name != NULL ; eip ++ ) { sys_errlist [ eip -> value ] = eip -> msg ; } } } } 