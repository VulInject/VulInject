gsm_consolekit_can_hibernate ( ) { GsmConsolekit * manager = GSM_CONSOLEKIT ( system ) ; gchar * rv ; GVariant * res ; gboolean can_hibernate ; res = g_dbus_proxy_call_sync ( manager -> priv -> ck_proxy , "CanHibernate" , NULL , 0 , G_MAXINT , NULL , NULL ) ; if ( ! res ) { g_warning ( "Calling CanHibernate failed. Check that ConsoleKit is " "properly installed." ) ; return FALSE ; } g_variant_get ( res , "(s)" , & rv ) ; g_variant_unref ( res ) ; can_hibernate = g_strcmp0 ( rv , "yes" ) == 0 || g_strcmp0 ( rv , "challenge" ) == 0 ; return can_hibernate ; } 