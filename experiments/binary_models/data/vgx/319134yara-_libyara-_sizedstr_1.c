SIZED_STRING * ss_convert_to_wide ( SIZED_STRING * s ) { SIZED_STRING * wide = ( SIZED_STRING * ) yr_malloc ( sizeof ( SIZED_STRING ) + s -> length * 2 ) ; for ( size_t i = 0 ; i < s -> length ; i ++ ) { wide -> c_string [ i * 2 ] = s -> c_string [ i ] ; wide -> c_string [ i * 2 + 1 ] = '\x00' ; } wide -> length = s -> length * 2 ; wide -> flags = s -> flags | STRING_FLAGS_WIDE ; return wide ; } 