int dbl_to_dbl_fcnvfxt ( srcptr , null , dstptr , status ) dbl_floating_point * srcptr , * null ; dbl_integer * dstptr ; unsigned int * status ; { register int src_exponent , resultp1 ; register unsigned int srcp1 , srcp2 , tempp1 , tempp2 , resultp2 ; Dbl_copyfromptr ( srcptr , srcp1 , srcp2 ) ; src_exponent = Dbl_exponent ( srcp1 ) - DBL_BIAS ; if ( src_exponent > DBL_FX_MAX_EXP ) { if ( ( src_exponent > DBL_FX_MAX_EXP + 1 ) || Dbl_isnotzero_mantissa ( srcp1 , srcp2 ) || Dbl_iszero_sign ( srcp1 ) ) { if ( Dbl_iszero_sign ( srcp1 ) ) { resultp1 = 0x7fffffff ; resultp2 = 0xffffffff ; } else { resultp1 = 0x80000000 ; resultp2 = 0 ; } Set_invalidflag ( ) ; Dint_copytoptr ( resultp1 , resultp2 , dstptr ) ; return ( NOEXCEPTION ) ; } } if ( src_exponent >= 0 ) { tempp1 = srcp1 ; tempp2 = srcp2 ; Dbl_clear_signexponent_set_hidden ( tempp1 ) ; Dint_from_dbl_mantissa ( tempp1 , tempp2 , src_exponent , resultp1 , resultp2 ) ; if ( Dbl_isone_sign ( srcp1 ) ) { Dint_setone_sign ( resultp1 , resultp2 ) ; } Dint_copytoptr ( resultp1 , resultp2 , dstptr ) ; if ( Dbl_isinexact_to_fix ( srcp1 , srcp2 , src_exponent ) ) { if ( Is_inexacttrap_enabled ( ) ) { return ( INEXACTEXCEPTION ) ; } else { Set_inexactflag ( ) ; } } } else { Dint_setzero ( resultp1 , resultp2 ) ; Dint_copytoptr ( resultp1 , resultp2 , dstptr ) ; if ( Dbl_isnotzero_exponentmantissa ( srcp1 , srcp2 ) ) { if ( Is_inexacttrap_enabled ( ) ) { return ( INEXACTEXCEPTION ) ; } else { Set_inexactflag ( ) ; } } } return ( NOEXCEPTION ) ; } 