void lsp_search_and_destroy ( struct lspdb_head * head , const uint8_t * id ) { struct isis_lsp * lsp ; lsp = lsp_search ( head , id ) ; if ( lsp ) { lspdb_del ( head , lsp ) ; if ( LSP_FRAGMENT ( lsp -> hdr . lsp_id ) == 0 ) { if ( lsp -> lspu . frags ) { lsp_remove_frags ( head , lsp -> lspu . frags ) ; } } else { if ( lsp -> lspu . zero_lsp && lsp -> lspu . zero_lsp -> lspu . frags ) { listnode_delete ( lsp -> lspu . zero_lsp -> lspu . frags , lsp ) ; } } } } 