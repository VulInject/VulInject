dsp16xx_address_cost ( ) rtx addr ; { switch ( GET_CODE ( addr ) ) { default : break ; case REG : return 1 ; case CONST : { rtx offset = const0_rtx ; addr = eliminate_constant_term ( addr , & offset ) ; if ( GET_CODE ( addr ) != SYMBOL_REF ) { return 4 ; } if ( INTVAL ( offset ) == 0 ) { return 2 ; } } case POST_INC : case POST_DEC : return ( GET_MODE ( addr ) == QImode ?1 : 2 ) ; case SYMBOL_REF : case LABEL_REF : return 2 ; case PLUS : { register rtx plus0 = XEXP ( addr , 0 ) ; register rtx plus1 = XEXP ( addr , 1 ) ; if ( GET_CODE ( plus0 ) != REG && GET_CODE ( plus1 ) == REG ) { plus0 = XEXP ( addr , 1 ) ; plus1 = XEXP ( addr , 0 ) ; } if ( GET_CODE ( plus0 ) != REG ) { break ; } switch ( GET_CODE ( plus1 ) ) { default : break ; case CONST_INT : return 4 ; case CONST : case SYMBOL_REF : case LABEL_REF : return dsp16xx_address_cost ( plus1 ) + 1 ; } } } return 4 ; } 