int main ( int argc , char * argv [ ] ) { const char * arg ; char expected_data [ 1000 ] ; size_t expected_data_len ; if ( argc < 2 ) { return 2 ; } if ( argc > 2 ) { return 3 ; } arg = argv [ 1 ] ; { FILE * fp = fopen ( EXPECTED_DATA_FILE , "rb" ) ; expected_data_len = fread ( expected_data , 1 , sizeof ( expected_data ) , fp ) ; if ( fclose ( fp ) ) { return 5 ; } } if ( ! ( strlen ( arg ) == expected_data_len && memcmp ( arg , expected_data , expected_data_len ) == 0 ) ) { fprintf ( stderr , "expected: %.*s\nreceived: %s\n" , ( int ) expected_data_len , expected_data , arg ) ; return 1 ; } else { return 0 ; } } 