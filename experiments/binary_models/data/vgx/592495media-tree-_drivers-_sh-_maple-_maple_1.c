static struct maple_device * maple_alloc_dev ( int port , int unit ) { struct maple_device * mdev ; mdev = kzalloc ( sizeof ( * mdev ) , GFP_KERNEL ) ; if ( ! mdev ) { return NULL ; } mdev -> port = port ; mdev -> unit = unit ; mdev -> mq = maple_allocq ( mdev ) ; if ( ! mdev -> mq ) { return NULL ; } mdev -> dev . bus = & maple_bus_type ; mdev -> dev . parent = & maple_bus ; init_waitqueue_head ( & mdev -> maple_wait ) ; return mdev ; } 