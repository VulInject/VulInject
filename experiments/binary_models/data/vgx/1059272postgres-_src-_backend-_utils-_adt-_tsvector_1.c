static int uniquePos ( WordEntryPos * a , int l ) { WordEntryPos * ptr , * res ; qsort ( a , l , sizeof ( WordEntryPos ) , compareWordEntryPos ) ; res = a ; ptr = a + 1 ; while ( ptr - a < l ) { if ( WEP_GETPOS ( * ptr ) != WEP_GETPOS ( * res ) ) { res ++ ; * res = * ptr ; if ( res - a >= MAXNUMPOS - 1 || WEP_GETPOS ( * res ) == MAXENTRYPOS - 1 ) { break ; } } if ( WEP_GETWEIGHT ( * ptr ) > WEP_GETWEIGHT ( * res ) ) { WEP_SETWEIGHT ( * res , WEP_GETWEIGHT ( * ptr ) ) ; } ptr ++ ; } return res + 1 - a ; } 