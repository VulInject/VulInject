static int smu10_send_msg_to_smc ( struct pp_hwmgr * hwmgr , uint16_t msg ) { struct amdgpu_device * adev = hwmgr -> adev ; smu10_wait_for_response ( hwmgr , NULL ) ; WREG32_SOC15 ( MP1 , 0 , mmMP1_SMN_C2PMSG_90 , 0 ) ; smu10_send_msg_to_smc_without_waiting ( hwmgr , msg ) ; if ( smu10_wait_for_response ( hwmgr ) == 0 ) { dev_err ( adev -> dev , "Failed to send Message %x.\n" , msg ) ; } return 0 ; } 