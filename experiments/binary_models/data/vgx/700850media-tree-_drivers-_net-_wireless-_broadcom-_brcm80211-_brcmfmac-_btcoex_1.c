void brcmf_btcoex_detach ( struct brcmf_cfg80211_info * cfg ) { brcmf_dbg ( TRACE , "enter\n" ) ; if ( ! cfg -> btcoex ) { return ; } if ( cfg -> btcoex -> timer_on ) { cfg -> btcoex -> timer_on = false ; del_timer_sync ( & cfg -> btcoex -> timer ) ; } cancel_work_sync ( & cfg -> btcoex -> work ) ; brcmf_btcoex_boost_wifi ( cfg -> btcoex , false ) ; brcmf_btcoex_restore_part1 ( cfg -> btcoex , NULL ) ; kfree ( cfg -> btcoex ) ; cfg -> btcoex = NULL ; } 