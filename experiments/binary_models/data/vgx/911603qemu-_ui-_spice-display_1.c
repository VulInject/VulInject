static void interface_release_resource ( QXLInstance * sin , QXLReleaseInfoExt rext ) { SimpleSpiceDisplay * ssd = container_of ( sin , SimpleSpiceDisplay , qxl ) ; SimpleSpiceUpdate * update ; SimpleSpiceCursor * cursor ; QXLCommandExt * ext ; ext = ( void * ) ( intptr_t ) ( rext . info -> id ) ; switch ( ext -> cmd . type ) { case QXL_CMD_DRAW : update = container_of ( ext , SimpleSpiceUpdate , ext ) ; qemu_spice_destroy_update ( ssd , update ) ; break ; case QXL_CMD_CURSOR : cursor = container_of ( ext , SimpleSpiceCursor , ext ) ; g_free ( cursor ) ; break ; default : g_assert_not_reached ( ) ; } } 