int pcspkr_input_init ( struct input_dev * * rdev , struct device * dev ) { int err ; struct input_dev * input_dev = devm_input_allocate_device ( dev ) ; input_dev -> name = "PC Speaker" ; input_dev -> phys = "isa0061/input0" ; input_dev -> id . bustype = BUS_ISA ; input_dev -> id . vendor = 0x001f ; input_dev -> id . product = 0x0001 ; input_dev -> id . version = 0x0100 ; input_dev -> dev . parent = dev ; input_dev -> evbit [ 0 ] = BIT ( EV_SND ) ; input_dev -> sndbit [ 0 ] = BIT ( SND_BELL ) | BIT ( SND_TONE ) ; input_dev -> event = pcspkr_input_event ; err = input_register_device ( input_dev ) ; if ( err ) { return err ; } * rdev = input_dev ; return 0 ; } 