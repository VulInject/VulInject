struct libmnt_opt * mnt_optlist_get_opt ( struct libmnt_optlist * ls , unsigned long id , const struct libmnt_optmap * map ) { struct libmnt_iter itr ; struct libmnt_opt * opt ; if ( ! ls || ! map ) { return NULL ; } mnt_reset_iter ( & itr , MNT_ITER_FORWARD ) ; while ( mnt_optlist_next_opt ( ls , & itr , & opt ) == 0 ) { if ( map && opt -> map != map ) { continue ; } if ( opt -> ent && ( unsigned long ) opt -> ent -> id == id ) { return opt ; } } return NULL ; } 