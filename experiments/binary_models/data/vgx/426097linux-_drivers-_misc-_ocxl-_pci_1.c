MODULE_DEVICE_TABLE ( pci , ocxl_pci_tbl ) ; static int ocxl_probe ( struct pci_dev * dev , const struct pci_device_id * id ) { int rc ; struct ocxl_afu * afu , * tmp ; struct ocxl_fn * fn ; struct list_head * afu_list ; fn = ocxl_function_open ( dev ) ; pci_set_drvdata ( dev , fn ) ; afu_list = ocxl_function_afu_list ( fn ) ; list_for_each_entry_safe ( , , , ) { rc = ocxl_file_register_afu ( afu ) ; if ( rc ) { dev_err ( & dev -> dev , "Failed to register AFU '%s' index %d" , afu -> config . name , afu -> config . idx ) ; } } return 0 ; } 