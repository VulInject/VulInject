static void mthca_tavor_init_srq_context ( struct mthca_dev * dev , struct mthca_pd * pd , struct mthca_srq * srq , struct mthca_tavor_srq_context * context , struct ib_udata * udata ) { struct mthca_ucontext * ucontext = rdma_udata_to_drv_context ( udata , mthca_ucontext , ibucontext ) ; context -> wqe_base_ds = cpu_to_be64 ( 1 << ( srq -> wqe_shift - 4 ) ) ; context -> state_pd = cpu_to_be32 ( pd -> pd_num ) ; context -> lkey = cpu_to_be32 ( srq -> mr . ibmr . lkey ) ; if ( udata ) { context -> uar = cpu_to_be32 ( ucontext -> uar . index ) ; } else { context -> uar = cpu_to_be32 ( dev -> driver_uar . index ) ; } } 