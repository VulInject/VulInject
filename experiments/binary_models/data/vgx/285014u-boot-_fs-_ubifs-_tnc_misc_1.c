struct ubifs_znode * ubifs_load_znode ( struct ubifs_info * c , struct ubifs_zbranch * zbr , struct ubifs_znode * parent , int iip ) { int err ; struct ubifs_znode * znode ; ubifs_assert ( ! zbr -> znode ) ; znode = kzalloc ( c -> max_znode_sz , GFP_NOFS ) ; err = read_znode ( c , zbr -> lnum , zbr -> offs , zbr -> len , znode ) ; if ( err ) { out } atomic_long_inc ( & c -> clean_zn_cnt ) ; atomic_long_inc ( & ubifs_clean_zn_cnt ) ; zbr -> znode = znode ; znode -> parent = parent ; znode -> time = get_seconds ( ) ; znode -> iip = iip ; return znode ; out kfree ( znode ) ; return ERR_PTR ( err ) ; } 