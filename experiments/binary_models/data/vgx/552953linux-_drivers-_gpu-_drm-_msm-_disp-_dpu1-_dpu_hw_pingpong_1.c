static u32 dpu_hw_pp_get_line_count ( struct dpu_hw_pingpong * pp ) { struct dpu_hw_blk_reg_map * c = & pp -> hw ; u32 height , init ; u32 line = 0xFFFF ; c = & pp -> hw ; init = DPU_REG_READ ( c , PP_VSYNC_INIT_VAL ) & 0xFFFF ; height = DPU_REG_READ ( c , PP_SYNC_CONFIG_HEIGHT ) & 0xFFFF ; if ( height < init ) { return line ; } line = DPU_REG_READ ( c , PP_INT_COUNT_VAL ) & 0xFFFF ; if ( line < init ) { line += ( 0xFFFF - init ) ; } else { line -= init ; } return line ; } 