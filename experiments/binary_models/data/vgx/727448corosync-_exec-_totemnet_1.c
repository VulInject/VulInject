int totemnet_initialize ( qb_loop_t * loop_pt , void * * net_context , struct totem_config * totem_config , totemsrp_stats_t * stats , void * context , void * deliver_fn ( void * context , const void * msg , unsigned int msg_len , const struct sockaddr_storage * system_from ) , void * iface_change_fn ( void * context , const struct totem_ip_address * iface_address , unsigned int ring_no ) , void * mtu_changed ( void * context , int net_mtu ) , void * target_set_completed ( void * context ) ) { struct totemnet_instance * instance ; unsigned int res ; instance = malloc ( sizeof ( totemnet_instance ) ) ; if ( instance == NULL ) { return ( - 1 ) ; } totemnet_instance_initialize ( instance , totem_config ) ; res = instance -> transport -> initialize ( loop_pt , & instance -> transport_context , totem_config , stats , context , deliver_fn , iface_change_fn , mtu_changed , target_set_completed ) ; if ( res == - 1 ) { error_destroy } * net_context = instance ; return ( 0 ) ; error_destroy return ( - 1 ) ; } 