static int loopback_rate_shift_put ( struct snd_kcontrol * kcontrol , struct snd_ctl_elem_value * ucontrol ) { struct loopback * loopback = snd_kcontrol_chip ( kcontrol ) ; int val ; int change = 0 ; val = ucontrol -> value . integer . value [ 0 ] ; if ( val < 80000 ) { val = 80000 ; } if ( val > 120000 ) { val = 120000 ; } mutex_lock ( & loopback -> cable_lock ) ; if ( val != loopback -> setup [ kcontrol -> id . subdevice ] [ kcontrol -> id . device ] . rate_shift ) { loopback -> setup [ kcontrol -> id . subdevice ] [ kcontrol -> id . device ] . rate_shift = val ; change = 1 ; } mutex_unlock ( & loopback -> cable_lock ) ; return change ; } 