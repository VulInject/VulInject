static av_cold void build_vlc ( VLC * vlc , const uint8_t counts [ 16 ] , const uint16_t * * syms , unsigned * offset ) { uint8_t lens [ MAX_VLC_ENTRIES ] ; int num = 0 ; for ( int i = 0 ; i < 16 ; i ++ ) { unsigned count = counts [ i ] ; if ( count == 255 ) { count = 303 ; } for ( count += num ; num < count ; num ++ ) { lens [ num ] = i + 1 ; } } vlc -> table = & vlc_buf [ * offset ] ; vlc -> table_allocated = FF_ARRAY_ELEMS ( vlc_buf ) - * offset ; ff_init_vlc_from_lengths ( vlc , CLV_VLC_BITS , num , lens , 1 , * syms , 2 , 2 , 0 , INIT_VLC_STATIC_OVERLONG , NULL ) ; * syms += num ; * offset += vlc -> table_size ; } 