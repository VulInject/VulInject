static void __ilsel_enable ( ilsel_source_t set , unsigned int bit ) { unsigned int tmp , shift ; cfs_time_t addr ; pr_notice ( "enabling ILSEL set %d\n" , set ) ; addr = mk_ilsel_addr ( bit ) ; shift = mk_ilsel_shift ( bit ) ; pr_debug ( "%s: bit#%d: addr - 0x%08lx (shift %d, set %d)\n" , __func__ , bit , addr , shift , set ) ; tmp = __raw_readw ( addr ) ; tmp &= ~ ( 0xf << shift ) ; tmp |= set << shift ; __raw_writew ( tmp , addr ) ; } 