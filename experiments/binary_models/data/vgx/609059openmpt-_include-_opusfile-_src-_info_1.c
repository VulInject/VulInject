int opus_tags_add_comment ( OpusTags * _tags , const char * _comment ) { char * comment ; int comment_len ; int ncomments ; int ret ; ncomments = _tags -> comments ; ret = op_tags_ensure_capacity ( _tags , ncomments + 1 ) ; comment_len = ( int ) strlen ( _comment ) ; comment = op_strdup_with_len ( _comment , comment_len ) ; if ( OP_UNLIKELY ( comment == NULL ) ) { return OP_EFAULT ; } _tags -> user_comments [ ncomments ] = comment ; _tags -> comment_lengths [ ncomments ] = comment_len ; _tags -> comments = ncomments + 1 ; return 0 ; } 