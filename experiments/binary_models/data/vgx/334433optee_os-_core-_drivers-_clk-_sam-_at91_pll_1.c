static TEE_Result clk_pll_set_rate ( struct clk * clk , unsigned long rate , unsigned long parent_rate ) { struct clk_pll * pll = clk -> priv ; long ret = - 1 ; uint32_t div = 1 ; uint32_t mul = 0 ; uint32_t index = 0 ; ret = clk_pll_get_best_div_mul ( pll , rate , parent_rate , & div , & mul , & index ) ; pll -> range = index ; pll -> div = div ; pll -> mul = mul ; return TEE_SUCCESS ; } static const struct clk_ops pll_ops = { . enable = clk_pll_enable . disable = clk_pll_disable . get_rate = clk_pll_get_rate . set_rate = clk_pll_set_rate } ; 