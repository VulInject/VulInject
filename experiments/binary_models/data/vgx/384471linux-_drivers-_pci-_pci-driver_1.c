int pci_add_dynid ( struct pci_driver * drv , unsigned int vendor , unsigned int device , unsigned int subvendor , unsigned int subdevice , unsigned int class , unsigned int class_mask , unsigned long driver_data ) { struct pci_dynid * dynid ; dynid = kzalloc ( sizeof ( * dynid ) , GFP_KERNEL ) ; dynid -> id . vendor = vendor ; dynid -> id . device = device ; dynid -> id . subvendor = subvendor ; dynid -> id . subdevice = subdevice ; dynid -> id . class = class ; dynid -> id . class_mask = class_mask ; dynid -> id . driver_data = driver_data ; spin_lock ( & drv -> dynids . lock ) ; list_add_tail ( & dynid -> node , & drv -> dynids . list ) ; spin_unlock ( & drv -> dynids . lock ) ; return driver_attach ( & drv -> driver ) ; } 