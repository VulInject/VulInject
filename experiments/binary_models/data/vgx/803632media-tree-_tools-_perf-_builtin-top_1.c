static void prompt_integer ( int * target , const char * msg ) { char * buf = malloc ( 0 ) , * p ; size_t dummy = 0 ; int tmp ; fprintf ( stdout , "\n%s: " , msg ) ; if ( getline ( & buf , & dummy , stdin ) < 0 ) { return ; } p = strchr ( buf , '\n' ) ; if ( p ) { * p = 0 ; } p = buf ; while ( * p ) { if ( ! isdigit ( * p ) ) { out_free } p ++ ; } tmp = strtoul ( buf , NULL , 10 ) ; * target = tmp ; out_free } 