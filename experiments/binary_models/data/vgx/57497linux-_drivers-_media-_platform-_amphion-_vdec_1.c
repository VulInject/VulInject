static void vdec_handle_resolution_change ( struct vpu_inst * inst ) { struct vdec_t * vdec = inst -> priv ; struct vb2_queue * q ; if ( ! inst -> fh . m2m_ctx ) { return ; } if ( inst -> state != VPU_CODEC_STATE_DYAMIC_RESOLUTION_CHANGE ) { return ; } if ( ! vdec -> source_change ) { return ; } q = v4l2_m2m_get_dst_vq ( inst -> fh . m2m_ctx ) ; if ( ! list_empty ( & q -> done_list ) ) { return ; } vdec -> source_change -- ; vpu_notify_source_change ( inst , NULL ) ; } 