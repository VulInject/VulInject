static ssize_t calibration_forced_value_store ( struct device * dev , struct device_attribute * attr , const char * buf , size_t len ) { struct iio_dev * indio_dev = dev_to_iio_dev ( dev ) ; struct scd30_state * state = iio_priv ( indio_dev ) ; int ret ; u16 val ; ret = kstrtou16 ( buf , 0 , & val ) ; if ( ret ) { return ret ; } mutex_lock ( & state -> lock ) ; ret = scd30_command_write ( state , CMD_FRC , val ) ; mutex_unlock ( & state -> lock ) ; return ret ?: len ; } 