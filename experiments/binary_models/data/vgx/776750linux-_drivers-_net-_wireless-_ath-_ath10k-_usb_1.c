static int ath10k_usb_alloc_pipe_resources ( struct ath10k * ar , struct ath10k_usb_pipe * pipe , int urb_cnt ) { struct ath10k_urb_context * urb_context ; int i ; INIT_LIST_HEAD ( & pipe -> urb_list_head ) ; init_usb_anchor ( & pipe -> urb_submitted ) ; for ( i = 0 ; i < urb_cnt ; i ++ ) { urb_context = kmalloc ( sizeof ( * urb_context ) , GFP_KERNEL ) ; if ( ! urb_context ) { return - ENOMEM ; } urb_context -> pipe = pipe ; pipe -> urb_alloc ++ ; ath10k_usb_free_urb_to_pipe ( pipe , urb_context ) ; } ath10k_dbg ( ar , ATH10K_DBG_USB , "usb alloc resources lpipe %d hpipe 0x%x urbs %d\n" , pipe -> logical_pipe_num , pipe -> usb_pipe_handle , pipe -> urb_alloc ) ; return 0 ; } 