char * M_str_casestr ( const char * haystack , const char * needle ) { size_t i ; size_t len ; size_t nlen ; if ( haystack == NULL || needle == NULL ) { return in ; } len = M_str_len ( haystack ) ; nlen = M_str_len ( needle ) ; for ( i = 0 ; i < len ; i ++ ) { if ( nlen > len - i ) { break ; } if ( M_str_caseeq_max ( haystack + i , needle , nlen ) ) { return ( char * ) ( ( M_uintptr ) haystack + i ) ; } } return NULL ; } 