static int update_slot_info ( struct slot * slot ) { struct hotplug_slot_info * info ; int result ; info = kmalloc ( sizeof ( * info ) , GFP_KERNEL ) ; if ( ! info ) { return - ENOMEM ; } slot -> hpc_ops -> get_power_status ( slot , & ( info -> power_status ) ) ; slot -> hpc_ops -> get_attention_status ( slot , & ( info -> attention_status ) ) ; slot -> hpc_ops -> get_latch_status ( slot , & ( info -> latch_status ) ) ; slot -> hpc_ops -> get_adapter_status ( slot , & ( info -> adapter_status ) ) ; result = pci_hp_change_slot_info ( slot -> hotplug_slot , info ) ; return result ; } 