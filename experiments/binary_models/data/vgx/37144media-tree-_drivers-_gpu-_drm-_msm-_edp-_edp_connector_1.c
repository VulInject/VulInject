struct drm_connector * msm_edp_connector_init ( struct msm_edp * edp ) { struct drm_connector * connector = NULL ; struct edp_connector * edp_connector ; int ret ; edp_connector = kzalloc ( sizeof ( * edp_connector ) , GFP_KERNEL ) ; edp_connector -> edp = edp ; connector = & edp_connector -> base ; ret = drm_connector_init ( edp -> dev , connector , & edp_connector_funcs , DRM_MODE_CONNECTOR_eDP ) ; if ( ret ) { return ERR_PTR ( ret ) ; } drm_connector_helper_add ( connector , & edp_connector_helper_funcs ) ; connector -> polled = DRM_CONNECTOR_POLL_CONNECT ; connector -> interlace_allowed = false ; connector -> doublescan_allowed = false ; drm_mode_connector_attach_encoder ( connector , edp -> encoder ) ; return connector ; } 