static void synth_version ( struct spk_synth * synth ) { int test = 0 ; char synth_id [ 40 ] "" ; ; synth -> synth_immediate ( synth , "\x05[Q]" ) ; synth_id [ test ] = spk_serial_in ( ) ; if ( synth_id [ test ] == 'A' ) { { synth_id [ ++ test ] = spk_serial_in ( ) ; } synth_id [ test ] != '\n' && test < 32 ; synth_id [ ++ test ] = 0x00 ; } if ( synth_id [ 0 ] == 'A' ) { pr_info ( "%s version: %s" , synth -> long_name , synth_id ) ; } } 