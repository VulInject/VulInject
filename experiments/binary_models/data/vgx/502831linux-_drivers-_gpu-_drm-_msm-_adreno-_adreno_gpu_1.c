int adreno_gpu_ocmem_init ( struct device * dev , struct adreno_gpu * adreno_gpu , struct adreno_ocmem * adreno_ocmem ) { struct ocmem_buf * ocmem_hdl ; struct ocmem * ocmem ; ocmem = of_get_ocmem ( dev ) ; if ( IS_ERR ( ocmem ) ) { return PTR_ERR ( ocmem ) ; } ocmem_hdl = ocmem_allocate ( ocmem , OCMEM_GRAPHICS , adreno_gpu -> gmem ) ; if ( IS_ERR ( ocmem_hdl ) ) { return PTR_ERR ( ocmem_hdl ) ; } adreno_ocmem -> ocmem = ocmem ; adreno_ocmem -> base = ocmem_hdl -> addr ; adreno_ocmem -> hdl = ocmem_hdl ; adreno_gpu -> gmem = ocmem_hdl -> len ; return 0 ; } 