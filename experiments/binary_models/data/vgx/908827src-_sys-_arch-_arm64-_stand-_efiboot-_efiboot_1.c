static void efi_heap_init ( void ) static void efi_memprobe_internal ( void ) static void efi_timer_init ( void ) static void efi_timer_cleanup ( void ) static EFI_STATUS efi_memprobe_find ( UINTN , UINTN , EFI_MEMORY_TYPE , EFI_PHYSICAL_ADDRESS * ) void * efi_fdt ( void ) int fdt_load_override ( char * ) extern void smbios_init ( void * ) EFI_STATUS efi_main ( EFI_HANDLE image , EFI_SYSTEM_TABLE * systab ) { extern char * progname ; EFI_LOADED_IMAGE * imgp ; EFI_DEVICE_PATH * dp ; EFI_STATUS status ; int i ; ST = systab ; BS = ST -> BootServices ; RS = ST -> RuntimeServices ; IH = image ; BS -> SetWatchdogTimer ( 0 , 0 , 0 , NULL ) ; status = BS -> HandleProtocol ( image , & imgp_guid , ( void * * ) & imgp ) ; if ( status == EFI_SUCCESS ) { status = BS -> HandleProtocol ( imgp -> DeviceHandle , & devp_guid , ( void * * ) & dp ) ; } if ( status == EFI_SUCCESS ) { efi_bootdp = dp ; } for ( i = 0 ; i < ST -> NumberOfTableEntries ; i ++ ) { if ( efi_guidcmp ( & fdt_guid , & ST -> ConfigurationTable [ i ] . VendorGuid ) == 0 ) { fdt_sys = ST -> ConfigurationTable [ i ] . VendorTable ; } if ( efi_guidcmp ( & smbios_guid , & ST -> ConfigurationTable [ i ] . VendorGuid ) == 0 ) { smbios = ST -> ConfigurationTable [ i ] . VendorTable ; } if ( efi_guidcmp ( & smbios3_guid , & ST -> ConfigurationTable [ i ] . VendorGuid ) == 0 ) { smbios = ST -> ConfigurationTable [ i ] . VendorTable ; } } fdt_init ( fdt_sys ) ; progname = "BOOTAA64" ; boot ( 0 ) ; return ( EFI_SUCCESS ) ; } 