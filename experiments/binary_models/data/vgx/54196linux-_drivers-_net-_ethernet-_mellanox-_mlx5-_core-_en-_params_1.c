enum mlx5e_mpwrq_umr_mode mlx5e_mpwrq_umr_mode ( struct mlx5_core_dev * mdev , struct mlx5e_xsk_param * xsk ) { u8 page_shift = mlx5e_mpwrq_page_shift ( mdev , xsk ) ; bool unaligned = xsk ?xsk -> unaligned : false ; bool oversized = false ; if ( xsk ) { oversized = xsk -> chunk_size < ( 1 << page_shift ) ; WARN_ON_ONCE ( xsk -> chunk_size > ( 1 << page_shift ) ) ; } if ( oversized ) { if ( xsk -> chunk_size % 3 == 0 && is_power_of_2 ( xsk -> chunk_size / 3 ) ) { return MLX5E_MPWRQ_UMR_MODE_TRIPLE ; } return MLX5E_MPWRQ_UMR_MODE_OVERSIZED ; } return MLX5E_MPWRQ_UMR_MODE_ALIGNED ; } 