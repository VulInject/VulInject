static int kset ( AVFormatContext * s , const uint8_t * r_val , const uint8_t * n_val , int len ) { OMAContext * oc = s -> priv_data ; if ( ! r_val && ! n_val ) { return - 1 ; } len = FFMIN ( len , 16 ) ; if ( r_val ) { if ( r_val != oc -> r_val ) { memcpy ( oc -> r_val , r_val , len ) ; } memcpy ( & oc -> r_val [ 16 ] , r_val , 8 ) ; } if ( n_val ) { if ( n_val != oc -> n_val ) { memset ( oc -> n_val , 0 , 24 ) ; memcpy ( oc -> n_val , n_val , len ) ; } memcpy ( & oc -> n_val [ 16 ] , n_val , 8 ) ; } return 0 ; } 