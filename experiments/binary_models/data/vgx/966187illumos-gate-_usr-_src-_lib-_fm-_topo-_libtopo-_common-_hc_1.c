static nvlist_t * hc_base_fmri_create ( topo_mod_t * mod , const nvlist_t * auth , const char * part , const char * rev , const char * serial ) { nvlist_t * fmri ; int err = 0 ; if ( topo_mod_nvalloc ( mod , & fmri , NV_UNIQUE_NAME ) != 0 ) { return ( NULL ) ; } err = nvlist_add_uint8 ( fmri , FM_VERSION , FM_HC_SCHEME_VERSION ) ; err |= nvlist_add_string ( fmri , FM_FMRI_SCHEME , FM_FMRI_SCHEME_HC ) ; err |= nvlist_add_string ( fmri , FM_FMRI_HC_ROOT , "" ) ; if ( err != 0 ) { return ( NULL ) ; } if ( serial != NULL ) { ( void ) nvlist_add_string ( fmri , FM_FMRI_HC_SERIAL_ID , serial ) ; } if ( part != NULL ) { ( void ) nvlist_add_string ( fmri , FM_FMRI_HC_PART , part ) ; } if ( rev != NULL ) { ( void ) nvlist_add_string ( fmri , FM_FMRI_HC_REVISION , rev ) ; } if ( auth != NULL ) { ( void ) nvlist_add_nvlist ( fmri , FM_FMRI_AUTHORITY , ( nvlist_t * ) auth ) ; } return ( fmri ) ; } 