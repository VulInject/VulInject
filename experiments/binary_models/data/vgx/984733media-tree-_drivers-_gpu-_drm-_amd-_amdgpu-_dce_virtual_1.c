static void dce_virtual_crtc_dpms ( struct drm_crtc * crtc , int mode ) { struct drm_device * dev = crtc -> dev ; struct amdgpu_device * adev = dev -> dev_private ; struct amdgpu_crtc * amdgpu_crtc = to_amdgpu_crtc ( crtc ) ; unsigned type ; switch ( mode ) { case DRM_MODE_DPMS_ON : amdgpu_crtc -> enabled = true ; type = amdgpu_crtc_idx_to_irq_type ( adev , amdgpu_crtc -> crtc_id ) ; amdgpu_irq_update ( adev , & adev -> crtc_irq , type ) ; drm_crtc_vblank_on ( crtc ) ; break ; case DRM_MODE_DPMS_STANDBY : case DRM_MODE_DPMS_SUSPEND : case DRM_MODE_DPMS_OFF : drm_crtc_vblank_off ( crtc ) ; amdgpu_crtc -> enabled = false ; break ; } } 