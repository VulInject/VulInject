struct ttm_object_file * ttm_object_file_init ( struct ttm_object_device * tdev ) { struct ttm_object_file * tfile = kmalloc ( sizeof ( * tfile ) , GFP_KERNEL ) ; if ( unlikely ( tfile == NULL ) ) { return NULL ; } spin_lock_init ( & tfile -> lock ) ; tfile -> tdev = tdev ; kref_init ( & tfile -> refcount ) ; INIT_LIST_HEAD ( & tfile -> ref_list ) ; hash_init ( tfile -> ref_hash , NULL ) ; return tfile ; } 