int parse_cbm ( char * buf , struct rdt_resource * r , struct rdt_domain * d ) { unsigned long data ; if ( ! cbm_validate ( buf , & data , r ) ) { return - EINVAL ; } d -> new_ctrl = data ; d -> have_new_ctrl = true ; return 0 ; } static int parse_line ( char * line , struct rdt_resource * r ) { char * dom = NULL , * id ; struct rdt_domain * d ; unsigned long dom_id ; next if ( ! line || line [ 0 ] == '\0' ) { return 0 ; } dom = strsep ( & line , ";" ) ; id = strsep ( & dom , "=" ) ; if ( ! dom || kstrtoul ( id , 10 , & dom_id ) ) { return - EINVAL ; } dom = strim ( dom ) ; list_for_each_entry ( , , ) { if ( d -> id == dom_id ) { if ( r -> parse_ctrlval ( dom , r , d ) ) { return - EINVAL ; } next } } return - EINVAL ; } 