static int rx6110_rtc_tm_to_data ( struct rtc_time * tm , u8 * data ) { pr_debug ( "%s: date %ptRr\n" , __func__ , tm ) ; if ( tm -> tm_year < 100 || tm -> tm_year >= 200 ) { return - EINVAL ; } data [ RTC_SEC ] = bin2bcd ( tm -> tm_sec , NULL ) ; data [ RTC_MIN ] = bin2bcd ( tm -> tm_min ) ; data [ RTC_HOUR ] = bin2bcd ( tm -> tm_hour ) ; data [ RTC_WDAY ] = BIT ( bin2bcd ( tm -> tm_wday ) ) ; data [ RTC_MDAY ] = bin2bcd ( tm -> tm_mday ) ; data [ RTC_MONTH ] = bin2bcd ( tm -> tm_mon + 1 ) ; data [ RTC_YEAR ] = bin2bcd ( tm -> tm_year % 100 ) ; return 0 ; } 