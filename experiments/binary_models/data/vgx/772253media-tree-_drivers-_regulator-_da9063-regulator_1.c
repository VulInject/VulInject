static int da9063_set_suspend_voltage ( struct regulator_dev * rdev , int uV ) { struct da9063_regulator * regl = rdev_get_drvdata ( rdev ) ; const struct da9063_regulator_info * rinfo = regl -> info ; int ret , sel ; sel = regulator_map_voltage_linear ( rdev , uV , uV ) ; sel <<= ffs ( rdev -> desc -> vsel_mask ) - 1 ; ret = regmap_update_bits ( regl -> hw -> regmap , rinfo -> suspend_vsel_reg , rdev -> desc -> vsel_mask , sel ) ; return ret ; } 