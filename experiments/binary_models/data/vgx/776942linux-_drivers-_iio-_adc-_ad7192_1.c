static int ad7192_of_clock_select ( struct ad7192_state * st ) { struct device_node * np = st -> sd . spi -> dev . of_node ; int clock_sel ; clock_sel = AD7192_CLK_INT ; if ( st -> mclk ) { if ( of_property_read_bool ( np , "adi,int-clock-output-enable" ) ) { clock_sel = AD7192_CLK_INT_CO ; } } else { if ( of_property_read_bool ( np , "adi,clock-xtal" ) ) { clock_sel = AD7192_CLK_EXT_MCLK1_2 ; } else { clock_sel = AD7192_CLK_EXT_MCLK2 ; } } return clock_sel ; } 