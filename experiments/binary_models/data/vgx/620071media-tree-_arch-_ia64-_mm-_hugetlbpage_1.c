int prepare_hugepage_range ( struct file * file , unsigned long addr , unsigned long len ) { if ( addr & ~ HPAGE_MASK ) { return - EINVAL ; } if ( REGION_NUMBER ( addr ) != RGN_HPAGE ) { return - EINVAL ; } return 0 ; } 