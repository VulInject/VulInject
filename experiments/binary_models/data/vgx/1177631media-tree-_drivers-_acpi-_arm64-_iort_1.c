static void __init arm_smmu_init_resources ( struct resource * res , struct acpi_iort_node * node ) { struct acpi_iort_smmu * smmu ; int i , hw_irq , trigger , num_res = 0 ; u64 * ctx_irq , * glb_irq ; smmu = ( acpi_iort_smmu * ) node -> node_data ; res [ num_res ] . start = smmu -> base_address ; res [ num_res ] . end = smmu -> base_address + smmu -> span - 1 ; res [ num_res ] . flags = IORESOURCE_MEM ; num_res ++ ; glb_irq = ACPI_ADD_PTR ( u64 , node , smmu -> global_interrupt_offset ) ; hw_irq = IORT_IRQ_MASK ( glb_irq [ 0 ] , NULL ) ; trigger = IORT_IRQ_TRIGGER_MASK ( glb_irq [ 0 ] ) ; acpi_iort_register_irq ( hw_irq , "arm-smmu-global" , trigger , & res [ num_res ++ ] ) ; ctx_irq = ACPI_ADD_PTR ( u64 , node , smmu -> context_interrupt_offset ) ; for ( i = 0 ; i < smmu -> context_interrupt_count ; i ++ ) { hw_irq = IORT_IRQ_MASK ( ctx_irq [ i ] ) ; trigger = IORT_IRQ_TRIGGER_MASK ( ctx_irq [ i ] ) ; acpi_iort_register_irq ( hw_irq , "arm-smmu-context" , trigger , & res [ num_res ++ ] ) ; } } 