static int inv_icm42600_probe ( struct i2c_client * client ) { const void * match ; enum inv_icm42600_chip chip ; struct regmap * regmap ; if ( ! i2c_check_functionality ( client -> adapter , I2C_FUNC_SMBUS_I2C_BLOCK ) ) { return - ENOTSUPP ; } match = device_get_match_data ( & client -> dev ) ; chip = ( uintptr_t ) match ; regmap = devm_regmap_init_i2c ( client , & inv_icm42600_regmap_config ) ; if ( IS_ERR ( regmap ) ) { return PTR_ERR ( regmap ) ; } return inv_icm42600_core_probe ( regmap , chip , client -> irq , inv_icm42600_i2c_bus_setup ) ; } 