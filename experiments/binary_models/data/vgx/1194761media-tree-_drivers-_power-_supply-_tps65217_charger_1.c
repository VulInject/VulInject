static int tps65217_charger_poll_task ( void * data ) { set_freezable ( ) ; while ( ! kthread_should_stop ( ) ) { schedule_timeout_interruptible ( POLL_INTERVAL , NULL ) ; try_to_freeze ( ) ; tps65217_charger_irq ( - 1 , data ) ; } return 0 ; } static const struct power_supply_desc tps65217_charger_desc = { . name = "tps65217-charger" . type = POWER_SUPPLY_TYPE_MAINS . get_property = tps65217_charger_get_property . properties = tps65217_charger_props . num_properties = ARRAY_SIZE ( tps65217_charger_props ) } ; 