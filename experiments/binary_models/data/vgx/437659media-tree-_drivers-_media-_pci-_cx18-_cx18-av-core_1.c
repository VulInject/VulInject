static int cx18_av_s_tuner ( struct v4l2_subdev * sd , const struct v4l2_tuner * vt ) { struct cx18_av_state * state = to_cx18_av_state ( sd ) ; struct cx18 * cx = v4l2_get_subdevdata ( sd ) ; int v ; if ( state -> radio ) { return 0 ; } v = cx18_av_read ( cx , 0x809 ) ; v &= ~ 0xf ; switch ( vt -> audmode ) { case V4L2_TUNER_MODE_MONO : break ; case V4L2_TUNER_MODE_STEREO : case V4L2_TUNER_MODE_LANG1 : v |= 0x4 ; break ; case V4L2_TUNER_MODE_LANG1_LANG2 : v |= 0x7 ; break ; case V4L2_TUNER_MODE_LANG2 : v |= 0x1 ; break ; default : return - EINVAL ; } cx18_av_write_expect ( cx , 0x809 , v , v , 0xff ) ; state -> audmode = vt -> audmode ; return 0 ; } 