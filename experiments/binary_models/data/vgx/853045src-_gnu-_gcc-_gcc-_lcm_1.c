compute_laterin ( , , , , ) { int num_edges , i ; edge e ; basic_block * worklist , * qin , * qout , * qend , bb ; unsigned int qlen ; edge_iterator ei ; num_edges = NUM_EDGES ( edge_list ) ; qin = qout = worklist = XNEWVEC ( basic_block , n_basic_blocks ) ; for ( i = 0 ; i < num_edges ; i ++ ) { INDEX_EDGE ( edge_list , i ) -> aux = ( void * ) ( size_t ) i ; } sbitmap_vector_ones ( later , num_edges ) ; FOR_EACH_EDGE ( , , ) sbitmap_copy ( later [ ( size_t ) e -> aux ] , earliest [ ( size_t ) e -> aux ] ) ; FOR_EACH_BB ( ) { * qin ++ = bb ; bb -> aux = bb ; } qin = worklist ; qend = & worklist [ n_basic_blocks - NUM_FIXED_BLOCKS ] ; qlen = n_basic_blocks - NUM_FIXED_BLOCKS ; while ( qlen ) { bb = * qout ++ ; bb -> aux = NULL ; qlen -- ; if ( qout >= qend ) { qout = worklist ; } sbitmap_ones ( laterin [ bb -> index ] ) ; FOR_EACH_EDGE ( , , ) sbitmap_a_and_b ( laterin [ bb -> index ] , laterin [ bb -> index ] , later [ ( size_t ) e -> aux ] ) ; FOR_EACH_EDGE ( , , ) if ( sbitmap_union_of_diff_cg ( later [ ( size_t ) e -> aux ] , earliest [ ( size_t ) e -> aux ] , laterin [ e -> src -> index ] , antloc [ e -> src -> index ] ) && e -> dest != EXIT_BLOCK_PTR && e -> dest -> aux == 0 ) { * qin ++ = e -> dest ; e -> dest -> aux = e ; qlen ++ ; if ( qin >= qend ) { qin = worklist ; } } } sbitmap_ones ( laterin [ last_basic_block ] ) ; FOR_EACH_EDGE ( , , ) sbitmap_a_and_b ( laterin [ last_basic_block ] , laterin [ last_basic_block ] , later [ ( size_t ) e -> aux ] ) ; clear_aux_for_edges ( ) ; } 