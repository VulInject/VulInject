static int wl12xx_sdio_power_on ( struct wl12xx_sdio_glue * glue ) { int ret ; struct sdio_func * func = dev_to_sdio_func ( glue -> dev ) ; struct mmc_card * card = func -> card ; ret = pm_runtime_resume_and_get ( & card -> dev ) ; if ( ret < 0 ) { dev_err ( glue -> dev , "%s: failed to get_sync(%d)\n" , __func__ , ret ) ; return ret ; } sdio_claim_host ( func ) ; mmc_hw_reset ( card ) ; sdio_enable_func ( func , NULL ) ; sdio_release_host ( func ) ; return 0 ; } 