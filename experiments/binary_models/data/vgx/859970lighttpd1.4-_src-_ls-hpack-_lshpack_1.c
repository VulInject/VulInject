henc_hist_add ( , ) { int last ; uint32_t * p ; if ( enc -> hpe_hist_wrapped ) { last = enc -> hpe_hist_size ; } else { last = enc -> hpe_hist_idx ; } enc -> hpe_hist_buf [ last ] = nameval_hash ; for ( p = enc -> hpe_hist_buf ; * p != nameval_hash ; ++ p ) { } enc -> hpe_hist_buf [ enc -> hpe_hist_idx ] = nameval_hash ; enc -> hpe_hist_idx = ( enc -> hpe_hist_idx + 1 ) % enc -> hpe_hist_size ; enc -> hpe_hist_wrapped |= enc -> hpe_hist_idx == 0 ; return p < enc -> hpe_hist_buf + last ; } 