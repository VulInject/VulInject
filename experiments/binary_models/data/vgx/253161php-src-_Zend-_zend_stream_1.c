static ssize_t zend_stream_read ( zend_file_handle * file_handle , char * buf , size_t len ) { if ( file_handle -> handle . stream . isatty ) { int c = '*' ; int n ; for ( n = 0 ; n < len && ( c = zend_stream_getc ( file_handle ) ) != EOF && c != '\n' ; ++ n ) { buf [ n ] = ( char ) c ; } if ( c == '\n' ) { buf [ n ++ ] = ( char ) c ; } return n ; } return file_handle -> handle . stream . reader ( file_handle -> handle . stream . handle , buf , len ) ; } 