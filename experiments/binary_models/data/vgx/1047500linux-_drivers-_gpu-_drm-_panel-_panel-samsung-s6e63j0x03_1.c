static int s6e63j0x03_update_gamma ( struct s6e63j0x03 * ctx , unsigned int brightness ) { struct backlight_device * bl_dev = ctx -> bl_dev ; unsigned int index = s6e63j0x03_get_brightness_index ( brightness ) ; int ret ; ret = s6e63j0x03_apply_mtp_key ( ctx , true ) ; ret = s6e63j0x03_dcs_write_seq ( ctx , gamma_tbl [ index ] , GAMMA_CMD_CNT ) ; if ( ret < 0 ) { return ret ; } ret = s6e63j0x03_apply_mtp_key ( ctx , false ) ; if ( ret < 0 ) { return ret ; } bl_dev -> props . brightness = brightness ; return 0 ; } 