static int ene_set_learning_mode ( struct rc_dev * rdev , int enable ) { struct ene_device * dev = rdev -> priv ; unsigned long flags ; if ( enable == dev -> learning_mode_enabled ) { return 0 ; } spin_lock_irqsave ( & dev -> hw_lock , flags ) ; dev -> learning_mode_enabled = enable ; ene_rx_disable ( dev ) ; ene_rx_setup ( dev , NULL ) ; ene_rx_enable ( dev ) ; spin_unlock_irqrestore ( & dev -> hw_lock , flags ) ; return 0 ; } 