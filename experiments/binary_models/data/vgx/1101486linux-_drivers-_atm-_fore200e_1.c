static int fore200e_init ( struct fore200e * fore200e , struct device * parent ) { if ( fore200e_register ( fore200e , parent ) < 0 ) { return - ENODEV ; } if ( fore200e -> bus -> map ( fore200e ) < 0 ) { return - ENODEV ; } if ( fore200e_reset ( fore200e , 1 ) < 0 ) { return - ENODEV ; } if ( fore200e_load_and_start_fw ( fore200e ) < 0 ) { return - ENODEV ; } if ( fore200e_initialize ( fore200e ) < 0 ) { return - ENODEV ; } if ( fore200e_init_cmd_queue ( fore200e ) < 0 ) { return - ENOMEM ; } if ( fore200e_init_tx_queue ( fore200e ) < 0 ) { return - ENOMEM ; } if ( fore200e_init_rx_queue ( fore200e ) < 0 ) { return - ENOMEM ; } if ( fore200e_init_bs_queue ( fore200e ) < 0 ) { return - ENOMEM ; } if ( fore200e_alloc_rx_buf ( fore200e ) < 0 ) { return - ENOMEM ; } if ( fore200e_get_esi ( fore200e ) < 0 ) { return - EIO ; } if ( fore200e_irq_request ( fore200e ) < 0 ) { return - EBUSY ; } fore200e_supply ( fore200e ) ; fore200e -> state = FORE200E_STATE_COMPLETE ; return 0 ; } 