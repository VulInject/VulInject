static size_t barg_cmdline ( const grub_barg_t * barg , char * cmd , size_t size ) { size_t n ; const grub_fsdesc_t * fsd ; if ( fsd -> gfs_mountp [ 0 ] != 0 ) { if ( ( n = snprintf ( cmd , size , "%s%s" , fsd -> gfs_mountp , barg -> gb_kernel ) ) >= size ) { return ( n ) ; } return ( clean_path ( cmd ) ) ; } else { return ( snprintf ( cmd , size , "%s %s" , fsd -> gfs_dev , barg -> gb_kernel ) ) ; } } 