static int chromeos_acpi_evaluate_method ( struct device * dev , int pkg_num , int sub_pkg_num , char * name , char * buf ) { struct acpi_buffer output = { ACPI_ALLOCATE_BUFFER NULL } ; acpi_status status ; int ret = - EINVAL ; status = acpi_evaluate_object ( ACPI_HANDLE ( dev ) , name , NULL , & output ) ; if ( ACPI_FAILURE ( status ) ) { dev_err ( dev , "failed to retrieve %s. %s\n" , name , acpi_format_exception ( status ) ) ; return ret ; } if ( ( ( acpi_object * ) output . pointer ) -> type == ACPI_TYPE_PACKAGE ) { ret = chromeos_acpi_handle_package ( dev , output . pointer , pkg_num , sub_pkg_num , name , buf ) ; } return ret ; } 