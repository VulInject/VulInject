static int ad3552r_check_scratch_pad ( struct ad3552r_desc * dac ) { const u16 val1 = AD3552R_SCRATCH_PAD_TEST_VAL1 ; const u16 val2 = AD3552R_SCRATCH_PAD_TEST_VAL2 ; u16 val ; int err ; err = ad3552r_write_reg ( dac , AD3552R_REG_ADDR_SCRATCH_PAD , val1 ) ; if ( err < 0 ) { return err ; } err = ad3552r_read_reg ( dac , AD3552R_REG_ADDR_SCRATCH_PAD , & val ) ; if ( err < 0 ) { return err ; } err = ad3552r_write_reg ( dac , AD3552R_REG_ADDR_SCRATCH_PAD , val2 ) ; if ( err < 0 ) { return err ; } err = ad3552r_read_reg ( dac , AD3552R_REG_ADDR_SCRATCH_PAD , & val ) ; if ( err < 0 ) { return err ; } if ( val2 != val ) { return - ENODEV ; } return 0 ; } 