static int tegra186_gpio_get_direction ( struct gpio_chip * chip , unsigned int offset ) { struct tegra_gpio * gpio = gpiochip_get_data ( chip ) ; void __iomem * base ; u32 value ; base = tegra186_gpio_get_base ( gpio , offset ) ; value = readl ( base + TEGRA186_GPIO_ENABLE_CONFIG ) ; if ( value & TEGRA186_GPIO_ENABLE_CONFIG_OUT ) { return GPIO_LINE_DIRECTION_OUT ; } return GPIO_LINE_DIRECTION_IN ; } 