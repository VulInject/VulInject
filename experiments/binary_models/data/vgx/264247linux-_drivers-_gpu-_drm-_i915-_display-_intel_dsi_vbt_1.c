static int i2c_adapter_lookup ( struct acpi_resource * ares , void * data ) { struct i2c_adapter_lookup * lookup = data ; struct intel_dsi * intel_dsi = lookup -> intel_dsi ; struct acpi_resource_i2c_serialbus * sb ; struct i2c_adapter * adapter ; acpi_handle adapter_handle ; acpi_status status ; if ( ! i2c_acpi_get_i2c_resource ( ares , & sb ) ) { return 1 ; } status = acpi_get_handle ( lookup -> dev_handle , sb -> resource_source . string_ptr , & adapter_handle ) ; if ( ACPI_FAILURE ( status ) ) { return 1 ; } adapter = i2c_acpi_find_adapter_by_handle ( adapter_handle ) ; if ( adapter ) { intel_dsi -> i2c_bus_num = adapter -> nr ; } return 1 ; } 