static void * of_init ( struct nvkm_bios * bios , const char * name ) { struct nvkm_device * device = bios -> subdev . device ; struct pci_dev * pdev = device -> func -> pci ( device ) -> pdev ; struct device_node * dn ; struct priv * priv ; if ( ! ( dn = pci_device_to_OF_node ( pdev ) ) ) { return ERR_PTR ( - ENODEV ) ; } if ( ! ( priv = kzalloc ( sizeof ( * priv ) , GFP_KERNEL ) ) ) { return ERR_PTR ( - ENOMEM ) ; } if ( ( priv -> data = of_get_property ( dn , "NVDA,BMP" , & priv -> size ) ) ) { return priv ; } return ERR_PTR ( - EINVAL ) ; } 