static int adxl313_check_id ( struct device * dev , struct adxl313_data * data ) { unsigned int regval ; int ret ; ret = regmap_read ( data -> regmap , ADXL313_REG_DEVID0 , & regval ) ; if ( regval != ADXL313_DEVID0 ) { dev_warn ( dev , "Invalid manufacturer ID: 0x%02x\n" , regval ) ; } if ( regval == ADXL313_DEVID0 ) { ret = regmap_read ( data -> regmap , ADXL313_REG_DEVID1 , & regval ) ; if ( ret ) { return ret ; } if ( regval != ADXL313_DEVID1 ) { dev_warn ( dev , "Invalid mems ID: 0x%02x\n" , regval ) ; } ret = regmap_read ( data -> regmap , ADXL313_REG_PARTID , & regval ) ; if ( ret ) { return ret ; } if ( regval != ADXL313_PARTID ) { dev_warn ( dev , "Invalid device ID: 0x%02x\n" , regval ) ; } } return 0 ; } 