int synth_init ( char * synth_name ) { int i ; int ret = 0 ; struct spk_synth * synth = NULL ; if ( strcmp ( synth_name , "none" ) == 0 ) { mutex_lock ( & spk_mutex ) ; synth_release ( ) ; mutex_unlock ( & spk_mutex ) ; return 0 ; } mutex_lock ( & spk_mutex ) ; for ( i = 0 ; i < MAXSYNTHS && synths [ i ] ; i ++ ) { if ( strcmp ( synths [ i ] -> name , synth_name ) == 0 ) { synth = synths [ i ] ; } } if ( synth ) { ret = do_synth_init ( synth ) ; } else { ret = - ENODEV ; } mutex_unlock ( & spk_mutex ) ; return ret ; } 