int ice_vsi_ctrl_one_rx_ring ( struct ice_vsi * vsi , bool ena , u16 rxq_idx , bool wait ) { int pf_q = vsi -> rxq_map [ rxq_idx ] ; struct ice_pf * pf = vsi -> back ; struct ice_hw * hw = & pf -> hw ; u32 rx_reg ; rx_reg = rd32 ( hw , QRX_CTRL ( pf_q ) ) ; if ( ena == ! ! ( rx_reg & QRX_CTRL_QENA_STAT_M ) ) { return 0 ; } if ( ena ) { rx_reg |= QRX_CTRL_QENA_REQ_M ; } else { rx_reg &= ~ QRX_CTRL_QENA_REQ_M ; } wr32 ( hw , QRX_CTRL ( pf_q ) , rx_reg ) ; if ( ! wait ) { return 0 ; } ice_flush ( hw , NULL ) ; return ice_pf_rxq_wait ( pf , pf_q , ena ) ; } 