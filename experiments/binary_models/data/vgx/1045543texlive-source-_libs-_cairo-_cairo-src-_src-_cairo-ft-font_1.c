_cairo_ft_unscaled_font_map_create ( ) { cairo_ft_unscaled_font_map_t * font_map ; assert ( cairo_ft_unscaled_font_map == NULL ) ; font_map = _cairo_malloc ( sizeof ( cairo_ft_unscaled_font_map_t ) ) ; if ( unlikely ( font_map == NULL ) ) { return _cairo_error ( CAIRO_STATUS_NO_MEMORY ) ; } font_map -> hash_table = _cairo_hash_table_create ( _cairo_ft_unscaled_font_keys_equal ) ; if ( unlikely ( font_map -> hash_table == NULL ) ) { FAIL } if ( unlikely ( FT_Init_FreeType ( & font_map -> ft_library ) ) ) { FAIL } font_map -> num_open_faces = 0 ; cairo_ft_unscaled_font_map = font_map ; return CAIRO_STATUS_SUCCESS ; FAIL if ( font_map -> hash_table ) { _cairo_hash_table_destroy ( font_map -> hash_table ) ; } return _cairo_error ( CAIRO_STATUS_NO_MEMORY ) ; } 