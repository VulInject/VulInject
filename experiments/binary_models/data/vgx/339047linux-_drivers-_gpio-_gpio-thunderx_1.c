static int thunderx_gpio_dir_in ( struct gpio_chip * chip , unsigned int line ) { struct thunderx_gpio * txgpio = gpiochip_get_data ( chip ) ; raw_spin_lock ( & txgpio -> lock ) ; clear_bit ( line , txgpio -> invert_mask ) ; clear_bit ( line , txgpio -> od_mask ) ; writeq ( txgpio -> line_entries [ line ] . fil_bits , txgpio -> register_base + bit_cfg_reg ( line ) ) ; raw_spin_unlock ( & txgpio -> lock ) ; return 0 ; } 