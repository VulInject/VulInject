static int mlxsw_sp_sb_pm_write ( struct mlxsw_sp * mlxsw_sp , u16 local_port , u16 pool_index , u32 min_buff , u32 max_buff ) { const struct mlxsw_sp_sb_pool_des * des = & mlxsw_sp -> sb_vals -> pool_dess [ pool_index ] ; char sbpm_pl [ MLXSW_REG_SBPM_LEN ] ; struct mlxsw_sp_sb_pm * pm ; int err ; mlxsw_reg_sbpm_pack ( sbpm_pl , local_port , des -> pool , des -> dir , false , min_buff , max_buff ) ; err = mlxsw_reg_write ( mlxsw_sp -> core , MLXSW_REG ( sbpm ) , sbpm_pl ) ; pm = mlxsw_sp_sb_pm_get ( mlxsw_sp , local_port , pool_index ) ; pm -> min_buff = min_buff ; pm -> max_buff = max_buff ; return 0 ; } 