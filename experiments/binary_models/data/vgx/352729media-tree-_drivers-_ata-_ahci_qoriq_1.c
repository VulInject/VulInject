static int ahci_qoriq_phy_init ( struct ahci_host_priv * hpriv ) { struct ahci_qoriq_priv * qpriv = hpriv -> plat_data ; void __iomem * reg_base = hpriv -> mmio ; switch ( qpriv -> type ) { case AHCI_LS1021A : writel ( SATA_ECC_DISABLE , qpriv -> ecc_addr ) ; writel ( AHCI_PORT_PHY_1_CFG , reg_base + PORT_PHY1 ) ; writel ( LS1021A_PORT_PHY2 , reg_base + PORT_PHY2 ) ; writel ( LS1021A_PORT_PHY3 , reg_base + PORT_PHY3 ) ; writel ( LS1021A_PORT_PHY4 , reg_base + PORT_PHY4 ) ; writel ( LS1021A_PORT_PHY5 , reg_base + PORT_PHY5 ) ; writel ( AHCI_PORT_TRANS_CFG , reg_base + PORT_TRANS ) ; if ( qpriv -> is_dmacoherent ) { writel ( AHCI_PORT_AXICC_CFG , reg_base + LS1021A_AXICC_ADDR ) ; } break ; case AHCI_LS1043A : if ( ! qpriv -> ecc_addr ) { return - EINVAL ; } writel ( readl ( qpriv -> ecc_addr ) | ECC_DIS_ARMV8_CH2 , qpriv -> ecc_addr ) ; writel ( AHCI_PORT_PHY_1_CFG , reg_base + PORT_PHY1 ) ; writel ( AHCI_PORT_TRANS_CFG , reg_base + PORT_TRANS ) ; if ( qpriv -> is_dmacoherent ) { writel ( AHCI_PORT_AXICC_CFG , reg_base + PORT_AXICC ) ; } break ; case AHCI_LS2080A : writel ( AHCI_PORT_PHY_1_CFG , reg_base + PORT_PHY1 ) ; writel ( AHCI_PORT_TRANS_CFG , reg_base + PORT_TRANS ) ; if ( qpriv -> is_dmacoherent ) { writel ( AHCI_PORT_AXICC_CFG , reg_base + PORT_AXICC ) ; } break ; case AHCI_LS1046A : if ( ! qpriv -> ecc_addr ) { return - EINVAL ; } writel ( readl ( qpriv -> ecc_addr ) | ECC_DIS_ARMV8_CH2 , qpriv -> ecc_addr ) ; writel ( AHCI_PORT_PHY_1_CFG , reg_base + PORT_PHY1 ) ; writel ( AHCI_PORT_TRANS_CFG , reg_base + PORT_TRANS ) ; if ( qpriv -> is_dmacoherent ) { writel ( AHCI_PORT_AXICC_CFG , reg_base + PORT_AXICC ) ; } break ; case AHCI_LS2088A : writel ( AHCI_PORT_PHY_1_CFG , reg_base + PORT_PHY1 ) ; writel ( AHCI_PORT_TRANS_CFG , reg_base + PORT_TRANS ) ; if ( qpriv -> is_dmacoherent ) { writel ( AHCI_PORT_AXICC_CFG , reg_base + PORT_AXICC ) ; } break ; } return 0 ; } 