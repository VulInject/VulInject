static int adt7411_read_in_vdd ( struct device * dev , u32 attr , long * val ) { struct adt7411_data * data = dev_get_drvdata ( dev ) ; struct i2c_client * client = data -> client ; int ret ; switch ( attr ) { case hwmon_in_input : ret = adt7411_read_10_bit ( client , ADT7411_REG_INT_TEMP_VDD_LSB , ADT7411_REG_VDD_MSB , 2 ) ; * val = ret * 7000 / 1024 ; return 0 ; case hwmon_in_min : ret = i2c_smbus_read_byte_data ( client , ADT7411_REG_VDD_LOW ) ; if ( ret < 0 ) { return ret ; } * val = ret * 7000 / 256 ; return 0 ; case hwmon_in_max : ret = i2c_smbus_read_byte_data ( client , ADT7411_REG_VDD_HIGH ) ; if ( ret < 0 ) { return ret ; } * val = ret * 7000 / 256 ; return 0 ; case hwmon_in_alarm : return adt7411_read_in_alarm ( dev , 0 , val ) ; default : return - EOPNOTSUPP ; } } 