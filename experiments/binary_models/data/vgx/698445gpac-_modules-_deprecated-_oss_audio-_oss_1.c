void * NewOSSRender ( ) { OSSContext * ctx ; GF_AudioOutput * driv ; ctx = gf_malloc ( sizeof ( OSSContext ) ) ; if ( ! ctx ) { return NULL ; } memset ( ctx , 0 , sizeof ( OSSContext ) ) ; driv = gf_malloc ( sizeof ( GF_AudioOutput ) ) ; if ( ! driv ) { ctx = NULL ; return NULL ; } memset ( driv , 0 , sizeof ( GF_AudioOutput ) ) ; driv -> opaque = ctx ; driv -> SelfThreaded = 0 ; driv -> Setup = OSS_Setup ; driv -> Shutdown = OSS_Shutdown ; driv -> Configure = OSS_Configure ; driv -> GetAudioDelay = OSS_GetAudioDelay ; driv -> SetVolume = OSS_SetVolume ; driv -> SetPan = OSS_SetPan ; driv -> SetPriority = OSS_SetPriority ; driv -> QueryOutputSampleRate = OSS_QueryOutputSampleRate ; driv -> WriteAudio = OSS_WriteAudio ; GF_REGISTER_MODULE_INTERFACE ( driv , GF_AUDIO_OUTPUT_INTERFACE , "OSS Audio Output" , "gpac distribution" ) ; return driv ; } 