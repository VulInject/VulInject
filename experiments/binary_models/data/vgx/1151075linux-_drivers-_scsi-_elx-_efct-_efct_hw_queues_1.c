void efct_hw_del_cq ( struct hw_cq * cq ) { struct hw_q * q ; struct hw_q * q_next ; list_for_each_entry_safe ( , , , ) { switch ( q -> type ) { case SLI4_QTYPE_MQ : efct_hw_del_mq ( ( hw_mq * ) q ) ; break ; case SLI4_QTYPE_WQ : efct_hw_del_wq ( ( hw_wq * ) q ) ; break ; case SLI4_QTYPE_RQ : efct_hw_del_rq ( ( hw_rq * ) q ) ; break ; default : break ; } } list_del ( & cq -> list_entry ) ; cq -> eq -> hw -> hw_cq [ cq -> instance ] = NULL ; kfree ( cq ) ; } 