int gk20a_clk_ctor ( struct nvkm_device * device , int index , const struct nvkm_clk_func * func , const struct gk20a_clk_pllg_params * params , struct gk20a_clk * clk ) { struct nvkm_device_tegra * tdev = device -> func -> tegra ( device ) ; int ret ; int i ; for ( i = 0 ; i < func -> nr_pstates ; i ++ ) { INIT_LIST_HEAD ( & func -> pstates [ i ] . list ) ; func -> pstates [ i ] . pstate = i + 1 ; } clk -> params = params ; clk -> parent_rate = clk_get_rate ( tdev -> clk ) ; ret = nvkm_clk_ctor ( func , device , index , true , & clk -> base ) ; nvkm_debug ( & clk -> base . subdev , "parent clock rate: %d Khz\n" , clk -> parent_rate / KHZ ) ; return 0 ; } 