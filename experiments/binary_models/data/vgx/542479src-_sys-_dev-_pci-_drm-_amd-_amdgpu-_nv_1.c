static int nv_asic_reset ( struct amdgpu_device * adev ) { int ret = 0 ; switch ( nv_asic_reset_method ( adev ) ) { case AMD_RESET_METHOD_PCI : dev_info ( adev -> dev , "PCI reset\n" ) ; ret = amdgpu_device_pci_reset ( adev ) ; break ; case AMD_RESET_METHOD_BACO : dev_info ( adev -> dev , "BACO reset\n" ) ; ret = amdgpu_dpm_baco_reset ( adev ) ; break ; case AMD_RESET_METHOD_MODE2 : dev_info ( adev -> dev , "MODE2 reset\n" ) ; ret = nv_asic_mode2_reset ( adev , NULL ) ; break ; default : dev_info ( adev -> dev , "MODE1 reset\n" ) ; ret = amdgpu_device_mode1_reset ( adev ) ; break ; } return ret ; } 