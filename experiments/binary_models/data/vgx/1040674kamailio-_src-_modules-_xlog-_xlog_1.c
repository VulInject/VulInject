static int xlog_2_helper ( struct sip_msg * msg , char * lev , char * frm , int mode , int facility ) { long level ; xl_level_p xlp ; pv_value_t value ; xlp = ( xl_level_p ) lev ; if ( xlp -> type == 1 ) { if ( pv_get_spec_value ( msg , & xlp -> v . sp , & value ) != 0 || value . flags & PV_VAL_NULL || ! ( value . flags & PV_VAL_INT ) ) { LM_ERR ( "invalid log level value [%d]\n" , value . flags ) ; return - 1 ; } level = ( long ) value . ri ; } else { level = xlp -> v . level ; } return xlog_helper ( msg , ( xl_msg_t * ) frm , ( int ) level , mode , facility ) ; } 