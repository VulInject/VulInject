static int wl1273_fm_write_fw ( struct wl1273_core * core , __u8 * fw , int len ) { struct i2c_client * client = core -> client ; struct i2c_msg msg ; int i , r = 0 ; msg . addr = client -> addr ; for ( i = 0 ; i <= len ; i ++ ) { msg . len = fw [ 0 ] ; msg . buf = fw + 1 ; fw += msg . len + 1 ; dev_dbg ( & client -> dev , "%s:len[%d]: %d\n" , __func__ , i , msg . len ) ; r = i2c_transfer ( client -> adapter , & msg , 1 ) ; if ( r < 0 && i < len + 1 ) { break ; } } dev_dbg ( & client -> dev , "%s: i: %d\n" , __func__ , i ) ; dev_dbg ( & client -> dev , "%s: len + 1: %d\n" , __func__ , len + 1 ) ; if ( i == len || r == 1 ) { r = 0 ; } return r ; } 