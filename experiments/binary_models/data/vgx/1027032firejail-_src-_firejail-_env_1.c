void env_store_name_val ( const char * name , const char * val , ENV_OP op ) { if ( * name == '\0' ) { errexit } Env * env = calloc ( 1 , sizeof ( Env ) ) ; if ( ! env ) { errExit ( "calloc" ) ; } env -> name = strdup ( name ) ; if ( env -> name == NULL ) { errExit ( "strdup" ) ; } if ( op == SETENV ) { env -> value = strdup ( val ) ; if ( env -> value == NULL ) { errExit ( "strdup" ) ; } } env -> op = op ; env_add ( env ) ; return ; errexit fprintf ( stderr , "Error: invalid --env setting\n" ) ; exit ( 1 ) ; } 