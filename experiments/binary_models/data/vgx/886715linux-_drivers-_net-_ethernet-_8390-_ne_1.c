static int ne_drv_remove ( struct platform_device * pdev ) { struct net_device * dev = platform_get_drvdata ( pdev ) ; if ( dev ) { struct pnp_dev * idev = ( pnp_dev * ) ei_status . priv ; netif_device_detach ( dev ) ; unregister_netdev ( dev ) ; if ( idev ) { pnp_device_detach ( idev ) ; } ei_status . priv = 0 ; free_irq ( dev -> irq , dev ) ; release_region ( dev -> base_addr , NE_IO_EXTENT ) ; } return 0 ; } 