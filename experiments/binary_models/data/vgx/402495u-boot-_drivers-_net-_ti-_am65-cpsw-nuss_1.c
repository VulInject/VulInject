static int am65_cpsw_port_probe ( struct udevice * dev ) { struct am65_cpsw_priv * priv = dev_get_priv ( dev ) ; struct eth_pdata * pdata = dev_get_plat ( dev ) ; struct am65_cpsw_common * cpsw_common ; char portname [ 15 ] ; int ret ; priv -> dev = dev ; cpsw_common = dev_get_priv ( dev -> parent ) ; priv -> cpsw_common = cpsw_common ; sprintf ( portname , "%s%s" , dev -> parent -> name , dev -> name ) ; device_set_name ( dev , portname ) ; priv -> mdio_manual_mode = false ; if ( soc_device_match ( k3_mdio_soc_data ) ) { priv -> mdio_manual_mode = true ; } ret = am65_cpsw_ofdata_parse_phy ( dev , NULL ) ; if ( ret ) { out } am65_cpsw_gmii_sel_k3 ( priv , pdata -> phy_interface , priv -> port_id ) ; ret = am65_cpsw_mdio_init ( dev ) ; if ( ret ) { out } ret = am65_cpsw_phy_init ( dev ) ; if ( ret ) { out } out return ret ; } 