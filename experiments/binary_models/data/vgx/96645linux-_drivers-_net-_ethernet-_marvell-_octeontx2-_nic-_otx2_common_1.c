static int otx2_rq_init ( struct otx2_nic * pfvf , u16 qidx , u16 lpb_aura ) { struct otx2_qset * qset = & pfvf -> qset ; struct nix_aq_enq_req * aq ; aq = otx2_mbox_alloc_msg_nix_aq_enq ( & pfvf -> mbox ) ; if ( ! aq ) { return - ENOMEM ; } aq -> rq . cq = qidx ; aq -> rq . ena = 1 ; aq -> rq . pb_caching = 1 ; aq -> rq . lpb_aura = lpb_aura ; aq -> rq . lpb_sizem1 = ( DMA_BUFFER_LEN ( pfvf -> rbsize ) / 8 ) - 1 ; aq -> rq . xqe_imm_size = 0 ; aq -> rq . flow_tagw = 32 ; aq -> rq . lpb_drop_ena = 1 ; aq -> rq . xqe_drop_ena = 1 ; aq -> rq . xqe_pass = RQ_PASS_LVL_CQ ( pfvf -> hw . rq_skid , qset -> rqe_cnt ) ; aq -> rq . xqe_drop = RQ_DROP_LVL_CQ ( pfvf -> hw . rq_skid , qset -> rqe_cnt ) ; aq -> rq . lpb_aura_pass = RQ_PASS_LVL_AURA ; aq -> rq . lpb_aura_drop = RQ_DROP_LVL_AURA ; aq -> qidx = qidx ; aq -> ctype = NIX_AQ_CTYPE_RQ ; aq -> op = NIX_AQ_INSTOP_INIT ; return otx2_sync_mbox_msg ( & pfvf -> mbox ) ; } 