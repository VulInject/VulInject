static int CalcCalPLL ( struct tda_state * state , u32 freq ) { u8 PostDiv ; u8 Div ; u64 OscFreq ; u32 CalDiv ; OscFreq = ( u64 ) freq * ( u64 ) Div ; OscFreq *= ( u64 ) 16384 ; do_div ( OscFreq , ( u64 ) 16000000 ) ; CalDiv = OscFreq ; state -> m_Regs [ CPD ] = PostDiv ; state -> m_Regs [ CD1 ] = ( ( CalDiv >> 16 ) & 0xFF ) ; state -> m_Regs [ CD2 ] = ( ( CalDiv >> 8 ) & 0xFF ) ; state -> m_Regs [ CD3 ] = ( CalDiv & 0xFF ) ; return UpdateRegs ( state , CPD , CD3 ) ; } 