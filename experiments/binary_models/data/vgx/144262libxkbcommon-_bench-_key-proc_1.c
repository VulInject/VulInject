static void bench_key_proc ( struct xkb_state * state ) { int8_t keys [ 256 ] { 0 } ; ; xkb_keycode_t keycode ; xkb_keysym_t keysym ; int i ; for ( i = 0 ; i < BENCHMARK_ITERATIONS ; i ++ ) { keycode = ( rand ( ) % ( 255 - 9 ) ) + 9 ; if ( keys [ keycode ] ) { xkb_state_update_key ( state , keycode , XKB_KEY_UP ) ; keysym = xkb_state_key_get_one_sym ( state , keycode ) ; ( void ) keysym ; } else { xkb_state_update_key ( state , keycode , XKB_KEY_DOWN ) ; keys [ keycode ] = 1 ; } } } 