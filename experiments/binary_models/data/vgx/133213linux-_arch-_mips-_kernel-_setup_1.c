static void __init maybe_bswap_initrd ( void ) { u64 buf ; if ( ! memcmp ( ( void * ) initrd_start , "070701" , 6 ) ) { return ; } buf = swab64p ( ( u64 * ) initrd_start ) ; if ( ! memcmp ( & buf , "070701" , 6 ) || decompress_method ( ( unsigned char * ) ( & buf ) , 8 , NULL ) ) { unsigned long i ; pr_info ( "Byteswapped initrd detected\n" ) ; for ( i = initrd_start ; i < ALIGN ( initrd_end , 8 ) ; i += 8 ) { swab64s ( ( u64 * ) i ) ; } } } 