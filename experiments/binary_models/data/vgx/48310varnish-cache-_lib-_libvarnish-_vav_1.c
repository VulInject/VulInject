static int vav_backslash_txt ( const char * s , const char * e , char * res ) { int r , l , i ; const char * p ; char c ; AN ( s ) ; if ( e == NULL ) { e = strchr ( s , '\0' ) ; } l = pdiff ( s , e ) ; assert ( * s == '\\' ) ; r = c = 0 ; switch ( s [ 1 ] ) { case 'n' : c = '\n' ; r = 2 ; break ; case 'r' : c = '\r' ; r = 2 ; break ; case 't' : c = '\t' ; r = 2 ; break ; case '"' : c = '"' ; r = 2 ; break ; case '\\' : c = '\\' ; r = 2 ; break ; case '0' : case '1' : case '2' : case '3' : case '4' : case '5' : case '6' : case '7' : for ( r = 1 ; r < 4 && r < l ; r ++ ) { if ( ! isdigit ( s [ r ] ) ) { break ; } if ( s [ r ] - '0' > 7 ) { break ; } c <<= 3 ; c |= s [ r ] - '0' ; } break ; case 'x' : if ( l >= 4 && ( i = VNUM_hex ( s + 2 , s + 4 , & p ) ) >= 0 && p == s + 4 ) { AZ ( i & ~ 0xff ) ; c = i ; r = 4 ; } break ; default : break ; } if ( res != NULL ) { * res = c ; } return ( r ) ; } 