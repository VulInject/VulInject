static TEE_Result atmel_secumod_probe ( const void * fdt , int node , const void * compat_data __unused ) { size_t size = 0 ; if ( dt_map_dev ( fdt , node , & secumod_base , & size , DT_MAP_AUTO ) < 0 ) { return TEE_ERROR_GENERIC ; } secumod_hw_init ( fdt , node ) ; secumod_interrupt_init ( ) ; secumod_chip . ops = & atmel_piobu_ops ; piobu_register_pm ( ) ; return TEE_SUCCESS ; } 