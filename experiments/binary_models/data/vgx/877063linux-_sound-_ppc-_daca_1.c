static int daca_put_volume ( struct snd_kcontrol * kcontrol , struct snd_ctl_elem_value * ucontrol ) { struct snd_pmac * chip = snd_kcontrol_chip ( kcontrol ) ; struct pmac_daca * mix ; unsigned int vol [ 2 ] ; int change ; mix = chip -> mixer_data ; vol [ 0 ] = ucontrol -> value . integer . value [ 0 ] ; vol [ 1 ] = ucontrol -> value . integer . value [ 1 ] ; if ( vol [ 0 ] > DACA_VOL_MAX || vol [ 1 ] > DACA_VOL_MAX ) { return - EINVAL ; } change = mix -> left_vol != vol [ 0 ] || mix -> right_vol != vol [ 1 ] ; if ( change ) { mix -> left_vol = vol [ 0 ] ; mix -> right_vol = vol [ 1 ] ; daca_set_volume ( mix ) ; } return change ; } 