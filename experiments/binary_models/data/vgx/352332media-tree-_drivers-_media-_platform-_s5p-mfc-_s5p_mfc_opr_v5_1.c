static int s5p_mfc_alloc_dec_temp_buffers_v5 ( struct s5p_mfc_ctx * ctx ) { struct s5p_mfc_dev * dev = ctx -> dev ; struct s5p_mfc_buf_size_v5 * buf_size = dev -> variant -> buf_size -> priv ; int ret ; ctx -> dsc . size = buf_size -> dsc ; ret = s5p_mfc_alloc_priv_buf ( dev , BANK_L_CTX , & ctx -> dsc ) ; if ( ret ) { mfc_err ( "Failed to allocate temporary buffer\n" ) ; return ret ; } BUG_ON ( ctx -> dsc . dma & ( ( 1 << MFC_BANK1_ALIGN_ORDER ) - 1 ) ) ; wmb ( ) ; return 0 ; } 