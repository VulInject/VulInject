pprint = gsf_xml_out_set_pretty_print ( xml , FALSE ) ; gsf_xml_out_add_cstr_unchecked ( xml , NULL , "text" ) ; gsf_xml_out_set_pretty_print ( xml , pprint ) ; gsf_xml_out_end_element ( xml , NULL ) ; gsf_xml_out_start_element ( xml , "data" ) ; pprint = gsf_xml_out_set_pretty_print ( xml , FALSE ) ; gsf_xml_out_start_element ( xml , "inner" ) ; gsf_xml_out_add_cstr_unchecked ( xml , NULL , "text" ) ; gsf_xml_out_end_element ( xml ) ; gsf_xml_out_set_pretty_print ( xml , pprint ) ; gsf_xml_out_end_element ( xml ) ; gsf_xml_out_end_element ( xml ) ; g_object_unref ( xml ) ; data = ( const char * ) gsf_output_memory_get_bytes ( GSF_OUTPUT_MEMORY ( mem ) ) ; g_printerr ( "Got\n%s\n" , data ) ; err = ! g_str_equal ( data , expected ) ; if ( err ) { g_printerr ( "Expected\n%s\n" , expected ) ; } g_object_unref ( mem ) ; return err ; 