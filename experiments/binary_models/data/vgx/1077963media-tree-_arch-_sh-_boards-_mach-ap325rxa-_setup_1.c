static int camera_set_capture ( struct soc_camera_platform_info * info , int enable ) { struct i2c_adapter * a = i2c_get_adapter ( 0 ) ; struct i2c_msg msg ; int ret ; int i ; camera_power ( 0 ) ; if ( ! enable ) { return 0 ; } camera_power ( 1 ) ; for ( i = 0 ; i < ARRAY_SIZE ( camera_ncm03j_magic ) ; i += 2 ) { u_int8_t buf [ 8 ] ; msg . addr = 0x6e ; msg . buf = buf ; msg . len = 2 ; msg . flags = 0 ; buf [ 0 ] = camera_ncm03j_magic [ i ] ; buf [ 1 ] = camera_ncm03j_magic [ i + 1 ] ; ret = ( ret < 0 ) ?ret : i2c_transfer ( a , & msg , 1 ) ; } return ret ; } 