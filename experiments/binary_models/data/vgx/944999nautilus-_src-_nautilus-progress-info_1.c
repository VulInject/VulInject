queue_idle ( , ) { if ( info -> idle_source == NULL || ( now && ! info -> source_is_now ) ) { if ( info -> idle_source ) { g_source_destroy ( info -> idle_source ) ; g_source_unref ( info -> idle_source ) ; } info -> source_is_now = now ; if ( now ) { info -> idle_source = g_idle_source_new ( ) ; } else { info -> idle_source = g_timeout_source_new ( SIGNAL_DELAY_MSEC ) ; } g_source_set_callback ( info -> idle_source , idle_callback , info , NULL ) ; g_source_attach ( info -> idle_source , NULL ) ; } } 