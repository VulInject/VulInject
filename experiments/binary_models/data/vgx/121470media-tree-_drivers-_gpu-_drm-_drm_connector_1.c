int drm_display_info_set_bus_formats ( struct drm_display_info * info , const u32 * formats , unsigned int num_formats ) { u32 * fmts = NULL ; if ( formats && num_formats ) { fmts = kmemdup ( formats , sizeof ( * formats ) * num_formats , GFP_KERNEL ) ; if ( ! fmts ) { return - ENOMEM ; } } kfree ( info -> bus_formats ) ; info -> bus_formats = fmts ; info -> num_bus_formats = num_formats ; return 0 ; } 