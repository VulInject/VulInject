static int hdac_hdmi_port_select_set ( struct hdac_ext_device * hdac , struct hdac_hdmi_port * port ) { int num_ports ; num_ports = hdac_hdmi_get_port_len ( hdac , port -> pin -> nid ) ; if ( num_ports < 0 ) { return - EIO ; } if ( num_ports + 1 < port -> id ) { return 0 ; } snd_hdac_codec_write ( & hdac -> hdac , port -> pin -> nid , 0 , AC_VERB_SET_DEVICE_SEL , port -> id ) ; if ( port -> id != hdac_hdmi_port_select_get ( hdac , port ) ) { return - EIO ; } dev_dbg ( & hdac -> hdac . dev , "Selected the port=%d\n" , port -> id ) ; return 0 ; } 