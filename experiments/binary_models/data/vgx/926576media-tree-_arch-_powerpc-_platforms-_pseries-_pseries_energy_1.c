static ssize_t get_best_energy_data ( struct device * dev , char * page , int activate ) { int rc ; unsigned long retbuf [ PLPAR_HCALL9_BUFSIZE ] ; unsigned long flags = 0 ; flags = FLAGS_MODE2 ; if ( activate ) { flags |= FLAGS_ACTIVATE ; } rc = plpar_hcall9 ( H_BEST_ENERGY , retbuf , flags , cpu_to_drc_index ( dev -> id ) , 0 , 0 , 0 , 0 , 0 , 0 , 0 ) ; return sprintf ( page , "%lu\n" , retbuf [ 1 ] >> 32 ) ; } 