static void cherryview_sseu_device_status ( struct intel_gt * gt , struct sseu_dev_info * sseu ) { struct intel_uncore * uncore = gt -> uncore ; const int ss_max = SS_MAX ; u32 sig1 [ SS_MAX ] , sig2 [ SS_MAX ] ; int ss ; sig1 [ 0 ] = intel_uncore_read ( uncore , CHV_POWER_SS0_SIG1 ) ; sig1 [ 1 ] = intel_uncore_read ( uncore , CHV_POWER_SS1_SIG1 ) ; sig2 [ 0 ] = intel_uncore_read ( uncore , CHV_POWER_SS0_SIG2 ) ; sig2 [ 1 ] = intel_uncore_read ( uncore , CHV_POWER_SS1_SIG2 ) ; for ( ss = 0 ; ss < ss_max ; ss ++ ) { unsigned int eu_cnt ; sseu -> slice_mask = BIT ( 0 ) ; sseu -> subslice_mask . hsw [ 0 ] |= BIT ( ss ) ; eu_cnt = ( ( sig1 [ ss ] & CHV_EU08_PG_ENABLE ) ?0 : 2 ) + ( ( sig1 [ ss ] & CHV_EU19_PG_ENABLE ) ?0 : 2 ) + ( ( sig1 [ ss ] & CHV_EU210_PG_ENABLE ) ?0 : 2 ) + ( ( sig2 [ ss ] & CHV_EU311_PG_ENABLE ) ?0 : 2 ) ; sseu -> eu_total += eu_cnt ; sseu -> eu_per_subslice = max_t ( , , ) ; } } 