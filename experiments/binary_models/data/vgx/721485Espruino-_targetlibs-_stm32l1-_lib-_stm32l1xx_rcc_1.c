ErrorStatus RCC_WaitForHSEStartUp ( void ) { __IO uint32_t StartUpCounter = 0 ; ErrorStatus status = ERROR ; FlagStatus HSEStatus = RESET ; { HSEStatus = RCC_GetFlagStatus ( RCC_FLAG_HSERDY , NULL ) ; StartUpCounter ++ ; } ( StartUpCounter != HSE_STARTUP_TIMEOUT ) && ( HSEStatus == RESET ) ; if ( RCC_GetFlagStatus ( RCC_FLAG_HSERDY ) != RESET ) { status = SUCCESS ; } else { status = ERROR ; } return ( status ) ; } 