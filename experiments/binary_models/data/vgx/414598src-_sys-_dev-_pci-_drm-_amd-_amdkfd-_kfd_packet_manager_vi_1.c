static int pm_map_process_vi ( struct packet_manager * pm , uint32_t * buffer , struct qcm_process_device * qpd ) { struct pm4_mes_map_process * packet ; packet = ( pm4_mes_map_process * ) buffer ; packet -> header . u32All = pm_build_pm4_header ( IT_MAP_PROCESS , sizeof ( pm4_mes_map_process ) ) ; packet -> bitfields2 . diq_enable = ( qpd -> is_debug ) ?1 : 0 ; packet -> bitfields2 . process_quantum = 10 ; packet -> bitfields2 . pasid = qpd -> pqm -> process -> pasid ; packet -> bitfields3 . page_table_base = qpd -> page_table_base ; packet -> bitfields10 . gds_size = qpd -> gds_size ; packet -> bitfields10 . num_gws = qpd -> num_gws ; packet -> bitfields10 . num_oac = qpd -> num_oac ; packet -> bitfields10 . num_queues = ( qpd -> is_debug ) ?0 : qpd -> queue_count ; packet -> sh_mem_config = qpd -> sh_mem_config ; packet -> sh_mem_bases = qpd -> sh_mem_bases ; packet -> sh_mem_ape1_base = qpd -> sh_mem_ape1_base ; packet -> sh_mem_ape1_limit = qpd -> sh_mem_ape1_limit ; packet -> sh_hidden_private_base_vmid = qpd -> sh_hidden_private_base ; packet -> gds_addr_lo = lower_32_bits ( qpd -> gds_context_area ) ; packet -> gds_addr_hi = upper_32_bits ( qpd -> gds_context_area ) ; return 0 ; } 