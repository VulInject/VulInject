static void _cma_cancel_listens ( struct rdma_id_private * id_priv ) { struct rdma_id_private * dev_id_priv ; lockdep_assert_held ( & lock ) ; list_del ( & id_priv -> listen_any_item ) ; while ( ! list_empty ( & id_priv -> listen_list ) ) { dev_id_priv = list_first_entry ( & id_priv -> listen_list , rdma_id_private , listen_item ) ; list_del_init ( & dev_id_priv -> device_item ) ; list_del_init ( & dev_id_priv -> listen_item ) ; mutex_unlock ( & lock ) ; rdma_destroy_id ( & dev_id_priv -> id ) ; mutex_lock ( & lock ) ; } } 