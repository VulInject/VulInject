static UINT audin_pulse_parse_addin_args ( AudinPulseDevice * device , const ADDIN_ARGV * args ) { int status ; DWORD flags ; const COMMAND_LINE_ARGUMENT_A * arg ; AudinPulseDevice * pulse = ( AudinPulseDevice * ) device ; COMMAND_LINE_ARGUMENT_A audin_pulse_args [ ] { { "dev" COMMAND_LINE_VALUE_REQUIRED "<device>" NULL NULL - 1 NULL "audio device name" } { NULL 0 NULL NULL NULL - 1 NULL NULL } } ; ; flags = COMMAND_LINE_SIGIL_NONE | COMMAND_LINE_SEPARATOR_COLON | COMMAND_LINE_IGN_UNKNOWN_KEYWORD ; status = CommandLineParseArgumentsA ( args -> argc , args -> argv , audin_pulse_args , flags , pulse , NULL , NULL ) ; if ( status < 0 ) { return ERROR_INVALID_PARAMETER ; } arg = audin_pulse_args ; { CommandLineSwitchStart ( ) CommandLineSwitchCase ( , "dev" ) { pulse -> device_name = _strdup ( arg -> Value ) ; if ( ! pulse -> device_name ) { WLog_Print ( pulse -> log , WLOG_ERROR , "_strdup failed!" ) ; return CHANNEL_RC_NO_MEMORY ; } } CommandLineSwitchEnd ( ) } ( arg = CommandLineFindNextArgumentA ( arg ) ) != NULL ; return CHANNEL_RC_OK ; } 