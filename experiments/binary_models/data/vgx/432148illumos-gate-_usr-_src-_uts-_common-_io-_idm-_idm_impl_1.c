idm_transport_t * idm_transport_lookup ( idm_conn_req_t * cr ) { idm_transport_type_t type ; idm_transport_t * it ; idm_transport_caps_t caps ; idm_transport_setup ( cr -> cr_li , cr -> cr_boot_conn ) ; for ( type = 0 ; type < IDM_TRANSPORT_NUM_TYPES ; type ++ ) { it = & idm_transport_list [ type ] ; if ( it -> it_ops -> it_conn_is_capable ( cr , & caps ) ) { return ( it ) ; } } ASSERT ( 0 ) ; return ( NULL ) ; } 