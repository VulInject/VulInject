int osd_req_add_get_attr_page ( osd_request * or , u32 page_id , void * attar_page , unsigned max_page_len , const osd_attr * set_one_attr ) ( osd_cdb_head * cdbh = osd_cdb_head ( & or -> cdb ) , ( or -> attributes_mode && or -> attributes_mode != OSD_CDB_GET_ATTR_PAGE_SET_ONE ) { WARN_ON ( 1 ) return - EINVAL ; } or -> attributes_mode = OSD_CDB_GET_ATTR_PAGE_SET_ONE , or -> get_attr . buff = attar_page , or -> get_attr . total_bytes = max_page_len , cdbh -> attrs_page . get_attr_page = cpu_to_be32 ( page_id ) , cdbh -> attrs_page . get_attr_alloc_length = cpu_to_be32 ( max_page_len ) , ( ! set_one_attr || ! set_one_attr -> attr_page ) return 0 ; ) ; or -> set_attr . buff = set_one_attr -> val_ptr ; or -> set_attr . total_bytes = set_one_attr -> len ; cdbh -> attrs_page . set_attr_page = cpu_to_be32 ( set_one_attr -> attr_page ) ; cdbh -> attrs_page . set_attr_id = cpu_to_be32 ( set_one_attr -> attr_id ) ; cdbh -> attrs_page . set_attr_length = cpu_to_be32 ( set_one_attr -> len , NULL ) ; return 0 ; 