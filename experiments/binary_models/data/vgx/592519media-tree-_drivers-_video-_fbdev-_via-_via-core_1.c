( viafb_pm_unregister ) ; static int via_suspend ( struct pci_dev * pdev , pm_message_t state ) { struct viafb_pm_hooks * hooks ; mutex_lock ( & viafb_pm_hooks_lock ) ; list_for_each_entry_reverse ( , , ) hooks -> suspend ( hooks -> private ) ; mutex_unlock ( & viafb_pm_hooks_lock ) ; pci_save_state ( pdev ) ; pci_disable_device ( pdev ) ; pci_set_power_state ( pdev , pci_choose_state ( pdev , state ) ) ; return 0 ; } 