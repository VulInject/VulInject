static FT_String * tt_name_ascii_from_utf16 ( TT_Name entry , FT_Memory memory ) { FT_String * string = NULL ; FT_UInt len , code , n ; FT_Byte * read = ( FT_Byte * ) entry -> string ; FT_Error error ; len = ( FT_UInt ) entry -> stringLength / 2 ; if ( FT_NEW_ARRAY ( string , len + 1 ) ) { return in ; } for ( n = 0 ; n < len ; n ++ ) { code = FT_NEXT_USHORT ( read ) ; if ( code == 0 ) { break ; } if ( code ( 32 || code ) 127 ) { code = '?' ; } string [ n ] = ( char ) code ; } string [ n ] = 0 ; return string ; } static FT_String * tt_name_ascii_from_other ( TT_Name entry , FT_Memory memory ) { FT_String * string = NULL ; FT_UInt len , code , n ; FT_Byte * read = ( FT_Byte * ) entry -> string ; FT_Error error ; len = ( FT_UInt ) entry -> stringLength ; if ( FT_NEW_ARRAY ( string , len + 1 ) ) { return NULL ; } for ( n = 0 ; n < len ; n ++ ) { code = * read ++ ; if ( code == 0 ) { break ; } if ( code ( 32 || code ) 127 ) { code = '?' ; } string [ n ] = ( char ) code ; } string [ n ] = 0 ; return string ; } FT_String * * TT_Name_ConvertFunc ( TT_Name entry , FT_Memory memory ) FT_LOCAL_DEF ( ) tt_face_get_name ( , , ) { FT_Memory memory = face -> root . memory ; FT_Error error = FT_Err_Ok ; FT_String * result = NULL ; FT_UShort n ; TT_Name rec ; FT_Int found_apple = - 1 ; FT_Int found_apple_roman = - 1 ; FT_Int found_apple_english = - 1 ; FT_Int found_win = - 1 ; FT_Int found_unicode = - 1 ; } 