void CI_handle ( struct av7110 * av7110 , u8 * data , u16 len ) { dprintk ( 8 , "av7110:%p\n" , av7110 ) ; switch ( data [ 0 ] ) { case CI_MSG_CI_INFO : if ( data [ 2 ] != 1 && data [ 2 ] != 2 ) { break ; } switch ( data [ 1 ] ) { case 0 : av7110 -> ci_slot [ data [ 2 ] - 1 ] . flags = 0 ; break ; case 1 : av7110 -> ci_slot [ data [ 2 ] - 1 ] . flags |= CA_CI_MODULE_PRESENT ; break ; case 2 : av7110 -> ci_slot [ data [ 2 ] - 1 ] . flags |= CA_CI_MODULE_READY ; break ; } break ; case CI_SWITCH_PRG_REPLY : break ; default : break ; } } 