static netdev_tx_t ltpc_xmit ( struct sk_buff * skb , struct net_device * dev ) { int i ; struct lt_sendlap cbuf ; unsigned char * hdr ; cbuf . command = LT_SENDLAP ; cbuf . dnode = skb -> data [ 0 ] ; cbuf . laptype = skb -> data [ 2 ] ; skb_pull ( skb , 3 ) ; cbuf . length = skb -> len ; skb_reset_transport_header ( skb ) ; if ( debug & DEBUG_UPPER ) { printk ( "command " ) ; for ( i = 0 ; i < 6 ; i ++ ) { printk ( "%02x " , ( ( unsigned char * ) & cbuf ) [ i ] ) ; } printk ( "\n" ) ; } hdr = skb_transport_header ( skb ) ; do_write ( dev , & cbuf , sizeof ( cbuf ) , hdr , skb -> len ) ; if ( debug & DEBUG_UPPER ) { printk ( "sent %d ddp bytes\n" , skb -> len ) ; for ( i = 0 ; i < skb -> len ; i ++ ) { printk ( "%02x " , hdr [ i ] ) ; } printk ( "\n" ) ; } dev -> stats . tx_packets ++ ; dev -> stats . tx_bytes += skb -> len ; return NETDEV_TX_OK ; } 