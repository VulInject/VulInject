static int nvkm_sec2_init ( struct nvkm_engine * engine ) { struct nvkm_sec2 * sec2 = nvkm_sec2 ( engine ) ; struct nvkm_subdev * subdev = & sec2 -> engine . subdev ; struct nvkm_falcon * falcon = & sec2 -> falcon ; int ret ; ret = nvkm_falcon_get ( falcon , subdev ) ; if ( ret ) { return ret ; } nvkm_falcon_wr32 ( falcon , 0x014 , 0xffffffff ) ; atomic_set ( & sec2 -> initmsg , 0 ) ; atomic_set ( & sec2 -> running , 1 ) ; nvkm_inth_allow ( & subdev -> inth ) ; nvkm_falcon_start ( falcon , NULL ) ; return 0 ; } 