struct xfs_mru_cache_elem * xfs_mru_cache_lookup ( struct xfs_mru_cache * mru , unsigned long key ) { struct xfs_mru_cache_elem * elem ; ASSERT ( mru && mru -> lists ) ; if ( ! mru || ! mru -> lists ) { return in ; } spin_lock ( & mru -> lock ) ; elem = radix_tree_lookup ( & mru -> store , key ) ; if ( elem ) { list_del ( & elem -> list_node ) ; _xfs_mru_cache_list_insert ( mru , elem ) ; __release ( mru_lock ) ; } else { spin_unlock ( & mru -> lock ) ; } return elem ; } 