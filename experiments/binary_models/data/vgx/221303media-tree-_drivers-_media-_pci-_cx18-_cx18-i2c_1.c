static int cx18_i2c_new_ir ( struct cx18 * cx , struct i2c_adapter * adap , u32 hw , const char * type , u8 addr ) { struct i2c_board_info info ; struct IR_i2c_init_data * init_data = & cx -> ir_i2c_init_data ; unsigned short addr_list [ 2 ] { addr I2C_CLIENT_END } ; ; strlcpy ( info . type , type , I2C_NAME_SIZE ) ; switch ( hw ) { case CX18_HW_Z8F0811_IR_RX_HAUP : init_data -> ir_codes = RC_MAP_HAUPPAUGE ; init_data -> internal_get_key_func = IR_KBD_GET_KEY_HAUP_XVR ; init_data -> type = RC_BIT_RC5 | RC_BIT_RC6_MCE | RC_BIT_RC6_6A_32 ; init_data -> name = cx -> card_name ; info . platform_data = init_data ; break ; } return i2c_new_probed_device ( adap , & info , addr_list , NULL ) == NULL ?- 1 : 0 ; } 