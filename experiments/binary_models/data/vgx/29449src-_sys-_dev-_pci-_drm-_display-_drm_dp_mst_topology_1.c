static inline void drm_dp_mst_dump_sideband_msg_tx ( struct drm_printer * p , const struct drm_dp_sideband_msg_tx * txmsg ) { struct drm_dp_sideband_msg_req_body req ; char buf [ 64 ] ; int ret ; int i ; drm_dp_mst_rad_to_str ( txmsg -> dst -> rad , txmsg -> dst -> lct , buf , sizeof ( buf ) ) ; drm_printf ( p , "txmsg cur_offset=%x cur_len=%x seqno=%x state=%s path_msg=%d dst=%s\n" , txmsg -> cur_offset , txmsg -> cur_len , txmsg -> seqno , drm_dp_mst_sideband_tx_state_str ( txmsg -> state ) , txmsg -> path_msg , buf ) ; ret = drm_dp_decode_sideband_req ( txmsg , & req ) ; if ( ret ) { drm_printf ( p , "<failed to decode sideband req: %d>\n" , ret ) ; return ; } drm_dp_dump_sideband_msg_req_body ( & req , 1 , p ) ; switch ( req . req_type ) { case DP_REMOTE_DPCD_WRITE : break ; case DP_REMOTE_I2C_READ : for ( i = 0 ; i < req . u . i2c_read . num_transactions ; i ++ ) { kfree ( req . u . i2c_read . transactions [ i ] . bytes ) ; } break ; case DP_REMOTE_I2C_WRITE : kfree ( req . u . i2c_write . bytes ) ; break ; } } 