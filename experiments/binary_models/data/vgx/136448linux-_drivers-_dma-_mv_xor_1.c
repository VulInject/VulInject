static enum dma_status mv_xor_status ( struct dma_chan * chan , dma_cookie_t cookie , struct dma_tx_state * txstate ) { struct mv_xor_chan * mv_chan = to_mv_xor_chan ( chan ) ; enum dma_status ret ; ret = dma_cookie_status ( chan , cookie , txstate ) ; spin_lock_bh ( & mv_chan -> lock ) ; mv_chan_slot_cleanup ( mv_chan ) ; spin_unlock_bh ( & mv_chan -> lock ) ; return dma_cookie_status ( chan , cookie , txstate ) ; } 