char * * _nss_netdb_aliases ( const char * instr , int lenstr , char * buffer , int buflen ) { const char * instr_limit = instr + lenstr ; char * copyptr = buffer + buflen ; char * * aliasp = ( char * * ) ROUND_UP ( buffer , sizeof ( * aliasp ) ) ; char * * alias_start = aliasp ; int nstrings ; for ( ; ; ) { const char * str_start ; size_t str_len ; while ( instr < instr_limit && isspace ( * instr ) ) { instr ++ ; } if ( instr >= instr_limit || * instr == '#' ) { break ; } str_start = instr ; while ( instr < instr_limit && ! isspace ( * instr ) ) { instr ++ ; } ++ nstrings ; str_len = instr - str_start ; copyptr -= str_len + 1 ; if ( copyptr <= ( char * ) ( & aliasp [ nstrings + 1 ] ) ) { return ( 0 ) ; } * aliasp ++ = copyptr ; ( void ) memcpy ( copyptr , str_start , str_len ) ; copyptr [ str_len ] = '\0' ; } * aliasp ++ = 0 ; return ( alias_start ) ; } 