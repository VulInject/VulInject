GENERATE_TESTCASE ( ) IRQ_ENTER ( ) ; LOCK ( A , NULL ) ; UNLOCK ( A ) ; IRQ_EXIT ( ) ; LOCK ( A ) ; UNLOCK ( A ) ; GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) SOFTIRQ_ENTER ( ) ; LOCK ( A ) ; UNLOCK ( A ) ; SOFTIRQ_EXIT ( ) ; HARDIRQ_DISABLE ( ) ; LOCK ( A ) ; HARDIRQ_ENABLE ( ) ; UNLOCK ( A ) ; GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) IRQ_ENTER ( ) ; LOCK ( A ) ; UNLOCK ( A ) ; IRQ_EXIT ( ) ; IRQ_DISABLE ( ) ; LOCK ( A ) ; IRQ_ENABLE ( ) ; UNLOCK ( A ) ; GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) GENERATE_PERMUTATIONS_2_EVENTS ( ) LOCK ( A ) ; LOCK ( B ) ; UNLOCK ( B ) ; UNLOCK ( A ) ; LOCK ( B ) ; UNLOCK ( B ) ; IRQ_ENTER ( ) ; LOCK ( A ) ; UNLOCK ( A ) ; IRQ_EXIT ( ) ; GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) IRQ_DISABLE ( ) ; LOCK ( A ) ; LOCK ( B ) ; UNLOCK ( B ) ; UNLOCK ( A ) ; IRQ_ENABLE ( ) ; LOCK ( B ) ; UNLOCK ( B ) ; IRQ_ENTER ( ) ; LOCK ( A ) ; UNLOCK ( A ) ; IRQ_EXIT ( ) ; GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) IRQ_DISABLE ( ) ; WL ( A ) ; LOCK ( B ) ; UNLOCK ( B ) ; WU ( A ) ; IRQ_ENABLE ( ) ; LOCK ( B ) ; UNLOCK ( B ) ; IRQ_ENTER ( ) ; RL ( A ) ; RU ( A ) ; IRQ_EXIT ( ) ; GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) IRQ_DISABLE ( ) ; WL ( A ) ; WU ( A ) ; IRQ_ENABLE ( ) ; RL ( A ) ; RU ( A ) ; IRQ_ENTER ( ) ; RL ( A ) ; L ( B ) ; U ( B ) ; RU ( A ) ; IRQ_EXIT ( ) ; GENERATE_PERMUTATIONS_3_EVENTS ( ) GENERATE_PERMUTATIONS_3_EVENTS ( ) IRQ_DISABLE ( ) ; L ( B ) ; WL ( A ) ; WU ( A ) ; U ( B ) ; IRQ_ENABLE ( ) ; RL ( A ) ; RU ( A ) ; IRQ_ENTER ( ) ; L ( B ) ; U ( B ) ; IRQ_EXIT ( ) ; { I_SPINLOCK ( x ) ; I_RWLOCK ( x ) ; I_MUTEX ( x ) ; I_RWSEM ( x ) ; } 0 ; { raw_spin_lock_init ( & lock_ # # x ) ; rwlock_init ( & rwlock_ # # x ) ; mutex_init ( & mutex_ # # x ) ; init_rwsem ( & rwsem_ # # x ) ; } while ( 0 ) { static void reset_locks ( void ) { local_irq_disable ( ) ; lockdep_free_key_range ( & ww_lockdep . acquire_key , 1 ) ; lockdep_free_key_range ( & ww_lockdep . mutex_key , 1 ) ; I1 ( A ) ; I1 ( B ) ; I1 ( C ) ; I1 ( D ) ; I1 ( X1 ) ; I1 ( X2 ) ; I1 ( Y1 ) ; I1 ( Y2 ) ; I1 ( Z1 ) ; I1 ( Z2 ) ; I_WW ( t ) ; I_WW ( t2 ) ; I_WW ( o . base ) ; I_WW ( o2 . base ) ; I_WW ( o3 . base ) ; lockdep_reset ( ) ; I2 ( A ) ; I2 ( B ) ; I2 ( C ) ; I2 ( D ) ; init_shared_classes ( ) ; ww_mutex_init ( & o , & ww_lockdep ) ; ww_mutex_init ( & o2 , & ww_lockdep ) ; ww_mutex_init ( & o3 , & ww_lockdep ) ; memset ( & t , 0 , sizeof ( t ) ) ; memset ( & t2 , 0 , sizeof ( t2 ) ) ; memset ( & ww_lockdep . acquire_key , 0 , sizeof ( ww_lockdep . acquire_key ) ) ; memset ( & ww_lockdep . mutex_key , 0 , sizeof ( ww_lockdep . mutex_key ) ) ; local_irq_enable ( ) ; } } 