static void flush_aliases ( struct address_space * mapping , struct page * page ) { struct mm_struct * mm = current -> active_mm ; struct vm_area_struct * mpnt ; pgoff_t pgoff ; pgoff = page -> index ; flush_dcache_mmap_lock ( mapping ) ; vma_interval_tree_foreach ( , , , ) { cfs_time_t offset ; if ( mpnt -> vm_mm != mm ) { continue ; } if ( ! ( mpnt -> vm_flags & VM_MAYSHARE ) ) { continue ; } offset = ( pgoff - mpnt -> vm_pgoff ) << PAGE_SHIFT ; flush_cache_page ( mpnt , mpnt -> vm_start + offset , page_to_pfn ( page ) ) ; } flush_dcache_mmap_unlock ( mapping ) ; } 