static ssize_t ur_read ( struct file * file , char __user * ubuf , size_t count , loff_t * offs ) { struct urdev * urd ; int rc ; TRACE ( "ur_read: count=%zu ppos=%li\n" , count , ( unsigned long ) * offs ) ; if ( count == 0 ) { return 0 ; } urd = ( ( urfile * ) file -> private_data ) -> urd ; rc = mutex_lock_interruptible ( & urd -> io_mutex ) ; rc = diag14_read ( file , ubuf , count , offs ) ; mutex_unlock ( & urd -> io_mutex ) ; return rc ; } 