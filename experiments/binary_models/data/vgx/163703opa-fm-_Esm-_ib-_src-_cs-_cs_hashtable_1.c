newtable = ( hash_entry * * ) malloc ( newsize * sizeof ( hash_entry * ) ) ; if ( NULL == newtable ) { ( h -> primeindex ) -- ; return 0 ; } for ( e = h -> listHead ; e != NULL ; e = e -> listNext ) { index = indexFor ( newsize , e -> h ) ; e -> hashNext = newtable [ index ] ; newtable [ index ] = e ; } if ( h -> table ) { free ( h -> table ) ; } h -> table = newtable ; h -> tablelength = newsize ; h -> loadlimit = ( ( uint64_t ) newsize * MAX_LOAD_FACTOR_NUMERATOR ) / MAX_LOAD_FACTOR_DENOMINATOR ; return - 1 ; 