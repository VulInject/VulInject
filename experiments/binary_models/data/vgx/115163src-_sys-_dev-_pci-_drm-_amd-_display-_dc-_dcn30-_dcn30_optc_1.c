void optc3_lock_doublebuffer_enable ( struct timing_generator * optc ) { struct optc * optc1 = DCN10TG_FROM_TG ( optc ) ; int v_blank_start = 0 ; uint32_t v_blank_end = 0 ; uint32_t h_blank_start = 0 ; uint32_t h_blank_end = 0 ; REG_GET_2 ( OTG_V_BLANK_START_END , OTG_V_BLANK_START , & v_blank_start , OTG_V_BLANK_END , & v_blank_end ) ; REG_GET_2 ( OTG_H_BLANK_START_END , OTG_H_BLANK_START , & h_blank_start , OTG_H_BLANK_END , & h_blank_end ) ; REG_UPDATE_2 ( OTG_GLOBAL_CONTROL1 , MASTER_UPDATE_LOCK_DB_START_Y , v_blank_start - 1 , MASTER_UPDATE_LOCK_DB_END_Y , v_blank_start ) ; REG_UPDATE_2 ( OTG_GLOBAL_CONTROL4 , DIG_UPDATE_POSITION_X , h_blank_start - 180 - 1 , DIG_UPDATE_POSITION_Y , v_blank_start - 1 ) ; REG_UPDATE_3 ( OTG_GLOBAL_CONTROL0 , MASTER_UPDATE_LOCK_DB_START_X , h_blank_start - 200 - 1 , MASTER_UPDATE_LOCK_DB_END_X , h_blank_start - 180 , MASTER_UPDATE_LOCK_DB_EN , 1 ) ; REG_UPDATE ( OTG_GLOBAL_CONTROL2 , GLOBAL_UPDATE_LOCK_EN , 1 ) ; REG_SET_3 ( OTG_VUPDATE_KEEPOUT , 0 , MASTER_UPDATE_LOCK_VUPDATE_KEEPOUT_START_OFFSET , 0 , MASTER_UPDATE_LOCK_VUPDATE_KEEPOUT_END_OFFSET , 100 , OTG_MASTER_UPDATE_LOCK_VUPDATE_KEEPOUT_EN , 1 ) ; } 