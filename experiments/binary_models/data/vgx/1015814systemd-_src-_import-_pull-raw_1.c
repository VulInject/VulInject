static int raw_pull_job_on_open_disk_generic ( RawPull * i , PullJob * j , const char * extra , char * * temp_path ) { int r ; assert ( i ) ; assert ( j ) ; assert ( extra ) ; assert ( ! FLAGS_SET ( i -> flags , PULL_DIRECT ) ) ; if ( ! * temp_path ) { r = tempfn_random_child ( i -> image_root , extra , temp_path ) ; if ( r < 0 ) { return log_oom ( ) ; } } ( void ) mkdir_parents_label ( * temp_path , 0700 ) ; j -> disk_fd = open ( * temp_path , O_RDWR | O_CREAT | O_EXCL | O_NOCTTY | O_CLOEXEC , 0664 ) ; if ( j -> disk_fd < 0 ) { return log_error_errno ( errno , "Failed to create %s: %m" , * temp_path ) ; } return 0 ; } 