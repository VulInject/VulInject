static int strlisttoarray ( char * str_list , char * * * names , size_t * names_num ) { char * saveptr = NULL ; if ( strstr ( str_list , ",," ) ) { ERROR ( RDT_PLUGIN ": Empty process name" ) ; return - EINVAL ; } for ( ; ; ) { char * token = strtok_r ( str_list , "," , & saveptr ) ; if ( token == NULL ) { break ; } str_list = NULL ; while ( isspace ( * token ) ) { token ++ ; } if ( * token == '\0' ) { continue ; } if ( ( isdupstr ( ( const char * * ) * names , * names_num , token ) ) ) { ERROR ( RDT_PLUGIN ": Duplicated process name \'%s\'" , token ) ; return - EINVAL ; } else { if ( 0 != strarray_add ( names , names_num , token ) ) { ERROR ( RDT_PLUGIN ": Error allocating process name string" ) ; return - ENOMEM ; } } } return 0 ; } 