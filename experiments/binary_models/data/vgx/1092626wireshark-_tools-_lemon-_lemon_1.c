void emit_destructor_code ( FILE * out , struct symbol * sp , struct lemon * lemp , int * lineno ) { char * cp = 0 ; if ( sp -> type == TERMINAL ) { cp = lemp -> tokendest ; fprintf ( out , "{\n" ) ; ( * lineno ) ++ ; } if ( sp -> destructor ) { cp = sp -> destructor ; fprintf ( out , "{\n" ) ; ( * lineno ) ++ ; if ( ! lemp -> nolinenosflag ) { ( * lineno ) ++ ; tplt_linedir ( out , sp -> destLineno , lemp -> filename ) ; } } if ( lemp -> vardest ) { cp = lemp -> vardest ; if ( cp == 0 ) { return ; } fprintf ( out , "{\n" ) ; ( * lineno ) ++ ; } else { assert ( 0 ) ; } for ( ; * cp ; cp ++ ) { if ( * cp == '$' && cp [ 1 ] == '$' ) { fprintf ( out , "(yypminor->yy%d)" , sp -> dtnum ) ; cp ++ ; continue ; } if ( * cp == '\n' ) { ( * lineno ) ++ ; } fputc ( * cp , out ) ; } fprintf ( out , "\n" ) ; ( * lineno ) ++ ; if ( ! lemp -> nolinenosflag ) { ( * lineno ) ++ ; tplt_linedir ( out , * lineno , lemp -> outname ) ; } fprintf ( out , "}\n" ) ; ( * lineno ) ++ ; return ; } 