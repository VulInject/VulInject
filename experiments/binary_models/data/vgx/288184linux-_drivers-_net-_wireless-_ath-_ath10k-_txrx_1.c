static void ath10k_report_offchan_tx ( struct ath10k * ar , struct sk_buff * skb ) { struct ieee80211_tx_info * info = IEEE80211_SKB_CB ( skb ) ; if ( ath10k_mac_tx_frm_has_freq ( ar ) ) { return ; } spin_lock_bh ( & ar -> data_lock ) ; if ( ar -> offchan_tx_skb != skb ) { ath10k_warn ( ar , "completed old offchannel frame\n" ) ; out } complete ( & ar -> offchan_tx_completed ) ; ar -> offchan_tx_skb = NULL ; ath10k_dbg ( ar , ATH10K_DBG_HTT , "completed offchannel skb %pK\n" , skb ) ; out spin_unlock_bh ( & ar -> data_lock ) ; } 