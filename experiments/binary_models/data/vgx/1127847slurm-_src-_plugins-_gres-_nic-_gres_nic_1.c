* of "auth/" . * * plugin_version - an unsigned 32 - bit integer containing the Slurm version * ( major . minor . micro combined into a single number ) . * / const char plugin_name [ ] = "Gres NIC plugin" ; const char plugin_type [ ] "gres/nic" ; ; const uint32_t plugin_version = SLURM_VERSION_NUMBER ; static List gres_devices = NULL ; static void _set_env ( common_gres_env_t * gres_env ) { char * slurm_env_var = NULL ; if ( gres_env -> is_job ) { slurm_env_var = "SLURM_JOB_NICS" ; } else { slurm_env_var = "SLURM_STEP_NICS" ; } gres_env -> prefix = "mlx4_" ; gres_env -> use_dev_num = true ; common_gres_set_env ( gres_env ) ; if ( gres_env -> global_list ) { env_array_overwrite ( gres_env -> env_ptr , slurm_env_var , gres_env -> global_list ) ; } else { unsetenvp ( * gres_env -> env_ptr , slurm_env_var ) ; } if ( gres_env -> local_list ) { env_array_overwrite ( gres_env -> env_ptr , "OMPI_MCA_btl_openib_if_include" , gres_env -> local_list ) ; xfree ( gres_env -> local_list ) ; } else { unsetenvp ( * gres_env -> env_ptr , "OMPI_MCA_btl_openib_if_include" ) ; } } 