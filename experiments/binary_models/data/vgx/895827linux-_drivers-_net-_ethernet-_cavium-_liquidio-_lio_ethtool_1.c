static int lio_send_queue_count_update ( struct net_device * netdev , uint32_t num_queues ) { struct lio * lio = GET_LIO ( netdev ) ; struct octeon_device * oct = lio -> oct_dev ; struct octnic_ctrl_pkt nctrl ; int ret = 0 ; nctrl . ncmd . u64 = 0 ; nctrl . ncmd . s . cmd = OCTNET_CMD_QUEUE_COUNT_CTL ; nctrl . ncmd . s . param1 = num_queues ; nctrl . ncmd . s . param2 = num_queues ; nctrl . iq_no = lio -> linfo . txpciq [ 0 ] . s . q_no ; nctrl . netpndev = ( u64 ) netdev ; nctrl . cb_fn = liquidio_link_ctrl_cmd_completion ; ret = octnet_send_nic_ctrl_pkt ( lio -> oct_dev , & nctrl ) ; if ( ret ) { dev_err ( & oct -> pci_dev -> dev , "Failed to send Queue reset command (ret: 0x%x)\n" , ret ) ; return - 1 ; } return 0 ; } 