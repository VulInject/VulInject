static int ra_smf_cb ( ra_smf_cb_t cbfunc , const char * fmri , void * data ) { scf_handle_t * h ; int exit_status ; if ( ( h = scf_handle_create ( SCF_VERSION ) ) == NULL || scf_handle_bind ( h ) == - 1 ) { ( void ) fprintf ( stderr , gettext ( "%s: cannot connect to SMF repository\n" ) , myname ) ; return ( - 1 ) ; } return ( scf_walk_fmri ( h , fmri == NULL ?0 : 1 , fmri == NULL ?NULL : ( char * * ) & fmri , 0 , cbfunc , data , & exit_status , uu_die ) ) ; } 