get_operands ( , , ) { char * p = s ; int numexp ; int nextchar = ',' ; while ( nextchar == ',' ) { while ( * p == ' ' || * p == '\t' ) { p ++ ; } if ( * p == 0 || * p == '\n' || * p == '\r' ) { break ; } if ( numexp == max_operands ) { as_bad ( _ ( "invalid operands" ) ) ; mmix_discard_rest_of_line ( ) ; return 0 ; } input_line_pointer = p ; expression ( & exp [ numexp ] ) ; if ( exp [ numexp ] . X_op == O_illegal ) { as_bad ( _ ( "invalid operands" ) ) ; } if ( exp [ numexp ] . X_op == O_absent ) { as_bad ( _ ( "missing operand" ) ) ; } numexp ++ ; p = input_line_pointer ; while ( * p == ' ' || * p == '\t' ) { p ++ ; } nextchar = * p ++ ; } if ( nextchar != ',' ) { mmix_handle_rest_of_empty_line ( ) ; input_line_pointer -- ; } exp [ numexp ] . X_op = O_illegal ; return ( numexp ) ; } 