_cairo_gstate_paint ( ) { cairo_pattern_union_t source_pattern ; const cairo_pattern_t * pattern ; cairo_status_t status ; cairo_operator_t op ; status = _cairo_gstate_get_pattern_status ( gstate -> source , NULL ) ; if ( unlikely ( status ) ) { return status ; } if ( gstate -> op == CAIRO_OPERATOR_DEST ) { return CAIRO_STATUS_SUCCESS ; } if ( _cairo_clip_is_all_clipped ( gstate -> clip ) ) { return CAIRO_STATUS_SUCCESS ; } op = _reduce_op ( gstate ) ; if ( op == CAIRO_OPERATOR_CLEAR ) { pattern = & _cairo_pattern_clear . base ; } else { _cairo_gstate_copy_transformed_source ( gstate , & source_pattern . base ) ; pattern = & source_pattern . base ; } return _cairo_surface_paint ( gstate -> target , op , pattern , gstate -> clip ) ; } 