static struct microcode_intel * __load_ucode_intel ( struct ucode_cpu_info * uci ) { static const char * path ; struct cpio_data cp ; bool use_pa ; if ( IS_ENABLED ( CONFIG_X86_32 ) ) { path = ( const char * ) __pa_nodebug ( ucode_path ) ; use_pa = true ; } else { path = ucode_path ; use_pa = false ; } if ( ! load_builtin_intel_microcode ( & cp ) ) { cp = find_microcode_in_initrd ( path , use_pa ) ; } if ( ! ( cp . data && cp . size ) ) { return NULL ; } intel_cpu_collect_info ( uci , NULL ) ; return scan_microcode ( cp . data , cp . size , uci , false ) ; } 