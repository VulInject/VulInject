static bool main_argparse_flag ( MainOptions * mo , char flag ) { mo -> argi ++ ; switch ( flag ) { case '0' : mo -> format = zero ; break ; case 'h' : return showusage ( 2 ) ; case 'o' : mo -> outfile = main_argparse_getarg ( mo ) ; break ; case 'v' : return showversion ( ) ; case 'e' : return base64encode ( ) ; case 'd' : return base64decode ( ) ; case 'j' : mo -> format = json ; if ( mo -> argi >= mo -> argc ) { return jsonIndent ( ) ; } break ; case 'c' : if ( mo -> argc <= 3 ) { return showusage ( 1 ) ; } else { const char * db = main_argparse_getarg ( mo ) ; return showcount ( db ) ; } break ; case 'g' : mo -> grep = main_argparse_getarg ( mo ) ; if ( ! mo -> grep ) { eprintf ( "Missing argument for -g\n" ) ; return false ; } break ; case 'D' : if ( mo -> argi + 1 >= mo -> argc ) { return showusage ( 0 ) ; } mo -> format = diff ; break ; case 'G' : mo -> format = perf ; break ; case 'C' : mo -> format = cgen ; break ; case 't' : mo -> textmode = true ; break ; case 'J' : mo -> options |= SDB_OPTION_JOURNAL ; break ; default : return false ; } return true ; } 