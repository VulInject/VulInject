static void do_view_zone_add ( RES * ssl , struct worker * worker , char * arg ) { char * arg2 ; struct view * v ; if ( ! find_arg2 ( ssl , arg , & arg2 ) ) { return ; } v = views_find_view ( worker -> daemon -> views , arg , 1 ) ; if ( ! v ) { ssl_printf ( ssl , "no view with name: %s\n" , arg ) ; return ; } if ( ! v -> local_zones ) { if ( ! ( v -> local_zones = local_zones_create ( ) ) ) { lock_rw_unlock ( & v -> lock ) ; ssl_printf ( ssl , "error out of memory\n" ) ; return ; } if ( ! v -> isfirst ) { struct config_file lz_cfg ; local_zone_enter_defaults ( v -> local_zones , & lz_cfg ) ; } } do_zone_add ( ssl , v -> local_zones , arg2 ) ; lock_rw_unlock ( & v -> lock ) ; } 