DUK_LOCAL void duk__parse_stmts ( duk_compiler_ctx * comp_ctx , duk_bool_t allow_source_elem , duk_bool_t expect_eof ) { duk_hthread * thr = comp_ctx -> thr ; duk_context * ctx = ( duk_context * ) thr ; duk_ivalue res_alloc ; duk_ivalue * res = & res_alloc ; duk_require_stack ( ctx , DUK__PARSE_STATEMENTS_SLOTS ) ; DUK_MEMZERO ( & res_alloc , sizeof ( res_alloc ) ) ; res -> t = DUK_IVAL_PLAIN ; res -> x1 . t = DUK_ISPEC_VALUE ; res -> x1 . valstack_idx = duk_get_top ( ctx ) ; res -> x2 . valstack_idx = res -> x1 . valstack_idx + 1 ; duk_push_undefined ( ctx , NULL ) ; duk_push_undefined ( ctx ) ; for ( ; ; ) { if ( expect_eof ) { if ( comp_ctx -> curr_token . t == DUK_TOK_EOF ) { break ; } } else { if ( comp_ctx -> curr_token . t == DUK_TOK_RCURLY ) { break ; } } DUK_DDD ( DUK_DDDPRINT ( "TOKEN %ld (non-whitespace, non-comment)" , ( long ) comp_ctx -> curr_token . t ) ) ; duk__parse_stmt ( comp_ctx , res , allow_source_elem ) ; } duk__advance ( comp_ctx ) ; duk_pop_2 ( ctx ) ; } 