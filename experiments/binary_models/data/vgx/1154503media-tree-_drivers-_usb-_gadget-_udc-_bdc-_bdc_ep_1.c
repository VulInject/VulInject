static struct usb_request * bdc_gadget_alloc_request ( struct usb_ep * _ep , gfp_t gfp_flags ) { struct bdc_req * req ; struct bdc_ep * ep ; req = kzalloc ( sizeof ( * req ) , gfp_flags ) ; if ( ! req ) { return in ; } ep = to_bdc_ep ( _ep ) ; req -> ep = ep ; req -> epnum = ep -> ep_num ; req -> usb_req . dma = DMA_ADDR_INVALID ; dev_dbg ( ep -> bdc -> dev , "%s ep:%s req:%p\n" , __func__ , ep -> name , req ) ; return & req -> usb_req ; } 