static void print_msg ( int msgid , int unit ) { struct msg_data * msgdata ; if ( ipc_msg_get_info ( msgid , & msgdata ) < 1 ) { warnx ( _ ( "id %d not found" ) , msgid ) ; return ; } printf ( _ ( "\nMessage Queue msqid=%d\n" ) , msgid ) ; printf ( _ ( "uid=%u\tgid=%u\tcuid=%u\tcgid=%u\tmode=%#o\n" ) , msgdata -> msg_perm . uid , msgdata -> msg_perm . gid , msgdata -> msg_perm . cuid , msgdata -> msg_perm . cgid , msgdata -> msg_perm . mode ) ; ipc_print_size ( unit , unit == IPC_UNIT_HUMAN ?_ ( "csize=" ) : _ ( "cbytes=" ) , msgdata -> q_cbytes , "\t" , 0 ) ; ipc_print_size ( unit , unit == IPC_UNIT_HUMAN ?_ ( "qsize=" ) : _ ( "qbytes=" ) , msgdata -> q_qbytes , "\t" , 0 ) ; printf ( "qnum=%jd\tlspid=%d\tlrpid=%d\n" , msgdata -> q_qnum , msgdata -> q_lspid , msgdata -> q_lrpid ) ; printf ( _ ( "send_time=%-26.24s\n" ) , msgdata -> q_stime ?ctime64 ( & msgdata -> q_stime ) : _ ( "Not set" ) ) ; printf ( _ ( "rcv_time=%-26.24s\n" ) , msgdata -> q_rtime ?ctime64 ( & msgdata -> q_rtime ) : _ ( "Not set" ) ) ; printf ( _ ( "change_time=%-26.24s\n" ) , msgdata -> q_ctime ?ctime64 ( & msgdata -> q_ctime ) : _ ( "Not set" ) ) ; printf ( "\n" ) ; } 