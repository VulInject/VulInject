static int _pcie_intel_fpga_write_config ( struct intel_fpga_pcie * pcie , pci_dev_t bdf , uint offset , ulong value , enum pci_size_t size ) { u32 data ; u8 byte_en ; dev_dbg ( pcie -> dev , "PCIE CFG write: (b.d.f)=(%02d.%02d.%02d)\n" , PCI_BUS ( bdf ) , PCI_DEV ( bdf ) , PCI_FUNC ( bdf ) ) ; dev_dbg ( pcie -> dev , "(addr,size,val)=(0x%04x, %d, 0x%08lx)\n" , offset , size , value ) ; byte_en = pcie_get_byte_en ( offset , size ) ; data = pci_conv_size_to_32 ( 0 , value , offset , size ) ; return tlp_cfg_dword_write ( pcie , bdf , offset & ~ DWORD_MASK , byte_en , data ) ; } 