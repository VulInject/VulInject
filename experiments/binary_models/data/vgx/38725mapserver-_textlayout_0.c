int FUN1(VAR1 *VAR2, VAR3 *VAR4, VAR5 *VAR6) {
text_run VAR7[VAR8];
int VAR9,VAR10, VAR11, VAR12=VAR13;
size_t VAR14;
char *VAR15;
unsigned int VAR16[VAR8];
unsigned int VAR17[VAR8];
FriBidiCharType VAR18[VAR8];
FriBidiLevel VAR19[VAR8];
hb_script_t VAR20[VAR8];
VAR21 *VAR22 = NULL;
struct line_desc VAR23[VAR24];
int VAR25 = 0;
struct VAR26 *VAR27 = NULL;
VAR28 *VAR29;
double VAR30=3455,VAR31,VAR32=0; 
VAR33 *VAR34 = NULL;

TextInfo VAR35;
int VAR36 = 0;

assert(VAR4->VAR37 && *VAR4->VAR37); 

if(VAR2) VAR34 = &VAR2->VAR34;

if(VAR4->VAR38->VAR39 && FUN2(VAR4->VAR38->VAR39,"")) {
iconv_t VAR40;
size_t VAR41, VAR42;
char *VAR43,*VAR44;
VAR41 = strlen(VAR4->VAR37);
VAR42 = VAR41*6;
VAR43 = FUN3(VAR42+1);
VAR40 = FUN4("", VAR4->VAR38->VAR39);

if(VAR40 == (VAR45)-1) {
FUN5(VAR46, "",
"", VAR4->VAR38->VAR39);
return VAR47;
}

VAR15 = VAR4->VAR37;
VAR44 = VAR43;

while(VAR41>0) {
const size_t VAR48 = FUN6(VAR40, &VAR15, &VAR41, &VAR44, &VAR42);
if(VAR48 == (VAR49)-1) {
break;
}
}

VAR14 = VAR44 - VAR43;
VAR43[VAR14] = 0;
free(VAR4->VAR37);
VAR4->VAR37 = VAR43;
FUN7(VAR40);
} else
{
VAR14 = strlen(VAR4->VAR37);
}

if( VAR14 == 0 )
return 0;

if(VAR14 > VAR8) {
VAR35.VAR50 = FUN3(VAR14 * sizeof(VAR51));
VAR35.VAR52 = FUN3(VAR14 * sizeof(VAR53));
VAR35.VAR54 = FUN3(VAR14 * sizeof(unsigned int));
VAR35.VAR55 = FUN3(VAR14 * sizeof(unsigned int));
VAR35.VAR56 = FUN3(VAR14 * sizeof(VAR57));
VAR29 = FUN3(VAR14 * sizeof(VAR28));
} else {
VAR35.VAR50 = VAR19;
VAR35.VAR52 = VAR18;
VAR35.VAR54 = VAR16;
VAR35.VAR55 = VAR17;
VAR35.VAR56 = VAR20;
VAR29 = VAR7;
}


VAR15 = VAR4->VAR37;
while(*VAR15) {
unsigned int VAR58;
VAR15 += FUN8(VAR15, &VAR58);
if(!FUN9(VAR58)){
VAR35.VAR54[VAR36++] = VAR58;
}
}

if(VAR4->VAR38->VAR59 || VAR4->VAR38->VAR60 > 0) {
if(VAR4->VAR38->VAR59 && VAR4->VAR38->VAR60 == 0) {
for(VAR9=0;VAR9<VAR36;VAR9++) {

if(VAR35.VAR54[VAR9]== (unsigned)VAR4->VAR38->VAR59)
VAR35.VAR54[VAR9]= '';
}
} else {
assert(VAR4->VAR38->VAR60 > 0);
if(VAR36 > VAR4->VAR38->VAR60) {
int VAR61 = 0; 
for(VAR9=0; VAR9<VAR36; VAR9++) {

if((VAR35.VAR54[VAR9] == (unsigned)VAR4->VAR38->VAR59 || VAR35.VAR54[VAR9] == (unsigned)0x200b)
&& VAR61 >= VAR4->VAR38->VAR60) {
VAR35.VAR54[VAR9]= '';
VAR61 = 0;
} else {
VAR61++;
}
}
}
}

}


VAR10 = 0;
VAR11 = 0;
VAR29[0].VAR62 = 0;
VAR29[0].VAR63 = 0;
for(VAR9=0; VAR9<VAR36; VAR9++) {
if(VAR35.VAR54[VAR9]!= '') continue;
VAR29[VAR10].VAR64 = VAR9 - VAR11; 
VAR11 = VAR9+1; 
VAR29[VAR10+1].VAR63 = VAR29[VAR10].VAR63+1;
VAR29[VAR10+1].VAR62 = VAR11;
VAR10++;
}

if(VAR35.VAR54[VAR36-1]!= '') {
VAR29[VAR10].VAR64 = VAR36 - VAR11;
VAR10++;
}

if(VAR29[VAR10-1].VAR63+1 > VAR24) {
VAR27 = FUN3((VAR29[VAR10-1].VAR63 + 1)*sizeof(struct VAR26));
} else {
VAR27 = VAR23;
}

for(VAR9=0;VAR9<VAR10;VAR9++) {

if(FUN10(VAR35.VAR54 + VAR29[VAR9].VAR62, VAR29[VAR9].VAR64)) {
VAR29[VAR9].VAR65 = -1;
VAR27[VAR9].VAR65 = VAR66;
} else {
VAR29[VAR9].VAR65 = 0;
}
}

for(VAR9=0; VAR9<VAR10; VAR9++) {

if(VAR29[VAR9].VAR65 >= 0) {
int VAR67, VAR68, VAR69, VAR70;
FriBidiLevel VAR71;
FriBidiParType VAR72 = VAR73;
VAR70 = VAR68 = VAR29[VAR9].VAR62;
VAR69 = VAR29[VAR9].VAR64;
FUN11(VAR35.VAR54 + VAR70, VAR29[VAR9].VAR64, VAR35.VAR52 + VAR70);
{
FriBidiLevel VAR74 = FUN12(VAR35.VAR52 + VAR70, VAR29[VAR9].VAR64, &VAR72, VAR35.VAR50 + VAR29[VAR9].VAR62);
(void)VAR74;
}

VAR29[VAR9].VAR65 = VAR71 = VAR35.VAR50[VAR70];
VAR27[VAR29[VAR9].VAR63].VAR65 = (VAR71%2) ? VAR75:VAR66;
for(VAR67=1; VAR67<VAR69; VAR67++) {
if(VAR35.VAR50[VAR70+VAR67] != VAR71) {
VAR27[VAR29[VAR9].VAR63].VAR65 = VAR76;

VAR10++;


memmove(VAR29+VAR9+2,VAR29+VAR9+1,(VAR10-VAR9-2)*sizeof(VAR28));

VAR9++;

VAR29[VAR9].VAR63 = VAR29[VAR9-1].VAR63;
VAR29[VAR9].VAR62 = VAR70 + VAR67;
VAR29[VAR9].VAR64 = (VAR29[VAR9-1].VAR62 + VAR29[VAR9-1].VAR64) - VAR29[VAR9].VAR62;
VAR29[VAR9-1].VAR64 = VAR29[VAR9].VAR62 - VAR29[VAR9-1].VAR62;



VAR29[VAR9].VAR65 = VAR71 = VAR35.VAR50[VAR70+VAR67];
}
}
}
}
for(VAR9=0;VAR9<VAR10;VAR9++) {
VAR27[VAR9].VAR65 = VAR66;
}


for(VAR9=0; VAR9<VAR10; VAR9++) {
if(VAR29[VAR9].VAR65 == -1) {
VAR29[VAR9].VAR77 = VAR78;
continue; 
} else {
int VAR67, VAR68, VAR69, VAR70;
hb_script_t VAR79;
VAR70 = VAR68 = VAR29[VAR9].VAR62;
VAR69 = VAR29[VAR9].VAR64;
FUN13(VAR35.VAR54 + VAR70, VAR29[VAR9].VAR64, VAR35.VAR56 + VAR70);

VAR29[VAR9].VAR77 = VAR79 = VAR35.VAR56[VAR70];
for(VAR67=1; VAR67<VAR69; VAR67++) {
if(VAR35.VAR56[VAR70+VAR67] != VAR79) {

VAR10++;


memmove(VAR29+VAR9+2,VAR29+VAR9+1,(VAR10-VAR9-2)*sizeof(VAR28));

VAR9++;

VAR29[VAR9].VAR63 = VAR29[VAR9-1].VAR63;
VAR29[VAR9].VAR65 = VAR29[VAR9-1].VAR65;
VAR29[VAR9].VAR62 = VAR70 + VAR67;
VAR29[VAR9].VAR64 = (VAR29[VAR9-1].VAR62 + VAR29[VAR9-1].VAR64) - VAR29[VAR9].VAR62;
VAR29[VAR9-1].VAR64 = VAR29[VAR9].VAR62 - VAR29[VAR9-1].VAR62;


VAR29[VAR9].VAR77 = VAR79 = VAR35.VAR56[VAR70+VAR67];
}
}
}
}

for(VAR9=0; VAR9<VAR10; VAR9++) {
VAR12 = FUN14(VAR34, VAR4->VAR38->VAR80, VAR29+VAR9, &VAR35);
if(FUN15(VAR12 == VAR47))
goto VAR81;
}




VAR6->VAR82 = VAR29[VAR10-1].VAR63 + 1;
VAR6->VAR83.VAR84.VAR85 = 0;
VAR6->VAR83.VAR84.VAR86 = VAR87;
VAR6->VAR83.VAR84.VAR88 = VAR6->VAR83.VAR84.VAR89 = -VAR87;


for(VAR9=0;VAR9<VAR10;VAR9++) {
if(!VAR29[VAR9].VAR90) continue;
VAR31 = (1 - VAR6->VAR82 + VAR29[VAR9].VAR63) * VAR6->VAR91;
if(VAR31 != VAR30) {
if(VAR9>0) VAR27[VAR29[VAR9-1].VAR63].VAR64 = VAR32;
if(VAR32 > VAR6->VAR83.VAR84.VAR88)
VAR6->VAR83.VAR84.VAR88 = VAR32;
VAR30 = VAR31;
VAR32 = 0;
}
if(VAR29[VAR9].VAR65 == -1 || VAR29[VAR9].VAR77 == VAR78 || VAR29[VAR9].VAR77 == VAR92)
{

unsigned int *VAR93 = VAR35.VAR55 + VAR29[VAR9].VAR62;
VAR25 += VAR29[VAR9].VAR64;
VAR6->VAR35 = FUN16(VAR6->VAR35, VAR25 * sizeof(VAR94));
for(int VAR67=0;VAR67<VAR29[VAR9].VAR64;VAR67++) {
VAR94 *VAR95 = &VAR6->VAR35[VAR6->VAR96 + VAR67];
VAR95->VAR97 = FUN17(VAR29[VAR9].VAR90,VAR6->VAR98, *VAR93);
VAR95->VAR90 = VAR29[VAR9].VAR90;
VAR93++;
VAR95->VAR99.VAR100 = VAR32;
VAR95->VAR99.VAR101 = VAR31;
VAR95->VAR102 = 0.0;
VAR32 += VAR95->VAR97->VAR103.VAR104;
if(VAR29[VAR9].VAR63 == 0 && VAR31 - VAR95->VAR97->VAR103.VAR89 < VAR6->VAR83.VAR84.VAR86) 
VAR6->VAR83.VAR84.VAR86 = VAR31 - VAR95->VAR97->VAR103.VAR89;
if(VAR31 - VAR95->VAR97->VAR103.VAR86 > VAR6->VAR83.VAR84.VAR89)
VAR6->VAR83.VAR84.VAR89 = VAR31 - VAR95->VAR97->VAR103.VAR86;
}
} else {
struct _ms_hb_user_data VAR105;
VAR106 *VAR80;
VAR107 *VAR108;
VAR109 *VAR110;
if(!VAR22) {
VAR22 = FUN18();
}
VAR105.VAR111 = &VAR35;
VAR105.VAR112 = VAR29 + VAR9;
VAR105.VAR98 = VAR6->VAR98;
FUN19(VAR22);
FUN20 (VAR22, VAR29[VAR9].VAR77);
VAR80 = FUN21(&VAR105);
FUN22(VAR22, (VAR29[VAR9].VAR65%2) ? VAR113 :VAR114);
FUN23(VAR22,VAR35.VAR54 + VAR29[VAR9].VAR62, VAR29[VAR9].VAR64, 0, VAR29[VAR9].VAR64);
FUN24(VAR80,VAR22,VAR115,2);

unsigned int VAR116;
VAR108 = FUN25(VAR22, &VAR116);
VAR110 = FUN26(VAR22, &VAR116);
VAR25 += VAR116;
VAR6->VAR35 = FUN16(VAR6->VAR35, VAR25 * sizeof(VAR94));
for(unsigned VAR67=0;VAR67<VAR116;VAR67++) {
VAR94 *VAR95 = &VAR6->VAR35[VAR6->VAR96 + VAR67];
VAR95->VAR97 = FUN17(VAR29[VAR9].VAR90,VAR6->VAR98,VAR108[VAR67].VAR93);
VAR95->VAR90 = VAR29[VAR9].VAR90;
VAR95->VAR99.VAR100 = VAR32 + VAR110[VAR67].VAR117/64;
VAR95->VAR99.VAR101 = VAR31 - VAR110[VAR67].VAR118/64;
VAR95->VAR102 = 0;
VAR32 += VAR110[VAR67].VAR119/64.0;

if(VAR29[VAR9].VAR63 == 0 && VAR31 - VAR95->VAR97->VAR103.VAR89 < VAR6->VAR83.VAR84.VAR86) 
VAR6->VAR83.VAR84.VAR86 = VAR31 - VAR95->VAR97->VAR103.VAR89;
if(VAR31 - VAR95->VAR97->VAR103.VAR86 > VAR6->VAR83.VAR84.VAR89)
VAR6->VAR83.VAR84.VAR89 = VAR31 - VAR95->VAR97->VAR103.VAR86;
}
}
VAR6->VAR96 = VAR25;
VAR27[VAR29[VAR10-1].VAR63].VAR64 = VAR32;
if(VAR32 > VAR6->VAR83.VAR84.VAR88)
VAR6->VAR83.VAR84.VAR88 = VAR32;
}

if(VAR22) {
FUN27(VAR22);
}

if(VAR6->VAR82 > 1) {
int VAR120 = 0;
int VAR121 = -1;
double VAR122 = 0;
int VAR123 = VAR124; 
int VAR125 = 0;
for(VAR9=0; VAR9<VAR6->VAR82; VAR9++) {
if(VAR27[VAR9].VAR64 > VAR120) {
VAR120 = VAR27[VAR9].VAR64;
}
}
VAR30 = 3455;
for(VAR9=0; VAR9<VAR25; VAR9++) {
if(VAR6->VAR35[VAR9].VAR99.VAR101 != VAR30) {
VAR30 = VAR6->VAR35[VAR9].VAR99.VAR101;
VAR121++;

switch(VAR4->VAR38->VAR126) {
case VAR127:
VAR122 = (VAR120 - VAR27[VAR121].VAR64)/2.0;
break;
case VAR128:
VAR122 = (VAR120 - VAR27[VAR121].VAR64);
break;
case VAR124:
VAR122 = 0;
break;
case VAR129:
default:
switch(VAR27[VAR121].VAR65) {
case VAR76:
VAR125 = VAR123;
break;
case VAR75:
VAR125 = VAR123 = VAR75;
break;
case VAR66:
VAR125 = VAR123 = VAR66;
break;
}
switch(VAR125) {
case VAR75:

VAR122 = (VAR120 - VAR27[VAR121].VAR64);
break;
case VAR66:
VAR122 = 0;
break;
}
}
}
VAR6->VAR35[VAR9].VAR99.VAR100 += VAR122;
}
}


VAR81:
if(VAR27 != VAR23) free(VAR27);
if(VAR35.VAR55 != VAR17) {
free(VAR35.VAR50);
free(VAR35.VAR52);
free(VAR35.VAR55);
free(VAR35.VAR56);
free(VAR35.VAR54);
free(VAR29);
}
return VAR12;


}