int snd_emu1010_fpga_write ( struct snd_emu10k1 * emu , u32 reg , u32 value ) { unsigned long flags ; reg += 0x40 ; if ( value > 0x3f ) { return 1 ; } spin_lock_irqsave ( & emu -> emu_lock , flags ) ; outl ( reg , emu -> port + A_IOCFG ) ; udelay ( 10 ) ; outl ( reg | 0x80 , emu -> port + A_IOCFG ) ; udelay ( 10 ) ; outl ( value , emu -> port + A_IOCFG ) ; udelay ( 10 ) ; outl ( value | 0x80 , emu -> port + A_IOCFG ) ; spin_unlock_irqrestore ( & emu -> emu_lock , flags ) ; return 0 ; } 