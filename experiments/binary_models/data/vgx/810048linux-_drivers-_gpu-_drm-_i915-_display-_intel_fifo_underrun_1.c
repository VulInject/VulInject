static void ivb_set_fifo_underrun_reporting ( struct drm_device * dev , enum pipe pipe , bool enable , bool old ) { struct drm_i915_private * dev_priv = to_i915 ( dev ) ; if ( enable ) { intel_de_write ( dev_priv , GEN7_ERR_INT , ERR_INT_FIFO_UNDERRUN ( pipe ) ) ; ilk_enable_display_irq ( dev_priv , DE_ERR_INT_IVB ) ; } else { ilk_disable_display_irq ( dev_priv , DE_ERR_INT_IVB ) ; if ( old && intel_de_read ( dev_priv , GEN7_ERR_INT ) & ERR_INT_FIFO_UNDERRUN ( pipe ) ) { drm_err ( & dev_priv -> drm , "uncleared fifo underrun on pipe %c\n" , pipe_name ( pipe ) ) ; } } } 