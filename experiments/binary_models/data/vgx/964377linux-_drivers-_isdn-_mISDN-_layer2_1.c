static void l2up_create ( struct layer2 * l2 , u_int prim , int len , void * arg ) { struct sk_buff * skb ; struct mISDNhead * hh ; int err ; if ( ! l2 -> up ) { return ; } skb = mI_alloc_skb ( len , GFP_ATOMIC ) ; if ( ! skb ) { return ; } hh = mISDN_HEAD_P ( skb ) ; hh -> prim = prim ; hh -> id = ( l2 -> ch . nr << 16 ) | l2 -> ch . addr ; if ( len ) { skb_put_data ( skb , arg , len ) ; } err = l2 -> up -> send ( l2 -> up , skb ) ; if ( err ) { printk ( KERN_WARNING "%s: dev %s err=%d\n" , __func__ , mISDNDevName4ch ( & l2 -> ch ) , err ) ; } } 