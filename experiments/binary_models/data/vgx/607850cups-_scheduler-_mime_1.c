void mimeDeleteFilter ( mime_t * mime , mime_filter_t * filter ) { DEBUG_printf ( ( "mimeDeleteFilter(mime=%p, filter=%p(%s/%s->%s/%s, cost=%d, " "maxsize=" CUPS_LLFMT "))" , mime , filter , filter ?filter -> src -> super : "???" , filter ?filter -> src -> type : "???" , filter ?filter -> dst -> super : "???" , filter ?filter -> dst -> super : "???" , filter ?filter -> cost : - 1 , filter ?CUPS_LLCAST filter -> maxsize : CUPS_LLCAST - 1 ) ) ; if ( ! cupsArrayFind ( mime -> filters , filter ) ) { DEBUG_puts ( "1mimeDeleteFilter: Filter not in MIME database." ) ; } cupsArrayRemove ( mime -> filters , filter ) ; free ( filter ) ; if ( mime -> srcs ) { DEBUG_puts ( "1mimeDeleteFilter: Deleting source lookup cache." ) ; cupsArrayDelete ( mime -> srcs ) ; mime -> srcs = NULL ; } } 