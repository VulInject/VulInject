static int snd_rme9652_put_sync_pref ( struct snd_kcontrol * kcontrol , struct snd_ctl_elem_value * ucontrol ) { struct snd_rme9652 * rme9652 = snd_kcontrol_chip ( kcontrol ) ; int change , max ; unsigned int val ; max = rme9652 -> ss_channels == RME9652_NCHANNELS ?4 : 3 ; val = ucontrol -> value . enumerated . item [ 0 ] % max ; spin_lock_irq ( & rme9652 -> lock ) ; change = ( int ) val != rme9652_sync_pref ( rme9652 ) ; rme9652_set_sync_pref ( rme9652 , val ) ; spin_unlock_irq ( & rme9652 -> lock ) ; return change ; } 