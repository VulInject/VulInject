static void lb_bpf_func_free ( struct team * team ) { struct lb_priv * lb_priv = get_lb_priv ( team ) ; struct bpf_prog * fp ; if ( ! lb_priv -> ex -> orig_fprog ) { return ; } fp = rcu_dereference_protected ( lb_priv -> fp , lockdep_is_held ( & team -> lock ) ) ; bpf_prog_destroy ( fp ) ; } 