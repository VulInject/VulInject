static int read_scoreboard_header ( pr_scoreboard_header_t * header ) { int res = 0 ; while ( ( res = read ( util_scoreboard_fd , & util_header , sizeof ( pr_scoreboard_header_t ) ) ) != sizeof ( pr_scoreboard_header_t ) ) { if ( res == 0 ) { return - 1 ; } if ( errno == EINTR ) { continue ; } return - 1 ; } if ( header -> sch_magic != UTIL_SCOREBOARD_MAGIC ) { return UTIL_SCORE_ERR_BAD_MAGIC ; } if ( header -> sch_version > UTIL_SCOREBOARD_VERSION ) { return UTIL_SCORE_ERR_NEWER_VERSION ; } return 0 ; } 