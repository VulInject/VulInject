extern buf_t * jobcomp_common_load_state_file ( char * state_file ) { char * absolute_file = NULL ; buf_t * buf ; xassert ( state_file ) ; xstrfmtcat ( absolute_file , "%s/%s" , slurm_conf . state_save_location , state_file ) ; if ( ( buf = create_mmap_buf ( absolute_file ) ) ) { return buf ; } error ( "Could not open jobcomp state file %s: %m" , absolute_file ) ; error ( "NOTE: Trying backup jobcomp state save file. Finished jobs may be lost!" ) ; xstrcat ( absolute_file , ".old" ) ; if ( ! ( buf = create_mmap_buf ( absolute_file ) ) ) { error ( "Could not open backup jobcomp state file %s: %m" , absolute_file ) ; } xfree ( absolute_file ) ; return buf ; } 