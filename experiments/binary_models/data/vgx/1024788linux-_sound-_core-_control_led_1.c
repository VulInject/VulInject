static void snd_ctl_led_register ( struct snd_card * card ) { struct snd_kcontrol * kctl ; int ioff ; if ( snd_BUG_ON ( card -> number < 0 || card -> number >= ARRAY_SIZE ( snd_ctl_led_card_valid ) ) ) { return ; } mutex_lock ( & snd_ctl_led_mutex ) ; snd_ctl_led_card_valid [ card -> number ] = true ; mutex_unlock ( & snd_ctl_led_mutex ) ; list_for_each_entry ( , , ) for ( ioff = 0 ; ioff < kctl -> count ; ioff ++ ) { snd_ctl_led_notify ( card , SNDRV_CTL_EVENT_MASK_VALUE , kctl , ioff ) ; } snd_ctl_led_refresh ( ) ; snd_ctl_led_sysfs_add ( card ) ; } 