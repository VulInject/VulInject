static void clear_out_old_conf ( void ) { struct Class * cltmp ; rb_dlink_node * ptr ; rb_dlink_node * next_ptr ; RB_DLINK_FOREACH ( , ) { cltmp = ptr -> data ; MaxUsers ( cltmp ) = - 1 ; } clear_out_address_conf ( ) ; clear_s_newconf ( ) ; mod_clear_paths ( ) ; mod_add_path ( MODULE_DIR ) ; mod_add_path ( MODULE_DIR "/autoload" ) ; rb_free ( ServerInfo . description ) ; ServerInfo . description = NULL ; rb_free ( ServerInfo . network_name ) ; ServerInfo . network_name = NULL ; ServerInfo . ssld_count = 1 ; rb_free ( AdminInfo . name ) ; AdminInfo . name = NULL ; rb_free ( AdminInfo . email ) ; AdminInfo . email = NULL ; rb_free ( AdminInfo . description ) ; AdminInfo . description = NULL ; close_listeners ( ) ; rb_free ( ConfigFileEntry . default_operstring ) ; ConfigFileEntry . default_operstring = NULL ; rb_free ( ConfigFileEntry . default_adminstring ) ; ConfigFileEntry . default_adminstring = NULL ; rb_free ( ConfigFileEntry . servicestring ) ; ConfigFileEntry . servicestring = NULL ; rb_free ( ConfigFileEntry . kline_reason ) ; ConfigFileEntry . kline_reason = NULL ; rb_free ( ConfigFileEntry . sasl_service ) ; ConfigFileEntry . sasl_service = NULL ; ConfigFileEntry . fname_userlog = NULL ; rb_free ( ConfigFileEntry . fname_fuserlog ) ; ConfigFileEntry . fname_fuserlog = NULL ; rb_free ( ConfigFileEntry . fname_operlog ) ; ConfigFileEntry . fname_operlog = NULL ; rb_free ( ConfigFileEntry . fname_foperlog ) ; ConfigFileEntry . fname_foperlog = NULL ; rb_free ( ConfigFileEntry . fname_serverlog ) ; ConfigFileEntry . fname_serverlog = NULL ; rb_free ( ConfigFileEntry . fname_killlog ) ; ConfigFileEntry . fname_killlog = NULL ; rb_free ( ConfigFileEntry . fname_klinelog ) ; ConfigFileEntry . fname_klinelog = NULL ; rb_free ( ConfigFileEntry . fname_operspylog ) ; ConfigFileEntry . fname_operspylog = NULL ; rb_free ( ConfigFileEntry . fname_ioerrorlog ) ; ConfigFileEntry . fname_ioerrorlog = NULL ; RB_DLINK_FOREACH_SAFE ( , , ) { rb_free ( ptr -> data ) ; rb_dlinkDestroy ( ptr , & service_list ) ; } if ( alias_dict != NULL ) { rb_dictionary_destroy ( alias_dict , free_alias_cb , NULL ) ; alias_dict = NULL ; } del_dnsbl_entry_all ( ) ; privilegeset_mark_all_illegal ( ) ; } 