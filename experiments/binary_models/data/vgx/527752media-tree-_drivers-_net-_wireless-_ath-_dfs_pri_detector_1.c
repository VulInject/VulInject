struct pri_detector * pri_detector_init ( const struct radar_detector_specs * rs ) { struct pri_detector * de ; de = kzalloc ( sizeof ( * de ) , GFP_ATOMIC ) ; de -> exit = pri_detector_exit ; de -> add_pulse = pri_detector_add_pulse ; de -> reset = pri_detector_reset ; INIT_LIST_HEAD ( & de -> sequences ) ; INIT_LIST_HEAD ( & de -> pulses ) ; de -> window_size = rs -> pri_max * rs -> ppb * rs -> num_pri ; de -> max_count = rs -> ppb * 2 ; de -> rs = rs ; pool_register_ref ( ) ; return de ; } 