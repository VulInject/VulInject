MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE . See the GNU General Public License ; for if , write to the Free Software Foundation , Inc . , Franklin Street , Fifth Floor , Boston , MA USA . * void irc_core_init ( void ) ; void irc_core_deinit ( void ) void irc_session_init ( void ) void irc_session_deinit ( void ) void fe_common_irc_init ( void ) void fe_common_irc_deinit ( void ) SERVER_REC * server ; void event_connected ( IRC_SERVER_REC * server , const char * data , const char * from ) { char * params , * nick ; g_return_if_fail ( server != NULL ) ; params = event_get_params ( data , 1 , & nick ) ; if ( g_strcmp0 ( server -> nick , nick ) != 0 ) { server -> nick = g_strdup ( nick ) ; } g_free ( server -> real_address ) ; server -> real_address = from == NULL ?g_strdup ( server -> connrec -> address ) : g_strdup ( from ) ; server -> connected = 1 ; server -> real_connect_time = time ( NULL ) ; g_get_current_time ( & server -> wait_cmd ) ; if ( server -> connrec -> usermode != NULL ) { irc_send_cmdv ( server , "MODE %s %s" , server -> nick , server -> connrec -> usermode ) ; g_free_not_null ( server -> wanted_usermode ) ; server -> wanted_usermode = g_strdup ( server -> connrec -> usermode ) ; } signal_emit ( "event connected" , 1 , server ) ; g_free ( params ) ; } 