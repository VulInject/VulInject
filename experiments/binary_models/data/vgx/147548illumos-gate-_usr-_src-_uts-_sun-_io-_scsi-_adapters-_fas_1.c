static int fas_handle_msg_in_start ( struct fas * fas ) { TRACE_0 ( TR_FAC_SCSI_FAS , TR_FAS_HANDLE_MSG_IN_START , "fas_handle_msg_in_start" ) ; EPRINTF ( "fas_handle_msg_in_start\n" ) ; if ( ! FIFO_EMPTY ( fas ) ) { fas_reg_cmd_write ( fas , CMD_FLUSH ) ; } fas_reg_cmd_write ( fas , CMD_TRAN_INFO ) ; fas -> f_imsgindex = 0 ; New_state ( fas , ACTS_MSG_IN_DONE ) ; TRACE_0 ( TR_FAC_SCSI_FAS , TR_FAS_HANDLE_MSG_IN_END , "fas_handle_msg_in_end (ACTION_PHASEMANAGE)" ) ; return ( ACTION_PHASEMANAGE ) ; } 