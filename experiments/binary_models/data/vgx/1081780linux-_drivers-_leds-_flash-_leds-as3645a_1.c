static void as3645a_remove ( struct i2c_client * client ) { struct as3645a * flash = i2c_get_clientdata ( client ) ; as3645a_set_control ( flash , AS_MODE_EXT_TORCH , false ) ; v4l2_flash_release ( flash -> vf ) ; v4l2_flash_release ( flash -> vfind ) ; led_classdev_flash_unregister ( & flash -> fled ) ; led_classdev_unregister ( & flash -> iled_cdev ) ; mutex_destroy ( & flash -> mutex ) ; fwnode_handle_put ( flash -> flash_node ) ; fwnode_handle_put ( flash -> indicator_node , NULL ) ; } 