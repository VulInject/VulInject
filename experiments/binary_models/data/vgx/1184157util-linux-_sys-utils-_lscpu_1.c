static void lscpu_context_init_paths ( struct lscpu_cxt * cxt ) { DBG ( MISC , ul_debugobj ( cxt , "initialize paths" ) ) ; ul_path_init_debug ( ) ; if ( cxt -> prefix ) { cxt -> rootfs = ul_new_path ( "/" ) ; if ( ! cxt -> rootfs ) { err ( EXIT_FAILURE , _ ( "failed to initialize rootfs handler" ) ) ; } ul_path_set_prefix ( cxt -> rootfs , cxt -> prefix ) ; } cxt -> syscpu = ul_new_path ( _PATH_SYS_CPU ) ; if ( ! cxt -> syscpu ) { err ( EXIT_FAILURE , _ ( "failed to initialize CPUs sysfs handler" ) ) ; } if ( cxt -> prefix ) { ul_path_set_prefix ( cxt -> syscpu , cxt -> prefix ) ; } cxt -> procfs = ul_new_path ( "/proc" ) ; if ( ! cxt -> procfs ) { err ( EXIT_FAILURE , _ ( "failed to initialize procfs handler" ) ) ; } if ( cxt -> prefix ) { ul_path_set_prefix ( cxt -> procfs , cxt -> prefix ) ; } } 