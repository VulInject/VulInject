static void get_ppp_stats ( struct ppp_stats * curp ) { struct ifreq req ; req . ifr_data = ( caddr_t ) curp ; strncpy ( req . ifr_name , interface , IFNAMSIZ ) ; req . ifr_name [ IFNAMSIZ - 1 ] = 0 ; if ( ioctl ( s , SIOCGPPPSTATS , & req ) < 0 ) { fprintf ( stderr , "%s: " , progname ) ; if ( errno == ENOTTY ) { fprintf ( stderr , "kernel support missing\n" ) ; } else { perror ( "couldn't get PPP statistics" ) ; } exit ( 1 ) ; } } 