static enum rtw89_ps_mode rtw89_update_ps_mode ( struct rtw89_dev * rtwdev ) { const struct rtw89_chip_info * chip = rtwdev -> chip ; if ( rtw89_disable_ps_mode || ! chip -> ps_mode_supported || RTW89_CHK_FW_FEATURE ( NO_DEEP_PS , & rtwdev -> fw ) ) { return RTW89_PS_MODE_NONE ; } if ( chip -> ps_mode_supported & BIT ( RTW89_PS_MODE_CLK_GATED ) ) { return RTW89_PS_MODE_CLK_GATED ; } if ( chip -> ps_mode_supported & BIT ( RTW89_PS_MODE_RFOFF ) ) { return RTW89_PS_MODE_RFOFF ; } return RTW89_PS_MODE_NONE ; } 