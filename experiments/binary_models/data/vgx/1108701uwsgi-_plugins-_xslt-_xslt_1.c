static int uwsgi_routing_func_toxslt ( struct wsgi_request * wsgi_req , struct uwsgi_route * ur ) { struct uwsgi_router_xslt_conf * urxc = ( uwsgi_router_xslt_conf * ) ur -> data2 ; struct uwsgi_transformation_xslt_conf * utxc = uwsgi_calloc ( sizeof ( uwsgi_transformation_xslt_conf ) ) ; char * * subject = ( char * * ) ( ( ( char * ) ( wsgi_req ) ) + ur -> subject ) ; uint16_t * subject_len = ( uint16_t * ) ( ( ( char * ) ( wsgi_req ) ) + ur -> subject_len ) ; utxc -> stylesheet = uwsgi_routing_translate ( wsgi_req , ur , * subject , * subject_len , urxc -> stylesheet , urxc -> stylesheet_len ) ; if ( ! utxc -> stylesheet ) { end } if ( urxc -> params ) { utxc -> params = uwsgi_routing_translate ( wsgi_req , ur , * subject , * subject_len , urxc -> params , urxc -> params_len ) ; if ( ! utxc -> params ) { end } } if ( urxc -> content_type ) { utxc -> content_type = uwsgi_routing_translate ( wsgi_req , ur , * subject , * subject_len , urxc -> content_type , urxc -> content_type_len ) ; if ( ! utxc -> content_type ) { end } } uwsgi_add_transformation ( wsgi_req , transform_toxslt , utxc ) ; return UWSGI_ROUTE_NEXT ; end if ( utxc -> stylesheet ) { uwsgi_buffer_destroy ( utxc -> stylesheet ) ; } if ( utxc -> params ) { uwsgi_buffer_destroy ( utxc -> params ) ; } if ( utxc -> content_type ) { uwsgi_buffer_destroy ( utxc -> content_type ) ; } return UWSGI_ROUTE_BREAK ; } 