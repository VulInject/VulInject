int list_get ( RedisModuleCtx * ctx , RedisModuleString * * argv , int argc ) { if ( argc != 3 ) { return RedisModule_WrongArity ( ctx ) ; } long long index ; if ( RedisModule_StringToLongLong ( argv [ 2 ] , & index ) != REDISMODULE_OK ) { return RedisModule_ReplyWithError ( ctx , "ERR index must be a number" ) ; } RedisModuleKey * key = RedisModule_OpenKey ( ctx , argv [ 1 ] , REDISMODULE_READ ) ; RedisModuleString * value = RedisModule_ListGet ( key , index ) ; if ( value ) { RedisModule_ReplyWithString ( ctx , value ) ; RedisModule_FreeString ( ctx , value ) ; } else { replyByErrno ( ctx ) ; } RedisModule_CloseKey ( key , NULL ) ; return REDISMODULE_OK ; } 