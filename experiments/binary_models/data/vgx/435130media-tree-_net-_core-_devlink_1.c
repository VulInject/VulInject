static int devlink_port_type_set ( struct devlink * devlink , struct devlink_port * devlink_port , enum devlink_port_type port_type ) { int err ; if ( devlink -> ops && devlink -> ops -> port_type_set ) { if ( port_type == devlink_port -> type ) { return 0 ; } err = devlink -> ops -> port_type_set ( devlink_port , port_type ) ; if ( err ) { return err ; } devlink_port -> desired_type = port_type ; devlink_port_notify ( devlink_port , DEVLINK_CMD_PORT_NEW ) ; return 0 ; } return - EOPNOTSUPP ; } 