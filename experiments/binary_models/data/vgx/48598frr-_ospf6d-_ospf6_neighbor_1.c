struct ospf6_neighbor * ospf6_neighbor_create ( uint32_t router_id , struct ospf6_interface * oi ) { struct ospf6_neighbor * on ; char buf [ 16 ] ; int type ; on = XCALLOC ( MTYPE_OSPF6_NEIGHBOR , sizeof ( ospf6_neighbor ) ) ; inet_ntop ( AF_INET , & router_id , buf , sizeof ( buf ) ) ; sprintf ( on -> name , "%s%%%s" , buf , oi -> interface -> name ) ; on -> ospf6_if = oi ; on -> state = OSPF6_NEIGHBOR_DOWN ; on -> state_change = 0 ; monotime ( & on -> last_changed ) ; on -> router_id = router_id ; on -> summary_list = ospf6_lsdb_create ( on ) ; on -> request_list = ospf6_lsdb_create ( on ) ; on -> retrans_list = ospf6_lsdb_create ( on ) ; on -> dbdesc_list = ospf6_lsdb_create ( on ) ; on -> lsupdate_list = ospf6_lsdb_create ( on ) ; on -> lsack_list = ospf6_lsdb_create ( on ) ; for ( type = 0 ; type < OSPF6_MESSAGE_TYPE_MAX ; type ++ ) { on -> seqnum_l [ type ] = 0 ; on -> seqnum_h [ type ] = 0 ; } on -> auth_present = false ; listnode_add_sort ( oi -> neighbor_list , on ) ; ospf6_bfd_info_nbr_create ( oi , on ) ; return on ; } 