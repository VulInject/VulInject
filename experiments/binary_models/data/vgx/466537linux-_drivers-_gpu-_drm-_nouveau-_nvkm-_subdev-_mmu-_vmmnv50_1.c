static void nv50_vmm_pgt_dma ( struct nvkm_vmm * vmm , struct nvkm_mmu_pt * pt , u32 ptei , u32 ptes , struct nvkm_vmm_map * map ) { if ( map -> page -> shift == PAGE_SHIFT ) { VMM_SPAM ( vmm , "DMAA %08x %08x PTE(s)" , ptei , ptes ) ; nvkm_kmap ( pt -> memory ) ; while ( ptes -- ) { const u64 data = * map -> dma ++ + map -> type ; VMM_WO064 ( pt , vmm , ptei ++ * 8 , data ) ; map -> type += map -> ctag ; } nvkm_done ( pt -> memory , NULL ) ; return ; } VMM_MAP_ITER_DMA ( vmm , pt , ptei , ptes , map , nv50_vmm_pgt_pte ) ; } 