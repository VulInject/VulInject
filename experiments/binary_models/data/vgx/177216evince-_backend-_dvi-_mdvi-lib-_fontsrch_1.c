static char * lookup_font ( DviFontClass * ptr , const char * name , Ushort * h , Ushort * v ) { char * filename ; if ( ptr -> info . lookup ) { filename = ptr -> info . lookup ( name , h , v ) ; } if ( ptr -> info . kpse_type <= kpse_any_glyph_format ) { kpse_glyph_file_type type ; filename = kpse_find_glyph ( name , Max ( * h , * v ) , ptr -> info . kpse_type , & type ) ; if ( filename && type . source == kpse_glyph_source_fallback ) { filename = NULL ; } if ( filename ) { * h = * v = type . dpi ; } } else { filename = kpse_find_file ( name , ptr -> info . kpse_type , 1 ) ; } return filename ; } 