int simpleaudio_trigger_output ( void * cookie , void * start , void * end , int blksize , void * intr ( void * ) , void * arg , struct audio_params * param ) { struct simpleaudio_softc * sc = cookie ; struct dai_device * dai ; const struct audio_hw_if * hwif ; int error , i ; for ( i = 0 ; i < sc -> sc_dai_naux ; i ++ ) { dai = sc -> sc_dai_aux [ i ] ; hwif = dai -> dd_hw_if ; if ( hwif -> trigger_output ) { error = hwif -> trigger_output ( dai -> dd_cookie , start , end , blksize , intr , arg , param ) ; if ( error ) { simpleaudio_halt_output ( cookie , NULL ) ; return error ; } } } dai = sc -> sc_dai_codec ; hwif = dai -> dd_hw_if ; if ( hwif -> trigger_output ) { error = hwif -> trigger_output ( dai -> dd_cookie , start , end , blksize , intr , arg , param ) ; if ( error ) { simpleaudio_halt_output ( cookie ) ; return error ; } } dai = sc -> sc_dai_cpu ; hwif = dai -> dd_hw_if ; if ( hwif -> trigger_output ) { error = hwif -> trigger_output ( dai -> dd_cookie , start , end , blksize , intr , arg , param ) ; if ( error ) { simpleaudio_halt_output ( cookie ) ; return error ; } } return 0 ; } 