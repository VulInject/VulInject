void sm750_set_power_mode ( unsigned int mode ) { unsigned int ctrl = 0 ; ctrl = peek32 ( POWER_MODE_CTRL ) & ~ POWER_MODE_CTRL_MODE_MASK ; switch ( mode ) { case POWER_MODE_CTRL_MODE_MODE0 : ctrl |= POWER_MODE_CTRL_MODE_MODE0 ; break ; case POWER_MODE_CTRL_MODE_MODE1 : ctrl |= POWER_MODE_CTRL_MODE_MODE1 ; break ; case POWER_MODE_CTRL_MODE_SLEEP : ctrl |= POWER_MODE_CTRL_MODE_SLEEP ; break ; default : break ; } if ( mode == POWER_MODE_CTRL_MODE_SLEEP ) { ctrl &= ~ POWER_MODE_CTRL_OSC_INPUT ; ctrl &= ~ POWER_MODE_CTRL_336CLK ; } else { ctrl |= POWER_MODE_CTRL_OSC_INPUT ; ctrl |= POWER_MODE_CTRL_336CLK ; } poke32 ( POWER_MODE_CTRL , ctrl ) ; } 