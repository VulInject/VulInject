int clientsCronHandleTimeout ( client * c , mstime_t now_ms ) { time_t now = now_ms / 1000 ; if ( server . maxidletime && ! ( c -> flags & CLIENT_SLAVE ) && ! mustObeyClient ( c ) && ! ( c -> flags & CLIENT_BLOCKED ) && ! ( c -> flags & CLIENT_PUBSUB ) && ( now - c -> lastinteraction > server . maxidletime ) ) { serverLog ( LL_VERBOSE , "Closing idle client" ) ; return 1 ; } if ( c -> flags & CLIENT_BLOCKED ) { if ( server . cluster_enabled ) { if ( clusterRedirectBlockedClientIfNeeded ( c ) ) { unblockClientOnError ( c , NULL ) ; } } } return 0 ; } 