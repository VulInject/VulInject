static int x11_show_image ( w3mimg_op * self , W3MImage * img , int sx , int sy , int sw , int sh , int x , int y ) { struct x11_info * xi ; struct x11_image * ximg = img -> pixmap ; int i ; if ( img -> pixmap == NULL ) { return 0 ; } xi = ( x11_info * ) self -> priv ; if ( xi == NULL ) { return 0 ; } XCopyArea ( xi -> display , ( Pixmap ) img -> pixmap , xi -> window , xi -> imageGC , sx , sy , ( sw ?sw : img -> width ) , ( sh ?sh : img -> height ) , x + self -> offset_x , y + self -> offset_y ) ; if ( ximg -> delay <= 0 ) { i = ximg -> total - 1 ; } else { i = ximg -> no ; } XCopyArea ( xi -> display , ximg -> pixmap [ i ] , xi -> window , xi -> imageGC , sx , sy , ( sw ?sw : img -> width ) , ( sh ?sh : img -> height ) , x + self -> offset_x , y + self -> offset_y ) ; if ( ximg -> total > 1 ) { if ( ximg -> wait > WAIT_CNT ) { ximg -> wait = 0 ; if ( i < ximg -> total - 1 ) { ximg -> no = i + 1 ; } else { ximg -> no = 0 ; } } ximg -> wait += 1 ; } return 1 ; } 