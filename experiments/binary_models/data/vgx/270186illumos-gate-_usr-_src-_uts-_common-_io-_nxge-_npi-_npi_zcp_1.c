npi_status_t npi_zcp_tt_bam_entry ( npi_handle_t handle , io_op_t op , uint16_t flow_id , uint8_t bankn , uint8_t word_en , zcp_ram_unit_t * data ) { zcp_ram_unit_t val ; if ( ( op != OP_SET ) && ( op != OP_GET ) ) { NPI_ERROR_MSG ( ( handle . function , NPI_ERR_CTL , " npi_zcp_tt_bam_entry" " Invalid Input: op<0x%x>" , op ) ) ; return ( NPI_FAILURE | NPI_ZCP_OPCODE_INVALID ) ; } if ( ( flow_id & ~ 0x0FFF ) != 0 ) { NPI_ERROR_MSG ( ( handle . function , NPI_ERR_CTL , " npi_zcp_tt_dynamic_entry" " Invalid Input: flow_id<0x%x>" , flow_id ) ) ; return ( NPI_FAILURE | NPI_ZCP_FLOW_ID_INVALID ) ; } if ( bankn >= MAX_BAM_BANKS ) { NPI_ERROR_MSG ( ( handle . function , NPI_ERR_CTL , " npi_zcp_tt_bam_entry" " Invalid Input: bankn<0x%x>" , bankn ) ) ; return ( NPI_FAILURE | NPI_ZCP_BAM_BANK_INVALID ) ; } if ( ( word_en & ~ 0xF ) != 0 ) { NPI_ERROR_MSG ( ( handle . function , NPI_ERR_CTL , " npi_zcp_tt_bam_entry" " Invalid Input: word_en<0x%x>" , word_en ) ) ; return ( NPI_FAILURE | NPI_ZCP_BAM_WORD_EN_INVALID ) ; } if ( zcp_mem_read ( handle , flow_id , ZCP_RAM_SEL_BAM0 + bankn , 0 , ( zcp_ram_unit_t * ) & val ) != 0 ) { NPI_ERROR_MSG ( ( handle . function , NPI_ERR_CTL , " npi_zcp_tt_bam_entry" " HW Error: ZCP_RAM_ACC<0x%x>" , NULL ) ) ; return ( NPI_FAILURE | NPI_ZCP_MEM_READ_FAILED ) ; } if ( op == OP_SET ) { if ( zcp_mem_write ( handle , flow_id , ZCP_RAM_SEL_BAM0 + bankn , word_en , 0 , ( zcp_ram_unit_t * ) & val ) != 0 ) { NPI_ERROR_MSG ( ( handle . function , NPI_ERR_CTL , " npi_zcp_tt_bam_entry" " HW Error: ZCP_RAM_ACC<0x%x>" , NULL ) ) ; return ( NPI_FAILURE | NPI_ZCP_MEM_WRITE_FAILED ) ; } } else { data -> w1 = val . w1 ; data -> w2 = val . w2 ; data -> w3 = val . w3 ; } return ( NPI_SUCCESS ) ; } 