static __init int _init_events_attrs ( void ) { int i = 0 , j ; struct attribute * * attrs ; while ( amd_iommu_v2_event_descs [ i ] . attr . attr . name ) { i ++ ; } attrs = kzalloc ( sizeof ( attribute * * ) * ( i + 1 ) , GFP_KERNEL ) ; for ( j = 0 ; j < i ; j ++ ) { attrs [ j ] = & amd_iommu_v2_event_descs [ j ] . attr . attr ; } amd_iommu_events_group . attrs = attrs ; return 0 ; } 