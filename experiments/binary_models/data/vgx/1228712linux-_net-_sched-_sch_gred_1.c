static void gred_vq_apply ( struct gred_sched * table , const struct nlattr * entry ) { struct nlattr * tb [ TCA_GRED_VQ_MAX + 1 ] ; u32 dp ; nla_parse_nested_deprecated ( tb , TCA_GRED_VQ_MAX , entry , gred_vq_policy , NULL ) ; dp = nla_get_u32 ( tb [ TCA_GRED_VQ_DP ] , NULL ) ; if ( tb [ TCA_GRED_VQ_FLAGS ] ) { table -> tab [ dp ] -> red_flags = nla_get_u32 ( tb [ TCA_GRED_VQ_FLAGS ] ) ; } } 