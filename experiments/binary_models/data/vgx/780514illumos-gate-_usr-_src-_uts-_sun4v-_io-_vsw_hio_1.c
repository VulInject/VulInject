static void vsw_hio_free_share ( vsw_share_t * vsharep ) { vsw_t * vswp = vsharep -> vs_vswp ; vsw_port_t * portp = vsharep -> vs_portp ; D1 ( vswp , "%s:enter\n" , __func__ ) ; WRITE_ENTER ( & portp -> maccl_rwlock ) ; mac_share_unbind ( portp -> p_mch ) ; RW_EXIT ( & portp -> maccl_rwlock ) ; vsharep -> vs_state = VSW_SHARE_FREE ; vsharep -> vs_macaddr = 0 ; DERR ( vswp , "Share freed for ldc_id=0x%lx Cookie=0x%lX" , vsharep -> vs_ldcid , vsharep -> vs_cookie ) ; D1 ( vswp , "%s:exit\n" , __func__ ) ; } 