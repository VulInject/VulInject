static int update_ind_extent_range ( handle_t * handle , struct inode * inode , ext4_fsblk_t pblock , struct migrate_struct * lb ) { struct buffer_head * bh ; __le32 * i_data ; int i , retval = 0 ; unsigned long max_entries = inode -> i_sb -> s_blocksize >> 2 ; bh = sb_bread ( inode -> i_sb , pblock ) ; i_data = ( __le32 * ) bh -> b_data ; for ( i = 0 ; i < max_entries ; i ++ ) { if ( i_data [ i ] ) { retval = update_extent_range ( handle , inode , le32_to_cpu ( i_data [ i ] ) , lb ) ; if ( retval ) { break ; } } else { lb -> curr_block ++ ; } } put_bh ( bh ) ; return retval ; } 