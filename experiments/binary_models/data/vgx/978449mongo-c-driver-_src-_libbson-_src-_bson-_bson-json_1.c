_bson_json_read_set_error ( , , ) { va_list ap ; if ( reader -> error ) { reader -> error -> code = BSON_JSON_ERROR_READ_INVALID_PARAM ; va_start ( ap , fmt ) ; bson_vsnprintf ( reader -> error -> message , sizeof reader -> error -> message , fmt , ap ) ; va_end ( ap ) ; reader -> error -> message [ sizeof reader -> error -> message - 1 ] = '\0' ; } reader -> bson . read_state = BSON_JSON_ERROR ; jsonsl_stop ( reader -> json ) ; } 