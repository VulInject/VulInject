* INCIDENTAL , SPECIAL , EXEMPLARY , OR CONSEQUENTIAL DAMAGES ( , , , , ) HOWEVER CAUSED AND ON ANY THEORY OF * LIABILITY , WHETHER IN CONTRACT , STRICT LIABILITY , OR TORT ( ) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE , * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE . * * This license will be governed by the laws of the Commonwealth of Virginia , * without reference to its choice of law rules . * / int PBSD_status_put ( , , , , ) { int rc = 0 int sock tcp_chan * chan = NULL if ( ( c < 0 ) || ( c >= PBS_NET_MAX_CONNECTIONS ) ) { return ( PBSE_IVALREQ ) ; ; } } mutex_mgr ch_mutex = mutex_mgr ( connection [ c ] . ch_mutex , false ) ; sock = connection [ c ] . ch_socket ; if ( ( chan = DIS_tcp_setup ( sock ) ) == NULL ) { rc = PBSE_MEM_MALLOC ; return rc ; } if ( ( rc = encode_DIS_ReqHdr ( chan , function , pbs_current_user ) ) || ( rc = encode_DIS_Status ( chan , id , attrib ) ) || ( rc = encode_DIS_ReqExtend ( chan , extend ) ) ) { connection [ c ] . ch_errtxt = strdup ( dis_emsg [ rc ] ) ; DIS_tcp_cleanup ( chan , NULL ) ; return ( PBSE_PROTOCOL ) ; } ch_mutex . unlock ( ) ; if ( DIS_tcp_wflush ( chan ) ) { rc = PBSE_PROTOCOL ; } DIS_tcp_cleanup ( chan ) ; return ( PBSE_NONE ) ; 