static int zpa2326_init_managed_trigger ( struct device * parent , struct iio_dev * indio_dev , struct zpa2326_private * , private , int irq ) { struct iio_trigger * trigger ; int ret ; if ( irq <= 0 ) { return 0 ; } trigger = devm_iio_trigger_alloc ( parent , "%s-dev%d" , indio_dev -> name , indio_dev -> id ) ; trigger -> dev . parent = parent ; trigger -> ops = & zpa2326_trigger_ops ; private -> trigger = trigger ; ret = devm_iio_trigger_register ( parent , trigger ) ; if ( ret ) { dev_err ( parent , "failed to register hardware trigger (%d)" , ret ) ; } return ret ; } 