int net_close ( struct open_file * f ) { if ( debug ) { printf ( "net_close: opens=%d\n" , netdev_opens ) ; } if ( netdev_opens <= 0 ) { return 0 ; } netdev_opens -- ; if ( netdev_opens > 0 ) { return 0 ; } rootip . s_addr = 0 ; if ( netdev_sock >= 0 ) { if ( debug ) { printf ( "net_close: calling netif_close()\n" ) ; } netif_close ( netdev_sock ) ; netdev_sock = - 1 ; } return 0 ; } 