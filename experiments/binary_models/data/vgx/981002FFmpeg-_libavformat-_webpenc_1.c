static int is_animated_webp_packet ( AVPacket * pkt ) { int skip ; unsigned flags = 0 ; if ( pkt -> size < 4 ) { return AVERROR_INVALIDDATA ; } if ( AV_RL32 ( pkt -> data ) == AV_RL32 ( "RIFF" ) ) { skip = 12 ; } if ( pkt -> size < skip + 4 ) { return AVERROR_INVALIDDATA ; } if ( AV_RL32 ( pkt -> data + skip ) == AV_RL32 ( "VP8X" ) ) { flags |= pkt -> data [ skip + 4 + 4 ] ; } if ( flags & 2 ) { return 1 ; } return 0 ; } 