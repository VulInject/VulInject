static u32 ath9k_hw_def_get_eeprom ( struct ath_hw * ah , enum eeprom_param param ) { struct ar5416_eeprom_def * eep = & ah -> eeprom . def ; struct modal_eep_header * pModal = eep -> modalHeader ; struct base_eep_header * pBase = & eep -> baseEepHeader ; int band ; switch ( param ) { case EEP_NFTHRESH_5 : return pModal [ 0 ] . noiseFloorThreshCh [ 0 ] ; case EEP_NFTHRESH_2 : return pModal [ 1 ] . noiseFloorThreshCh [ 0 ] ; case EEP_MAC_LSW : return get_unaligned_be16 ( pBase -> macAddr ) ; case EEP_MAC_MID : return get_unaligned_be16 ( pBase -> macAddr + 2 ) ; case EEP_MAC_MSW : return get_unaligned_be16 ( pBase -> macAddr + 4 ) ; case EEP_REG_0 : return le16_to_cpu ( pBase -> regDmn [ 0 ] ) ; case EEP_OP_CAP : return le16_to_cpu ( pBase -> deviceCap ) ; case EEP_OP_MODE : return pBase -> opCapFlags ; case EEP_RF_SILENT : return le16_to_cpu ( pBase -> rfSilent ) ; case EEP_OB_5 : return pModal [ 0 ] . ob ; case EEP_DB_5 : return pModal [ 0 ] . db ; case EEP_OB_2 : return pModal [ 1 ] . ob ; case EEP_DB_2 : return pModal [ 1 ] . db ; case EEP_TX_MASK : return pBase -> txMask ; case EEP_RX_MASK : return pBase -> rxMask ; case EEP_FSTCLK_5G : return pBase -> fastClk5g ; case EEP_RXGAIN_TYPE : return pBase -> rxGainType ; case EEP_TXGAIN_TYPE : return pBase -> txGainType ; case EEP_OL_PWRCTRL : if ( ath9k_hw_def_get_eeprom_rev ( ah ) >= AR5416_EEP_MINOR_VER_19 ) { return pBase -> openLoopPwrCntl ?true : false ; } else { return false ; } case EEP_RC_CHAIN_MASK : if ( ath9k_hw_def_get_eeprom_rev ( ah ) >= AR5416_EEP_MINOR_VER_19 ) { return pBase -> rcChainMask ; } else { return 0 ; } case EEP_DAC_HPWR_5G : if ( ath9k_hw_def_get_eeprom_rev ( ah ) >= AR5416_EEP_MINOR_VER_20 ) { return pBase -> dacHiPwrMode_5G ; } else { return 0 ; } case EEP_FRAC_N_5G : if ( ath9k_hw_def_get_eeprom_rev ( ah ) >= AR5416_EEP_MINOR_VER_22 ) { return pBase -> frac_n_5g ; } else { return 0 ; } case EEP_PWR_TABLE_OFFSET : if ( ath9k_hw_def_get_eeprom_rev ( ah ) >= AR5416_EEP_MINOR_VER_21 ) { return pBase -> pwr_table_offset ; } else { return AR5416_PWR_TABLE_OFFSET_DB ; } case EEP_ANTENNA_GAIN_2G : band = 1 ; case EEP_ANTENNA_GAIN_5G : return max_t ( u8 , max_t ( u8 , pModal [ band ] . antennaGainCh [ 0 ] , pModal [ band ] . antennaGainCh [ 1 ] ) , pModal [ band ] . antennaGainCh [ 2 ] ) ; default : return 0 ; } } 