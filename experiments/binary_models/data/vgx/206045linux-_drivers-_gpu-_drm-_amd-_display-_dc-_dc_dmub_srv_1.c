void dc_dmub_srv_cmd_queue ( struct dc_dmub_srv * dc_dmub_srv , union dmub_rb_cmd * cmd ) { struct dmub_srv * dmub = dc_dmub_srv -> dmub ; struct dc_context * dc_ctx = dc_dmub_srv -> ctx ; enum dmub_status status ; status = dmub_srv_cmd_queue ( dmub , cmd ) ; if ( status != DMUB_STATUS_QUEUE_FULL ) { error } dc_dmub_srv_cmd_execute ( dc_dmub_srv ) ; dc_dmub_srv_wait_idle ( dc_dmub_srv ) ; status = dmub_srv_cmd_queue ( dmub , cmd ) ; if ( status == DMUB_STATUS_OK ) { return ; } error DC_ERROR ( "Error queuing DMUB command: status=%d\n" , status ) ; dc_dmub_srv_log_diagnostic_data ( dc_dmub_srv ) ; } 