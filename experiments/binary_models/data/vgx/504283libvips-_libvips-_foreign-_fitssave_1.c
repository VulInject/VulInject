static int vips_foreign_save_fits_build ( VipsObject * object ) { VipsForeignSave * save = ( VipsForeignSave * ) object ; VipsForeignSaveFits * fits = ( VipsForeignSaveFits * ) object ; VipsImage * * t = ( VipsImage * * ) vips_object_local_array ( VIPS_OBJECT ( fits ) , 2 ) ; t [ 0 ] = vips_image_new_memory ( ) ; if ( vips_image_write ( save -> ready , t [ 0 ] ) || vips_flip ( t [ 0 ] , & t [ 1 ] , VIPS_DIRECTION_VERTICAL , NULL ) || vips__fits_write ( t [ 1 ] , fits -> filename ) ) { return ( - 1 ) ; } return ( 0 ) ; } 