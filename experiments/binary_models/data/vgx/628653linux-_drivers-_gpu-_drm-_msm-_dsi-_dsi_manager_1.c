static void dsi_mgr_bridge_power_on ( struct drm_bridge * bridge ) { int id = dsi_mgr_bridge_get_id ( bridge ) ; struct msm_dsi * msm_dsi = dsi_mgr_get_dsi ( id ) ; struct msm_dsi * msm_dsi1 = dsi_mgr_get_dsi ( DSI_1 ) ; struct mipi_dsi_host * host = msm_dsi -> host ; struct msm_dsi_phy_shared_timings phy_shared_timings [ DSI_MAX ] ; bool is_bonded_dsi = IS_BONDED_DSI ( ) ; int ret ; DBG ( "id=%d" , id ) ; if ( is_bonded_dsi && ! IS_MASTER_DSI_LINK ( id ) ) { return ; } ret = dsi_mgr_phy_enable ( id , phy_shared_timings ) ; if ( ret ) { phy_en_fail } ret = msm_dsi_host_power_on ( host , & phy_shared_timings [ id ] , is_bonded_dsi , msm_dsi -> phy ) ; if ( ret ) { pr_err ( "%s: power on host %d failed, %d\n" , __func__ , id , ret ) ; host_on_fail } if ( is_bonded_dsi && msm_dsi1 ) { ret = msm_dsi_host_power_on ( msm_dsi1 -> host , & phy_shared_timings [ DSI_1 ] , is_bonded_dsi , msm_dsi1 -> phy ) ; if ( ret ) { pr_err ( "%s: power on host1 failed, %d\n" , __func__ , ret ) ; host1_on_fail } } msm_dsi_host_enable_irq ( host ) ; if ( is_bonded_dsi && msm_dsi1 ) { msm_dsi_host_enable_irq ( msm_dsi1 -> host ) ; } return ; host1_on_fail msm_dsi_host_power_off ( host ) ; host_on_fail dsi_mgr_phy_disable ( id ) ; phy_en_fail return ; } 