int main ( int argc , char * * argv ) { char * tmp1 , * tmp2 , * our_path ; tmp1 = strdup ( argv [ 0 ] ) ; if ( ! tmp1 ) { err ( 1 , "strdup" ) ; } tmp2 = dirname ( tmp1 ) ; our_path = strdup ( tmp2 ) ; if ( ! our_path ) { err ( 1 , "strdup" ) ; } if ( fork_wait ( ) ) { printf ( "[RUN]\t+++ Tests with uid == 0 +++\n" ) ; return do_tests ( 0 , our_path ) ; } if ( fork_wait ( ) ) { printf ( "[RUN]\t+++ Tests with uid != 0 +++\n" ) ; return do_tests ( 1 , our_path ) ; } return nerrs ?1 : 0 ; } 