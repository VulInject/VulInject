extern bool slingshot_fetch_instant_on ( slingshot_jobinfo_t * job , char * node_list , uint32_t node_cnt ) { json_object * host_array = NULL ; json_object * reqjson ; json_object * respjson = NULL ; long status = 0 ; bool rc = false ; if ( ! slingshot_config . jlope_url || ! instant_on_enabled ) { return true ; } if ( ! ( host_array = _node_list_to_json_array ( node_list , node_cnt ) ) ) { out } if ( ! ( reqjson = json_object_new_object ( ) ) || json_object_object_add ( reqjson , "hosts" , host_array ) ) { error ( "Couldn't create instant on request json" ) ; json_object_put ( host_array ) ; out } log_flag ( SWITCH , "reqjson='%s'" , json_object_to_json_string ( reqjson ) ) ; if ( ! ( respjson = _rest_post ( & jlope_conn , "/fabric/nics" , reqjson , & status ) ) ) { error ( "POST to jackaloped for instant on data failed: %ld" , status ) ; out } if ( ! ( rc = _parse_jlope_json ( job , respjson , node_cnt ) ) ) { error ( "Couldn't parse jackaloped response: json='%s'" , json_object_to_json_string ( respjson ) ) ; } out json_object_put ( reqjson ) ; json_object_put ( respjson ) ; return rc ; } 