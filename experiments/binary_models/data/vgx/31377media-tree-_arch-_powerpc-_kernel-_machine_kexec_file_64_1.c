int arch_kexec_kernel_image_probe ( struct kimage * image , void * buf , unsigned long buf_len ) { int i , ret = - ENOEXEC ; struct kexec_file_ops * fops ; if ( image -> type == KEXEC_TYPE_CRASH ) { return - ENOTSUPP ; } for ( i = 0 ; i < ARRAY_SIZE ( kexec_file_loaders ) ; i ++ ) { fops = kexec_file_loaders [ i ] ; ret = fops -> probe ( buf , buf_len ) ; if ( ! ret ) { image -> fops = fops ; return ret ; } } return ret ; } 