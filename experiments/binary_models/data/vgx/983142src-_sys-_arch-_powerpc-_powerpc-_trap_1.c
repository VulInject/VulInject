static inline int copyinsn ( struct proc * p , vaddr_t uva , int * insn ) { struct vm_map * map = & p -> p_vmspace -> vm_map ; int error ; if ( __predict_false ( ( uva & 3 ) != 0 ) ) { return EFAULT ; } { if ( pmap_copyinsn ( map -> pmap , uva , ( uint32_t * ) insn ) == 0 ) { break ; } error = uvm_fault ( map , trunc_page ( uva ) , 0 , PROT_EXEC ) ; } error == 0 ; return error ; } 