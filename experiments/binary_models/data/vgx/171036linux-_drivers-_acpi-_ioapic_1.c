static acpi_status setup_res ( struct acpi_resource * acpi_res , void * data ) { struct resource * res = data ; struct resource_win win ; res -> flags = 0 ; if ( acpi_dev_filter_resource_type ( acpi_res , IORESOURCE_MEM ) ) { return AE_OK ; } if ( ! acpi_dev_resource_memory ( acpi_res , res ) ) { if ( acpi_dev_resource_address_space ( acpi_res , & win ) || acpi_dev_resource_ext_address_space ( acpi_res , & win ) ) { * res = win . res ; } } if ( ( res -> flags & IORESOURCE_PREFETCH ) || ( res -> flags & IORESOURCE_DISABLED ) ) { res -> flags = 0 ; } return AE_CTRL_TERMINATE ; } 