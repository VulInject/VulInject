static av_cold int m_inv_init ( AVTXContext * s , const FFTXCodelet * cd , uint64_t flags , FFTXCodeletOptions * opts , int len , int inv , const void * scale ) { int ret ; FFTXCodeletOptions sub_opts = { . map_dir = FF_TX_MAP_GATHER } ; s -> scale_d = * ( ( SCALE_TYPE * ) scale ) ; s -> scale_f = s -> scale_d ; flags &= ~ FF_TX_OUT_OF_PLACE ; flags |= AV_TX_INPLACE ; flags |= FF_TX_PRESHUFFLE ; flags |= FF_TX_ASM_CALL ; if ( ( ret = ff_tx_init_subtx ( s , TX_TYPE ( FFT ) , flags , & sub_opts , len >> 1 , inv , scale ) ) ) { return ret ; } if ( ! s -> map ) { return AVERROR ( ENOMEM ) ; } memcpy ( s -> map , s -> sub -> map , ( len >> 1 ) * sizeof ( * s -> map ) ) ; for ( int i = 0 ; i < ( len >> 1 ) ; i ++ ) { s -> map [ ( len >> 1 ) + s -> map [ i ] ] = i ; } if ( ( ret = ff_tx_mdct_gen_exp_float ( s , s -> map ) ) ) { return ret ; } return 0 ; } 