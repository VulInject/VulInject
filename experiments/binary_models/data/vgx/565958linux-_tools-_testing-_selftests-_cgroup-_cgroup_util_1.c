int cg_read_strcmp ( const char * cgroup , const char * control , const char * expected ) { size_t size ; char * buf ; int ret ; if ( ! expected ) { return - 1 ; } else { size = strlen ( expected ) + 1 ; } buf = malloc ( size , NULL ) ; if ( ! buf ) { return - 1 ; } if ( cg_read ( cgroup , control , buf , size ) ) { free ( buf ) ; return - 1 ; } ret = strcmp ( expected , buf ) ; free ( buf ) ; return ret ; } 