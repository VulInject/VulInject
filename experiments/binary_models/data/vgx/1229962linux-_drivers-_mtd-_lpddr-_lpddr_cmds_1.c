static int lpddr_erase ( struct mtd_info * mtd , struct erase_info * instr ) { unsigned long ofs , len ; int ret ; struct map_info * map = mtd -> priv ; struct lpddr_private * lpddr = map -> fldrv_priv ; int size = 1 << lpddr -> qinfo -> UniformBlockSizeShift ; ofs = instr -> addr ; len = instr -> len ; while ( len > 0 ) { ret = do_erase_oneblock ( mtd , ofs ) ; ofs += size ; len -= size ; } return 0 ; } 