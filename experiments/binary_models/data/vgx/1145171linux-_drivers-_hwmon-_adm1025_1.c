static SENSOR_DEVICE_ATTR_RO ( in3_input , in , 3 ) ; static SENSOR_DEVICE_ATTR_RW ( in3_min , in_min , 3 ) ; static SENSOR_DEVICE_ATTR_RW ( in3_max , in_max , 3 ) ; static SENSOR_DEVICE_ATTR_RO ( in4_input , in , 4 ) ; static SENSOR_DEVICE_ATTR_RW ( in4_min , in_min , 4 ) ; static SENSOR_DEVICE_ATTR_RW ( in4_max , in_max , 4 ) ; static SENSOR_DEVICE_ATTR_RO ( in5_input , in , 5 ) ; static SENSOR_DEVICE_ATTR_RW ( in5_min , in_min , 5 ) ; static SENSOR_DEVICE_ATTR_RW ( in5_max , in_max , 5 ) ; static ssize_t temp_min_store ( struct device * dev , struct device_attribute * attr , const char * buf , size_t count ) { int index = to_sensor_dev_attr ( attr ) -> index ; struct adm1025_data * data = dev_get_drvdata ( dev ) ; struct i2c_client * client = data -> client ; long val ; int err ; err = kstrtol ( buf , 10 , & val ) ; mutex_lock ( & data -> update_lock ) ; data -> temp_min [ index ] = TEMP_TO_REG ( val ) ; i2c_smbus_write_byte_data ( client , ADM1025_REG_TEMP_LOW ( index ) , data -> temp_min [ index ] ) ; mutex_unlock ( & data -> update_lock ) ; return count ; } 