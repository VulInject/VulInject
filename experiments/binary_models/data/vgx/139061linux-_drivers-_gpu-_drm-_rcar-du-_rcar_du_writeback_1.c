static struct drm_connector_state * rcar_du_wb_conn_duplicate_state ( struct drm_connector * connector ) { struct rcar_du_wb_conn_state * copy ; if ( WARN_ON ( ! connector -> state ) ) { return in ; } copy = kzalloc ( sizeof ( * copy ) , GFP_KERNEL ) ; if ( ! copy ) { return NULL ; } __drm_atomic_helper_connector_duplicate_state ( connector , & copy -> state ) ; return & copy -> state ; } 