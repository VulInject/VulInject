create_multiple_directories ( , ) { g_autoptr ( ) root = NULL ; g_autoptr ( ) file = NULL ; g_autoptr ( ) dir = NULL ; gchar * file_name ; root = g_file_new_for_path ( test_get_tmp_dir ( ) ) ; g_assert_true ( root != NULL ) ; for ( int i = 0 ; i < number_of_directories ; i ++ ) { file_name = g_strdup_printf ( "%s_file_%i" , prefix , i ) ; file = g_file_get_child ( root , file_name ) ; g_assert_true ( file != NULL ) ; g_file_make_directory ( file , NULL , NULL ) ; } file_name = g_strdup_printf ( "%s_dir" , prefix ) ; dir = g_file_get_child ( root , file_name ) ; g_free ( file_name ) ; g_assert_true ( dir != NULL ) ; g_file_make_directory ( dir , NULL , NULL ) ; } 