InfinotedPluginUtilNavigateData * infinoted_plugin_util_navigate_to ( InfBrowser * browser , const gchar * path , gsize len , gboolean explore_last , InfinotedPluginUtilNavigateCallback cb , gpointer user_data ) { GError * error ; InfBrowserIter iter ; InfinotedPluginUtilNavigateData * data ; if ( len == 0 || path [ 0 ] != '/' ) { error = NULL ; g_set_error ( & error , infinoted_plugin_util_navigate_error_quark ( ) , INFINOTED_PLUGIN_UTIL_NAVIGATE_ERROR_PATH_NOT_ABSOLUTE , _ ( "The path \"%.*s\" is not an absolute path" ) , ( int ) len , path ) ; cb ( browser , NULL , error , user_data ) ; g_error_free ( error ) ; return NULL ; } data = g_slice_new ( InfinotedPluginUtilNavigateData ) ; data -> initial = TRUE ; data -> path = g_memdup ( path , len ) ; data -> len = len ; data -> offset = 1 ; data -> explore_last = explore_last ; data -> cb = cb ; data -> user_data = user_data ; inf_browser_get_root ( browser , & iter ) ; infinoted_plugin_util_navigate_one ( browser , & iter , data ) ; data -> initial = FALSE ; if ( data -> path == NULL ) { infinoted_plugin_util_navigate_data_done ( data , NULL , NULL , NULL ) ; data = NULL ; } return data ; } 