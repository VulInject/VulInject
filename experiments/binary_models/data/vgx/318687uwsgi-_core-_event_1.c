int event_queue_wait_multi ( int eq , int timeout , void * events , int nevents ) { int ret ; struct timespec ts ; if ( timeout < 0 ) { ret = kevent ( eq , NULL , 0 , events , nevents , NULL ) ; } else { ts . tv_sec = timeout ; ret = kevent ( eq , NULL , 0 , ( kevent * ) events , nevents , & ts ) ; } if ( ret < 0 ) { if ( errno != EINTR ) { uwsgi_error ( "kevent()" ) ; } } return ret ; } 