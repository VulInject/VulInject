static struct buffer_head * bclean ( handle_t * handle , struct super_block * sb , ext4_fsblk_t blk ) { struct buffer_head * bh ; int err ; bh = sb_getblk ( sb , blk ) ; if ( unlikely ( ! bh ) ) { return ERR_PTR ( - ENOMEM ) ; } BUFFER_TRACE ( bh , "get_write_access" ) ; err = ext4_journal_get_write_access ( handle , sb , bh , EXT4_JTR_NONE ) ; if ( err ) { brelse ( bh ) ; bh = ERR_PTR ( err ) ; } else { set_buffer_uptodate ( bh ) ; } return bh ; } 