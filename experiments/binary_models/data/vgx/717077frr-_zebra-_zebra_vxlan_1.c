static void zl3vni_print_rmac_hash_all_vni ( struct hash_bucket * bucket , void * * args ) { struct vty * vty = NULL ; json_object * json = NULL ; json_object * json_evpn = NULL ; struct zebra_l3vni * zl3vni = NULL ; uint32_t num_rmacs ; struct rmac_walk_ctx wctx ; char vni_str [ VNI_STR_LEN ] ; vty = ( vty * ) args [ 0 ] ; json = ( json_object * ) args [ 1 ] ; zl3vni = ( zebra_l3vni * ) bucket -> data ; num_rmacs = hashcount ( zl3vni -> rmac_table ) ; if ( ! num_rmacs ) { return ; } if ( json ) { json_evpn = json_object_new_object ( ) ; snprintf ( vni_str , VNI_STR_LEN , "%u" , zl3vni -> vni ) ; } if ( json == NULL ) { vty_out ( vty , "\nVNI %u #RMACs %u\n\n" , zl3vni -> vni , num_rmacs ) ; vty_out ( vty , "%-17s %-21s\n" , "RMAC" , "Remote VTEP" ) ; } else { json_object_int_add ( json_evpn , "numRmacs" , num_rmacs ) ; } wctx . vty = vty ; wctx . json = json_evpn ; hash_iterate ( zl3vni -> rmac_table , zl3vni_print_rmac_hash , & wctx ) ; if ( json ) { json_object_object_add ( json , vni_str , json_evpn ) ; } } 