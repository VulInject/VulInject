static void themes_theme_change_notify ( GimpGuiConfig * config , GParamSpec * pspec , Gimp * gimp ) static void themes_theme_paths_notify ( GimpExtensionManager * manager , GParamSpec * pspec , Gimp * gimp ) static GHashTable * themes_hash = NULL ; static GtkStyleProvider * themes_style_provider = NULL ; void themes_init ( Gimp * gimp ) { GimpGuiConfig * config ; g_return_if_fail ( GIMP_IS_GIMP ( gimp ) ) ; config = GIMP_GUI_CONFIG ( gimp -> config ) ; themes_theme_paths_notify ( gimp -> extension_manager , gimp ) ; g_signal_connect ( gimp -> extension_manager , "notify::theme-paths" , G_CALLBACK ( themes_theme_paths_notify ) , gimp ) ; themes_style_provider = GTK_STYLE_PROVIDER ( gtk_css_provider_new ( ) ) ; gtk_style_context_add_provider_for_screen ( gdk_screen_get_default ( ) , themes_style_provider , GTK_STYLE_PROVIDER_PRIORITY_APPLICATION + 1 ) ; g_object_unref ( themes_style_provider ) ; g_signal_connect ( config , "notify::theme" , G_CALLBACK ( themes_theme_change_notify ) , gimp ) ; g_signal_connect ( config , "notify::prefer-dark-theme" , G_CALLBACK ( themes_theme_change_notify ) , gimp ) ; g_signal_connect ( config , "notify::prefer-symbolic-icons" , G_CALLBACK ( themes_theme_change_notify ) , gimp ) ; g_signal_connect ( config , "notify::override-theme-icon-size" , G_CALLBACK ( themes_theme_change_notify ) , gimp ) ; g_signal_connect ( config , "notify::custom-icon-size" , G_CALLBACK ( themes_theme_change_notify ) , gimp ) ; themes_theme_change_notify ( config , NULL , gimp ) ; } 