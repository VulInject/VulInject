uint32_t slip_encode ( uint8_t * p_output , uint8_t * p_input , uint32_t input_length , uint32_t output_buffer_length ) { uint32_t input_index ; int output_index ; for ( input_index = 0 , output_index = 0 ; input_index < input_length && output_index < output_buffer_length ; input_index ++ ) { switch ( p_input [ input_index ] ) { case SLIP_END : p_output [ output_index ++ ] = SLIP_END ; p_output [ output_index ++ ] = SLIP_ESC_END ; break ; case SLIP_ESC : p_output [ output_index ++ ] = SLIP_ESC ; p_output [ output_index ++ ] = SLIP_ESC_ESC ; break ; default : p_output [ output_index ++ ] = p_input [ input_index ] ; } } p_output [ output_index ++ ] = ( uint8_t ) SLIP_END ; p_output [ output_index ++ ] = ( uint8_t ) SLIP_END ; return output_index ; } 