static int send_event ( int fd ) { struct uhid_event ev ; ev . type = UHID_INPUT ; ev . u . input . size = 5 ; ev . u . input . data [ 0 ] = 0x1 ; if ( btn1_down ) { ev . u . input . data [ 1 ] |= 0x1 ; } if ( btn2_down ) { ev . u . input . data [ 1 ] |= 0x2 ; } if ( btn3_down ) { ev . u . input . data [ 1 ] |= 0x4 ; } ev . u . input . data [ 2 ] = abs_hor ; ev . u . input . data [ 3 ] = abs_ver ; ev . u . input . data [ 4 ] = wheel ; return uhid_write ( fd , & ev ) ; } 