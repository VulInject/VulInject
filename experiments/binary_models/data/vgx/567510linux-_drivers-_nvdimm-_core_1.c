static ssize_t capability_show ( struct device * dev , struct device_attribute * attr , char * buf ) { struct nvdimm_bus * nvdimm_bus = to_nvdimm_bus ( dev ) ; struct nvdimm_bus_descriptor * nd_desc = nvdimm_bus -> nd_desc ; enum nvdimm_fwa_capability cap ; cap = nd_desc -> fw_ops -> capability ( nd_desc ) ; switch ( cap ) { case NVDIMM_FWA_CAP_QUIESCE : return sprintf ( buf , "quiesce\n" ) ; case NVDIMM_FWA_CAP_LIVE : return sprintf ( buf , "live\n" ) ; default : return - EOPNOTSUPP ; } } 