static void emailquery_cache_reset ( struct emailquery_cache * qc ) { size_t i ; for ( i = 0 ; i < qc -> uncollapsed_len ; i ++ ) { smallarrayu64_fini ( & qc -> uncollapsed_matches [ i ] . partnums ) ; } free ( qc -> uncollapsed_matches ) ; free ( qc -> collapsed_matches ) ; free ( qc -> fingerprint ) ; if ( qc -> seen_threads ) { hashset_free ( & qc -> seen_threads ) ; } if ( qc -> qr . free ) { qc -> qr . free ( qc -> qr . rock ) ; } free ( qc -> nextinthread ) ; if ( qc -> firstinthread . size ) { free_hashu64_table ( & qc -> firstinthread , NULL ) ; } } 