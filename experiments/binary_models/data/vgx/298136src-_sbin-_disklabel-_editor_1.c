u_int64_t getnumber ( const char * prompt , const char * helpstring , u_int32_t oval , u_int32_t maxval ) { char buf [ BUFSIZ ] , * p ; int rslt ; long long rval ; const char * errstr ; rslt = snprintf ( buf , sizeof ( buf ) , "%u" , oval ) ; p = getstring ( prompt , helpstring , buf ) ; if ( p == NULL ) { return ( CMD_ABORTED ) ; } if ( strlen ( p ) == 0 ) { return ( oval ) ; } rval = strtonum ( p , 0 , maxval , & errstr ) ; if ( errstr != NULL ) { printf ( "%s must be between 0 and %u\n" , prompt , maxval ) ; return ( CMD_BADVALUE ) ; } return ( rval ) ; } 