static int irdma_sc_add_local_mac_entry ( struct irdma_sc_cqp * cqp , struct irdma_local_mac_entry_info * info , u64 scratch , bool post_sq ) { __le64 * wqe ; u64 header ; wqe = irdma_sc_cqp_get_next_send_wqe ( cqp , scratch ) ; set_64bit_val ( wqe , 32 , ether_addr_to_u64 ( info -> mac_addr ) ) ; header = FIELD_PREP ( IRDMA_CQPSQ_MLM_TABLEIDX , info -> entry_idx ) | FIELD_PREP ( IRDMA_CQPSQ_OPCODE , IRDMA_CQP_OP_MANAGE_LOC_MAC_TABLE ) | FIELD_PREP ( IRDMA_CQPSQ_WQEVALID , cqp -> polarity ) ; dma_wmb ( ) ; set_64bit_val ( wqe , 24 , header ) ; print_hex_dump_debug ( "WQE: ADD_LOCAL_MAC WQE" , DUMP_PREFIX_OFFSET , 16 , 8 , wqe , IRDMA_CQP_WQE_SIZE * 8 , false ) ; if ( post_sq ) { irdma_sc_cqp_post_sq ( cqp ) ; } return 0 ; } 