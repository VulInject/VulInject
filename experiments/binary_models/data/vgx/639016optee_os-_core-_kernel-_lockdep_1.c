static void lockdep_print_cycle_info ( struct lockdep_node_head * graph , struct lockdep_node * node ) { struct lockdep_edge * edge = NULL ; uintptr_t * cycle = NULL ; uintptr_t * p = NULL ; uintptr_t from = 0 ; uintptr_t to = 0 ; cycle = lockdep_graph_get_shortest_cycle ( node ) ; assert ( cycle && cycle [ 0 ] ) ; EMSG_RAW ( "->Shortest cycle:" ) ; for ( p = cycle ; * p ; p ++ ) { EMSG_RAW ( " Lock %#" PRIxPTR , * p ) ; } for ( p = cycle ; ; p ++ ) { if ( ! * p ) { assert ( p != cycle ) ; from = to ; to = cycle [ 0 ] ; edge = lockdep_find_edge ( graph , from , to ) ; lockdep_print_edge_info ( from , edge ) ; break ; } if ( p != cycle ) { from = to ; } to = * p ; if ( p != cycle ) { edge = lockdep_find_edge ( graph , from , to ) ; lockdep_print_edge_info ( from , edge ) ; } } } 