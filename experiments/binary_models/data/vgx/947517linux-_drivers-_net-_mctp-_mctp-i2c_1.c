static int mctp_i2c_header_create ( struct sk_buff * skb , struct net_device * dev , unsigned short type , const void * daddr , const void * saddr , unsigned int len ) { struct mctp_i2c_hdr * hdr ; struct mctp_hdr * mhdr ; u8 lldst , llsrc ; lldst = * ( ( u8 * ) daddr ) ; llsrc = * ( ( u8 * ) saddr ) ; skb_push ( skb , sizeof ( mctp_i2c_hdr ) ) ; skb_reset_mac_header ( skb ) ; hdr = ( void * ) skb_mac_header ( skb ) ; mhdr = mctp_hdr ( skb ) ; hdr -> dest_slave = ( lldst << 1 ) & 0xff ; hdr -> command = MCTP_I2C_COMMANDCODE ; hdr -> byte_count = len + 1 ; hdr -> source_slave = ( ( llsrc << 1 ) & 0xff ) | 0x01 ; mhdr -> ver = 0x01 ; return sizeof ( mctp_i2c_hdr ) ; } 