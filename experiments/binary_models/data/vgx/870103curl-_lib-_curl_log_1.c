void Curl_failf ( struct Curl_easy * data , const char * fmt , ... ) { DEBUGASSERT ( ! strchr ( fmt , '\n' ) ) ; if ( data -> set . verbose || data -> set . errorbuffer ) { va_list ap ; int len ; int error [ CURL_ERROR_SIZE + 2 ] ; va_start ( ap , fmt ) ; len = mvsnprintf ( error , CURL_ERROR_SIZE , fmt , ap ) ; if ( data -> set . errorbuffer && ! data -> state . errorbuf ) { strcpy ( data -> set . errorbuffer , error ) ; data -> state . errorbuf = TRUE ; } error [ len ++ ] = '\n' ; error [ len ] = '\0' ; Curl_debug ( data , CURLINFO_TEXT , error , len ) ; va_end ( ap ) ; } } 