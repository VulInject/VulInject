static int pwm_mediatek_apply ( struct pwm_chip * chip , struct pwm_device * pwm , const struct pwm_state * state ) { int err ; if ( ! state -> enabled ) { if ( pwm -> state . enabled ) { pwm_mediatek_disable ( chip , pwm ) ; } return 0 ; } err = pwm_mediatek_config ( pwm -> chip , pwm , state -> duty_cycle , state -> period ) ; if ( err ) { return err ; } if ( ! pwm -> state . enabled ) { err = pwm_mediatek_enable ( chip , pwm ) ; } return err ; } 