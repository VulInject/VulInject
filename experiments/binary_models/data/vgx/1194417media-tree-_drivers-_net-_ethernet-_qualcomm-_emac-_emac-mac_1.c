static void emac_adjust_link ( struct net_device * netdev ) { struct emac_adapter * adpt = netdev_priv ( netdev ) ; struct emac_sgmii * sgmii = & adpt -> phy ; struct phy_device * phydev = netdev -> phydev ; if ( phydev -> link ) { emac_mac_start ( adpt ) ; sgmii -> link_up ( adpt ) ; } else { sgmii -> link_down ( adpt ) ; emac_mac_stop ( adpt , NULL ) ; } phy_print_status ( phydev ) ; } 