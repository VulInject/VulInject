verify_stmts ( ) { basic_block bb ; block_stmt_iterator bsi ; bool err = false ; htab_t htab ; tree addr ; timevar_push ( TV_TREE_STMT_VERIFY ) ; htab = htab_create ( 37 , htab_hash_pointer , htab_eq_pointer , NULL ) ; FOR_EACH_BB ( ) { tree phi ; int i ; for ( phi = phi_nodes ( bb ) ; phi ; phi = PHI_CHAIN ( phi ) ) { int phi_num_args = PHI_NUM_ARGS ( phi ) ; if ( bb_for_stmt ( phi ) != bb ) { error ( "bb_for_stmt (phi) is set to a wrong basic block" ) ; err |= true ; } for ( i = 0 ; i < phi_num_args ; i ++ ) { tree t = PHI_ARG_DEF ( phi , i ) ; tree addr ; if ( TREE_CODE ( t ) != SSA_NAME && TREE_CODE ( t ) != FUNCTION_DECL && ! is_gimple_val ( t ) ) { error ( "PHI def is not a GIMPLE value" ) ; debug_generic_stmt ( phi ) ; debug_generic_stmt ( t , NULL ) ; err |= true ; } addr = walk_tree ( & t , verify_expr , ( void * ) 1 , NULL ) ; if ( addr ) { debug_generic_stmt ( addr ) ; err |= true ; } addr = walk_tree ( & t , verify_node_sharing , htab , NULL ) ; if ( addr ) { error ( "incorrect sharing of tree nodes" ) ; debug_generic_stmt ( phi ) ; debug_generic_stmt ( addr ) ; err |= true ; } } } for ( bsi = bsi_start ( bb ) ; ! bsi_end_p ( bsi ) ; ) { tree stmt = bsi_stmt ( bsi ) ; if ( bb_for_stmt ( stmt ) != bb ) { error ( "bb_for_stmt (stmt) is set to a wrong basic block" ) ; err |= true ; } bsi_next ( & bsi ) ; err |= verify_stmt ( stmt , bsi_end_p ( bsi ) ) ; addr = walk_tree ( & stmt , verify_node_sharing , htab , NULL ) ; if ( addr ) { error ( "incorrect sharing of tree nodes" ) ; debug_generic_stmt ( stmt ) ; debug_generic_stmt ( addr ) ; err |= true ; } } } if ( err ) { internal_error ( "verify_stmts failed" ) ; } htab_delete ( htab ) ; timevar_pop ( TV_TREE_STMT_VERIFY ) ; } 