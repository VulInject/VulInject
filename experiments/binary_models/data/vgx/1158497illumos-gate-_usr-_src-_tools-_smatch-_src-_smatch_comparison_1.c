static void print_return_comparison ( int return_id , char * return_ranges , struct expression * expr ) { struct sm_state * tmp ; struct string_list * links ; char * link ; struct sm_state * sm ; struct compare_data * data ; struct var_sym * left , * right ; int left_param , right_param ; char left_buf [ 256 ] ; char right_buf [ 256 ] ; char info_buf [ 258 ] ; const char * tmp_name ; print_return_value_comparison ( return_id , return_ranges , expr ) ; FOR_EACH_MY_SM ( , , ) { if ( get_param_num_from_sym ( tmp -> sym ) < 0 ) { continue ; } links = tmp -> state -> data ; FOR_EACH_PTR ( , ) { sm = get_sm_state ( comparison_id , link , NULL ) ; if ( ! sm ) { continue ; } data = sm -> state -> data ; if ( ptr_list_size ( ( ptr_list * ) data -> left_vsl ) != 1 || ptr_list_size ( ( ptr_list * ) data -> right_vsl ) != 1 ) { continue ; } left = first_ptr_list ( ( ptr_list * ) data -> left_vsl ) ; right = first_ptr_list ( ( ptr_list * ) data -> right_vsl ) ; if ( left -> sym == right -> sym && strcmp ( left -> var , right -> var ) == 0 ) { continue ; } if ( left -> sym != tmp -> sym || strcmp ( left -> var , tmp -> name ) != 0 ) { continue ; } if ( strstr ( right -> var , " orig" ) ) { continue ; } left_param = get_param_num_from_sym ( left -> sym ) ; right_param = get_param_num_from_sym ( right -> sym ) ; if ( left_param < 0 || right_param < 0 ) { continue ; } tmp_name = get_param_name_var_sym ( left -> var , left -> sym ) ; if ( ! tmp_name ) { continue ; } snprintf ( left_buf , sizeof ( left_buf ) , "%s" , tmp_name ) ; tmp_name = get_param_name_var_sym ( right -> var , right -> sym ) ; if ( ! tmp_name || tmp_name [ 0 ] != '$' ) { continue ; } snprintf ( right_buf , sizeof ( right_buf ) , "$%d%s" , right_param , tmp_name + 1 ) ; snprintf ( info_buf , sizeof ( info_buf ) , "%s %s" , show_comparison ( data -> comparison ) , right_buf ) ; sql_insert_return_states ( return_id , return_ranges , PARAM_COMPARE , left_param , left_buf , info_buf ) ; } END_FOR_EACH_PTR ( link ) ; } END_FOR_EACH_SM ( tmp ) ; } 