static void disas_fp_csel ( DisasContext * s , uint32_t insn ) { unsigned int mos , type , rm , cond , rn , rd ; TCGv_i64 t_true , t_false , t_zero ; DisasCompare64 c ; MemOp sz ; mos = extract32 ( insn , 29 , 3 ) ; type = extract32 ( insn , 22 , 2 ) ; rm = extract32 ( insn , 16 , 5 ) ; cond = extract32 ( insn , 12 , 4 ) ; rn = extract32 ( insn , 5 , 5 ) ; rd = extract32 ( insn , 0 , 5 ) ; if ( mos ) { return ; } switch ( type ) { case 0 : sz = MO_32 ; break ; case 1 : sz = MO_64 ; break ; case 3 : sz = MO_16 ; if ( dc_isar_feature ( aa64_fp16 , s ) ) { break ; } default : unallocated_encoding ( s ) ; return ; } if ( ! fp_access_check ( s ) ) { return ; } t_true = tcg_temp_new_i64 ( ) ; t_false = tcg_temp_new_i64 ( ) ; read_vec_element ( s , t_true , rn , 0 , sz ) ; read_vec_element ( s , t_false , rm , 0 , sz ) ; a64_test_cc ( & c , cond ) ; t_zero = tcg_const_i64 ( 0 ) ; tcg_gen_movcond_i64 ( c . cond , t_true , c . value , t_zero , t_true , t_false ) ; tcg_temp_free_i64 ( t_zero ) ; tcg_temp_free_i64 ( t_false ) ; a64_free_cc ( & c ) ; write_fp_dreg ( s , rd , t_true ) ; tcg_temp_free_i64 ( t_true ) ; } 