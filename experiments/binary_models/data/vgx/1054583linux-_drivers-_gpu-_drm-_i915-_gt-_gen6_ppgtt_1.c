static void pd_vma_unbind ( struct i915_address_space * vm , struct i915_vma_resource * vma_res ) { struct gen6_ppgtt * ppgtt = vma_res -> private ; struct i915_page_directory * const pd = ppgtt -> base . pd ; struct i915_page_table * pt ; unsigned int pde ; gen6_for_all_pdes ( , , ) { if ( ! pt || atomic_read ( & pt -> used ) ) { continue ; } free_pt ( & ppgtt -> base . vm , pt ) ; pd -> entry [ pde ] = NULL ; } ppgtt -> scan_for_unused_pt = false ; } static const struct i915_vma_ops pd_vma_ops = { . bind_vma = pd_vma_bind . unbind_vma = pd_vma_unbind } ; 