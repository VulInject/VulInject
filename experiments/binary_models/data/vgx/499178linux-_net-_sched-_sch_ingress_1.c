static int ingress_init ( struct Qdisc * sch , struct nlattr * opt , struct netlink_ext_ack * extack ) { struct ingress_sched_data * q = qdisc_priv ( sch ) ; struct net_device * dev = qdisc_dev ( sch ) ; int err ; net_inc_ingress_queue ( ) ; mini_qdisc_pair_init ( & q -> miniqp , sch , & dev -> miniq_ingress ) ; q -> block_info . binder_type = FLOW_BLOCK_BINDER_TYPE_CLSACT_INGRESS ; q -> block_info . chain_head_change = clsact_chain_head_change ; q -> block_info . chain_head_change_priv = & q -> miniqp ; err = tcf_block_get_ext ( & q -> block , sch , & q -> block_info , extack ) ; mini_qdisc_pair_block_init ( & q -> miniqp , q -> block ) ; return 0 ; } 