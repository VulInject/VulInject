static int snd_ad1889_ac97_init ( struct snd_ad1889 * chip , const char * quirk_override ) { int err ; struct snd_ac97_template ac97 ; static struct snd_ac97_bus_ops ops = { . write = snd_ad1889_ac97_write . read = snd_ad1889_ac97_read } ; snd_ad1889_ac97_xinit ( chip ) ; err = snd_ac97_bus ( chip -> card , 0 , & ops , chip , & chip -> ac97_bus ) ; if ( err < 0 ) { return err ; } chip -> ac97_bus -> private_free = snd_ad1889_ac97_bus_free ; ac97 . private_data = chip ; ac97 . private_free = snd_ad1889_ac97_free ; ac97 . pci = chip -> pci ; err = snd_ac97_mixer ( chip -> ac97_bus , & ac97 , & chip -> ac97 ) ; if ( err < 0 ) { return err ; } snd_ac97_tune_hardware ( chip -> ac97 , ac97_quirks , quirk_override ) ; return 0 ; } 