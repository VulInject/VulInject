int v_buildps ( SCR * sp , char * p_p , char * s_p ) { VI_PRIVATE * vip ; size_t p_len , s_len ; char * p ; p_len = p_p == NULL ?0 : strlen ( p_p ) ; s_len = s_p == NULL ?0 : strlen ( s_p ) ; MALLOC_RET ( sp , p , p_len + s_len + 1 ) ; vip = VIP ( sp ) ; free ( vip -> ps ) ; if ( p_p != NULL ) { memmove ( p , p_p , p_len + 1 ) ; } if ( s_p != NULL ) { memmove ( p + p_len , s_p , s_len + 1 ) ; } vip -> ps = p ; return ( 0 ) ; } 