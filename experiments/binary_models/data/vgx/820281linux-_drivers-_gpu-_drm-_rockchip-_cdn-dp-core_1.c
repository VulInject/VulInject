static int cdn_dp_get_sink_capability ( struct cdn_dp_device * dp ) { int ret ; if ( ! cdn_dp_check_sink_connection ( dp ) ) { return - ENODEV ; } ret = cdn_dp_dpcd_read ( dp , DP_DPCD_REV , dp -> dpcd , DP_RECEIVER_CAP_SIZE ) ; if ( ret ) { DRM_DEV_ERROR ( dp -> dev , "Failed to get caps %d\n" , ret ) ; return ret ; } dp -> edid = drm_do_get_edid ( & dp -> connector , cdn_dp_get_edid_block , dp ) ; return 0 ; } 