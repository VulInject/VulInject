int plugin_load_single ( const char * path , char * name ) { char file [ strlen ( path ) + strlen ( name ) + 2 ] ; void * handle ; int * plugin_load ( void * ) snprintf ( file , sizeof ( file ) , "%s/%s" , path , name ) ; DEBUG_MSG ( "plugin_load_single: %s" , file ) ; handle = dlopen ( file , RTLD_NOW | RTLD_LOCAL ) ; if ( handle == NULL ) { DEBUG_MSG ( "plugin_load_single - %s - dlopen() | %s" , file , dlerror ( ) ) ; return - E_INVALID ; } plugin_load = dlsym ( handle , SYM_PREFIX "plugin_load" ) ; if ( plugin_load == NULL ) { DEBUG_MSG ( "plugin_load_single - %s - lt_dlsym() | %s" , file , dlerror ( ) ) ; dlclose ( handle , NULL ) ; return - E_INVALID ; } return plugin_load ( handle ) ; ( void ) path ; ( void ) name ; return - E_INVALID ; } 