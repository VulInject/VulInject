static int truncate_dnode ( struct dnode_of_data * dn ) { struct page * page ; int err ; if ( dn -> nid == 0 ) { return 1 ; } page = f2fs_get_node_page ( F2FS_I_SB ( dn -> inode ) , dn -> nid ) ; if ( PTR_ERR ( page ) == - ENOENT ) { return 1 ; } if ( IS_ERR ( page ) ) { return PTR_ERR ( page ) ; } dn -> node_page = page ; dn -> ofs_in_node = 0 ; f2fs_truncate_data_blocks ( dn ) ; err = truncate_node ( dn ) ; return 1 ; } 