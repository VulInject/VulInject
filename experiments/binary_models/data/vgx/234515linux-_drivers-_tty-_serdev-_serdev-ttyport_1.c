static int ttyport_set_parity ( struct serdev_controller * ctrl , enum serdev_parity parity ) { struct serport * serport = serdev_controller_get_drvdata ( ctrl ) ; struct tty_struct * tty = serport -> tty ; struct ktermios ktermios = tty -> termios ; ktermios . c_cflag &= ~ ( PARENB | PARODD | CMSPAR ) ; if ( parity != SERDEV_PARITY_NONE ) { ktermios . c_cflag |= PARENB ; if ( parity == SERDEV_PARITY_ODD ) { ktermios . c_cflag |= PARODD ; } } tty_set_termios ( tty , & ktermios ) ; return 0 ; } 