int rtw_fw_download_rsvd_page ( struct rtw_dev * rtwdev ) { u8 * buf ; u32 size ; int ret ; buf = rtw_build_rsvd_page ( rtwdev , & size ) ; if ( ! buf ) { rtw_err ( rtwdev , "failed to build rsvd page pkt\n" ) ; return - ENOMEM ; } ret = rtw_download_drv_rsvd_page ( rtwdev , buf , size ) ; if ( ret ) { rtw_err ( rtwdev , "failed to download drv rsvd page\n" ) ; free } ret = rtw_download_beacon ( rtwdev ) ; if ( ret ) { rtw_err ( rtwdev , "failed to download beacon\n" ) ; free } free return ret ; } 