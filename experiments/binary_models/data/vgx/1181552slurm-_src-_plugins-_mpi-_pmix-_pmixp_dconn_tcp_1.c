static pmixp_io_engine_t * _tcp_getio ( void * _priv ) static void _tcp_regio ( eio_handle_t * h ) int pmixp_dconn_tcp_prepare ( pmixp_dconn_handlers_t * handlers , char * * ep_data , size_t * ep_len ) { handlers -> init = _tcp_init ; handlers -> fini = _tcp_fini ; handlers -> connect = _tcp_connect ; handlers -> send = _tcp_send ; handlers -> getio = _tcp_getio ; handlers -> regio = _tcp_regio ; if ( 0 > net_stream_listen ( & _server_fd , & _server_port ) ) { PMIXP_ERROR ( "net_stream_listen" ) ; return SLURM_ERROR ; } * ep_len = sizeof ( _server_port ) ; * ep_data = xmalloc ( * ep_len ) ; memcpy ( * ep_data , & _server_port , * ep_len ) ; return _server_fd ; } 