static ssize_t current_value_show ( struct kobject * kobj , struct kobj_attribute * attr , char * buf ) { int instance_id = get_integer_instance_id ( kobj ) ; union acpi_object * obj ; ssize_t ret ; if ( instance_id < 0 ) { return instance_id ; } obj = get_wmiobj_pointer ( instance_id , DELL_WMI_BIOS_INTEGER_ATTRIBUTE_GUID ) ; if ( ! obj ) { return - EIO ; } if ( obj -> package . elements [ CURRENT_VAL ] . type != ACPI_TYPE_INTEGER ) { return - EINVAL ; } ret = snprintf ( buf , PAGE_SIZE , "%lld\n" , obj -> package . elements [ CURRENT_VAL ] . integer . value ) ; kfree ( obj ) ; return ret ; } 