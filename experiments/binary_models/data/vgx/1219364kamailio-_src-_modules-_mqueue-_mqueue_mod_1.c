static sr_kemi_xval_t * ki_mqx_get_mode ( sip_msg_t * msg , str * qname , int qtype , int rmode ) { mq_pv_t * mp = NULL ; mp = mq_pv_get ( qname ) ; if ( mp == NULL || mp -> item == NULL ) { sr_kemi_xval_null ( & _sr_kemi_mqueue_xval , 0 ) ; return & _sr_kemi_mqueue_xval ; } _sr_kemi_mqueue_xval . vtype = SR_KEMIP_STR ; if ( qtype == 0 ) { _sr_kemi_mqueue_xval . v . s = mp -> item -> key ; } else { _sr_kemi_mqueue_xval . v . s = mp -> item -> val ; } return & _sr_kemi_mqueue_xval ; } 