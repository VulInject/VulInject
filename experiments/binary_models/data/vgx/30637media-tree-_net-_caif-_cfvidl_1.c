static int cfvidl_transmit ( struct cflayer * layr , struct cfpkt * pkt ) { struct cfsrvl * service = container_obj ( layr ) ; struct caif_payload_info * info ; u32 videoheader = 0 ; int ret ; if ( ! cfsrvl_ready ( service , & ret ) ) { return ret ; } cfpkt_add_head ( pkt , & videoheader , 4 ) ; info = cfpkt_info ( pkt ) ; info -> channel_id = service -> layer . id ; info -> dev_info = & service -> dev_info ; return layr -> dn -> transmit ( layr -> dn , pkt ) ; } 