extern int jobcomp_kafka_conf_parse_location ( char * location ) { FILE * fp ; char * line = NULL , * key = NULL , * value = NULL ; size_t len = 0 ; ssize_t nread ; xassert ( rd_kafka_conf_list ) ; if ( ! ( fp = fopen ( location , "r" ) ) ) { error ( "%s: fopen() failed for file '%s': %m" , plugin_type , location ) ; return SLURM_ERROR ; } while ( ( nread = getline ( & line , & len , fp ) ) != - 1 ) { if ( ! _parse_key_value_line ( line , & key , & value ) ) { continue ; } read_config_add_key_pair ( rd_kafka_conf_list , key , value ) ; } fclose ( fp ) ; return SLURM_SUCCESS ; } 