START_TEST ( ) { batch_request preq ; stat_cntl cntl ; memset ( & preq , 0 , sizeof ( preq ) ) ; abort_called = 0 ; preq . rq_reply . brp_choice = BATCH_REPLY_CHOICE_Queue ; preq . rq_reply . brp_un . brp_txt . brp_str = strdup ( "MSG=1.napali" ) ; stat_update ( & preq , & cntl ) ; fail_unless ( abort_called == 0 ) ; } END_TEST START_TEST ( test_get_next_status_job ) { struct stat_cntl cntl ; int array_index = - 1 ; pbs_queue pque ; job_array * pa = ( job_array * ) calloc ( 1 , sizeof ( job_array ) ) ; pa -> ai_qs . array_size = 2 ; pa -> job_ids = ( char * * ) calloc ( 2 , sizeof ( char * ) ) ; pa -> job_ids [ 0 ] = strdup ( "1[0].napali" ) ; pa -> job_ids [ 1 ] = strdup ( "1[1].napali" ) ; cntl . sc_type = tjstQueue ; cntl . sc_pque = & pque ; fail_unless ( get_next_status_job ( & cntl , array_index , pa , NULL ) == NULL ) ; cntl . sc_type = tjstSummarizeArraysQueue ; fail_unless ( get_next_status_job ( & cntl , array_index , pa , NULL ) == NULL ) ; cntl . sc_type = tjstSummarizeArraysServer ; fail_unless ( get_next_status_job ( & cntl , array_index , pa , NULL ) == NULL ) ; cntl . sc_type = tjstServer ; } 