static void hdp_v6_0_get_clockgating_state ( struct amdgpu_device * adev , u64 * flags ) { int tmp ; tmp = RREG32_SOC15 ( HDP , 0 , regHDP_MEM_POWER_CTRL ) ; if ( tmp & HDP_MEM_POWER_CTRL__ATOMIC_MEM_POWER_LS_EN_MASK ) { * flags |= AMD_CG_SUPPORT_HDP_LS ; } if ( tmp & HDP_MEM_POWER_CTRL__ATOMIC_MEM_POWER_DS_EN_MASK ) { * flags |= AMD_CG_SUPPORT_HDP_DS ; } if ( tmp & HDP_MEM_POWER_CTRL__ATOMIC_MEM_POWER_SD_EN_MASK ) { * flags |= AMD_CG_SUPPORT_HDP_SD ; } } const struct amdgpu_hdp_funcs hdp_v6_0_funcs = { . flush_hdp = hdp_v6_0_flush_hdp . update_clock_gating = hdp_v6_0_update_clock_gating . get_clock_gating_state = hdp_v6_0_get_clockgating_state } ; 