unsigned int capability_get ( struct CapabilityIndex * idx , const char * cap , void * * ownerdata ) { struct CapabilityEntry * entry ; s_assert ( idx != NULL ) ; entry = rb_dictionary_retrieve ( idx -> cap_dict , cap ) ; if ( entry != NULL && ! ( entry -> flags & CAP_ORPHANED ) ) { if ( ownerdata != NULL ) { * ownerdata = entry -> ownerdata ; } return ( 1 << entry -> value ) ; } return 0 ; } 