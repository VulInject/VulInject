static void amd_start_sensor_v2 ( struct amd_mp2_dev * privdata , struct amd_mp2_sensor_info info ) { union sfh_cmd_base cmd_base ; cmd_base . ul = 0 ; cmd_base . cmd_v2 . cmd_id = ENABLE_SENSOR ; cmd_base . cmd_v2 . period = info . period ; cmd_base . cmd_v2 . sensor_id = info . sensor_idx ; cmd_base . cmd_v2 . length = 16 ; if ( info . sensor_idx == als_idx ) { cmd_base . cmd_v2 . mem_type = USE_C2P_REG ; } writeq ( info . dma_address , privdata -> mmio + AMD_C2P_MSG1 ) ; writel ( cmd_base . ul , privdata -> mmio + AMD_C2P_MSG0 ) ; } 