void eigrpe_orig_local_route ( struct eigrp_iface * ei , struct if_addr * if_addr , int withdraw ) { struct rinfo rinfo ; rinfo . af = if_addr -> af ; rinfo . type = EIGRP_ROUTE_INTERNAL ; rinfo . prefix = if_addr -> addr ; rinfo . prefixlen = if_addr -> prefixlen ; eigrp_applymask ( rinfo . af , & rinfo . prefix , & rinfo . prefix , rinfo . prefixlen ) ; if ( withdraw ) { rinfo . metric . delay = EIGRP_INFINITE_METRIC ; } else { rinfo . metric . delay = eigrp_composite_delay ( ei -> delay ) ; } rinfo . metric . bandwidth = eigrp_composite_bandwidth ( ei -> bandwidth ) ; metric_encode_mtu ( rinfo . metric . mtu , ei -> iface -> mtu ) ; rinfo . metric . hop_count = 0 ; rinfo . metric . reliability = DEFAULT_RELIABILITY ; rinfo . metric . load = DEFAULT_LOAD ; rinfo . metric . tag = 0 ; rinfo . metric . flags = 0 ; eigrpe_imsg_compose_rde ( IMSG_RECV_UPDATE , ei -> self -> peerid , 0 , & rinfo , sizeof ( rinfo ) ) ; } 