static int attr_nv_pack ( nvlist_t * request , void * * nv_request , size_t * nv_requestlen ) { size_t bufsize ; char * packbuf = NULL ; if ( nvsize ( request , & bufsize , NV_ENCODE_XDR ) != 0 ) { errno = EINVAL ; return ( - 1 ) ; } packbuf = malloc ( bufsize ) ; if ( packbuf == NULL ) { return ( - 1 ) ; } if ( nvpacker ( request , & packbuf , & bufsize , NV_ENCODE_XDR , 0 ) != 0 ) { errno = EINVAL ; return ( - 1 ) ; } else { * nv_request = ( void * ) packbuf ; * nv_requestlen = bufsize ; } return ( 0 ) ; } 