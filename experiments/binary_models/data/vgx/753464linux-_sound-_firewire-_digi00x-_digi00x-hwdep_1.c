static int hwdep_get_info ( struct snd_dg00x * dg00x , void __user * arg ) { struct fw_device * dev = fw_parent_device ( dg00x -> unit ) ; struct snd_firewire_get_info info ; info . type = SNDRV_FIREWIRE_TYPE_DIGI00X ; info . card = dev -> card -> index ; * ( __be32 * ) & info . guid [ 0 ] = cpu_to_be32 ( dev -> config_rom [ 3 ] ) ; * ( __be32 * ) & info . guid [ 4 ] = cpu_to_be32 ( dev -> config_rom [ 4 ] ) ; strscpy ( info . device_name , dev_name ( & dev -> device ) , sizeof ( info . device_name ) ) ; if ( copy_to_user ( arg , & info , sizeof ( info ) ) ) { return - EFAULT ; } return 0 ; } 