static int map__process_kallsym_symbol ( void * arg , const char * name , char type , u64 start ) { struct symbol * sym ; struct dso * dso = arg ; struct rb_root_cached * root = & dso -> symbols ; if ( name [ 0 ] == '$' ) { return 0 ; } sym = symbol__new ( start , 0 , kallsyms2elf_binding ( type ) , kallsyms2elf_type ( type ) , name ) ; if ( sym == NULL ) { return - ENOMEM ; } __symbols__insert ( root , sym , ! strchr ( name , '[' ) ) ; return 0 ; } 