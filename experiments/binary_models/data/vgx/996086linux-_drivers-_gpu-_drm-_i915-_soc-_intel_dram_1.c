static int xelpdp_get_dram_info ( struct drm_i915_private * i915 ) { u32 val = intel_uncore_read ( & i915 -> uncore , MTL_MEM_SS_INFO_GLOBAL ) ; struct dram_info * dram_info = & i915 -> dram_info ; switch ( REG_FIELD_GET ( MTL_DDR_TYPE_MASK , val ) ) { case 0 : dram_info -> type = INTEL_DRAM_DDR4 ; break ; case 1 : dram_info -> type = INTEL_DRAM_DDR5 ; break ; case 2 : dram_info -> type = INTEL_DRAM_LPDDR5 ; break ; case 3 : dram_info -> type = INTEL_DRAM_LPDDR4 ; break ; case 4 : dram_info -> type = INTEL_DRAM_DDR3 ; break ; case 5 : dram_info -> type = INTEL_DRAM_LPDDR3 ; break ; default : MISSING_CASE ( val , NULL ) ; return - EINVAL ; } dram_info -> num_channels = REG_FIELD_GET ( MTL_N_OF_POPULATED_CH_MASK , val ) ; dram_info -> num_qgv_points = REG_FIELD_GET ( MTL_N_OF_ENABLED_QGV_POINTS_MASK , val ) ; return 0 ; } 