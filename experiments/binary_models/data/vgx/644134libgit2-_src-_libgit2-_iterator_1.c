GIT_INLINE ( ) filesystem_iterator_examine_path ( , , , , , ) { bool is_dir = 0 ; iterator_pathlist_search_t match = ITERATOR_PATHLIST_FULL ; * is_dir_out = false ; * match_out = ITERATOR_PATHLIST_NONE ; if ( iter -> base . start_len ) { int cmp = iter -> base . strncomp ( path , iter -> base . start , path_len ) ; if ( cmp == 0 ) { if ( iter -> base . start [ path_len ] == '/' ) { is_dir = true ; } if ( iter -> base . start [ path_len ] != '\0' ) { cmp = - 1 ; } } } if ( iter -> base . end_len ) { int cmp = iter -> base . strncomp ( path , iter -> base . end , iter -> base . end_len ) ; if ( cmp > 0 ) { return false ; } } if ( iter -> base . pathlist . length ) { if ( frame_entry && frame_entry -> match != ITERATOR_PATHLIST_IS_PARENT ) { match = ITERATOR_PATHLIST_FULL ; } else { match = iterator_pathlist_search ( & iter -> base , path , path_len ) ; } if ( match == ITERATOR_PATHLIST_NONE ) { return false ; } if ( match == ITERATOR_PATHLIST_IS_DIR || match == ITERATOR_PATHLIST_IS_PARENT ) { is_dir = true ; } } * is_dir_out = is_dir ; * match_out = match ; return true ; } 