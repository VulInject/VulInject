static int cros_ec_notify ( struct notifier_block * nb , unsigned long queued_during_suspend , void * data ) { struct cros_ec_device * ec_dev = data ; struct charger_data * charger = container_of ( nb , charger_data , notifier ) ; u32 host_event ; if ( ec_dev -> event_data . event_type != EC_MKBP_EVENT_PCHG || ec_dev -> event_size != sizeof ( host_event ) ) { return NOTIFY_DONE ; } host_event = get_unaligned_le32 ( & ec_dev -> event_data . data . host_event ) ; return cros_pchg_event ( charger , host_event ) ; } 