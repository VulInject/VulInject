static void dmfe_free_dma_mem ( dma_area_t * dma_p ) { if ( dma_p -> dma_hdl != NULL ) { if ( dma_p -> ncookies ) { ( void ) ddi_dma_unbind_handle ( dma_p -> dma_hdl ) ; dma_p -> ncookies = 0 ; } ddi_dma_free_handle ( & dma_p -> dma_hdl ) ; dma_p -> dma_hdl = NULL ; dma_p -> mem_dvma = 0 ; dma_p -> setup_dvma = 0 ; } if ( dma_p -> acc_hdl != NULL ) { ddi_dma_mem_free ( & dma_p -> acc_hdl ) ; dma_p -> acc_hdl = NULL ; dma_p -> mem_va = NULL ; } } 