static int uvd_v7_0_ring_patch_cs_in_place ( struct amdgpu_cs_parser * p , struct amdgpu_job * job , struct amdgpu_ib * ib ) { struct amdgpu_ring * ring = to_amdgpu_ring ( job -> base . sched ) ; unsigned i ; for ( i = 0 ; i < ib -> length_dw ; i += 2 ) { uint32_t reg = amdgpu_ib_get_value ( ib , i ) ; reg -= p -> adev -> reg_offset [ UVD_HWIP ] [ 0 ] [ 1 ] ; reg += p -> adev -> reg_offset [ UVD_HWIP ] [ 1 ] [ 1 ] ; amdgpu_ib_set_value ( ib , i , reg ) ; } return 0 ; } 