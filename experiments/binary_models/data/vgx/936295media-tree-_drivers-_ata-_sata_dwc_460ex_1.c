static int sata_dwc_dma_get_channel ( struct sata_dwc_device_port * hsdevp ) { struct sata_dwc_device * hsdev = hsdevp -> hsdev ; struct device * dev = hsdev -> dev ; hsdevp -> chan = dma_request_chan ( dev , "sata-dma" ) ; if ( IS_ERR ( hsdevp -> chan ) ) { dev_err ( dev , "failed to allocate dma channel: %ld\n" , PTR_ERR ( hsdevp -> chan ) ) ; return PTR_ERR ( hsdevp -> chan ) ; } return 0 ; } 