t1char_get_metrics ( , , , ) { t1_chardesc t1char , * cd ; cd = & t1char ; init_charpath ( cd ) ; RESET_STATE ( ) ; CLEARSTACK ( ) ; t1char_build_charpath ( cd , & src , src + srclen , subrs ) ; if ( cs_stack_top != 0 || ps_stack_top != 0 ) { WARN ( "Stack not empty. (%d, %d)" , cs_stack_top , ps_stack_top ) ; } do_postproc ( cd ) ; if ( ginfo ) { ginfo -> wx = cd -> sbw . wx ; ginfo -> wy = cd -> sbw . wy ; ginfo -> bbox . llx = cd -> bbox . llx ; ginfo -> bbox . lly = cd -> bbox . lly ; ginfo -> bbox . urx = cd -> bbox . urx ; ginfo -> bbox . ury = cd -> bbox . ury ; if ( cd -> flags & T1_CS_FLAG_USE_SEAC ) { ginfo -> seac . adx = cd -> seac . adx ; ginfo -> seac . ady = cd -> seac . ady ; ginfo -> seac . bchar = cd -> seac . bchar ; ginfo -> seac . achar = cd -> seac . achar ; } else { ginfo -> use_seac = 0 ; } } release_charpath ( cd ) ; return 0 ; } 