static int pcan_usb_restart_async ( struct peak_usb_device * dev , struct urb * urb , u8 * buf ) { struct pcan_usb * pdev = container_of ( dev , pcan_usb , dev ) ; buf [ PCAN_USB_CMD_FUNC ] = 3 ; buf [ PCAN_USB_CMD_NUM ] = 2 ; buf [ PCAN_USB_CMD_ARGS ] = 1 ; usb_fill_bulk_urb ( urb , dev -> udev , usb_sndbulkpipe ( dev -> udev , PCAN_USB_EP_CMDOUT ) , buf , PCAN_USB_CMD_LEN , pcan_usb_restart_pending , pdev ) ; return usb_submit_urb ( urb , GFP_ATOMIC ) ; } 