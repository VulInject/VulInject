static int comc_cd_set ( struct env_var * ev , int flags , const void * value ) { struct console * cp ; struct serial * sp ; if ( value == NULL ) { return ( CMD_ERROR ) ; } if ( ( cp = get_console ( ev -> ev_name ) ) == NULL ) { return ( CMD_ERROR ) ; } sp = cp -> c_private ; if ( strcmp ( value , "true" ) == 0 ) { sp -> ignore_cd = 1 ; } if ( strcmp ( value , "false" ) == 0 ) { sp -> ignore_cd = 0 ; } else { return ( CMD_ERROR ) ; } ( void ) comc_setup ( cp ) ; env_setenv ( ev -> ev_name , flags | EV_NOHOOK , value , NULL ) ; return ( CMD_OK ) ; } 