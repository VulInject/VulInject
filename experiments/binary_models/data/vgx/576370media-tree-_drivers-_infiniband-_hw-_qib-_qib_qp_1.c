int qib_check_send_wqe ( struct rvt_qp * qp , struct rvt_swqe * wqe ) { struct rvt_ah * ah ; int ret = 0 ; switch ( qp -> ibqp . qp_type ) { case IB_QPT_RC : case IB_QPT_UC : if ( wqe -> length > 0x80000000U ) { return - EINVAL ; } break ; case IB_QPT_SMI : case IB_QPT_GSI : case IB_QPT_UD : ah = ibah_to_rvtah ( wqe -> ud_wr . ah ) ; ret = 1 ; break ; default : break ; } return ret ; } 