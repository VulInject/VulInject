static void VaryGlyphs ( struct ttfinfo * info , int tupleIndex , int gnum , int * points , FILE * ttf ) { int pcnt , tc ; int * xdeltas , * ydeltas ; struct variations * v = info -> variations ; if ( info -> chars [ gnum ] == NULL ) { return ; } if ( points == NULL ) { LogError ( _ ( "Mismatched local and shared tuple flags.\n" ) ) ; return ; } if ( points [ 0 ] == ALL_POINTS ) { pcnt = PointCount ( info -> chars [ gnum ] ) + 4 ; } else { for ( pcnt = 0 ; points [ pcnt ] != END_OF_POINTS ; ++ pcnt ) { } } xdeltas = readpackeddeltas ( ttf , pcnt ) ; ydeltas = readpackeddeltas ( ttf , pcnt ) ; if ( xdeltas [ 0 ] != BAD_DELTA && ydeltas [ 0 ] != BAD_DELTA ) { for ( tc = 0 ; tc < v -> tuple_count ; ++ tc ) { if ( TuplesMatch ( v , tc , tupleIndex ) ) { VaryGlyph ( v -> tuples [ tc ] . chars [ gnum ] , points , xdeltas , ydeltas , pcnt ) ; } } } else { static int warned = false ; if ( ! warned ) { LogError ( _ ( "Incorrect number of deltas in glyph %d (%s)\n" ) , gnum , info -> chars [ gnum ] -> name != NULL ?info -> chars [ gnum ] -> name : "<Nameless>" ) ; } warned = true ; } free ( ydeltas ) ; } 