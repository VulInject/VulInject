static int cpuacct_stats_show ( struct seq_file * sf , void * v ) { struct cpuacct * ca = css_ca ( seq_css ( sf ) ) ; struct task_cputime cputime ; u64 val [ CPUACCT_STAT_NSTATS ] ; int cpu ; int stat ; for_each_possible_cpu ( ) { u64 * cpustat = per_cpu_ptr ( ca -> cpustat , cpu ) -> cpustat ; cputime . utime += cpustat [ CPUTIME_USER ] ; cputime . utime += cpustat [ CPUTIME_NICE ] ; cputime . stime += cpustat [ CPUTIME_SYSTEM ] ; cputime . stime += cpustat [ CPUTIME_IRQ ] ; cputime . stime += cpustat [ CPUTIME_SOFTIRQ ] ; cputime . sum_exec_runtime += * per_cpu_ptr ( ca -> cpuusage , cpu ) ; } cputime_adjust ( & cputime , & seq_css ( sf ) -> cgroup -> prev_cputime , & val [ CPUACCT_STAT_USER ] , & val [ CPUACCT_STAT_SYSTEM ] ) ; for ( stat = 0 ; stat < CPUACCT_STAT_NSTATS ; stat ++ ) { seq_printf ( sf , "%s %llu\n" , cpuacct_stat_desc [ stat ] , nsec_to_clock_t ( val [ stat ] ) ) ; } return 0 ; } 