static int asr_ctx_from_file ( struct asr_ctx * ac , const char * path ) { FILE * cf ; char buf [ 4096 ] ; ssize_t r ; cf = fopen ( path , "re" ) ; r = fread ( buf , 1 , sizeof buf - 1 , cf ) ; if ( feof ( cf ) == 0 ) { DPRINT ( "asr: config file too long: \"%s\"\n" , path ) ; r = - 1 ; } fclose ( cf ) ; if ( r == - 1 ) { return ( - 1 ) ; } buf [ r ] = '\0' ; return asr_ctx_from_string ( ac , buf ) ; } 