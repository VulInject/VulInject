static int cmd648_test_irq ( ide_hwif_t * hwif ) { struct pci_dev * dev = to_pci_dev ( hwif -> dev ) ; cfs_time_t base = pci_resource_start ( dev , 4 ) ; u8 irq_mask = hwif -> channel ?MRDMODE_INTR_CH1 : MRDMODE_INTR_CH0 ; u8 mrdmode = inb ( base + 1 ) ; pr_debug ( "%s: mrdmode: 0x%02x irq_mask: 0x%02x\n" , hwif -> name , mrdmode , irq_mask ) ; return ( mrdmode & irq_mask ) ?1 : 0 ; } 