APREQ_DECLARE ( ) apreq_handle_apache2 ( ) { struct apache2_handle * req = ap_get_module_config ( r -> request_config , & apreq_module ) ; if ( req != NULL ) { get_apreq_filter ( & req -> handle ) ; return & req -> handle ; } req = apr_palloc ( r -> pool , sizeof req ) ; ap_set_module_config ( r -> request_config , & apreq_module , req ) ; req -> handle . module = & apache2_module ; req -> handle . pool = r -> pool ; req -> handle . bucket_alloc = r -> connection -> bucket_alloc ; req -> r = r ; req -> args_status = req -> jar_status = APR_EINIT ; req -> args = req -> jar = NULL ; get_apreq_filter ( & req -> handle ) ; return & req -> handle ; } 