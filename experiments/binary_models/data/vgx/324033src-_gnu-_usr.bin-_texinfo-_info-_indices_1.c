do_info_index_search ( , , ) { FILE_BUFFER * fb ; char * line ; index_offset = 0 ; maybe_free ( index_search ) ; index_search = ( char * ) NULL ; fb = file_buffer_of_window ( window ) ; if ( ! initial_index_filename || ( FILENAME_CMP ( initial_index_filename , fb -> filename ) != 0 ) ) { info_free_references ( index_index ) ; window_message_in_echo_area ( ( char * ) _ ( "Finding index entries..." ) , NULL , NULL ) ; index_index = info_indices_of_file_buffer ( fb ) ; } if ( ! index_index ) { info_error ( ( char * ) _ ( "No indices found." ) , NULL , NULL ) ; return ; } if ( search_string && * search_string ) { line = xstrdup ( search_string ) ; } else { line = info_read_maybe_completing ( window , ( char * ) _ ( "Index entry: " ) , index_index ) ; window = active_window ; if ( ! line ) { info_abort_key ( active_window , 1 , 0 ) ; return ; } if ( ! * line ) { if ( initial_index_filename && initial_index_nodename ) { NODE * node ; node = info_get_node ( initial_index_filename , initial_index_nodename ) ; set_remembered_pagetop_and_point ( window ) ; window_set_node_of_window ( window , node ) ; remember_window_and_node ( window , node ) ; window_clear_echo_area ( ) ; return ; } } } { int old_offset ; if ( count < 0 ) { register int i ; for ( i = 0 ; index_index [ i ] ; i ++ ) { } index_offset = i ; } else { index_offset = - 1 ; } old_offset = index_offset ; index_search = line ; info_next_index_match ( window , count , 0 ) ; if ( index_offset == old_offset ) { index_offset = 0 ; } } } 