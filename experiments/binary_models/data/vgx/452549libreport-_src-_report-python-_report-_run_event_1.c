static int set_post_run_callback ( PyObject * pself , PyObject * callback , void * unused ) { p_run_event_state * self = ( p_run_event_state * ) pself ; if ( callback == Py_None ) { Py_XDECREF ( self -> post_run_callback ) ; self -> state -> post_run_callback = NULL ; self -> state -> post_run_param = NULL ; return 0 ; } if ( ! PyCallable_Check ( callback ) ) { PyErr_SetString ( PyExc_TypeError , "parameter must be callable" ) ; return - 1 ; } Py_INCREF ( callback ) ; Py_XDECREF ( self -> post_run_callback ) ; self -> post_run_callback = callback ; self -> state -> post_run_callback = post_run_callback ; self -> state -> post_run_param = self ; return 0 ; } 