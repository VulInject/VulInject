static struct afs_call * afs_alloc_call ( struct afs_net * net , const struct afs_call_type * type , gfp_t gfp ) { struct afs_call * call ; int o ; call = kmalloc ( sizeof ( * call ) , gfp ) ; if ( ! call ) { return NULL ; } call -> type = type ; call -> net = net ; call -> debug_id = atomic_inc_return ( & rxrpc_debug_id ) ; refcount_set ( & call -> ref , 1 ) ; INIT_WORK ( & call -> async_work , afs_process_async_call ) ; init_waitqueue_head ( & call -> waitq ) ; spin_lock_init ( & call -> state_lock ) ; call -> iter = & call -> def_iter ; o = atomic_inc_return ( & net -> nr_outstanding_calls ) ; trace_afs_call ( call -> debug_id , afs_call_trace_alloc , 1 , o , __builtin_return_address ( 0 ) ) ; return call ; } 