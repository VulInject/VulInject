struct drm_connector * msm_dsi_manager_connector_init ( u8 id ) { struct msm_dsi * msm_dsi = dsi_mgr_get_dsi ( id ) ; struct drm_connector * connector = NULL ; struct dsi_connector * dsi_connector ; int ret ; dsi_connector = kzalloc ( sizeof ( * dsi_connector ) , GFP_KERNEL ) ; dsi_connector -> id = id ; connector = & dsi_connector -> base ; ret = drm_connector_init ( msm_dsi -> dev , connector , & dsi_mgr_connector_funcs , DRM_MODE_CONNECTOR_DSI ) ; if ( ret ) { return ERR_PTR ( ret ) ; } drm_connector_helper_add ( connector , & dsi_mgr_conn_helper_funcs ) ; connector -> polled = DRM_CONNECTOR_POLL_HPD ; connector -> interlace_allowed = 0 ; connector -> doublescan_allowed = 0 ; drm_mode_connector_attach_encoder ( connector , msm_dsi -> encoder ) ; return connector ; } 