static bool lb_transmit ( struct team * team , struct sk_buff * skb ) { struct lb_priv * lb_priv = get_lb_priv ( team ) ; lb_select_tx_port_func_t * select_tx_port_func ; struct team_port * port ; unsigned char hash ; unsigned int tx_bytes = skb -> len ; hash = lb_get_skb_hash ( lb_priv , skb ) ; select_tx_port_func = rcu_dereference_bh ( lb_priv -> select_tx_port_func , NULL ) ; port = select_tx_port_func ( team , lb_priv , skb , hash ) ; if ( unlikely ( ! port ) ) { drop } if ( team_dev_queue_xmit ( team , port , skb ) ) { return false ; } lb_update_tx_stats ( tx_bytes , lb_priv , get_lb_port_priv ( port ) , hash ) ; return true ; drop dev_kfree_skb_any ( skb ) ; return false ; } 