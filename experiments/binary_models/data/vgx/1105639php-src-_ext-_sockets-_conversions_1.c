static void to_zval_read_sockaddr_aux ( const char * sockaddr_c , zval * zv , res_context * ctx ) { const struct sockaddr * saddr = ( sockaddr * ) sockaddr_c ; if ( saddr -> sa_family == 0 ) { ZVAL_NULL ( zv , NULL ) ; return ; } array_init ( zv ) ; switch ( saddr -> sa_family ) { case AF_INET : to_zval_read_sockaddr_in ( sockaddr_c , zv , ctx ) ; break ; case AF_INET6 : to_zval_read_sockaddr_in6 ( sockaddr_c , zv , ctx ) ; break ; case AF_UNIX : to_zval_read_sockaddr_un ( sockaddr_c , zv , ctx ) ; break ; default : do_to_zval_err ( ctx , "cannot read struct sockaddr with family %d; " "not supported" , ( int ) saddr -> sa_family ) ; break ; } } 