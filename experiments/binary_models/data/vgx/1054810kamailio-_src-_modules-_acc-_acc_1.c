int acc_run_engines ( struct sip_msg * msg , int type , int * reset ) { acc_info_t inf ; acc_engine_t * e ; e = acc_api_get_engines ( ) ; if ( e == NULL ) { return 0 ; } inf . env = & acc_env ; inf . varr = val_arr ; inf . iarr = int_arr ; inf . tarr = type_arr ; inf . leg_info = leg_info ; while ( e ) { if ( e -> flags & 1 ) { if ( ( type == 0 ) && isflagset ( msg , e -> acc_flag ) == 1 ) { LM_DBG ( "acc event for engine: %s\n" , e -> name ) ; e -> acc_req ( msg , & inf ) ; if ( reset ) { * reset |= 1 << e -> acc_flag ; } } if ( ( type == 1 ) && isflagset ( msg , e -> missed_flag ) == 1 ) { LM_DBG ( "missed event for engine: %s\n" , e -> name ) ; e -> acc_req ( msg , & inf ) ; if ( reset ) { * reset |= 1 << e -> missed_flag ; } } } e = e -> next ; } return 0 ; } 