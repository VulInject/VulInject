int control_close ( int fd ) { struct ctl_conn * c ; if ( ( c = control_connbyfd ( fd ) ) == NULL ) { log_warn ( "control_close: fd %d: not found" , fd ) ; return ( 0 ) ; } msgbuf_clear ( & c -> ibuf . w ) ; TAILQ_REMOVE ( & ctl_conns , c , entry ) ; close ( c -> ibuf . fd ) ; return ( 1 ) ; } 