static int pstore_file_open ( struct inode * inode , struct file * file ) { struct pstore_private * ps = inode -> i_private ; struct seq_file * sf ; int err ; const struct seq_operations * sops = NULL ; if ( ps -> record -> type == PSTORE_TYPE_FTRACE ) { sops = & pstore_ftrace_seq_ops ; } err = seq_open ( file , sops ) ; sf = file -> private_data ; sf -> private = ps ; return 0 ; } 