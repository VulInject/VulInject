static int smu8_enable_disable_uvd_dpm ( struct pp_hwmgr * hwmgr , bool enable ) { struct smu8_hwmgr * data = hwmgr -> backend ; int dpm_features = 0 ; if ( enable && phm_cap_enabled ( hwmgr -> platform_descriptor . platformCaps , PHM_PlatformCaps_UVDDPM ) ) { data -> dpm_flags |= DPMFlags_UVD_Enabled ; dpm_features |= UVD_DPM_MASK ; smum_send_msg_to_smc_with_parameter ( hwmgr , PPSMC_MSG_EnableAllSmuFeatures , dpm_features , NULL ) ; } else { dpm_features |= UVD_DPM_MASK ; data -> dpm_flags &= ~ DPMFlags_UVD_Enabled ; smum_send_msg_to_smc_with_parameter ( hwmgr , PPSMC_MSG_DisableAllSmuFeatures , dpm_features , NULL ) ; } return 0 ; } 