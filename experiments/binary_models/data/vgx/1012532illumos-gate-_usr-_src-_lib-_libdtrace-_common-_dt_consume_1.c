static int dt_print_quanthdr_packed ( dtrace_hdl_t * dtp , FILE * fp , int width , const dtrace_aggdata_t * aggdata , dtrace_actkind_t action ) { int min = aggdata -> dtada_minbin , max = aggdata -> dtada_maxbin ; int minwidth , maxwidth , i ; assert ( action == DTRACEAGG_QUANTIZE || action == DTRACEAGG_LQUANTIZE ) ; if ( action == DTRACEAGG_QUANTIZE ) { if ( min != 0 && min != DTRACE_QUANTIZE_ZEROBUCKET ) { min -- ; } if ( max < DTRACE_QUANTIZE_NBUCKETS - 1 ) { max ++ ; } minwidth = dt_ndigits ( DTRACE_QUANTIZE_BUCKETVAL ( min ) ) ; maxwidth = dt_ndigits ( DTRACE_QUANTIZE_BUCKETVAL ( max ) ) ; } else { maxwidth = 8 ; minwidth = maxwidth - 1 ; max ++ ; } for ( i = min ; i <= max ; i ++ ) { if ( dt_printf ( dtp , fp , "-" ) < 0 ) { return ( - 1 ) ; } } return ( dt_printf ( dtp , fp , ". %*s | count\n" , - maxwidth , "max" ) ) ; } 