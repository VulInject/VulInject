static int __smb2_handle_cancelled_cmd ( struct cifs_tcon * tcon , __u16 cmd , __u64 mid , __u64 persistent_fid , __u64 volatile_fid ) { struct close_cancelled_open * cancelled ; cancelled = kzalloc ( sizeof ( * cancelled ) , GFP_ATOMIC ) ; cancelled -> fid . persistent_fid = persistent_fid ; cancelled -> fid . volatile_fid = volatile_fid ; cancelled -> tcon = tcon ; cancelled -> cmd = cmd ; cancelled -> mid = mid ; INIT_WORK ( & cancelled -> work , smb2_cancelled_close_fid ) ; WARN_ON ( queue_work ( cifsiod_wq , & cancelled -> work ) == false ) ; return 0 ; } 