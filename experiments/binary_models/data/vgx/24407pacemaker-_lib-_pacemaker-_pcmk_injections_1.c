static void create_node_entry ( cib_t * cib_conn , const char * node ) { int rc = pcmk_ok ; char * xpath = crm_strdup_printf ( XPATH_NODE_CONFIG , node ) ; rc = cib_conn -> cmds -> query ( cib_conn , xpath , NULL , cib_xpath | cib_sync_call | cib_scope_local ) ; if ( rc == - ENXIO ) { xmlNode * cib_object = create_xml_node ( NULL , XML_CIB_TAG_NODE ) ; crm_xml_add ( cib_object , XML_ATTR_ID , node ) ; crm_xml_add ( cib_object , XML_ATTR_UNAME , node ) ; cib_conn -> cmds -> create ( cib_conn , XML_CIB_TAG_NODES , cib_object , cib_sync_call | cib_scope_local ) ; } free ( xpath ) ; } 