static void free_dcp_profile ( RSDcp * dcp ) { if ( dcp -> tone_curve ) { g_object_unref ( dcp -> tone_curve ) ; } if ( dcp -> looktable ) { g_object_unref ( dcp -> looktable ) ; } if ( dcp -> huesatmap_interpolated ) { g_object_unref ( dcp -> huesatmap_interpolated ) ; } if ( dcp -> huesatmap1 ) { g_object_unref ( dcp -> huesatmap1 ) ; } if ( dcp -> huesatmap2 ) { g_object_unref ( dcp -> huesatmap2 ) ; } if ( dcp -> tone_curve_lut ) { free ( dcp -> tone_curve_lut ) ; } dcp -> huesatmap1 = NULL ; dcp -> huesatmap2 = NULL ; dcp -> huesatmap_interpolated = NULL ; dcp -> huesatmap = NULL ; dcp -> looktable = NULL ; dcp -> tone_curve_lut = NULL ; dcp -> use_profile = FALSE ; if ( dcp -> huesatmap_precalc -> lookups ) { free ( dcp -> huesatmap_precalc -> lookups ) ; dcp -> huesatmap_precalc -> lookups = NULL ; } if ( dcp -> looktable_precalc -> lookups ) { free ( dcp -> looktable_precalc -> lookups ) ; dcp -> looktable_precalc -> lookups = NULL ; } dcp -> temp1 = dcp -> temp2 = 0 ; dcp -> has_color_matrix1 = dcp -> has_color_matrix2 = dcp -> has_forward_matrix1 = dcp -> has_forward_matrix2 = FALSE ; } 