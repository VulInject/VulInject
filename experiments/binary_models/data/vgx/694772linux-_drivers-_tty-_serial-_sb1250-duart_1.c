static void sbd_init_port ( struct sbd_port * sport ) { struct uart_port * uport = & sport -> port ; write_sbdchn ( sport , R_DUART_CMD , V_DUART_MISC_CMD_RESET_TX ) ; write_sbdchn ( sport , R_DUART_CMD , V_DUART_MISC_CMD_RESET_RX ) ; write_sbdchn ( sport , R_DUART_MODE_REG_1 , V_DUART_BITS_PER_CHAR_8 ) ; write_sbdchn ( sport , R_DUART_MODE_REG_2 , 0 ) ; write_sbdchn ( sport , R_DUART_FULL_CTL , V_DUART_INT_TIME ( 0 ) | V_DUART_SIG_FULL ( 15 ) ) ; write_sbdchn ( sport , R_DUART_OPCR_X , 0 ) ; write_sbdchn ( sport , R_DUART_AUXCTL_X , 0 ) ; write_sbdshr ( sport , R_DUART_IMRREG ( ( uport -> line ) % 2 ) , 0 ) ; sport -> initialised = 1 ; } 