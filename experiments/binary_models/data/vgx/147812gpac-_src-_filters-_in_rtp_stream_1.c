static void rtpin_stream_queue_pck ( GF_RTPInStream * stream , GF_FilterPacket * pck , u64 cts ) { while ( stream -> first_in_rtp_pck ) { u64 prev_cts ; GF_FilterPacket * prev = gf_list_get ( stream -> pck_queue , 0 ) ; if ( ! prev ) { break ; } prev_cts = gf_filter_pck_get_cts ( prev ) ; gf_list_rem ( stream -> pck_queue , 0 ) ; gf_filter_pck_send ( prev ) ; } stream -> first_in_rtp_pck = GF_FALSE ; gf_list_add ( stream -> pck_queue , pck ) ; while ( gf_list_count ( stream -> pck_queue ) > 30 ) { GF_FilterPacket * prev = gf_list_pop_front ( stream -> pck_queue ) ; gf_filter_pck_send ( prev ) ; } } 