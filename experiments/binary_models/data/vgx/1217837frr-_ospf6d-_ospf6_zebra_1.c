void ospf6_zebra_delete_discard ( struct ospf6_route * request , struct ospf6 * ospf6 ) { struct zapi_route api ; struct prefix * dest = & request -> prefix ; if ( ospf6 -> gr_info . restart_in_progress || ospf6 -> gr_info . prepare_in_progress ) { if ( IS_DEBUG_OSPF6_GR ) { zlog_debug ( "Zebra: Graceful Restart in progress -- not uninstalling %pFX" , & request -> prefix ) ; } return ; } if ( CHECK_FLAG ( request -> flag , OSPF6_ROUTE_BLACKHOLE_ADDED ) ) { api . vrf_id = ospf6 -> vrf_id ; api . type = ZEBRA_ROUTE_OSPF6 ; api . safi = SAFI_UNICAST ; api . prefix = * dest ; zapi_route_set_blackhole ( & api , BLACKHOLE_NULL ) ; zclient_route_send ( ZEBRA_ROUTE_DELETE , zclient , & api ) ; if ( IS_OSPF6_DEBUG_ZEBRA ( SEND ) ) { zlog_debug ( "Zebra: Route delete discard %pFX" , dest ) ; } UNSET_FLAG ( request -> flag , OSPF6_ROUTE_BLACKHOLE_ADDED ) ; } else { if ( IS_OSPF6_DEBUG_ZEBRA ( SEND ) ) { zlog_debug ( "Zebra: Blackhole route already deleted %pFX" , dest ) ; } } } 