int __fs_parse ( struct p_log * log , const struct fs_parameter_spec * desc , struct fs_parameter * param , struct fs_parse_result * result ) { const struct fs_parameter_spec * p ; result -> uint_64 = 0 ; p = fs_lookup_key ( desc , param , & result -> negated ) ; if ( p -> flags & fs_param_deprecated ) { warn_plog ( log , "Deprecated parameter '%s'" , param -> key ) ; } if ( is_flag ( p ) ) { if ( param -> type != fs_value_is_flag ) { return inval_plog ( log , "Unexpected value for '%s'" , param -> key ) ; } result -> boolean = ! result -> negated ; } else { int ret = p -> type ( log , p , param , result ) ; if ( ret ) { return ret ; } } return p -> opt ; } 