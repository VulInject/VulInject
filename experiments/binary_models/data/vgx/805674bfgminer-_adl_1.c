static inline int __gpu_fanspeed ( struct gpu_adl * ga ) { if ( ! ( ga -> lpFanSpeedInfo . iFlags & ADL_DL_FANCTRL_SUPPORTS_RPM_READ ) ) { return - 1 ; } ga -> lpFanSpeedValue . iSpeedType = ADL_DL_FANCTRL_SPEED_TYPE_RPM ; if ( ADL_Overdrive5_FanSpeed_Get ( ga -> iAdapterIndex , 0 , & ga -> lpFanSpeedValue ) != ADL_OK ) { return - 1 ; } return ga -> lpFanSpeedValue . iFanSpeed ; } 