static int bt3c_config ( struct pcmcia_device * link ) { struct bt3c_info * info = link -> priv ; int i ; cfs_time_t try ; for ( try = 0 ; try < 2 ; try ++ ) { if ( ! pcmcia_loop_config ( link , bt3c_check_config , ( void * ) try ) ) { found_port } } if ( ! pcmcia_loop_config ( link , bt3c_check_config_notpicky , NULL ) ) { found_port } BT_ERR ( "No usable port range found" ) ; failed found_port i = pcmcia_request_irq ( link , & bt3c_interrupt ) ; if ( i != 0 ) { failed } i = pcmcia_enable_device ( link ) ; if ( i != 0 ) { failed } if ( bt3c_open ( info ) != 0 ) { failed } return 0 ; failed bt3c_release ( link ) ; return - ENODEV ; } 