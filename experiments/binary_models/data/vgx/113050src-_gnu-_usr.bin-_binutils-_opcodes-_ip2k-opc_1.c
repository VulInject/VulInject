ip2k_cgen_init_opcode_table ( ) CGEN_CPU_DESC cd ; { int i ; int num_macros = ( sizeof ( ip2k_cgen_macro_insn_table ) / sizeof ( ip2k_cgen_macro_insn_table [ 0 ] ) ) ; const CGEN_IBASE * ib = & ip2k_cgen_macro_insn_table [ 0 ] ; const CGEN_OPCODE * oc = & ip2k_cgen_macro_insn_opcode_table [ 0 ] ; CGEN_INSN * insns = ( CGEN_INSN * ) xmalloc ( num_macros * sizeof ( CGEN_INSN ) ) ; for ( i = 0 ; i < num_macros ; ++ i ) { insns [ i ] . base = & ib [ i ] ; insns [ i ] . opcode = & oc [ i ] ; ip2k_cgen_build_insn_regex ( & insns [ i ] ) ; } cd -> macro_insn_table . init_entries = insns ; cd -> macro_insn_table . entry_size = sizeof ( CGEN_IBASE ) ; cd -> macro_insn_table . num_init_entries = num_macros ; oc = & ip2k_cgen_insn_opcode_table [ 0 ] ; insns = ( CGEN_INSN * ) cd -> insn_table . init_entries ; for ( i = 0 ; i < MAX_INSNS ; ++ i ) { insns [ i ] . opcode = & oc [ i ] ; ip2k_cgen_build_insn_regex ( & insns [ i ] ) ; } cd -> sizeof_fields = sizeof ( CGEN_FIELDS ) ; cd -> set_fields_bitsize = set_fields_bitsize ; cd -> asm_hash_p = asm_hash_insn_p ; cd -> asm_hash = asm_hash_insn ; cd -> asm_hash_size = CGEN_ASM_HASH_SIZE ; cd -> dis_hash_p = dis_hash_insn_p ; cd -> dis_hash = dis_hash_insn ; cd -> dis_hash_size = CGEN_DIS_HASH_SIZE ; } 