static bool ipa_cmd_register_write_valid ( struct ipa * ipa ) { const struct reg * reg ; const char * name ; u32 offset ; if ( ipa_table_hash_support ( ipa ) ) { if ( ipa -> version < IPA_VERSION_5_0 ) { reg = ipa_reg ( ipa , FILT_ROUT_HASH_FLUSH ) ; } else { reg = ipa_reg ( ipa , FILT_ROUT_CACHE_FLUSH ) ; } offset = reg_offset ( reg ) ; name = "filter/route hash flush" ; } reg = ipa_reg ( ipa , ENDP_STATUS ) ; offset = reg_n_offset ( reg , IPA_ENDPOINT_COUNT - 1 ) ; name = "maximal endpoint status" ; if ( ! ipa_cmd_register_write_offset_valid ( ipa , name , offset ) ) { return false ; } return true ; } 