int asix_set_mac_address ( struct net_device * net , void * p ) { struct usbnet * dev = netdev_priv ( net ) ; struct asix_data * data = ( asix_data * ) & dev -> data ; struct sockaddr * addr = p ; if ( netif_running ( net ) ) { return - EBUSY ; } eth_hw_addr_set ( net , addr -> sa_data ) ; memcpy ( data -> mac_addr , addr -> sa_data , ETH_ALEN ) ; asix_write_cmd_async ( dev , AX_CMD_WRITE_NODE_ID , 0 , 0 , ETH_ALEN , data -> mac_addr ) ; return 0 ; } 