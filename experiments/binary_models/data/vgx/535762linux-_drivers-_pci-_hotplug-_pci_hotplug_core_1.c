int __pci_hp_initialize ( struct hotplug_slot * slot , struct pci_bus * bus , int devnr , const char * name , struct module * owner , const char * mod_name ) { struct pci_slot * pci_slot ; if ( slot -> ops == NULL ) { return - EINVAL ; } slot -> owner = owner ; slot -> mod_name = mod_name ; pci_slot = pci_create_slot ( bus , devnr , name , slot ) ; if ( IS_ERR ( pci_slot ) ) { return PTR_ERR ( pci_slot ) ; } slot -> pci_slot = pci_slot ; pci_slot -> hotplug = slot ; return 0 ; } 