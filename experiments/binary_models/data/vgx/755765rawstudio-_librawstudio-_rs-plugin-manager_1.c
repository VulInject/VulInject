if ( g_str_has_suffix ( filename , "." G_MODULE_SUFFIX ) ) { RSPlugin * plugin ; gchar * path ; path = g_build_filename ( PACKAGE_LIBRARY_DIR , filename , NULL ) ; plugin = rs_plugin_new ( path ) ; g_free ( path ) ; g_assert ( g_type_module_use ( G_TYPE_MODULE ( plugin ) ) ) ; plugins = g_list_prepend ( plugins , plugin ) ; RS_DEBUG ( PLUGINS , "%s loaded" , filename ) ; num ++ ; } ( PLUGINS , "%d plugins loaded in %.03f second" , num , g_timer_elapsed ( gt , NULL ) ) ; GType * plugins ; guint n_plugins , i ; plugins = g_type_children ( RS_TYPE_FILTER , & n_plugins ) ; RS_DEBUG ( PLUGINS , "%d filters loaded:" , n_plugins ) ; for ( i = 0 ; i < n_plugins ; i ++ ) { RSFilterClass * klass ; GParamSpec * * specs ; guint n_specs = 0 ; gint s ; klass = g_type_class_ref ( plugins [ i ] ) ; RS_DEBUG ( PLUGINS , "* %s: %s" , g_type_name ( plugins [ i ] ) , klass -> name ) ; specs = g_object_class_list_properties ( G_OBJECT_CLASS ( klass ) , & n_specs ) ; for ( s = 0 ; s < n_specs ; s ++ ) { RS_DEBUG ( PLUGINS , "  + \"%s\":\t%s%s%s%s%s%s%s%s [%s]" , specs [ s ] -> name , ( specs [ s ] -> flags & G_PARAM_READABLE ) ?" READABLE" : "" , ( specs [ s ] -> flags & G_PARAM_WRITABLE ) ?" WRITABLE" : "" , ( specs [ s ] -> flags & G_PARAM_CONSTRUCT ) ?" CONSTRUCT" : "" , ( specs [ s ] -> flags & G_PARAM_CONSTRUCT_ONLY ) ?" CONSTRUCT_ONLY" : "" , ( specs [ s ] -> flags & G_PARAM_LAX_VALIDATION ) ?" LAX_VALIDATION" : "" , ( specs [ s ] -> flags & G_PARAM_STATIC_NAME ) ?" STATIC_NAME" : "" , ( specs [ s ] -> flags & G_PARAM_STATIC_NICK ) ?" STATIC_NICK" : "" , ( specs [ s ] -> flags & G_PARAM_STATIC_BLURB ) ?" STATIC_BLURB" : "" , g_param_spec_get_blurb ( specs [ s ] ) ) ; } g_type_class_unref ( klass ) ; } g_free ( plugins ) ; plugins = g_type_children ( RS_TYPE_OUTPUT , & n_plugins ) ; RS_DEBUG ( PLUGINS , "%d exporters loaded:" , n_plugins ) ; for ( i = 0 ; i < n_plugins ; i ++ ) { RSOutputClass * klass ; GParamSpec * * specs ; guint n_specs = 0 ; gint s ; klass = g_type_class_ref ( plugins [ i ] ) ; RS_DEBUG ( PLUGINS , "* %s: %s" , g_type_name ( plugins [ i ] ) , klass -> display_name ) ; specs = g_object_class_list_properties ( G_OBJECT_CLASS ( klass ) , & n_specs ) ; for ( s = 0 ; s < n_specs ; s ++ ) { RS_DEBUG ( PLUGINS , "  + \"%s\":\t%s%s%s%s%s%s%s%s [%s]" , specs [ s ] -> name , ( specs [ s ] -> flags & G_PARAM_READABLE ) ?" READABLE" : "" , ( specs [ s ] -> flags & G_PARAM_WRITABLE ) ?" WRITABLE" : "" , ( specs [ s ] -> flags & G_PARAM_CONSTRUCT ) ?" CONSTRUCT" : "" , ( specs [ s ] -> flags & G_PARAM_CONSTRUCT_ONLY ) ?" CONSTRUCT_ONLY" : "" , ( specs [ s ] -> flags & G_PARAM_LAX_VALIDATION ) ?" LAX_VALIDATION" : "" , ( specs [ s ] -> flags & G_PARAM_STATIC_NAME ) ?" STATIC_NAME" : "" , ( specs [ s ] -> flags & G_PARAM_STATIC_NICK ) ?" STATIC_NICK" : "" , ( specs [ s ] -> flags & G_PARAM_STATIC_BLURB ) ?" STATIC_BLURB" : "" , g_param_spec_get_blurb ( specs [ s ] ) ) ; } g_free ( specs ) ; g_type_class_unref ( klass ) ; } g_free ( plugins ) ; if ( dir ) { g_dir_close ( dir ) ; } g_timer_destroy ( gt ) ; return num ; 