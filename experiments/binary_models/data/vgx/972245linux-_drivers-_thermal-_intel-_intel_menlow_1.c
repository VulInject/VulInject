static int memory_set_cur_bandwidth ( struct thermal_cooling_device * cdev , unsigned long state ) { struct acpi_device * device = cdev -> devdata ; acpi_handle handle = device -> handle ; struct acpi_object_list arg_list ; union acpi_object arg ; acpi_status status ; unsigned long long temp ; unsigned long max_state ; if ( memory_get_max_bandwidth ( cdev , & max_state ) ) { return - EFAULT ; } arg_list . count = 1 ; arg_list . pointer = & arg ; arg . type = ACPI_TYPE_INTEGER ; arg . integer . value = state ; status = acpi_evaluate_integer ( handle , MEMORY_SET_BANDWIDTH , & arg_list , & temp ) ; pr_info ( "Bandwidth value was %ld: status is %d\n" , state , status ) ; if ( ACPI_FAILURE ( status ) ) { return - EFAULT ; } return 0 ; } static const struct thermal_cooling_device_ops memory_cooling_ops = { . get_max_state = memory_get_max_bandwidth . get_cur_state = memory_get_cur_bandwidth . set_cur_state = memory_set_cur_bandwidth } ; 