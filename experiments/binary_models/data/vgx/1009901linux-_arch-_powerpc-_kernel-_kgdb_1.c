void sleeping_thread_to_gdb_regs ( unsigned long * gdb_regs , struct task_struct * p ) { struct pt_regs * regs = ( pt_regs * ) ( p -> thread . ksp + STACK_INT_FRAME_REGS ) ; unsigned long * ptr = gdb_regs ; int reg ; for ( reg = 0 ; reg < 3 ; reg ++ ) { PACK64 ( ptr , regs -> gpr [ reg ] ) ; } ptr += 11 ; for ( reg = 14 ; reg < 32 ; reg ++ ) { PACK64 ( ptr , regs -> gpr [ reg ] ) ; } for ( reg = 0 ; reg < 32 ; reg ++ ) { PACK64 ( ptr , p -> thread . evr [ reg ] ) ; } ptr += 32 ; ptr += 32 * 8 / sizeof ( long ) ; PACK64 ( ptr , regs -> nip ) ; PACK64 ( ptr , regs -> msr ) ; PACK32 ( ptr , regs -> ccr ) ; PACK64 ( ptr , regs -> link ) ; PACK64 ( ptr , regs -> ctr ) ; PACK32 ( ptr , regs -> xer ) ; BUG_ON ( ( unsigned long ) ptr > ( unsigned long ) ( ( ( void * ) gdb_regs ) + NUMREGBYTES ) ) ; } struct dbg_reg_def_t dbg_reg_def [ DBG_MAX_REG_NUM ] { { "r0" GDB_SIZEOF_REG offsetof ( , 0 ) } { "r1" GDB_SIZEOF_REG offsetof ( , 1 ) } { "r2" GDB_SIZEOF_REG offsetof ( , 2 ) } { "r3" GDB_SIZEOF_REG offsetof ( , 3 ) } { "r4" GDB_SIZEOF_REG offsetof ( , 4 ) } { "r5" GDB_SIZEOF_REG offsetof ( , 5 ) } { "r6" GDB_SIZEOF_REG offsetof ( , 6 ) } { "r7" GDB_SIZEOF_REG offsetof ( , 7 ) } { "r8" GDB_SIZEOF_REG offsetof ( , 8 ) } { "r9" GDB_SIZEOF_REG offsetof ( , 9 ) } { "r10" GDB_SIZEOF_REG offsetof ( , 10 ) } { "r11" GDB_SIZEOF_REG offsetof ( , 11 ) } { "r12" GDB_SIZEOF_REG offsetof ( , 12 ) } { "r13" GDB_SIZEOF_REG offsetof ( , 13 ) } { "r14" GDB_SIZEOF_REG offsetof ( , 14 ) } { "r15" GDB_SIZEOF_REG offsetof ( , 15 ) } { "r16" GDB_SIZEOF_REG offsetof ( , 16 ) } { "r17" GDB_SIZEOF_REG offsetof ( , 17 ) } { "r18" GDB_SIZEOF_REG offsetof ( , 18 ) } { "r19" GDB_SIZEOF_REG offsetof ( , 19 ) } { "r20" GDB_SIZEOF_REG offsetof ( , 20 ) } { "r21" GDB_SIZEOF_REG offsetof ( , 21 ) } { "r22" GDB_SIZEOF_REG offsetof ( , 22 ) } { "r23" GDB_SIZEOF_REG offsetof ( , 23 ) } { "r24" GDB_SIZEOF_REG offsetof ( , 24 ) } { "r25" GDB_SIZEOF_REG offsetof ( , 25 ) } { "r26" GDB_SIZEOF_REG offsetof ( , 26 ) } { "r27" GDB_SIZEOF_REG offsetof ( , 27 ) } { "r28" GDB_SIZEOF_REG offsetof ( , 28 ) } { "r29" GDB_SIZEOF_REG offsetof ( , 29 ) } { "r30" GDB_SIZEOF_REG offsetof ( , 30 ) } { "r31" GDB_SIZEOF_REG offsetof ( , 31 ) } { "f0" GDB_SIZEOF_FLOAT_REG 0 } { "f1" GDB_SIZEOF_FLOAT_REG 1 } { "f2" GDB_SIZEOF_FLOAT_REG 2 } { "f3" GDB_SIZEOF_FLOAT_REG 3 } { "f4" GDB_SIZEOF_FLOAT_REG 4 } { "f5" GDB_SIZEOF_FLOAT_REG 5 } { "f6" GDB_SIZEOF_FLOAT_REG 6 } { "f7" GDB_SIZEOF_FLOAT_REG 7 } { "f8" GDB_SIZEOF_FLOAT_REG 8 } { "f9" GDB_SIZEOF_FLOAT_REG 9 } { "f10" GDB_SIZEOF_FLOAT_REG 10 } { "f11" GDB_SIZEOF_FLOAT_REG 11 } { "f12" GDB_SIZEOF_FLOAT_REG 12 } { "f13" GDB_SIZEOF_FLOAT_REG 13 } { "f14" GDB_SIZEOF_FLOAT_REG 14 } { "f15" GDB_SIZEOF_FLOAT_REG 15 } { "f16" GDB_SIZEOF_FLOAT_REG 16 } { "f17" GDB_SIZEOF_FLOAT_REG 17 } { "f18" GDB_SIZEOF_FLOAT_REG 18 } { "f19" GDB_SIZEOF_FLOAT_REG 19 } { "f20" GDB_SIZEOF_FLOAT_REG 20 } { "f21" GDB_SIZEOF_FLOAT_REG 21 } { "f22" GDB_SIZEOF_FLOAT_REG 22 } { "f23" GDB_SIZEOF_FLOAT_REG 23 } { "f24" GDB_SIZEOF_FLOAT_REG 24 } { "f25" GDB_SIZEOF_FLOAT_REG 25 } { "f26" GDB_SIZEOF_FLOAT_REG 26 } { "f27" GDB_SIZEOF_FLOAT_REG 27 } { "f28" GDB_SIZEOF_FLOAT_REG 28 } { "f29" GDB_SIZEOF_FLOAT_REG 29 } { "f30" GDB_SIZEOF_FLOAT_REG 30 } { "f31" GDB_SIZEOF_FLOAT_REG 31 } { "pc" GDB_SIZEOF_REG offsetof ( , ) } { "msr" GDB_SIZEOF_REG offsetof ( , ) } { "cr" GDB_SIZEOF_REG_U32 offsetof ( , ) } { "lr" GDB_SIZEOF_REG offsetof ( , ) } { "ctr" GDB_SIZEOF_REG_U32 offsetof ( , ) } { "xer" GDB_SIZEOF_REG offsetof ( , ) } } ; ; 