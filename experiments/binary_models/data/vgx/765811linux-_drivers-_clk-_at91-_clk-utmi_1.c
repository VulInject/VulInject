static struct clk_hw * __init at91_clk_register_utmi_internal ( struct regmap * regmap_pmc , struct regmap * regmap_sfr , const char * name , const char * parent_name , const struct clk_ops * ops , unsigned long flags ) { struct clk_utmi * utmi ; struct clk_hw * hw ; struct clk_init_data init ; int ret ; utmi = kmalloc ( sizeof ( * utmi ) , GFP_KERNEL ) ; if ( ! utmi ) { return ERR_PTR ( - ENOMEM ) ; } init . name = name ; init . ops = ops ; init . parent_names = parent_name ?& parent_name : NULL ; init . num_parents = parent_name ?1 : 0 ; init . flags = flags ; utmi -> hw . init = & init ; utmi -> regmap_pmc = regmap_pmc ; utmi -> regmap_sfr = regmap_sfr ; hw = & utmi -> hw ; ret = clk_hw_register ( NULL , & utmi -> hw ) ; if ( ret ) { kfree ( utmi ) ; hw = ERR_PTR ( ret ) ; } return hw ; } 