static ssize_t typec_altmode_active_store ( struct device * dev , struct device_attribute * attr , const char * buf , size_t size ) { struct typec_mode * mode = container_of ( attr , typec_mode , active_attr ) ; struct typec_port * port = typec_altmode2port ( mode -> alt_mode ) ; bool activate ; int ret ; ret = kstrtobool ( buf , & activate ) ; if ( ret ) { return ret ; } ret = port -> cap -> activate_mode ( port -> cap , mode -> index , activate ) ; if ( ret ) { return ret ; } return size ; } 