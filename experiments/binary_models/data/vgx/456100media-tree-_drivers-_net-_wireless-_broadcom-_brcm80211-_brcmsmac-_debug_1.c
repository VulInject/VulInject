static int brcms_debugfs_add_entry ( struct brcms_pub * drvr , const char * fn , int * read_fn ( struct seq_file * seq , void * data ) ) { struct device * dev = & drvr -> wlc -> hw -> d11core -> dev ; struct dentry * dentry = drvr -> dbgfs_dir ; struct brcms_debugfs_entry * entry ; if ( IS_ERR_OR_NULL ( dentry ) ) { return - ENOENT ; } entry = devm_kzalloc ( dev , sizeof ( * entry ) , GFP_KERNEL ) ; entry -> read = read_fn ; entry -> drvr = drvr ; dentry = debugfs_create_file ( fn , S_IRUGO , dentry , entry , & brcms_debugfs_def_ops ) ; return PTR_ERR_OR_ZERO ( dentry ) ; } 