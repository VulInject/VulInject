static int sti_local_printf ( struct sti_softc * sc , const char * fmt , ... ) { va_list ap ; int rc ; int enabled = sc -> sc_flags & STI_ROM_ENABLED ; if ( enabled ) { sti_pci_disable_rom ( sc ) ; } va_start ( ap , fmt ) ; rc = vprintf ( fmt , ap ) ; if ( enabled ) { sti_pci_enable_rom ( sc ) ; } return rc ; } pcirom_ds { uint32_t signature ; uint16_t vid ; uint16_t pid ; uint16_t reserved_8 ; uint16_t dslen ; uint8_t rev ; uint8_t class ; uint16_t romlen ; uint16_t level ; uint8_t arch ; int indicator ; uint16_t reserved_16 ; } 