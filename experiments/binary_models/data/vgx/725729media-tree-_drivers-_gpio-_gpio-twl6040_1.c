static void twl6040gpo_set ( struct gpio_chip * chip , unsigned offset , int value ) { struct twl6040 * twl6040 = dev_get_drvdata ( chip -> parent -> parent ) ; int ret ; u8 gpoctl ; ret = twl6040_reg_read ( twl6040 , TWL6040_REG_GPOCTL ) ; if ( value ) { gpoctl = ret | ( 1 << offset ) ; } else { gpoctl = ret & ~ ( 1 << offset ) ; } twl6040_reg_write ( twl6040 , TWL6040_REG_GPOCTL , gpoctl ) ; } 