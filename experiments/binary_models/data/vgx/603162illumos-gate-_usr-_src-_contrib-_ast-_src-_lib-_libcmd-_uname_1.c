int uname ( register struct utsname * ut ) { char * sys = 0 ; char * arch = 0 ; if ( * hosttype ) { static char buf [ sizeof ( hosttype ) ] ; strcpy ( buf , hosttype ) ; sys = buf ; if ( arch = strchr ( sys , '.' ) ) { * arch ++ = 0 ; if ( ! * arch ) { arch = 0 ; } } if ( ! * sys ) { sys = 0 ; } } strncpy ( ut -> nodename , "local" , sizeof ( ut -> nodename ) - 1 ) ; if ( ! ( ut -> sysname = sys ) ) { if ( ! * ( ut -> sysname = SYSNAME ) ) { ut -> sysname = ut -> nodename ; } } if ( ! ( ut -> machine = arch ) ) { ut -> machine = MACHINE ; } ut -> release = RELEASE ; ut -> version = VERSION ; return 0 ; } 