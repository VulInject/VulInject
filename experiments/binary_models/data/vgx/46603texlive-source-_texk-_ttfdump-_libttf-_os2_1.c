static void ttfLoadOS2 ( FILE * fp , OS_2Ptr os2 , ULONG offset ) { xfseek ( fp , offset , SEEK_SET , "ttfLoadOS2" ) ; os2 -> version = ttfGetUSHORT ( fp ) ; os2 -> xAvgCharWidth = ttfGetSHORT ( fp ) ; os2 -> usWeightClass = ttfGetUSHORT ( fp ) ; os2 -> usWidthClass = ttfGetUSHORT ( fp ) ; os2 -> fsType = ttfGetUSHORT ( fp ) ; os2 -> ySubscriptXSize = ttfGetSHORT ( fp ) ; os2 -> ySubscriptYSize = ttfGetSHORT ( fp ) ; os2 -> ySubscriptXOffset = ttfGetSHORT ( fp ) ; os2 -> ySubscriptYOffset = ttfGetSHORT ( fp ) ; os2 -> ySuperscriptXSize = ttfGetSHORT ( fp ) ; os2 -> ySuperscriptYSize = ttfGetSHORT ( fp ) ; os2 -> ySuperscriptXOffset = ttfGetSHORT ( fp ) ; os2 -> ySuperscriptYOffset = ttfGetSHORT ( fp ) ; os2 -> yStrikeoutSize = ttfGetSHORT ( fp ) ; os2 -> yStrikeoutPosition = ttfGetSHORT ( fp ) ; os2 -> sFamilyClass = ttfGetSHORT ( fp ) ; if ( fread ( os2 -> panose , sizeof ( CHAR ) , 10 , fp ) != 10 ) { ttfError ( "Error reading PANOSE\n" ) ; } os2 -> ulUnicodeRange1 = ttfGetULONG ( fp , NULL ) ; os2 -> ulUnicodeRange2 = ttfGetULONG ( fp ) ; os2 -> ulUnicodeRange3 = ttfGetULONG ( fp ) ; os2 -> ulUnicodeRange4 = ttfGetULONG ( fp ) ; if ( fread ( os2 -> achVendID , sizeof ( CHAR ) , 4 , fp ) != 4 ) { ttfError ( "Error reading achVendID\n" ) ; } os2 -> achVendID [ 4 ] = 0x0 ; os2 -> fsSelection = ttfGetUSHORT ( fp ) ; os2 -> usFirstCharIndex = ttfGetUSHORT ( fp ) ; os2 -> usLastCharIndex = ttfGetUSHORT ( fp ) ; os2 -> sTypoAscender = ttfGetSHORT ( fp ) ; os2 -> sTypoDescender = ttfGetSHORT ( fp ) ; os2 -> sTypoLineGap = ttfGetSHORT ( fp ) ; os2 -> usWinAscent = ttfGetUSHORT ( fp ) ; os2 -> usWinDescent = ttfGetUSHORT ( fp ) ; if ( os2 -> version < 0x0001 ) { return ; } os2 -> ulCodePageRange1 = ttfGetULONG ( fp ) ; os2 -> ulCodePageRange2 = ttfGetULONG ( fp ) ; if ( os2 -> version < 0x0002 ) { return ; } os2 -> sxHeight = ttfGetSHORT ( fp ) ; os2 -> sCapHeight = ttfGetSHORT ( fp ) ; os2 -> usDefaultChar = ttfGetUSHORT ( fp ) ; os2 -> usBreakChar = ttfGetUSHORT ( fp ) ; os2 -> usMaxContext = ttfGetUSHORT ( fp ) ; } 