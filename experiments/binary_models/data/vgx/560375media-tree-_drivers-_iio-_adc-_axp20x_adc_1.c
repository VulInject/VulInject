static int axp20x_write_raw ( struct iio_dev * indio_dev , struct iio_chan_spec const * chan , int val , int val2 , long mask ) { struct axp20x_adc_iio * info = iio_priv ( indio_dev ) ; unsigned int reg , regval ; if ( mask != IIO_CHAN_INFO_OFFSET ) { return - EINVAL ; } switch ( chan -> channel ) { case AXP20X_GPIO0_V : reg = AXP20X_GPIO10_IN_RANGE_GPIO0 ; regval = AXP20X_GPIO10_IN_RANGE_GPIO0_VAL ( ! ! val ) ; break ; case AXP20X_GPIO1_V : reg = AXP20X_GPIO10_IN_RANGE_GPIO1 ; regval = AXP20X_GPIO10_IN_RANGE_GPIO1_VAL ( ! ! val ) ; break ; default : return - EINVAL ; } return regmap_update_bits ( info -> regmap , AXP20X_GPIO10_IN_RANGE , reg , regval ) ; } 