void S_FreeOldestSound ( void ) { int i , oldest , used ; sfx_t * sfx ; sndBuffer * buffer , * nbuffer ; oldest = Com_Milliseconds ( ) ; used = 0 ; for ( i = 1 ; i < s_numSfx ; i ++ ) { sfx = & s_knownSfx [ i ] ; if ( sfx -> inMemory && sfx -> lastTimeUsed < oldest ) { used = i ; oldest = sfx -> lastTimeUsed ; } } sfx = & s_knownSfx [ used ] ; Com_DPrintf ( "S_FreeOldestSound: freeing sound %s\n" , sfx -> soundName ) ; buffer = sfx -> soundData ; while ( buffer != NULL ) { nbuffer = buffer -> next ; SND_free ( buffer ) ; buffer = nbuffer ; } sfx -> inMemory = qfalse ; } 