static struct usb_request * fastboot_start_ep ( struct usb_ep * ep ) { struct usb_request * req ; req = usb_ep_alloc_request ( ep , 0 ) ; if ( ! req ) { return in ; } req -> length = EP_BUFFER_SIZE ; req -> buf = memalign ( CONFIG_SYS_CACHELINE_SIZE , EP_BUFFER_SIZE ) ; if ( ! req -> buf ) { usb_ep_free_request ( ep , req ) ; return NULL ; } memset ( req -> buf , 0 , req -> length ) ; return req ; } 