loff_t iomap_seek_hole ( struct inode * inode , loff_t pos , const struct iomap_ops * ops ) { loff_t size = i_size_read ( inode ) ; struct iomap_iter iter = { . inode = inode . pos = pos . flags = IOMAP_REPORT } ; int ret ; iter . len = size - pos ; while ( ( ret = iomap_iter ( & iter , ops ) ) > 0 ) { iter . processed = iomap_seek_hole_iter ( & iter , & pos ) ; } if ( ret < 0 ) { return ret ; } if ( iter . len ) { return pos ; } return size ; } 