bool inet_parse_active ( const char * target_ , int default_port , struct sockaddr_storage * ss , bool resolve_host , bool * dns_failure ) { char * target = xstrdup ( target_ ) ; char * port , * host ; bool ok ; inet_parse_host_port_tokens ( target , & host , & port ) ; if ( ! host ) { VLOG_ERR ( "%s: host must be specified" , target_ ) ; ok = false ; } if ( ! port && default_port < 0 ) { VLOG_ERR ( "%s: port must be specified" , target_ ) ; ok = false ; } else { ok = parse_sockaddr_components ( ss , host , port , default_port , target_ , resolve_host , dns_failure ) ; } if ( ! ok ) { memset ( ss , 0 , sizeof ss ) ; } return ok ; } 