static bool etm4_init_sysreg_access ( struct etmv4_drvdata * drvdata , struct csdev_access * csa ) { u32 devarch ; devarch = read_etm4x_sysreg_const_offset ( TRCDEVARCH ) ; switch ( devarch & ETM_DEVARCH_ID_MASK ) { case ETM_DEVARCH_ETMv4x_ARCH : * csa = ( csdev_access ) { . io_mem = false . read = etm4x_sysreg_read . write = etm4x_sysreg_write } ; break ; case ETM_DEVARCH_ETE_ARCH : * csa = ( csdev_access ) { . io_mem = false . read = ete_sysreg_read . write = ete_sysreg_write } ; break ; default : return false ; } drvdata -> arch = etm_devarch_to_arch ( devarch ) ; return true ; } 