static int stm32_setup_iio_triggers ( struct stm32_timer_trigger * priv ) { int ret ; const char * const * cur = priv -> triggers ; while ( cur && * cur ) { struct iio_trigger * trig ; trig = devm_iio_trigger_alloc ( priv -> dev , "%s" , * cur ) ; trig -> dev . parent = priv -> dev -> parent ; trig -> ops = & timer_trigger_ops ; if ( cur == priv -> triggers ) { trig -> dev . groups = stm32_trigger_attr_groups ; } iio_trigger_set_drvdata ( trig , priv ) ; ret = devm_iio_trigger_register ( priv -> dev , trig ) ; if ( ret ) { return ret ; } cur ++ ; } return 0 ; } 