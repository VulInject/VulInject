static struct page * m1541_alloc_page ( struct agp_bridge_data * bridge ) { struct page * page = agp_generic_alloc_page ( agp_bridge ) ; u32 temp ; if ( ! page ) { return in ; } pci_read_config_dword ( agp_bridge -> dev , ALI_CACHE_FLUSH_CTRL , & temp ) ; pci_write_config_dword ( agp_bridge -> dev , ALI_CACHE_FLUSH_CTRL , ( ( ( temp & ALI_CACHE_FLUSH_ADDR_MASK ) | page_to_phys ( page ) ) | ALI_CACHE_FLUSH_EN ) ) ; return page ; } 