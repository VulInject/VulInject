clone_invoker ( , , , , , ) { gboolean success = TRUE ; GimpDrawable * drawable ; GimpDrawable * src_drawable ; gint clone_type ; gdouble src_x ; gdouble src_y ; gint num_strokes ; const gdouble * strokes ; drawable = g_value_get_object ( gimp_value_array_index ( args , 0 ) ) ; src_drawable = g_value_get_object ( gimp_value_array_index ( args , 1 ) ) ; clone_type = g_value_get_enum ( gimp_value_array_index ( args , 2 ) ) ; src_x = g_value_get_double ( gimp_value_array_index ( args , 3 ) ) ; src_y = g_value_get_double ( gimp_value_array_index ( args , 4 ) ) ; num_strokes = g_value_get_int ( gimp_value_array_index ( args , 5 ) ) ; strokes = gimp_value_get_float_array ( gimp_value_array_index ( args , 6 ) ) ; if ( success ) { GimpPaintOptions * options = gimp_pdb_context_get_paint_options ( GIMP_PDB_CONTEXT ( context ) , "gimp-clone" ) ; if ( options && gimp_pdb_item_is_attached ( GIMP_ITEM ( drawable ) , NULL , GIMP_PDB_ITEM_CONTENT , error ) && gimp_pdb_item_is_not_group ( GIMP_ITEM ( drawable ) , error ) ) { GList * src_drawables ; options = gimp_config_duplicate ( GIMP_CONFIG ( options ) ) ; src_drawables = g_list_prepend ( NULL , src_drawable ) ; g_object_set ( options , "clone-type" , clone_type , "src-drawables" , src_drawables , NULL ) ; success = paint_tools_stroke ( gimp , context , options , drawable , num_strokes , strokes , error , "undo-desc" , options -> paint_info -> blurb , "src-x" , ( gint ) floor ( src_x ) , "src-y" , ( gint ) floor ( src_y ) , NULL ) ; } else { success = FALSE ; } } return gimp_procedure_get_return_values ( procedure , success , error ?* error : NULL ) ; } 