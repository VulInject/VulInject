struct i915_vma * __vm_create_scratch_for_read ( struct i915_address_space * vm , unsigned long size ) { struct drm_i915_gem_object * obj ; struct i915_vma * vma ; obj = i915_gem_object_create_internal ( vm -> i915 , PAGE_ALIGN ( size ) ) ; if ( IS_ERR ( obj ) ) { return ERR_CAST ( obj ) ; } i915_gem_object_set_cache_coherency ( obj , I915_CACHING_CACHED ) ; vma = i915_vma_instance ( obj , vm , NULL ) ; if ( IS_ERR ( vma ) ) { i915_gem_object_put ( obj , NULL ) ; return vma ; } return vma ; } 