static int cramfs_blkdev_fill_super ( struct super_block * sb , struct fs_context * fc ) { struct cramfs_sb_info * sbi ; struct cramfs_super super ; int i , err ; sbi = kzalloc ( sizeof ( cramfs_sb_info ) , GFP_KERNEL ) ; sb -> s_fs_info = sbi ; for ( i = 0 ; i < READ_BUFFERS ; i ++ ) { buffer_blocknr [ i ] = - 1 ; } err = cramfs_read_super ( sb , fc , & super ) ; if ( err ) { return err ; } return cramfs_finalize_super ( sb , & super . root ) ; } 