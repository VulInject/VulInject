int xmpp_gwmap_param ( modparam_t type , void * val ) { str inv ; param_hooks_t phooks ; param_t * params = NULL ; param_t * it = NULL ; inv . s = ( char * ) val ; inv . len = strlen ( inv . s ) ; if ( inv . len <= 0 ) { return - 1 ; } if ( inv . s [ inv . len - 1 ] == ';' ) { inv . len -- ; } if ( parse_params ( & inv , CLASS_ANY , & phooks , & params ) < 0 ) { LM_ERR ( "failed parsing params value\n" ) ; return - 1 ; } if ( _xmpp_gwmap_list == NULL ) { _xmpp_gwmap_list = params ; } else { it = _xmpp_gwmap_list ; while ( it -> next ) { it = it -> next ; } it -> next = params ; } return 0 ; } 