static int acpi_device_path_fill ( const struct udevice * dev , char * buf , size_t buf_len , int cur ) { char name [ ACPI_NAME_MAX ] ; int next = 0 ; int ret ; ret = acpi_get_name ( dev , name ) ; if ( ret ) { return ret ; } if ( cur + strlen ( name ) + 2 > buf_len ) { return - ENOSPC ; } if ( dev_get_parent ( dev ) ) { next = acpi_device_path_fill ( dev_get_parent ( dev ) , buf , buf_len , cur ) ; } next += snprintf ( buf + next , buf_len - next , "%s%s" , dev_get_parent ( dev ) && * name ?"." : "" , name ) ; return next ; } 