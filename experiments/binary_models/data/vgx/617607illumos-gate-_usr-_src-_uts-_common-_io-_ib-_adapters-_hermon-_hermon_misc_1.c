static int hermon_mcg_qplist_add ( hermon_state_t * state , hermon_mcghdl_t mcg , hermon_hw_mcg_qp_list_t * mcg_qplist , hermon_qphdl_t qp , uint_t * qp_found ) { uint_t qplist_indx ; ASSERT ( MUTEX_HELD ( & state -> hs_mcglock ) ) ; qplist_indx = mcg -> mcg_num_qps ; for ( qplist_indx = 0 ; qplist_indx < mcg -> mcg_num_qps ; qplist_indx ++ ) { if ( mcg_qplist [ qplist_indx ] . qpn == qp -> qp_qpnum ) { break ; } } if ( qplist_indx < mcg -> mcg_num_qps ) { * qp_found = 1 ; } else { mcg_qplist [ qplist_indx ] . qpn = ( qp -> qp_qpnum | HERMON_MCG_QPN_BLOCK_LB ) ; * qp_found = 0 ; } return ( DDI_SUCCESS ) ; } 