static void img_ir_refresh_raw ( struct img_ir_priv * priv , u32 irq_status ) { struct img_ir_priv_raw * raw = & priv -> raw ; struct rc_dev * rc_dev = priv -> raw . rdev ; int multiple ; u32 ir_status ; multiple = ( ( irq_status & IMG_IR_IRQ_EDGE ) == IMG_IR_IRQ_EDGE ) ; ir_status = img_ir_read ( priv , IMG_IR_STATUS ) & IMG_IR_IRRXD ; raw -> last_status = ir_status ; if ( ir_status ) { ir_raw_event_store_edge ( rc_dev , IR_SPACE ) ; } else { ir_raw_event_store_edge ( rc_dev , IR_PULSE ) ; } ir_raw_event_handle ( rc_dev ) ; } 