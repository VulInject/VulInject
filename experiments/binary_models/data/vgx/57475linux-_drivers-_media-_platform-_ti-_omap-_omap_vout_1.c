static void omap_vout_cleanup_device ( struct omap_vout_device * vout ) { struct video_device * vfd ; struct omapvideo_info * ovid ; if ( ! vout ) { return ; } vfd = vout -> vfd ; ovid = & vout -> vid_info ; if ( vfd ) { if ( ! video_is_registered ( vfd ) ) { video_device_release ( vfd ) ; } else { video_unregister_device ( vfd ) ; } } v4l2_ctrl_handler_free ( & vout -> ctrl_handler ) ; if ( ovid -> rotation_type == VOUT_ROT_VRFB ) { omap_vout_release_vrfb ( vout ) ; if ( vout -> vrfb_static_allocation ) { omap_vout_free_vrfb_buffers ( vout ) ; } } } 