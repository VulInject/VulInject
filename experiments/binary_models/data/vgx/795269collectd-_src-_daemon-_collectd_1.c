static void read_cmdline ( int argc , char * * argv , struct cmdline_config * config ) { while ( 1 ) { int c = getopt ( argc , argv , "BhtTfC:P:" ) ; if ( c == - 1 ) { break ; } switch ( c ) { case 'B' : config -> create_basedir = false ; break ; case 'C' : config -> configfile = optarg ; break ; case 't' : config -> test_config = true ; break ; case 'T' : config -> test_readall = true ; global_option_set ( "ReadThreads" , "-1" , 1 ) ; config -> daemonize = false ; break ; case 'P' : global_option_set ( "PIDFile" , optarg , 1 ) ; break ; case 'f' : config -> daemonize = false ; break ; case 'h' : exit_usage ( EXIT_SUCCESS ) ; default : exit_usage ( EXIT_FAILURE , NULL ) ; } } } 