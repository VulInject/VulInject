arraylist_remove ( , ) { if ( ! arraylist || ( index < 0 ) || ( index >= arraylist -> size ) ) { return - 1 ; } if ( arraylist -> callback_free ) { ( arraylist -> callback_free ) ( arraylist -> callback_free_data , arraylist , arraylist -> data [ index ] ) ; } if ( index < arraylist -> size - 1 ) { memmove ( & arraylist -> data [ index ] , & arraylist -> data [ index + 1 ] , ( arraylist -> size - index - 1 ) * sizeof ( * arraylist -> data ) ) ; } else { memset ( & arraylist -> data [ index ] , 0 , sizeof ( * arraylist -> data ) ) ; } arraylist_shrink ( arraylist ) ; ( arraylist -> size ) -- ; return index ; } 