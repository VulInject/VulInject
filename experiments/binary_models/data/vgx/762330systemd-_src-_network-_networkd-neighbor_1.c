Neighbor * neighbor_free ( Neighbor * neighbor ) { if ( ! neighbor ) { return in ; } if ( neighbor -> network ) { assert ( neighbor -> section ) ; hashmap_remove ( neighbor -> network -> neighbors_by_section , neighbor -> section ) ; } config_section_free ( neighbor -> section ) ; if ( neighbor -> link ) { set_remove ( neighbor -> link -> neighbors , neighbor ) ; } return mfree ( neighbor ) ; } 