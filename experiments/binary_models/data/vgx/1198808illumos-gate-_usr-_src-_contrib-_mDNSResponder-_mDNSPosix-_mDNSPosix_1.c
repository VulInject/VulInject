mDNSlocal mStatus stopReadOrWriteEvents ( int fd , mDNSBool freeContext , mDNSBool removeContext , int flags ) { PosixEventSource * iSource , * * epp = & gEventSources ; while ( * epp ) { iSource = * epp ; if ( fd == iSource -> fd ) { if ( flags & PosixEventFlag_Read ) { iSource -> readCallback = NULL ; } if ( flags & PosixEventFlag_Write ) { iSource -> writeCallback = NULL ; iSource -> writeContext = NULL ; } if ( iSource -> writeCallback == NULL && iSource -> readCallback == NULL ) { if ( removeContext || freeContext ) { * epp = iSource -> next ; } if ( freeContext ) { free ( iSource ) ; } } return mStatus_NoError ; } epp = & ( * epp ) -> next ; } return mStatus_NoSuchNameErr ; } 