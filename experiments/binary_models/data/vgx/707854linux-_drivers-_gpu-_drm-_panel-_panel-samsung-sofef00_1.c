static int sofef00_panel_get_modes ( struct drm_panel * panel , struct drm_connector * connector ) { struct drm_display_mode * mode ; struct sofef00_panel * ctx = to_sofef00_panel ( panel ) ; mode = drm_mode_duplicate ( connector -> dev , ctx -> mode ) ; if ( ! mode ) { return - ENOMEM ; } drm_mode_set_name ( mode , NULL ) ; mode -> type = DRM_MODE_TYPE_DRIVER | DRM_MODE_TYPE_PREFERRED ; connector -> display_info . width_mm = mode -> width_mm ; connector -> display_info . height_mm = mode -> height_mm ; drm_mode_probed_add ( connector , mode ) ; return 1 ; } 