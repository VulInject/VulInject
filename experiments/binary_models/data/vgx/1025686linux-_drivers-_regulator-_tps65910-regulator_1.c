static int tps65910_set_voltage_sel ( struct regulator_dev * dev , unsigned selector ) { struct tps65910_reg * pmic = rdev_get_drvdata ( dev ) ; struct regmap * regmap = rdev_get_regmap ( dev ) ; int reg , id = rdev_get_id ( dev ) ; reg = pmic -> get_ctrl_reg ( id ) ; switch ( id ) { case TPS65910_REG_VIO : case TPS65910_REG_VDIG1 : case TPS65910_REG_VDIG2 : case TPS65910_REG_VPLL : case TPS65910_REG_VDAC : case TPS65910_REG_VAUX1 : case TPS65910_REG_VAUX2 : case TPS65910_REG_VAUX33 : case TPS65910_REG_VMMC : return regmap_update_bits ( regmap , reg , LDO_SEL_MASK , selector << LDO_SEL_SHIFT ) ; case TPS65910_REG_VBB : return regmap_update_bits ( regmap , reg , BBCH_BBSEL_MASK , selector << BBCH_BBSEL_SHIFT ) ; } return - EINVAL ; } 