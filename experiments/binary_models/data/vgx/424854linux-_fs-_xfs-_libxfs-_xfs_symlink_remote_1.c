xfs_failaddr_t xfs_symlink_shortform_verify ( struct xfs_inode * ip ) { struct xfs_ifork * ifp = xfs_ifork_ptr ( ip , XFS_DATA_FORK ) ; char * sfp = ( char * ) ifp -> if_u1 . if_data ; int size = ifp -> if_bytes ; char * endp = sfp + size ; ASSERT ( ifp -> if_format == XFS_DINODE_FMT_LOCAL ) ; if ( ! size ) { return __this_address ; } if ( memchr ( sfp , 0 , size - 1 ) ) { return __this_address ; } if ( * endp != 0 ) { return __this_address ; } return NULL ; } 