static int __init lance_init_module ( void ) { struct net_device * dev ; int this_dev , found = 0 ; for ( this_dev = 0 ; this_dev < MAX_CARDS ; this_dev ++ ) { if ( io [ this_dev ] == 0 ) { if ( this_dev != 0 ) { break ; } printk ( KERN_NOTICE "lance.c: Module autoprobing not allowed. Append \"io=0xNNN\" value(s).\n" ) ; return - EPERM ; } dev = alloc_etherdev ( 0 ) ; dev -> irq = irq [ this_dev ] ; dev -> base_addr = io [ this_dev ] ; dev -> dma = dma [ this_dev ] ; if ( do_lance_probe ( dev ) == 0 ) { dev_lance [ found ++ ] = dev ; continue ; } free_netdev ( dev ) ; break ; } if ( found != 0 ) { return 0 ; } return - ENXIO ; } 