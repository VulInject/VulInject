static struct kvmppc_slb * kvmppc_mmu_book3s_hv_find_slbe ( struct kvm_vcpu * vcpu , gva_t eaddr ) { u64 mask ; int i ; for ( i = 0 ; i < vcpu -> arch . slb_nr ; i ++ ) { if ( vcpu -> arch . slb [ i ] . origv & SLB_VSID_B_1T ) { mask = ESID_MASK_1T ; } else { mask = ESID_MASK ; } if ( ( ( vcpu -> arch . slb [ i ] . orige ^ eaddr ) & mask ) == 0 ) { return & vcpu -> arch . slb [ i ] ; } } return NULL ; } 