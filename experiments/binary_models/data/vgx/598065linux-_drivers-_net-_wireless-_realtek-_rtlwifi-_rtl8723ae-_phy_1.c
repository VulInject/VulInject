void rtl8723e_phy_sw_chnl_callback ( struct ieee80211_hw * hw ) { struct rtl_priv * rtlpriv = rtl_priv ( hw ) ; struct rtl_hal * rtlhal = rtl_hal ( rtl_priv ( hw ) ) ; struct rtl_phy * rtlphy = & rtlpriv -> phy ; u32 delay ; rtl_dbg ( rtlpriv , COMP_SCAN , DBG_TRACE , "switch to channel%d\n" , rtlphy -> current_channel ) ; if ( is_hal_stop ( rtlhal ) ) { return ; } { if ( ! _rtl8723e_phy_sw_chnl_step_by_step ( hw , rtlphy -> current_channel , & rtlphy -> sw_chnl_stage , & rtlphy -> sw_chnl_step , & delay ) ) { if ( delay > 0 ) { mdelay ( delay ) ; } else { continue ; } } else { rtlphy -> sw_chnl_inprogress = false ; } break ; } true ; rtl_dbg ( rtlpriv , COMP_SCAN , DBG_TRACE , "\n" ) ; } 