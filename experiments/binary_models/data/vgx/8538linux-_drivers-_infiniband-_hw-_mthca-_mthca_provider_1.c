static int mthca_modify_device ( struct ib_device * ibdev , int mask , struct ib_device_modify * props ) { if ( mask & IB_DEVICE_MODIFY_NODE_DESC ) { if ( mutex_lock_interruptible ( & to_mdev ( ibdev ) -> cap_mask_mutex ) ) { return - ERESTARTSYS ; } memcpy ( ibdev -> node_desc , props -> node_desc , IB_DEVICE_NODE_DESC_MAX ) ; mutex_unlock ( & to_mdev ( ibdev ) -> cap_mask_mutex ) ; } return 0 ; } 