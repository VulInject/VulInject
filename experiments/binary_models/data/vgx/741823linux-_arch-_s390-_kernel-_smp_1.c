int smp_store_status ( int cpu ) { struct lowcore * lc ; struct pcpu * pcpu ; unsigned long pa ; pcpu = pcpu_devices + cpu ; lc = lowcore_ptr [ cpu ] ; pa = __pa ( & lc -> floating_pt_save_area ) ; if ( __pcpu_sigp_relax ( pcpu -> address , SIGP_STORE_STATUS_AT_ADDRESS , pa ) != SIGP_CC_ORDER_CODE_ACCEPTED ) { return - EIO ; } pa = lc -> mcesad & MCESA_ORIGIN_MASK ; if ( MACHINE_HAS_GS ) { pa |= lc -> mcesad & MCESA_LC_MASK ; } if ( __pcpu_sigp_relax ( pcpu -> address , SIGP_STORE_ADDITIONAL_STATUS , pa ) != SIGP_CC_ORDER_CODE_ACCEPTED ) { return - EIO ; } return 0 ; } 