decContext * decContextSetStatusFromStringQuiet ( decContext * context , const char * string ) { if ( strcmp ( string , DEC_Condition_DZ ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Division_by_zero ) ; } if ( strcmp ( string , DEC_Condition_DI ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Division_impossible ) ; } if ( strcmp ( string , DEC_Condition_DU ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Division_undefined ) ; } if ( strcmp ( string , DEC_Condition_IE ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Inexact ) ; } if ( strcmp ( string , DEC_Condition_IS ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Insufficient_storage ) ; } if ( strcmp ( string , DEC_Condition_IC ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Invalid_context ) ; } if ( strcmp ( string , DEC_Condition_IO ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Invalid_operation ) ; } if ( strcmp ( string , DEC_Condition_LD ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Lost_digits ) ; } if ( strcmp ( string , DEC_Condition_OV ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Overflow ) ; } if ( strcmp ( string , DEC_Condition_PA ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Clamped ) ; } if ( strcmp ( string , DEC_Condition_RO ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Rounded ) ; } if ( strcmp ( string , DEC_Condition_SU ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Subnormal ) ; } if ( strcmp ( string , DEC_Condition_UN ) == 0 ) { return decContextSetStatusQuiet ( context , DEC_Underflow ) ; } if ( strcmp ( string , DEC_Condition_ZE ) == 0 ) { return context ; } return NULL ; } decContext * decContextSetStatusQuiet ( decContext * context , uInt status ) { context -> status |= status ; return context ; } const char * decContextStatusToString ( const decContext * context ) { Int status = context -> status ; if ( status == DEC_Invalid_operation ) { return DEC_Condition_IO ; } if ( status == DEC_Division_by_zero ) { return DEC_Condition_DZ ; } if ( status == DEC_Overflow ) { return DEC_Condition_OV ; } if ( status == DEC_Underflow ) { return DEC_Condition_UN ; } if ( status == DEC_Inexact ) { return DEC_Condition_IE ; } if ( status == DEC_Division_impossible ) { return DEC_Condition_DI ; } if ( status == DEC_Division_undefined ) { return DEC_Condition_DU ; } if ( status == DEC_Rounded ) { return DEC_Condition_RO ; } if ( status == DEC_Clamped ) { return DEC_Condition_PA ; } if ( status == DEC_Subnormal ) { return DEC_Condition_SU ; } if ( status == DEC_Conversion_syntax ) { return DEC_Condition_CS ; } if ( status == DEC_Insufficient_storage ) { return DEC_Condition_IS ; } if ( status == DEC_Invalid_context ) { return DEC_Condition_IC ; } if ( status == DEC_Lost_digits ) { return DEC_Condition_LD ; } if ( status == 0 ) { return DEC_Condition_ZE ; } return DEC_Condition_MU ; } Int decContextTestEndian ( Flag quiet ) { Int res = 0 ; uInt dle = ( uInt ) DECLITEND ; if ( dle > 1 ) { dle = 1 ; } if ( LITEND != DECLITEND ) { if ( ! quiet ) { const char * adj ; if ( LITEND ) { adj = "little" ; } else { adj = "big" ; } printf ( "Warning: DECLITEND is set to %d, but this computer appears to be %s-endian\n" , DECLITEND , adj ) ; } res = ( Int ) LITEND - dle ; } return res ; } uInt decContextTestSavedStatus ( uInt oldstatus , uInt mask ) { return ( oldstatus & mask ) != 0 ; } uInt decContextTestStatus ( decContext * context , uInt mask ) { return ( context -> status & mask ) != 0 ; } decContext * decContextZeroStatus ( decContext * context ) { context -> status = 0 ; return context ; } 