static int pch_pic_domain_translate ( struct irq_domain * d , struct irq_fwspec * fwspec , unsigned long * hwirq , unsigned int * type ) { struct pch_pic * priv = d -> host_data ; struct device_node * of_node = to_of_node ( fwspec -> fwnode ) ; if ( of_node ) { * hwirq = fwspec -> param [ 0 ] + priv -> ht_vec_base ; * type = fwspec -> param [ 1 ] & IRQ_TYPE_SENSE_MASK ; } else { if ( fwspec -> param_count < 1 ) { return - EINVAL ; } * hwirq = fwspec -> param [ 0 ] - priv -> gsi_base ; if ( fwspec -> param_count > 1 ) { * type = fwspec -> param [ 1 ] & IRQ_TYPE_SENSE_MASK ; } else { * type = IRQ_TYPE_NONE ; } } return 0 ; } 