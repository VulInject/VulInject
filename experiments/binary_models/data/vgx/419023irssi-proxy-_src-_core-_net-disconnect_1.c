void net_disconnect_later ( GIOChannel * handle ) { NET_DISCONNECT_REC * rec ; rec = g_malloc ( NET_DISCONNECT_REC , 1 ) ; rec -> created = time ( NULL ) ; rec -> handle = handle ; rec -> tag = g_input_add ( handle , G_INPUT_READ , ( GInputFunction ) sig_disconnect , rec ) ; if ( timeout_tag == - 1 ) { timeout_tag = g_timeout_add ( 10000 , ( GSourceFunc ) sig_timeout_disconnect , NULL ) ; } disconnects = g_slist_append ( disconnects , rec ) ; } 