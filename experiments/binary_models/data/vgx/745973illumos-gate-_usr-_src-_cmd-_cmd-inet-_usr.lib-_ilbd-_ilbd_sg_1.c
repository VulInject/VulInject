ilb_status_t ilbd_address_to_srvID ( ilb_sg_info_t * sg , uint32_t * rbuf , size_t * rbufsz ) { ilbd_srv_t * tmp_srv ; ilb_sg_srv_t * tsrv ; ilbd_sg_t * tmp_sg ; ilbd_reply_ok ( rbuf , rbufsz ) ; tsrv = ( ilb_sg_srv_t * ) & ( ( ilb_comm_t * ) rbuf ) -> ic_data ; * rbufsz += sizeof ( ilb_sg_srv_t ) ; tmp_sg = i_find_sg_byname ( sg -> sg_name ) ; if ( tmp_sg == NULL ) { return ( ILB_STATUS_SGUNAVAIL ) ; } tsrv -> sgs_addr = sg -> sg_servers [ 0 ] . sgs_addr ; tmp_srv = i_find_srv ( & tmp_sg -> isg_srvlist , tsrv , MODE_ADDR ) ; ( void ) strlcpy ( tsrv -> sgs_srvID , tmp_srv -> isv_srvID , sizeof ( tsrv -> sgs_srvID ) ) ; return ( ILB_STATUS_OK ) ; } 