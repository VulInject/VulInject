static Bool exec_vrml_key_event ( GF_Compositor * compositor , GF_Node * node , GF_Event * ev , Bool is_focus_out ) { GF_SensorHandler * hdl = NULL ; GF_ChildNodeItem * child ; u32 ret = 0 ; if ( ! node ) { node = compositor -> focus_node ; } switch ( gf_node_get_tag ( node ) ) { case TAG_MPEG4_Text : return GF_FALSE ; case TAG_MPEG4_Layout : hdl = compositor_mpeg4_layout_get_sensor_handler ( node ) ; break ; case TAG_MPEG4_Anchor : hdl = compositor_mpeg4_get_sensor_handler ( node ) ; break ; case TAG_X3D_Text : return GF_FALSE ; case TAG_X3D_Anchor : hdl = compositor_mpeg4_get_sensor_handler ( node ) ; break ; } child = ( ( GF_ParentNode * ) node ) -> children ; if ( hdl ) { ret += hdl -> OnUserEvent ( hdl , is_focus_out ?GF_FALSE : GF_TRUE , GF_FALSE , ev , compositor ) ; } else { while ( child ) { hdl = compositor_mpeg4_get_sensor_handler ( child -> node ) ; if ( hdl ) { ret += hdl -> OnUserEvent ( hdl , is_focus_out ?GF_FALSE : GF_TRUE , GF_FALSE , ev , compositor ) ; } child = child -> next ; } } return ret ?GF_TRUE : GF_FALSE ; } 