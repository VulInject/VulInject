void _rst_FreeList ( FreeList * fl ) { if ( fl ) { FreeListBlock * block ; for ( block = fl -> block ; block ; block = block -> next ) { _thread_FreeListBlock ( fl , block ) ; } for ( block = fl -> block ; block ; block = block -> next ) { char * last_node = block -> nodes + fl -> node_size * ( fl -> blocking_factor - 1 ) ; * ( void * * ) last_node = fl -> free_list ; fl -> free_list = block -> nodes ; } fl -> nbusy = 0 ; } } 