static caryll_Buffer * otfcc_build_contextual_coverage ( const otl_Subtable * _subtable ) { const subtable_chaining * subtable = & ( _subtable -> chaining ) ; const otl_ChainingRule * rule = ( const otl_ChainingRule * ) & ( subtable -> rule ) ; tableid_t nInput = rule -> inputEnds - rule -> inputBegins ; tableid_t nSubst = rule -> applyCount ; reverseBacktracks ( rule , NULL ) ; bk_Block * root = bk_new_Block ( b16 , 3 , bkover ) ; bk_push ( root , b16 , nInput , bkover ) ; bk_push ( root , b16 , nSubst , bkover ) ; for ( tableid_t j = rule -> inputBegins ; j < rule -> inputEnds ; j ++ ) { bk_push ( root , p16 , bk_newBlockFromBuffer ( Coverage . build ( rule -> match [ j ] ) ) , bkover ) ; } for ( tableid_t j = 0 ; j < nSubst ; j ++ ) { bk_push ( root , b16 , rule -> apply [ j ] . index , b16 , rule -> apply [ j ] . lookup . index , bkover ) ; } return bk_build_Block ( root ) ; } 