static char * * getlookups ( char * cp ) { unsigned int num ; char * * listpp ; char * * tpp ; char * start ; num = getnlookups ( cp , NULL ) ; if ( num == 0 ) { return ( NULL ) ; } if ( ( listpp = malloc ( ( num + 1 ) * sizeof ( char * ) ) ) == NULL ) { return ( NULL ) ; } tpp = listpp ; while ( num -- ) { start = cp ; while ( * cp && * cp != ',' ) { if ( * cp == '\\' && * ( cp + 1 ) ) { shift1left ( cp ) ; } cp ++ ; } if ( * cp ) { * cp ++ = '\0' ; } if ( ( * tpp ++ = strdup ( start ) ) == NULL ) { for ( tpp = listpp ; * tpp ; tpp ++ ) { free ( * tpp ) ; } free ( listpp ) ; return ( NULL ) ; } } * tpp = NULL ; return ( listpp ) ; } 