static void comm_str__put ( struct comm_str * cs ) { if ( cs && refcount_dec_and_test ( & cs -> refcnt ) ) { down_write ( & comm_str_lock ) ; rb_erase ( & cs -> rb_node , & comm_str_root ) ; up_write ( & comm_str_lock ) ; zfree ( & cs -> str ) ; } } 