static void * ufs_directio_zero_buf ; static int ufs_directio_zero_len = 8192 ; int ufs_directio_enabled = 1 ; ufs_directio_kstats { kstat_named_t logical_reads ; kstat_named_t phys_reads ; kstat_named_t hole_reads ; kstat_named_t nread ; kstat_named_t logical_writes ; kstat_named_t phys_writes ; kstat_named_t nwritten ; kstat_named_t nflushes ; } , ufs_directio_kstats = { { "logical_reads" KSTAT_DATA_UINT64 } { "phys_reads" KSTAT_DATA_UINT64 } { "hole_reads" KSTAT_DATA_UINT64 } { "nread" KSTAT_DATA_UINT64 } { "logical_writes" KSTAT_DATA_UINT64 } { "phys_writes" KSTAT_DATA_UINT64 } { "nwritten" KSTAT_DATA_UINT64 } { "nflushes" KSTAT_DATA_UINT64 } } kstat_t * ufs_directio_kstatsp ; directio_buf { struct directio_buf * next ; char * addr ; int nbytes ; struct buf buf ; } static struct kmem_cache * directio_buf_cache ; static int directio_buf_constructor ( void * dbp , void * cdrarg , int kmflags ) { bioinit ( ( buf * ) & ( ( directio_buf * ) dbp ) -> buf ) ; return ( 0 ) ; } 