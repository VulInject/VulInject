int QDECL SortRanks ( const void * a , const void * b ) { gclient_t * ca , * cb ; ca = & level . clients [ * ( int * ) a ] ; cb = & level . clients [ * ( int * ) b ] ; if ( ca -> sess . spectatorState == SPECTATOR_SCOREBOARD || ca -> sess . spectatorClient < 0 ) { return 1 ; } if ( cb -> sess . spectatorState == SPECTATOR_SCOREBOARD || cb -> sess . spectatorClient < 0 ) { return - 1 ; } if ( ca -> pers . connected == CON_CONNECTING ) { return 1 ; } if ( cb -> pers . connected == CON_CONNECTING ) { return - 1 ; } if ( ca -> sess . sessionTeam == TEAM_SPECTATOR && cb -> sess . sessionTeam == TEAM_SPECTATOR ) { if ( ca -> sess . spectatorNum > cb -> sess . spectatorNum ) { return - 1 ; } if ( ca -> sess . spectatorNum < cb -> sess . spectatorNum ) { return 1 ; } return 0 ; } if ( ca -> sess . sessionTeam == TEAM_SPECTATOR ) { return 1 ; } if ( cb -> sess . sessionTeam == TEAM_SPECTATOR ) { return - 1 ; } if ( ca -> ps . persistant [ PERS_SCORE ] < cb -> ps . persistant [ PERS_SCORE ] ) { return 1 ; } return 0 ; } 