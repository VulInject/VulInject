static int process_item ( const umem_env_item_t * item , const char * item_arg ) { int arg_required ; arg_process_t * processor ; switch ( item -> item_type ) { case ITEM_FLAG : case ITEM_CLEARFLAG : case ITEM_OPTUINT : case ITEM_OPTSIZE : case ITEM_SPECIAL : arg_required = 0 ; break ; case ITEM_UINT : case ITEM_SIZE : arg_required = 1 ; break ; default : break ; } switch ( item -> item_type ) { case ITEM_FLAG : case ITEM_CLEARFLAG : if ( item_arg != NULL ) { log_message ( "%s: %s: does not take a value. ignored\n" , CURRENT , item -> item_name ) ; return ( 1 ) ; } processor = NULL ; break ; case ITEM_UINT : case ITEM_OPTUINT : processor = item_uint_process ; break ; case ITEM_SIZE : case ITEM_OPTSIZE : processor = item_size_process ; break ; case ITEM_SPECIAL : processor = item -> item_special ; break ; default : log_message ( "%s: %s: Invalid type.  Ignored\n" , CURRENT , item -> item_name ) ; return ( 1 ) ; } if ( arg_required && item_arg == NULL ) { log_message ( "%s: %s: Required value missing\n" , CURRENT , item -> item_name ) ; invalid } if ( item_arg != NULL || item -> item_type == ITEM_SPECIAL ) { if ( processor ( item , item_arg ) != ARG_SUCCESS ) { invalid } } if ( item -> item_flag_target ) { if ( item -> item_type == ITEM_CLEARFLAG ) { ( * item -> item_flag_target ) &= ~ item -> item_flag_value ; } else { ( * item -> item_flag_target ) |= item -> item_flag_value ; } } return ( 0 ) ; invalid return ( 1 ) ; } 