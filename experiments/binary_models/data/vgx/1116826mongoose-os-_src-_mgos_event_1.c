static bool remove_handler ( int ev , mgos_event_handler_t cb , void * userdata , bool group ) { struct handler * ph = NULL , * h = NULL , * th ; SLIST_FOREACH_SAFE ( , , , ) { if ( h -> ev == ev && h -> group == group && h -> cb == cb && h -> userdata == userdata ) { break ; } ph = h ; } if ( h == NULL ) { return false ; } if ( ph == NULL ) { SLIST_REMOVE_HEAD ( & s_handlers , next ) ; } else { SLIST_REMOVE_AFTER ( ph , next ) ; } return true ; } 