ts_init_enum ( , ) { GEnumClass * enum_class = g_type_class_ref ( enum_type ) ; GEnumValue * value ; for ( value = enum_class -> values ; value -> value_name ; value ++ ) { if ( g_str_has_prefix ( value -> value_name , "GIMP_" ) ) { gchar * scheme_name ; pointer symbol ; scheme_name = g_strdup ( value -> value_name + strlen ( "GIMP_" ) ) ; convert_string ( scheme_name ) ; symbol = sc -> vptr -> mk_symbol ( sc , scheme_name ) ; sc -> vptr -> scheme_define ( sc , sc -> global_env , symbol , sc -> vptr -> mk_integer ( sc , value -> value ) ) ; sc -> vptr -> setimmutable ( symbol ) ; } } g_type_class_unref ( enum_class ) ; } 