static int riscv_timer_starting_cpu ( unsigned int cpu ) { struct clock_event_device * ce = per_cpu_ptr ( & riscv_clock_event , cpu ) ; ce -> cpumask = cpumask_of ( cpu , NULL ) ; ce -> irq = riscv_clock_event_irq ; if ( riscv_timer_cannot_wake_cpu ) { ce -> features |= CLOCK_EVT_FEAT_C3STOP ; } clockevents_config_and_register ( ce , riscv_timebase , 100 , 0x7fffffff ) ; enable_percpu_irq ( riscv_clock_event_irq , irq_get_trigger_type ( riscv_clock_event_irq ) ) ; return 0 ; } 