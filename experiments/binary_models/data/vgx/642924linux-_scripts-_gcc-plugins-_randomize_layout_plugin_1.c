static int is_pure_ops_struct ( const_tree node ) { const_tree field ; gcc_assert ( TREE_CODE ( node ) == RECORD_TYPE || TREE_CODE ( node ) == UNION_TYPE ) ; for ( field = TYPE_FIELDS ( node ) ; field ; field = TREE_CHAIN ( field ) ) { const_tree fieldtype = get_field_type ( field ) ; enum tree_code code = TREE_CODE ( fieldtype ) ; if ( node == fieldtype ) { continue ; } if ( code == RECORD_TYPE || code == UNION_TYPE ) { continue ; } if ( ! is_fptr ( fieldtype ) ) { return 0 ; } } return 1 ; } 