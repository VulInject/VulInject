R_API Rvc * rvc_open ( const char * path , RvcType type ) { r_return_val_if_fail ( path , NULL ) ; Rvc * rvc ; int repotype = ( type == RVC_TYPE_ANY ) ?rvc_repo_type ( path ) : type ; switch ( repotype ) { case RVC_TYPE_GIT : rvc = r_vc_plugin_git . open ( path ) ; rvc -> p = & r_vc_plugin_git ; break ; case RVC_TYPE_RVC : rvc = r_vc_plugin_rvc . open ( path ) ; rvc -> p = & r_vc_plugin_rvc ; break ; } return rvc ; } 