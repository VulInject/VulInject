static void ar5008_hw_set_rfmode ( struct ath_hw * ah , struct ath9k_channel * chan ) { int rfMode = 0 ; if ( chan == NULL ) { return ; } if ( IS_CHAN_2GHZ ( chan ) ) { rfMode |= AR_PHY_MODE_DYNAMIC ; } else { rfMode |= AR_PHY_MODE_OFDM ; } if ( ! AR_SREV_9280_20_OR_LATER ( ah ) ) { rfMode |= ( IS_CHAN_5GHZ ( chan ) ) ?AR_PHY_MODE_RF5GHZ : AR_PHY_MODE_RF2GHZ ; } if ( IS_CHAN_A_FAST_CLOCK ( ah , chan ) ) { rfMode |= ( AR_PHY_MODE_DYNAMIC | AR_PHY_MODE_DYN_CCK_DISABLE ) ; } REG_WRITE ( ah , AR_PHY_MODE , rfMode ) ; } 