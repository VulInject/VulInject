static int airport_resume ( struct macio_dev * mdev ) { struct orinoco_private * priv = dev_get_drvdata ( & mdev -> ofdev . dev ) ; struct net_device * dev = priv -> ndev ; struct airport * card = priv -> card ; cfs_time_t flags ; int err ; printk ( KERN_DEBUG "%s: Airport waking up\n" , dev -> name ) ; pmac_call_feature ( PMAC_FTR_AIRPORT_ENABLE , macio_get_of_node ( mdev ) , 0 , 1 ) ; msleep ( 200 ) ; enable_irq ( card -> irq ) ; priv -> hw . ops -> lock_irqsave ( & priv -> lock , & flags ) ; err = orinoco_up ( priv ) ; priv -> hw . ops -> unlock_irqrestore ( & priv -> lock , & flags ) ; return err ; } 