size_t nla_strlcpy ( char * dst , const struct nlattr * nla , size_t dstsize ) { size_t srclen = nla_len ( nla ) ; char * src = nla_data ( nla ) ; if ( srclen > 0 && src [ srclen - 1 ] == '\0' ) { srclen -- ; } if ( dstsize > 0 ) { size_t len = ( srclen >= dstsize ) ?dstsize - 1 : srclen ; memcpy ( dst , src , len ) ; } return srclen ; } 