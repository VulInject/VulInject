int acrn_mm_region_add ( struct acrn_vm * vm , u64 user_gpa , u64 service_gpa , u64 size , u32 mem_type , u32 mem_access_right ) { struct vm_memory_region_op * region ; int ret = 0 ; region = kzalloc ( sizeof ( * region ) , GFP_KERNEL ) ; if ( ! region ) { return - ENOMEM ; } region -> type = ACRN_MEM_REGION_ADD ; region -> user_vm_pa = user_gpa ; region -> service_vm_pa = service_gpa ; region -> size = size ; region -> attr = ( ( mem_type & ACRN_MEM_TYPE_MASK ) | ( mem_access_right & ACRN_MEM_ACCESS_RIGHT_MASK ) ) ; ret = modify_region ( vm , region ) ; dev_dbg ( acrn_dev . this_device , "%s: user-GPA[%pK] service-GPA[%pK]size[0x%llx].\n" , __func__ , ( void * ) user_gpa , ( void * ) service_gpa , size ) ; return ret ; } 