static int syscalltbl__init_native ( struct syscalltbl * tbl ) { int nr_entries = 0 , i , j ; struct syscall * entries ; for ( i = 0 ; i <= syscalltbl_native_max_id ; ++ i ) { if ( syscalltbl_native [ i ] ) { ++ nr_entries ; } } entries = tbl -> syscalls . entries = malloc ( sizeof ( syscall ) * nr_entries ) ; for ( i = 0 , j = 0 ; i <= syscalltbl_native_max_id ; ++ i ) { if ( syscalltbl_native [ i ] ) { entries [ j ] . name = syscalltbl_native [ i ] ; entries [ j ] . id = i ; ++ j ; } } qsort ( tbl -> syscalls . entries , nr_entries , sizeof ( syscall ) , syscallcmp ) ; tbl -> syscalls . nr_entries = nr_entries ; return 0 ; } 