static int pause_put_stats ( struct sk_buff * skb , const struct ethtool_pause_stats * pause_stats ) { const u16 pad = ETHTOOL_A_PAUSE_STAT_PAD ; struct nlattr * nest ; nest = nla_nest_start ( skb , ETHTOOL_A_PAUSE_STATS ) ; if ( ! nest ) { return - EMSGSIZE ; } if ( ethtool_put_stat ( skb , pause_stats -> tx_pause_frames , ETHTOOL_A_PAUSE_STAT_TX_FRAMES , pad ) || ethtool_put_stat ( skb , pause_stats -> rx_pause_frames , ETHTOOL_A_PAUSE_STAT_RX_FRAMES , pad ) ) { err_cancel } nla_nest_end ( skb , nest ) ; return 0 ; err_cancel nla_nest_cancel ( skb , nest ) ; return - EMSGSIZE ; } 