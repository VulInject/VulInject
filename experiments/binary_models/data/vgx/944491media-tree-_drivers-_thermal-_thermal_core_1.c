struct thermal_zone_device * thermal_zone_get_zone_by_name ( const char * name ) { struct thermal_zone_device * pos = NULL , * ref = ERR_PTR ( - EINVAL ) ; int found = 0 ; if ( ! name ) { exit } mutex_lock ( & thermal_list_lock ) ; list_for_each_entry ( , , ) if ( ! strncasecmp ( name , pos -> type , THERMAL_NAME_LENGTH ) ) { found ++ ; ref = pos ; } mutex_unlock ( & thermal_list_lock ) ; if ( found == 0 ) { ref = ERR_PTR ( - ENODEV ) ; } if ( found > 1 ) { ref = ERR_PTR ( - EEXIST ) ; } exit return ref ; } 