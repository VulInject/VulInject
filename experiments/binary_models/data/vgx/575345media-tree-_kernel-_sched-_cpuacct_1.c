static int cpuacct_stats_show ( struct seq_file * sf , void * v ) { struct cpuacct * ca = css_ca ( seq_css ( sf ) ) ; s64 val [ CPUACCT_STAT_NSTATS ] ; int cpu ; int stat ; for_each_possible_cpu ( ) { u64 * cpustat = per_cpu_ptr ( ca -> cpustat , cpu ) -> cpustat ; val [ CPUACCT_STAT_USER ] += cpustat [ CPUTIME_USER ] ; val [ CPUACCT_STAT_USER ] += cpustat [ CPUTIME_NICE ] ; val [ CPUACCT_STAT_SYSTEM ] += cpustat [ CPUTIME_SYSTEM ] ; val [ CPUACCT_STAT_SYSTEM ] += cpustat [ CPUTIME_IRQ ] ; val [ CPUACCT_STAT_SYSTEM ] += cpustat [ CPUTIME_SOFTIRQ ] ; } for ( stat = 0 ; stat < CPUACCT_STAT_NSTATS ; stat ++ ) { seq_printf ( sf , "%s %lld\n" , cpuacct_stat_desc [ stat ] , ( long long ) nsec_to_clock_t ( val [ stat ] ) ) ; } return 0 ; } 