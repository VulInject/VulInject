Suite * jabber_util_suite ( void ) { Suite * s = suite_create ( "jabber/util" ) ; TCase * tc_core = tcase_create ( "Buddy" ) ; struct jabber_data * jd ; ic = g_new0 ( im_connection , 1 ) ; ic -> acc = g_new0 ( account_t , 1 ) ; ic -> proto_data = jd = g_new0 ( jabber_data , 1 ) ; jd -> buddies = g_hash_table_new ( g_str_hash , g_str_equal ) ; set_add ( & ic -> acc -> set , "resource_select" , "priority" , ic -> acc ) ; set_add ( & ic -> acc -> set , "activity_timeout" , "120" , NULL , ic -> acc ) ; suite_add_tcase ( s , tc_core ) ; tcase_add_test ( tc_core , check_buddy_add ) ; tcase_add_test ( tc_core , check_compareJID ) ; tcase_add_test ( tc_core , check_hipchat_slug ) ; return s ; } 