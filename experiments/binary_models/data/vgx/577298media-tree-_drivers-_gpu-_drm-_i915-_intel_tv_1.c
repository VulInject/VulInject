static enum drm_mode_status intel_tv_mode_valid ( struct drm_connector * connector , struct drm_display_mode * mode ) { struct intel_tv * intel_tv = intel_attached_tv ( connector ) ; const struct tv_mode * tv_mode = intel_tv_mode_find ( intel_tv ) ; int max_dotclk = to_i915 ( connector -> dev ) -> max_dotclk_freq ; if ( tv_mode && abs ( tv_mode -> refresh - drm_mode_vrefresh ( mode ) * 1000 ) < 1000 ) { return MODE_OK ; } return MODE_CLOCK_RANGE ; } 