static int rtlgen_get_speed ( struct phy_device * phydev ) { int val ; if ( ! phydev -> link ) { return 0 ; } val = phy_read_paged ( phydev , 0xa43 , 0x12 ) ; switch ( val & RTLGEN_SPEED_MASK ) { case 0x0000 : phydev -> speed = SPEED_10 ; break ; case 0x0010 : phydev -> speed = SPEED_100 ; break ; case 0x0020 : phydev -> speed = SPEED_1000 ; break ; case 0x0200 : phydev -> speed = SPEED_10000 ; break ; case 0x0210 : phydev -> speed = SPEED_2500 ; break ; case 0x0220 : phydev -> speed = SPEED_5000 ; break ; default : break ; } return 0 ; } 