static int win_chain_recalc ( struct MuttWindow * win ) { const int wrap_indent = 2 ; struct ChainData * cd = win -> wdata ; cbar_update ( cd ) ; win -> actions |= WA_REPAINT ; if ( cd -> chain_len == 0 ) { return 0 ; } short col = 0 , row = 0 ; for ( int i = 0 ; i < cd -> chain_len ; i ++ ) { short old_col = col ; int index = cd -> chain [ i ] ; struct Remailer * * rp = ARRAY_GET ( cd -> ra , index ) ; col += strlen ( ( * rp ) -> shortname ) + 2 ; if ( col >= win -> state . cols ) { old_col = wrap_indent ; col = wrap_indent ; row ++ ; } cd -> coords [ i ] . col = old_col ; cd -> coords [ i ] . row = row ; } return 0 ; } 