int smu_cmn_feature_is_enabled ( struct smu_context * smu , enum smu_feature_mask mask ) { struct amdgpu_device * adev = smu -> adev ; uint64_t enabled_features ; int feature_id ; if ( __smu_get_enabled_features ( smu , & enabled_features ) ) { dev_err ( adev -> dev , "Failed to retrieve enabled ppfeatures!\n" ) ; return 0 ; } feature_id = smu_cmn_to_asic_specific_index ( smu , CMN2ASIC_MAPPING_FEATURE , mask ) ; if ( feature_id < 0 ) { return 0 ; } return test_bit ( feature_id , ( unsigned long * ) & enabled_features ) ; } 