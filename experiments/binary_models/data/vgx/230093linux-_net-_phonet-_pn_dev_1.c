static int phonet_device_notify ( struct notifier_block * me , unsigned long what , void * ptr ) { struct net_device * dev = netdev_notifier_info_to_dev ( ptr ) ; switch ( what ) { case NETDEV_REGISTER : if ( dev -> type == ARPHRD_PHONET ) { phonet_device_autoconf ( dev ) ; } break ; case NETDEV_UNREGISTER : phonet_device_destroy ( dev ) ; phonet_route_autodel ( dev , NULL ) ; break ; } return 0 ; } 