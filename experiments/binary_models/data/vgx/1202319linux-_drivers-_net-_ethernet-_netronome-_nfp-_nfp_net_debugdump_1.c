s64 nfp_net_dump_calculate_size ( struct nfp_pf * pf , struct nfp_dumpspec * spec , u32 flag ) { struct nfp_level_size lev_sz ; int err ; lev_sz . requested_level = cpu_to_be32 ( flag ) ; lev_sz . total_size = ALIGN8 ( sizeof ( nfp_dump_prolog ) ) ; err = nfp_traverse_tlvs ( pf , spec -> data , spec -> size , & lev_sz , nfp_calc_specific_level_size ) ; return lev_sz . total_size ; } 