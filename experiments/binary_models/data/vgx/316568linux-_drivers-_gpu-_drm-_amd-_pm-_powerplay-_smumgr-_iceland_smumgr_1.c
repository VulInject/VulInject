static int iceland_start_smu ( struct pp_hwmgr * hwmgr ) { struct iceland_smumgr * priv = hwmgr -> smu_backend ; int result ; if ( ! smu7_is_smc_ram_running ( hwmgr ) ) { result = iceland_smu_upload_firmware_image ( hwmgr ) ; if ( result ) { return result ; } iceland_smu_start_smc ( hwmgr , NULL ) ; } smu7_read_smc_sram_dword ( hwmgr , SMU71_FIRMWARE_HEADER_LOCATION + offsetof ( SMU71_Firmware_Header , SoftRegisters ) , & ( priv -> smu7_data . soft_regs_start ) , 0x40000 ) ; result = smu7_request_smu_load_fw ( hwmgr ) ; return result ; } 