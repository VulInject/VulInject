void _cupsSetError ( ipp_status_t status , const char * message , int localize ) { _cups_globals_t * cg ; if ( ! message && errno ) { message = strerror ( errno ) ; localize = 0 ; } cg = _cupsGlobals ( ) ; cg -> last_error = status ; if ( cg -> last_status_message ) { cg -> last_status_message = NULL ; } if ( message ) { if ( localize ) { if ( ! cg -> lang_default ) { cg -> lang_default = cupsLangDefault ( ) ; } cg -> last_status_message = _cupsStrAlloc ( _cupsLangString ( cg -> lang_default , message ) ) ; } else { cg -> last_status_message = _cupsStrAlloc ( message ) ; } } DEBUG_printf ( ( "4_cupsSetError: last_error=%s, last_status_message=\"%s\"" , ippErrorString ( cg -> last_error ) , cg -> last_status_message ) ) ; } 