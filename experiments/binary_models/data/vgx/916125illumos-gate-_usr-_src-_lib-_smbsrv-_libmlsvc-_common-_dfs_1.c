static boolean_t dfs_namespace_findlink ( const char * name , char * relpath , char * linkpath , size_t bufsz ) { char rootdir [ DFS_PATH_MAX ] ; uint32_t stat ; char * p ; if ( dfs_namespace_path ( name , rootdir , DFS_PATH_MAX ) != ERROR_SUCCESS ) { return ( B_FALSE ) ; } ( void ) snprintf ( linkpath , bufsz , "%s/%s" , rootdir , relpath ) ; for ( ; ; ) { if ( dfs_link_stat ( linkpath , & stat ) != ERROR_SUCCESS ) { return ( B_FALSE ) ; } if ( stat == DFS_STAT_ISDFS ) { return ( B_TRUE ) ; } * p = '\0' ; ( void ) snprintf ( linkpath , bufsz , "%s/%s" , rootdir , relpath ) ; } return ( B_FALSE ) ; } 