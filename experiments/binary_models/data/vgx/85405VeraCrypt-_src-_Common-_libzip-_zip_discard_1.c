void zip_discard ( zip_t * za ) { zip_uint64_t i ; if ( za == NULL ) { return ; } if ( za -> src ) { zip_source_close ( za -> src ) ; zip_source_free ( za -> src ) ; } _zip_string_free ( za -> comment_orig ) ; _zip_string_free ( za -> comment_changes ) ; _zip_hash_free ( za -> names ) ; if ( za -> entry ) { for ( i = 0 ; i < za -> nentry ; i ++ ) { _zip_entry_finalize ( za -> entry + i ) ; } free ( za -> entry ) ; } for ( i = 0 ; i < za -> nopen_source ; i ++ ) { _zip_source_invalidate ( za -> open_source [ i ] ) ; } free ( za -> open_source ) ; _zip_progress_free ( za -> progress ) ; zip_error_fini ( & za -> error ) ; free ( za ) ; return ; } 