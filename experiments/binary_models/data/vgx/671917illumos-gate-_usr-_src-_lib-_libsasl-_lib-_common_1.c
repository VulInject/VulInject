void sasl_dispose ( sasl_conn_t * * pconn ) { int result ; _sasl_global_context_t * gctx ; void * free_mutex ; if ( ! * pconn ) { return ; } gctx = ( * pconn ) -> gctx ; free_mutex = gctx -> free_mutex ; result = sasl_MUTEX_LOCK ( free_mutex ) ; if ( result != SASL_OK ) { return ; } if ( ! ( * pconn ) ) { sasl_MUTEX_UNLOCK ( free_mutex ) ; return ; } if ( ! ( * pconn ) ) { return ; } ( * pconn ) -> destroy_conn ( * pconn ) ; sasl_FREE ( * pconn ) ; * pconn = NULL ; sasl_MUTEX_UNLOCK ( free_mutex ) ; } 