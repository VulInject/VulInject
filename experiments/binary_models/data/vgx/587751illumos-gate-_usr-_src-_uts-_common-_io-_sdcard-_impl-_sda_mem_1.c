int sda_mem_bd_mediainfo ( void * arg , bd_media_t * media ) { sda_slot_t * slot = arg ; sda_slot_enter ( slot , NULL ) ; if ( ! slot -> s_ready ) { sda_slot_exit ( slot ) ; return ( ENXIO ) ; } media -> m_nblks = slot -> s_nblks ; media -> m_blksize = slot -> s_blksz ; media -> m_readonly = slot -> s_flags & SLOTF_WRITABLE ?B_FALSE : B_TRUE ; media -> m_solidstate = B_TRUE ; sda_slot_exit ( slot ) ; return ( 0 ) ; } 