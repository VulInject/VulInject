inline static int comp_pvar ( int op , pv_spec_t * pvs , int rtype , union exp_op * r , struct sip_msg * msg , struct run_act_ctx * h ) { pv_value_t pval ; int ret ; ret = 0 ; if ( unlikely ( pv_get_spec_value ( msg , r -> param , & pval ) != 0 ) ) { return 0 ; } if ( likely ( pval . flags & PV_TYPE_INT ) ) { if ( op == NO_OP ) { ret = ! ( ! pval . ri ) ; } else { ret = comp_num ( op , pval . ri , rtype , r , msg , h ) ; } } if ( ( pval . flags == PV_VAL_NONE ) || ( pval . flags & ( PV_VAL_NULL | PV_VAL_EMPTY ) ) ) { if ( op == NO_OP ) { ret = 0 ; } else { ret = comp_num ( op , 0 , rtype , r , msg , h ) ; } } else { ret = pval . rs . len != 0 ; if ( op != NO_OP ) { ret = comp_num ( op , ret , rtype , r , msg , h ) ; } } pv_value_destroy ( & pval ) ; return ret ; } 