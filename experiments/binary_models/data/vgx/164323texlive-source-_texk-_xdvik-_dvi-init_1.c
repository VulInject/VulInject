static Boolean file_exists_p ( const char * path , dviErrFlagT * errflag ) { TRACE_FILES ( ( stderr , "file_exists_p for |%s|" , path ) ) ; * errflag = UNKNOWN_ERROR ; if ( ( m_dvi_fp = XFOPEN ( path , OPEN_MODE ) ) == NULL ) { * errflag = FILE_DOESNT_EXIST ; return False ; } TRACE_FILES ( ( stderr , "m_dvi_fp for |%s| = %p" , path , ( void * ) m_dvi_fp ) ) ; if ( fstat ( fileno ( m_dvi_fp ) , & fstatbuf ) == - 1 ) { perror ( "xdvi: file_exists_p: fstat" ) ; fclose ( m_dvi_fp , NULL ) ; m_dvi_fp = NULL ; return False ; } if ( S_ISDIR ( fstatbuf . st_mode ) ) { * errflag = FILE_IS_DIRECTORY ; fclose ( m_dvi_fp ) ; m_dvi_fp = NULL ; return False ; } if ( fstatbuf . st_size == 0 ) { * errflag = FILE_HAS_ZERO_SIZE ; fclose ( m_dvi_fp ) ; m_dvi_fp = NULL ; return False ; } return True ; } 