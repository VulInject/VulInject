static ssize_t size_read ( struct file * filp , char __user * buf , size_t count , loff_t * pos ) { struct mlx5_cache_ent * ent = filp -> private_data ; char lbuf [ 20 ] ; int err ; err = snprintf ( lbuf , sizeof ( lbuf ) , "%d\n" , ent -> size ) ; if ( err < 0 ) { return err ; } if ( copy_to_user ( buf , lbuf , err ) ) { return - EFAULT ; } * pos += err ; return err ; } static const struct file_operations size_fops = { . owner = THIS_MODULE . open = simple_open . write = size_write . read = size_read } ; 