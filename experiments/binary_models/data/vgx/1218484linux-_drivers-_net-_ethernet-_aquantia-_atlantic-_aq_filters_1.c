static int aq_add_del_fether ( struct aq_nic_s * aq_nic , struct aq_rx_filter * aq_rx_fltr , bool add ) { struct aq_rx_filter_l2 data ; struct aq_hw_s * aq_hw = aq_nic -> aq_hw ; const struct aq_hw_ops * aq_hw_ops = aq_nic -> aq_hw_ops ; aq_set_data_fl2 ( aq_nic , aq_rx_fltr , & data , add ) ; if ( unlikely ( ! aq_hw_ops -> hw_filter_l2_clear ) ) { return - EOPNOTSUPP ; } if ( add ) { return aq_hw_ops -> hw_filter_l2_set ( aq_hw , & data ) ; } else { return aq_hw_ops -> hw_filter_l2_clear ( aq_hw , & data ) ; } } 