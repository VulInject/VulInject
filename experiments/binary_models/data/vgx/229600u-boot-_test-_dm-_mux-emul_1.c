static int mux_emul_probe ( struct udevice * dev ) { struct mux_chip * mux_chip = dev_get_uclass_priv ( dev ) ; struct mux_control * mux ; u32 idle_state ; int ret ; ret = mux_alloc_controllers ( dev , 1 ) ; mux = & mux_chip -> mux [ 0 ] ; ret = dev_read_u32 ( dev , "idle-state" , & idle_state ) ; if ( ret ) { return ret ; } mux -> idle_state = idle_state ; mux -> states = 0x100000 ; return 0 ; } 