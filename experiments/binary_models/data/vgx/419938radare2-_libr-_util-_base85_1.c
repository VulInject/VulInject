R_API void r_base85_encode ( FILE * fp , int delims , int wrap , int y_abbr ) { int c , count = 0 , len = 0 ; cfs_time_t tuple = 0 ; if ( delims ) { putc_wrap ( '<' , wrap , & len ) ; putc_wrap ( '~' , wrap , & len ) ; } for ( ; ; ) { c = getc ( fp ) ; if ( c != EOF ) { tuple |= c << ( ( 3 - count ++ ) * 8 ) ; if ( count < 4 ) { continue ; } } if ( count == 0 ) { break ; } encode_tuple ( tuple , count , wrap , & len , y_abbr ) ; if ( c == EOF ) { break ; } tuple = 0 ; count = 0 ; } if ( delims ) { putc_wrap ( '~' , wrap , & len ) ; putc_wrap ( '>' , wrap , & len ) ; } } 