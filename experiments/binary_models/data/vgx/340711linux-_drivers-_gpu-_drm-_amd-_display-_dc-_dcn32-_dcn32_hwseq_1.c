static uint32_t dcn32_calculate_cab_allocation ( struct dc * dc , struct dc_state * ctx ) { int i ; uint8_t num_ways = 0 ; uint32_t mall_ss_size_bytes = 0 ; mall_ss_size_bytes = ctx -> bw_ctx . bw . dcn . mall_ss_size_bytes ; for ( i = 0 ; i < dc -> res_pool -> pipe_count ; i ++ ) { struct pipe_ctx * pipe = & ctx -> res_ctx . pipe_ctx [ i ] ; mall_ss_size_bytes += dcn32_helper_calculate_mall_bytes_for_cursor ( dc , pipe , false ) ; } if ( dc -> debug . force_mall_ss_num_ways > 0 ) { num_ways = dc -> debug . force_mall_ss_num_ways ; } else { num_ways = dcn32_helper_mall_bytes_to_ways ( dc , mall_ss_size_bytes ) ; } return num_ways ; } 