static int meson_pinconf_get_gpio_bit ( struct meson_pinctrl * pc , unsigned int pin , unsigned int reg_type ) { struct meson_bank * bank ; unsigned int reg , bit , val ; int ret ; ret = meson_get_bank ( pc , pin , & bank ) ; meson_calc_reg_and_bit ( bank , pin , reg_type , & reg , & bit ) ; ret = regmap_read ( pc -> reg_gpio , reg , & val ) ; if ( ret ) { return ret ; } return BIT ( bit ) & val ?1 : 0 ; } 