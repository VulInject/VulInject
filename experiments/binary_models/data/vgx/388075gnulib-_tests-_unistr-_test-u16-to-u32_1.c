result = u16_to_u32 ( input , input_length , NULL , & length ) ; if ( ! ( result != NULL ) ) { return 1 ; } if ( ! ( u32_cmp ( result , expected , expected_length ) == 0 ) ) { return 3 ; } free ( result ) ; if ( expected_length > 0 ) { uint32_t * preallocated ; length = expected_length - 1 ; preallocated = ( uint32_t * ) malloc ( length * sizeof ( uint32_t ) ) ; result = u16_to_u32 ( input , input_length , preallocated , & length ) ; if ( ! ( result != NULL ) ) { return 4 ; } if ( ! ( result != preallocated ) ) { return 5 ; } if ( ! ( length == expected_length ) ) { return 6 ; } if ( ! ( u32_cmp ( result , expected , expected_length ) == 0 ) ) { return 7 ; } free ( result ) ; free ( preallocated ) ; } { uint32_t * preallocated ; length = expected_length ; preallocated = ( uint32_t * ) malloc ( length * sizeof ( uint32_t ) ) ; result = u16_to_u32 ( input , input_length , preallocated , & length ) ; if ( ! ( result != NULL ) ) { return 8 ; } if ( ! ( preallocated == NULL || result == preallocated ) ) { return 9 ; } if ( ! ( length == expected_length ) ) { return 10 ; } if ( ! ( u32_cmp ( result , expected , expected_length ) == 0 ) ) { return 11 ; } free ( preallocated ) ; } return 0 ; 