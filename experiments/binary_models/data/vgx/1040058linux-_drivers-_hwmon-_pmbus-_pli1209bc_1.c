static int pli1209bc_read_word_data ( struct i2c_client * client , int page , int phase , int reg ) { int data ; switch ( reg ) { case PMBUS_READ_POUT : data = pmbus_read_word_data ( client , page , phase , reg ) ; data = sign_extend32 ( data , 15 ) * 10 ; return clamp_val ( data , - 32768 , 32767 ) & 0xffff ; case PMBUS_READ_VOUT : case PMBUS_READ_TEMPERATURE_1 : data = pmbus_read_word_data ( client , page , phase , PMBUS_STATUS_WORD ) ; if ( data < 0 ) { return data ; } if ( data & PB_STATUS_POWER_GOOD_N ) { return 0 ; } return pmbus_read_word_data ( client , page , phase , reg ) ; default : return - ENODATA ; } } static const struct regulator_desc pli1209bc_reg_desc = { . name = "vout2" . id = 1 . of_match = of_match_ptr ( "vout2" ) . regulators_node = of_match_ptr ( "regulators" ) . ops = & pmbus_regulator_ops . type = REGULATOR_VOLTAGE . owner = THIS_MODULE } ; 