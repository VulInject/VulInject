static int FUN1(VAR1 *VAR2, VAR3 *VAR4, MOVAtom VAR5)
{
VAR6 *VAR7;
VAR8 *VAR9;
unsigned int VAR10, VAR11, VAR12 = 0;
int64_t VAR13 = 0;
int64_t VAR14 = 0;
int64_t VAR15 = 0;
int64_t VAR16 = 0;

if (VAR2->VAR17->VAR18 < 1)
return 0;
VAR7 = VAR2->VAR17->VAR19[VAR2->VAR17->VAR18-1];
VAR9 = VAR7->VAR20;

FUN2(VAR4); 
FUN3(VAR4); 
VAR11 = FUN4(VAR4);

FUN5(VAR2->VAR17, VAR21, "",
VAR2->VAR17->VAR18-1, VAR11);

if (VAR9->VAR22)
FUN5(VAR2->VAR17, VAR23, "");
FUN6(&VAR9->VAR22);
VAR9->VAR24 = 0;
if (VAR11 >= VAR25 / sizeof(*VAR9->VAR22))
return FUN7(VAR26);

for (VAR10 = 0; VAR10 < VAR11 && !VAR4->VAR27; VAR10++) {
unsigned int VAR28;
unsigned int VAR29;
unsigned int VAR30 = FUN8(FUN9(VAR10 + 1, 1024 * 1024), VAR11);
VAR31 *VAR22 = FUN10(VAR9->VAR22, &VAR12,
VAR30 * sizeof(*VAR9->VAR22));
if (!VAR22) {
FUN6(&VAR9->VAR22);
VAR9->VAR24 = 0;
return FUN7(VAR26);
}
VAR9->VAR24 = VAR30;
VAR9->VAR22 = VAR22;

VAR29    = FUN4(VAR4);
VAR28 = FUN4(VAR4);

VAR9->VAR22[VAR10].VAR32= VAR29;
VAR9->VAR22[VAR10].VAR13= VAR28;

FUN5(VAR2->VAR17, VAR21, "",
VAR29, VAR28);


if (VAR28 > VAR2->VAR33) {

int32_t VAR34 = (VAR35)VAR28;
FUN5(VAR2->VAR17, VAR23, "",
VAR28, VAR10, VAR29, VAR7->VAR36);
VAR9->VAR22[VAR10].VAR13 = 1;
VAR16 += (VAR34 < 0 ? (VAR37)VAR34 : 1) * VAR29;
} else {
VAR16 += VAR28 * VAR29;
}

VAR15 += VAR9->VAR22[VAR10].VAR13 * VAR29;

if (VAR15 > VAR16) {
int64_t VAR38 = (VAR15 - VAR16)/FUN9(VAR29, 1);
uint32_t VAR39 = (VAR9->VAR22[VAR10].VAR13 > VAR38) ? VAR38 : VAR9->VAR22[VAR10].VAR13 - 1;
VAR15 -= VAR39 * VAR29;
VAR9->VAR22[VAR10].VAR13 -= VAR39;
}

VAR13+=(VAR37)VAR9->VAR22[VAR10].VAR13*(VAR40)VAR9->VAR22[VAR10].VAR32;
VAR14+=VAR9->VAR22[VAR10].VAR32;
}

VAR9->VAR24 = VAR10;

if (VAR13 > 0 &&
VAR13 <= VAR41 - VAR9->VAR42 &&
VAR14 <= VAR25 - VAR9->VAR43) {
VAR9->VAR42  += VAR13;
VAR9->VAR43 += VAR14;
}

if (VAR4->VAR27) {
FUN5(VAR2->VAR17, VAR23, "");
return VAR44;
}

VAR7->VAR45= VAR14;
if (VAR13)
VAR7->VAR13= FUN8(VAR7->VAR13, VAR13);






if (!VAR13 && VAR9->VAR24 &&
VAR7->VAR46->VAR47 == VAR48) {
FUN5(VAR2->VAR17, VAR23,
""
""
"",
VAR7->VAR36, VAR7->VAR49);
VAR7->VAR50 = VAR51;
}
VAR9->VAR52 = VAR13;
return 0;
}