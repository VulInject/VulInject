static void mlxsw_sp_port_lag_uppers_cleanup ( struct mlxsw_sp_port * mlxsw_sp_port , struct net_device * lag_dev ) { struct net_device * br_dev = netdev_master_upper_dev_get ( lag_dev ) ; struct net_device * upper_dev ; struct list_head * iter ; if ( netif_is_bridge_port ( lag_dev ) ) { mlxsw_sp_port_bridge_leave ( mlxsw_sp_port , lag_dev , br_dev ) ; } netdev_for_each_upper_dev_rcu ( , , ) { br_dev = netdev_master_upper_dev_get ( upper_dev ) ; mlxsw_sp_port_bridge_leave ( mlxsw_sp_port , upper_dev , br_dev ) ; } } 