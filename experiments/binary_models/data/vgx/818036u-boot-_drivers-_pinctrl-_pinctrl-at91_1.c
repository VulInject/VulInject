static int at91_pmx_set ( struct at91_pinctrl_mux_ops * ops , struct at91_port * pio , u32 mask , enum at91_mux mux ) { at91_mux_disable_interrupt ( pio , mask ) ; switch ( mux ) { case AT91_MUX_GPIO : at91_mux_gpio_enable ( pio , mask , 1 ) ; break ; case AT91_MUX_PERIPH_A : ops -> mux_A_periph ( pio , mask ) ; break ; case AT91_MUX_PERIPH_B : ops -> mux_B_periph ( pio , mask ) ; break ; case AT91_MUX_PERIPH_C : ops -> mux_C_periph ( pio , mask ) ; break ; case AT91_MUX_PERIPH_D : if ( ! ops -> mux_D_periph ) { return - EINVAL ; } ops -> mux_D_periph ( pio , mask ) ; break ; } if ( mux ) { at91_mux_gpio_disable ( pio , mask ) ; } return 0 ; } 