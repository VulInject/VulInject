static int ads1015_remove ( struct i2c_client * client ) { struct iio_dev * indio_dev = i2c_get_clientdata ( client ) ; struct ads1015_data * data = iio_priv ( indio_dev ) ; iio_device_unregister ( indio_dev ) ; pm_runtime_disable ( & client -> dev ) ; pm_runtime_set_suspended ( & client -> dev ) ; pm_runtime_put_noidle ( & client -> dev ) ; iio_triggered_buffer_cleanup ( indio_dev , NULL ) ; return regmap_update_bits ( data -> regmap , ADS1015_CFG_REG , ADS1015_CFG_MOD_MASK , ADS1015_SINGLESHOT << ADS1015_CFG_MOD_SHIFT ) ; } 