void test_online_fetchhead__no_merges ( void ) { git_config * config ; fetchhead_test_clone ( ) ; cl_git_pass ( git_repository_config ( & config , g_repo ) ) ; cl_git_pass ( git_config_delete_entry ( config , "branch.master.remote" ) ) ; cl_git_pass ( git_config_delete_entry ( config , "branch.master.merge" ) ) ; git_config_free ( config ) ; fetchhead_test_fetch ( FETCH_HEAD_NO_MERGE_DATA2 ) ; cl_git_pass ( git_tag_delete ( g_repo , "annotated_tag" ) ) ; cl_git_pass ( git_tag_delete ( g_repo , "blob" ) ) ; cl_git_pass ( git_tag_delete ( g_repo , "commit_tree" ) ) ; cl_git_pass ( git_tag_delete ( g_repo , "nearly-dangling" ) ) ; fetchhead_test_fetch ( NULL , FETCH_HEAD_NO_MERGE_DATA ) ; cl_git_pass ( git_tag_delete ( g_repo , "commit_tree" ) ) ; fetchhead_test_fetch ( NULL , FETCH_HEAD_NO_MERGE_DATA3 ) ; } 