static void ospf6_zebra_append_opaque_attr ( struct ospf6_route * request , struct zapi_route * api ) { struct ospf_zebra_opaque ospf_opaque = { } ; sprintf ( ospf_opaque . path_type , "%s" , OSPF6_PATH_TYPE_NAME ( request -> path . type ) ) ; switch ( request -> path . type ) { case OSPF6_PATH_TYPE_INTRA : case OSPF6_PATH_TYPE_INTER : ( void ) inet_ntop ( AF_INET , & request -> path . area_id , ospf_opaque . area_id , sizeof ( ospf_opaque . area_id ) ) ; break ; case OSPF6_PATH_TYPE_EXTERNAL1 : case OSPF6_PATH_TYPE_EXTERNAL2 : snprintf ( ospf_opaque . tag , sizeof ( ospf_opaque . tag ) , "%u" , request -> path . tag ) ; break ; default : break ; } SET_FLAG ( api -> message , ZAPI_MESSAGE_OPAQUE ) ; api -> opaque . length = sizeof ( ospf_zebra_opaque ) ; memcpy ( api -> opaque . data , & ospf_opaque , api -> opaque . length ) ; } 