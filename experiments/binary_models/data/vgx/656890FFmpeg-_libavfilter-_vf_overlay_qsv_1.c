static int have_alpha_planar ( AVFilterLink * link ) { enum AVPixelFormat pix_fmt = link -> format ; const AVPixFmtDescriptor * desc ; AVHWFramesContext * fctx ; if ( link -> format == AV_PIX_FMT_QSV ) { fctx = ( AVHWFramesContext * ) link -> hw_frames_ctx -> data ; pix_fmt = fctx -> sw_format ; } desc = av_pix_fmt_desc_get ( pix_fmt ) ; return ! ! ( desc -> flags & AV_PIX_FMT_FLAG_ALPHA ) ; } 