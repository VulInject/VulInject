int do_redirect ( action_list_t * a , const char * addr , const char * deliverby , const char * dsn_notify , const char * dsn_ret , int is_ext_list , int cancel_keep , struct buf * headers ) { action_list_t * b = NULL ; while ( a != NULL ) { b = a ; a = a -> next ; } a = new_action_list ( ) ; a -> a = ACTION_REDIRECT ; a -> cancel_keep = cancel_keep ; a -> u . red . addr = addr ; a -> u . red . is_ext_list = is_ext_list ; a -> u . red . deliverby = deliverby ; a -> u . red . dsn_notify = dsn_notify ; a -> u . red . dsn_ret = dsn_ret ; a -> u . red . headers = headers ; b -> next = a ; return 0 ; } 