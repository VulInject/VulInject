static int rsnd_dvc_pcm_new ( struct rsnd_mod * mod , struct rsnd_dai_stream * io , struct snd_soc_pcm_runtime * rtd ) { struct rsnd_dvc * dvc = rsnd_mod_to_dvc ( mod ) ; int is_play = rsnd_io_is_play ( io ) ; int slots = rsnd_get_slot ( io ) ; int ret ; ret = rsnd_kctrl_new_m ( mod , io , rtd , is_play ?"DVC Out Playback Volume" : "DVC In Capture Volume" , rsnd_dvc_volume_update , & dvc -> volume , slots , 0x00800000 - 1 ) ; ret = rsnd_kctrl_new_m ( mod , io , rtd , is_play ?"DVC Out Mute Switch" : "DVC In Mute Switch" , rsnd_dvc_volume_update , & dvc -> mute , slots , 1 ) ; if ( ret < 0 ) { return ret ; } ret = rsnd_kctrl_new_s ( mod , io , rtd , is_play ?"DVC Out Ramp Switch" : "DVC In Ramp Switch" , rsnd_dvc_volume_update , & dvc -> ren , 1 ) ; if ( ret < 0 ) { return ret ; } ret = rsnd_kctrl_new_e ( mod , io , rtd , is_play ?"DVC Out Ramp Up Rate" : "DVC In Ramp Up Rate" , rsnd_dvc_volume_update , & dvc -> rup , dvc_ramp_rate ) ; if ( ret < 0 ) { return ret ; } ret = rsnd_kctrl_new_e ( mod , io , rtd , is_play ?"DVC Out Ramp Down Rate" : "DVC In Ramp Down Rate" , rsnd_dvc_volume_update , & dvc -> rdown , dvc_ramp_rate ) ; if ( ret < 0 ) { return ret ; } return 0 ; } 