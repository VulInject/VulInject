static uint16_t unprivileged_port_range_start ( void ) { uint16_t result = 1024 ; char * content = NULL ; content = read_file_to_str ( "/proc/sys/net/ipv4/ip_unprivileged_port_start" , 0 , NULL ) ; if ( content != NULL ) { int ok = 1 ; uint16_t tmp_result ; tmp_result = ( uint16_t ) tor_parse_long ( content , 10 , 0 , 65535 , & ok , NULL ) ; if ( ok ) { result = tmp_result ; } else { fprintf ( stderr , "Unable to convert ip_unprivileged_port_start to integer: %s\n" , content ) ; } } return result ; } 