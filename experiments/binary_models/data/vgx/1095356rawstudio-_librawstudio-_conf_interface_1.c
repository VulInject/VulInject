static GMutex lock ; gboolean rs_conf_get_boolean ( const gchar * name , gboolean * boolean_value ) { gboolean ret = FALSE ; GConfValue * gvalue ; g_mutex_lock ( & lock ) ; GConfClient * client = gconf_client_get_default ( ) ; GString * fullname = g_string_new ( GCONF_PATH ) ; g_string_append ( fullname , name ) ; if ( client ) { gvalue = gconf_client_get ( client , fullname -> str , NULL ) ; if ( gvalue ) { if ( gvalue -> type == GCONF_VALUE_BOOL ) { ret = TRUE ; if ( boolean_value ) { * boolean_value = gconf_value_get_bool ( gvalue ) ; } } gconf_value_free ( gvalue ) ; } } g_mutex_unlock ( & lock ) ; g_string_free ( fullname , TRUE ) ; return ( ret ) ; } 