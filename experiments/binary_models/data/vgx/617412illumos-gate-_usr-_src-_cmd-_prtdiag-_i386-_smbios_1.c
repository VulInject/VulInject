static void do_slot_mapping ( smbios_slot_t * s , topo_hdl_t * thp ) { int err ; uint_t dev , func ; topo_walk_t * twp ; char pciex [ 256 ] ; dev = s -> smbl_df >> 3 ; func = s -> smbl_df & 0x7 ; ( void ) snprintf ( pciex , sizeof ( pciex ) , "%s=%u/%s=%u/%s=%d" , PCIEX_BUS , s -> smbl_bus , PCIEX_DEVICE , dev , PCIEX_FUNCTION , func ) ; twp = topo_walk_init ( thp , FM_FMRI_SCHEME_HC , do_slot_mapping_cb , pciex , & err ) ; ( void ) topo_walk_step ( twp , TOPO_WALK_CHILD ) ; topo_walk_fini ( twp ) ; } 