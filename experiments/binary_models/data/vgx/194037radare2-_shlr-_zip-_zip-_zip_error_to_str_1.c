ZIP_EXTERN int zip_error_to_str ( char * buf , zip_uint64_t len , int ze , int se ) { const char * zs , * ss ; zs = _zip_err_str [ ze ] . description ; switch ( _zip_err_str [ ze ] . type ) { case ZIP_ET_SYS : ss = strerror ( se ) ; break ; case ZIP_ET_ZLIB : ss = zError ( se ) ; break ; default : ss = NULL ; } return snprintf ( buf , len , "%s%s%s" , zs , ( ss ?": " : "" ) , ( ss ?ss : "" ) ) ; } 