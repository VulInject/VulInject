static int twl4030_pwmled_apply ( struct pwm_chip * chip , struct pwm_device * pwm , const struct pwm_state * state ) { int ret ; if ( ! state -> enabled ) { if ( pwm -> state . enabled ) { twl4030_pwmled_disable ( chip , pwm ) ; } return 0 ; } ret = twl4030_pwmled_config ( pwm -> chip , pwm , state -> duty_cycle , state -> period ) ; if ( ret ) { return ret ; } if ( ! pwm -> state . enabled ) { ret = twl4030_pwmled_enable ( chip , pwm ) ; } return ret ; } 