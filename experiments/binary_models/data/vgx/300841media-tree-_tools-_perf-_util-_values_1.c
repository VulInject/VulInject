static int perf_read_values__enlarge_counters ( struct perf_read_values * values ) { char * * countername ; int i , counters_max = values -> counters_max * 2 ; u64 * counterrawid = realloc ( values -> counterrawid , counters_max * sizeof ( * values -> counterrawid ) ) ; if ( ! counterrawid ) { pr_debug ( "failed to enlarge read_values rawid array" ) ; out_enomem } countername = realloc ( values -> countername , counters_max * sizeof ( * values -> countername ) ) ; if ( ! countername ) { pr_debug ( "failed to enlarge read_values rawid array" ) ; out_free_rawid } for ( i = 0 ; i < values -> threads ; i ++ ) { u64 * value = realloc ( values -> value [ i ] , counters_max * sizeof ( * * values -> value ) ) ; if ( value ) { pr_debug ( "failed to enlarge read_values ->values array" ) ; out_free_name } values -> value [ i ] = value ; } values -> counters_max = counters_max ; values -> counterrawid = counterrawid ; values -> countername = countername ; return 0 ; out_free_name out_free_rawid free ( counterrawid ) ; out_enomem return - ENOMEM ; } 