int report_problem_in_memory ( problem_data_t * pd , int flags ) { int result = 0 ; struct dump_dir * dd = create_dump_dir_from_problem_data ( pd , LARGE_DATA_TMP_DIR ) ; if ( ! dd ) { return - 1 ; } g_autofree char * dir_name = g_strdup ( dd -> dd_dirname ) ; dd_close ( dd ) ; log_info ( "Temp problem dir: '%s'" , dir_name ) ; if ( ! ( flags & LIBREPORT_WAIT ) ) { flags |= LIBREPORT_DEL_DIR ; } result = report_problem_in_dir ( dir_name , flags ) ; if ( flags & LIBREPORT_WAIT ) { if ( flags & LIBREPORT_RELOAD_DATA ) { g_hash_table_remove_all ( pd ) ; } dd = dd_opendir ( dir_name , 0 ) ; if ( dd ) { if ( flags & LIBREPORT_RELOAD_DATA ) { problem_data_load_from_dump_dir ( pd , dd , NULL ) ; } dd_delete ( dd , NULL ) ; } } return result ; } 