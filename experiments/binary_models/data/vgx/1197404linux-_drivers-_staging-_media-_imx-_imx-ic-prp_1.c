static int prp_s_frame_interval ( struct v4l2_subdev * sd , struct v4l2_subdev_frame_interval * fi ) { struct prp_priv * priv = sd_to_priv ( sd ) ; mutex_lock ( & priv -> lock ) ; if ( fi -> interval . numerator == 0 || fi -> interval . denominator == 0 ) { fi -> interval = priv -> frame_interval ; } else { priv -> frame_interval = fi -> interval ; } mutex_unlock ( & priv -> lock ) ; return 0 ; } 