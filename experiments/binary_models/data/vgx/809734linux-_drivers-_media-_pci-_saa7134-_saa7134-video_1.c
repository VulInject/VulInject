static __poll_t radio_poll ( struct file * file , poll_table * wait ) { struct saa7134_dev * dev = video_drvdata ( file ) ; struct saa6588_command cmd ; __poll_t rc = v4l2_ctrl_poll ( file , wait ) ; cmd . instance = file ; cmd . event_list = wait ; mutex_lock ( & dev -> lock ) ; saa_call_all ( dev , core , command , SAA6588_CMD_POLL , & cmd ) ; mutex_unlock ( & dev -> lock ) ; return rc | cmd . poll_mask ; } 