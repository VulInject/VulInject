static struct clk * xgene_register_clk_pll ( struct device * dev , const char * name , const char * parent_name , unsigned long flags , void __iomem * reg , u32 pll_offset , u32 type , spinlock_t * lock , int version ) { struct xgene_clk_pll * apmclk ; struct clk * clk ; struct clk_init_data init ; apmclk = kzalloc ( sizeof ( * apmclk ) , GFP_KERNEL ) ; if ( ! apmclk ) { return ERR_PTR ( - ENOMEM ) ; } init . name = name ; init . ops = & xgene_clk_pll_ops ; init . flags = flags ; init . parent_names = parent_name ?& parent_name : NULL ; init . num_parents = parent_name ?1 : 0 ; apmclk -> version = version ; apmclk -> reg = reg ; apmclk -> lock = lock ; apmclk -> pll_offset = pll_offset ; apmclk -> type = type ; apmclk -> hw . init = & init ; clk = clk_register ( dev , & apmclk -> hw ) ; if ( IS_ERR ( clk ) ) { pr_err ( "%s: could not register clk %s\n" , __func__ , name ) ; return NULL ; } return clk ; } 