static inline void intel_pstate_pid_reset ( struct cpudata * cpu ) { struct _pid * pid = & cpu -> pid ; pid -> p_gain = percent_fp ( pid_params . p_gain_pct , NULL ) ; pid -> d_gain = percent_fp ( pid_params . d_gain_pct ) ; pid -> i_gain = percent_fp ( pid_params . i_gain_pct ) ; pid -> setpoint = int_tofp ( pid_params . setpoint ) ; pid -> last_err = pid -> setpoint - int_tofp ( 100 ) ; pid -> deadband = int_tofp ( pid_params . deadband ) ; pid -> integral = 0 ; } 