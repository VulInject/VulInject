PHPAPI int php_output_handler_start ( php_output_handler * handler ) { HashTable * rconflicts ; php_output_handler_conflict_check_t conflict ; if ( NULL != ( conflict = zend_hash_find_ptr ( & php_output_handler_conflicts , handler -> name ) ) ) { if ( SUCCESS != conflict ( ZSTR_VAL ( handler -> name ) , ZSTR_LEN ( handler -> name ) ) ) { return FAILURE ; } } if ( NULL != ( rconflicts = zend_hash_find_ptr ( & php_output_handler_reverse_conflicts , handler -> name ) ) ) { ZEND_HASH_PACKED_FOREACH_PTR ( , ) { if ( SUCCESS != conflict ( ZSTR_VAL ( handler -> name ) , ZSTR_LEN ( handler -> name ) ) ) { return FAILURE ; } } ZEND_HASH_FOREACH_END ( ) ; } handler -> level = zend_stack_push ( & OG ( handlers ) , & handler ) ; OG ( active ) = handler ; return SUCCESS ; } 