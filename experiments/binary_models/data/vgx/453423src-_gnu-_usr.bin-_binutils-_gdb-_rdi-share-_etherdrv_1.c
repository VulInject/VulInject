static int set_address ( const char * const addr , struct sockaddr_in * const ia ) { ia -> sin_family = AF_INET ; ia -> sin_addr . s_addr = inet_addr ( addr , NULL ) ; if ( ia -> sin_addr . s_addr == ( u_int ) - 1 ) { struct hostent * hp = gethostbyname ( addr ) ; if ( hp == NULL ) { return - 1 ; } ( void ) memcpy ( ( caddr_t ) & ia -> sin_addr , hp -> h_addr , hp -> h_length ) ; } return 0 ; } 