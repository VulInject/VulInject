static int us5182d_dark_gain_config ( struct iio_dev * indio_dev ) { struct us5182d_data * data = iio_priv ( indio_dev ) ; int ret ; ret = us5182d_update_dark_th ( data , US5182D_CFG1_AGAIN_DEFAULT ) ; ret = i2c_smbus_write_byte_data ( data -> client , US5182D_REG_AUTO_LDARK_GAIN , data -> lower_dark_gain ) ; if ( ret < 0 ) { return ret ; } ret = i2c_smbus_write_byte_data ( data -> client , US5182D_REG_AUTO_HDARK_GAIN , data -> upper_dark_gain ) ; if ( ret < 0 ) { return ret ; } return i2c_smbus_write_byte_data ( data -> client , US5182D_REG_DARK_AUTO_EN , US5182D_REG_DARK_AUTO_EN_DEFAULT ) ; } 