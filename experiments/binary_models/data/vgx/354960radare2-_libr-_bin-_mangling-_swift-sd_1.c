static const char * resolve ( const struct Type * t , const char * foo , const char * * bar ) { if ( ! t || ! foo || ! * foo ) { return in ; } for ( ; t [ 0 ] . code ; t ++ ) { int len = strlen ( t [ 0 ] . code ) ; if ( ! strncmp ( foo , t [ 0 ] . code , len ) ) { if ( bar ) { * bar = t [ 0 ] . name ; } return foo + len ; } } return NULL ; } 