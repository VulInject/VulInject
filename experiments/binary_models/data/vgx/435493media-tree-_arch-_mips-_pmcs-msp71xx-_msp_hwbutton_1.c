static int msp_hwbutton_register ( struct hwbutton_interrupt * hirq ) { cfs_time_t cic_ext ; if ( hirq -> handle_hi == NULL || hirq -> handle_lo == NULL ) { return - EINVAL ; } cic_ext = * CIC_EXT_CFG_REG ; CIC_EXT_SET_TRIGGER_LEVEL ( cic_ext , hirq -> eirq ) ; if ( hirq -> initial_state == HWBUTTON_HI ) { CIC_EXT_SET_ACTIVE_LO ( cic_ext , hirq -> eirq ) ; } else { CIC_EXT_SET_ACTIVE_HI ( cic_ext , hirq -> eirq ) ; } * CIC_EXT_CFG_REG = cic_ext ; return request_irq ( hirq -> irq , hwbutton_handler , 0 , hirq -> name , hirq ) ; } 