static int fw_decompress_xz_single ( struct device * dev , struct fw_priv * fw_priv , size_t in_size , const void * in_buffer ) { struct xz_dec * xz_dec ; struct xz_buf xz_buf ; enum xz_ret xz_ret ; xz_dec = xz_dec_init ( XZ_SINGLE , ( u32 ) - 1 ) ; xz_buf . in_size = in_size ; xz_buf . in = in_buffer ; xz_buf . in_pos = 0 ; xz_buf . out_size = fw_priv -> allocated_size ; xz_buf . out = fw_priv -> data ; xz_buf . out_pos = 0 ; xz_ret = xz_dec_run ( xz_dec , & xz_buf ) ; xz_dec_end ( xz_dec ) ; fw_priv -> size = xz_buf . out_pos ; return fw_decompress_xz_error ( dev , xz_ret ) ; } 