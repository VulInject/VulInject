int sd_genl_message_get_family_name ( sd_netlink * nl , sd_netlink_message * m , const char * * ret ) { const GenericNetlinkFamily * family ; uint16_t nlmsg_type ; int r ; assert_return ( nl , - EINVAL ) ; assert_return ( nl -> protocol == NETLINK_GENERIC , - EINVAL ) ; assert_return ( m , - EINVAL ) ; assert_return ( ret , - EINVAL ) ; r = sd_netlink_message_get_type ( m , & nlmsg_type ) ; r = genl_family_get_by_id ( nl , nlmsg_type , & family ) ; if ( r < 0 ) { return r ; } * ret = family -> name ; return 0 ; } 