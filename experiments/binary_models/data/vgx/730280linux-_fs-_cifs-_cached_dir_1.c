void close_all_cached_dirs ( struct cifs_sb_info * cifs_sb ) { struct rb_root * root = & cifs_sb -> tlink_tree ; struct rb_node * node ; struct cached_fid * cfid ; struct cifs_tcon * tcon ; struct tcon_link * tlink ; struct cached_fids * cfids ; for ( node = rb_first ( root ) ; node ; node = rb_next ( node ) ) { tlink = rb_entry ( node , tcon_link , tl_rbnode ) ; tcon = tlink_tcon ( tlink ) ; if ( IS_ERR ( tcon ) ) { continue ; } cfids = tcon -> cfids ; if ( cfids == NULL ) { continue ; } list_for_each_entry ( , , ) { dput ( cfid -> dentry ) ; } } } 