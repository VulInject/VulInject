static int ep93xx_gpio_probe ( struct platform_device * pdev ) { struct ep93xx_gpio * epg ; int i ; epg = devm_kzalloc ( & pdev -> dev , sizeof ( * epg ) , GFP_KERNEL ) ; epg -> base = devm_platform_ioremap_resource ( pdev , 0 ) ; if ( IS_ERR ( epg -> base ) ) { return PTR_ERR ( epg -> base ) ; } for ( i = 0 ; i < ARRAY_SIZE ( ep93xx_gpio_banks ) ; i ++ ) { struct ep93xx_gpio_chip * gc = & epg -> gc [ i ] ; struct ep93xx_gpio_bank * bank = & ep93xx_gpio_banks [ i ] ; if ( ep93xx_gpio_add_bank ( gc , pdev , epg , bank ) ) { dev_warn ( & pdev -> dev , "Unable to add gpio bank %s\n" , bank -> label ) ; } } return 0 ; } 