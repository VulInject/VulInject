static int lxcProcRead ( const char * path , char * buf , size_t size , off_t offset , struct fuse_file_info * fi G_GNUC_UNUSED ) { int res = - ENOENT ; g_autofree char * hostpath = NULL ; struct fuse_context * context = NULL ; virDomainDef * def ; hostpath = g_strdup_printf ( "/proc/%s" , path ) ; context = fuse_get_context ( ) ; def = ( virDomainDef * ) context -> private_data ; if ( STREQ ( path , fuse_meminfo_path ) ) { if ( ( res = lxcProcReadMeminfo ( hostpath , def , buf , size , offset ) ) < 0 ) { res = lxcProcHostRead ( hostpath , buf , size , offset ) ; } } return res ; } static struct fuse_operations lxcProcOper = { . getattr = lxcProcGetattr . readdir = lxcProcReaddir . open = lxcProcOpen . read = lxcProcRead } ; 