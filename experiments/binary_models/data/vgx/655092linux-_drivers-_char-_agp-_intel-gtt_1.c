static struct agp_memory * intel_fake_agp_alloc_by_type ( size_t pg_count , int type ) { agp_memory * new ; if ( type == AGP_DCACHE_MEMORY && INTEL_GTT_GEN == 1 ) { if ( pg_count != intel_private . num_dcache_entries ) { return NULL ; } new = agp_create_memory ( 1 ) ; new -> type = AGP_DCACHE_MEMORY ; new -> page_count = pg_count ; new -> num_scratch_pages = 0 ; agp_free_page_array ( new ) ; return new ; } if ( type == AGP_PHYS_MEMORY ) { return alloc_agpphysmem_i8xx ( pg_count , type ) ; } return NULL ; } 