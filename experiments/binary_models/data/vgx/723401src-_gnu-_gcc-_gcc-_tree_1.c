make_node_stat ( ) { tree t ; enum tree_code_class type = TREE_CODE_CLASS ( code ) ; size_t length = tree_code_size ( code ) ; tree_node_kind kind ; switch ( type ) { case tcc_declaration : kind = d_kind ; break ; case tcc_type : kind = t_kind ; break ; case tcc_statement : kind = s_kind ; break ; case tcc_reference : kind = r_kind ; break ; case tcc_expression : case tcc_comparison : case tcc_unary : case tcc_binary : kind = e_kind ; break ; case tcc_constant : kind = c_kind ; break ; case tcc_exceptional : switch ( code ) { case IDENTIFIER_NODE : kind = id_kind ; break ; case TREE_VEC : kind = vec_kind ; break ; case TREE_BINFO : kind = binfo_kind ; break ; case PHI_NODE : kind = phi_kind ; break ; case SSA_NAME : kind = ssa_name_kind ; break ; case BLOCK : kind = b_kind ; break ; case CONSTRUCTOR : kind = constr_kind ; break ; default : kind = x_kind ; break ; } break ; default : gcc_unreachable ( ) ; } tree_node_counts [ ( int ) kind ] ++ ; tree_node_sizes [ ( int ) kind ] += length ; if ( code == IDENTIFIER_NODE ) { t = ggc_alloc_zone_pass_stat ( length , & tree_id_zone ) ; } else { t = ggc_alloc_zone_pass_stat ( length , & tree_zone ) ; } TREE_SET_CODE ( t , code ) ; switch ( type ) { case tcc_statement : TREE_SIDE_EFFECTS ( t ) = 1 ; break ; case tcc_declaration : if ( CODE_CONTAINS_STRUCT ( code , TS_DECL_WITH_VIS ) ) { DECL_IN_SYSTEM_HEADER ( t ) = in_system_header ; } if ( CODE_CONTAINS_STRUCT ( code , TS_DECL_COMMON ) ) { if ( code != FUNCTION_DECL ) { DECL_ALIGN ( t ) = 1 ; } DECL_USER_ALIGN ( t ) = 0 ; DECL_POINTER_ALIAS_SET ( t ) = - 1 ; } DECL_SOURCE_LOCATION ( t ) = input_location ; DECL_UID ( t ) = next_decl_uid ++ ; break ; case tcc_type : TYPE_UID ( t ) = next_type_uid ++ ; TYPE_ALIGN ( t ) = BITS_PER_UNIT ; TYPE_USER_ALIGN ( t ) = 0 ; TYPE_MAIN_VARIANT ( t ) = t ; TYPE_ATTRIBUTES ( t ) = NULL_TREE ; targetm . set_default_type_attributes ( t ) ; TYPE_ALIAS_SET ( t ) = - 1 ; break ; case tcc_constant : TREE_CONSTANT ( t ) = 1 ; TREE_INVARIANT ( t ) = 1 ; break ; case tcc_expression : switch ( code ) { case INIT_EXPR : case MODIFY_EXPR : case VA_ARG_EXPR : case PREDECREMENT_EXPR : case PREINCREMENT_EXPR : case POSTDECREMENT_EXPR : case POSTINCREMENT_EXPR : TREE_SIDE_EFFECTS ( t ) = 1 ; break ; default : break ; } break ; default : break ; } return t ; } 