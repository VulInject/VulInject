GF_Err nhntdmx_configure_pid ( GF_Filter * filter , GF_FilterPid * pid , Bool is_remove ) { GF_NHNTDmxCtx * ctx = gf_filter_get_udta ( filter ) ; if ( is_remove ) { gf_filter_pid_remove ( ctx -> opid ) ; return GF_OK ; } if ( ! gf_filter_pid_check_caps ( pid ) ) { return GF_NOT_SUPPORTED ; } ctx -> ipid = pid ; gf_filter_pid_set_framing_mode ( pid , GF_TRUE ) ; const GF_PropertyValue * p = gf_filter_pid_get_property ( ctx -> ipid , GF_PROP_PID_FILEPATH ) ; if ( p && p -> value . string && gf_fileio_is_main_thread ( p -> value . string ) ) { gf_filter_force_main_thread ( filter , GF_TRUE ) ; } return GF_OK ; } 