void sqliteAddColumn ( Parse * pParse , Token * pName ) { Table * p ; int i ; char * z = 0 ; Column * pCol ; if ( ( p = pParse -> pNewTable ) == 0 ) { return ; } sqliteSetNString ( & z , pName -> z , pName -> n , 0 ) ; if ( z == 0 ) { return ; } sqliteDequote ( z ) ; for ( i = 0 ; i < p -> nCol ; i ++ ) { if ( sqliteStrICmp ( z , p -> aCol [ i ] . zName ) == 0 ) { sqliteErrorMsg ( pParse , "duplicate column name: %s" , z ) ; return ; } } if ( ( p -> nCol & 0x7 ) == 0 ) { Column * aNew ; aNew = sqliteRealloc ( p -> aCol , ( p -> nCol + 8 ) * sizeof ( p -> aCol [ 0 ] ) ) ; if ( aNew == 0 ) { return ; } p -> aCol = aNew ; } pCol = & p -> aCol [ p -> nCol ] ; memset ( pCol , 0 , sizeof ( p -> aCol [ 0 ] ) ) ; pCol -> zName = z ; pCol -> sortOrder = SQLITE_SO_NUM ; p -> nCol ++ ; } 