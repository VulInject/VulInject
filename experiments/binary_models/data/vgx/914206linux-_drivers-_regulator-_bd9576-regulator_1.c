static int bd9576_uvd_handler ( int irq , struct regulator_irq_data * rid , unsigned long * dev_mask ) { int val , ret , i ; struct bd957x_data * d = ( bd957x_data * ) rid -> data ; ret = regmap_read ( d -> regmap , BD957X_REG_INT_UVD_STAT , & val ) ; * dev_mask = 0 ; rid -> opaque = val & UVD_IRQ_VALID_MASK ; * dev_mask = val & BD9576_xVD_IRQ_MASK_VOUT1TO4 ; * dev_mask |= ( ( val & BD9576_xVD_IRQ_MASK_VOUTL1 ) >> 1 ) ; * dev_mask |= ( ( val & BD9576_UVD_IRQ_MASK_VOUTS1_OCW ) >> 1 ) ; for_each_set_bit ( , , 6 ) { struct bd957x_regulator_data * rdata ; struct regulator_err_state * stat ; rdata = & d -> regulator_data [ i ] ; stat = & rid -> states [ i ] ; stat -> notifs = rdata -> uvd_notif ; stat -> errors = rdata -> uvd_err ; } ret = regmap_write ( d -> regmap , BD957X_REG_INT_UVD_STAT , UVD_IRQ_VALID_MASK & val ) ; return 0 ; } 