char strbuf [ 81 ] ; int priv_change_needed = 0 ; void * my_zalloc ( size_t size ) { void * ret ; ret = malloc ( size , NULL ) ; if ( ret == NULL ) { if ( errno == EAGAIN ) { ( void ) sleep ( 1 ) ; ret = malloc ( size ) ; } if ( ret == NULL ) { ( void ) err_msg ( "%s\n" , gettext ( strerror ( errno ) ) ) ; ( void ) err_msg ( gettext ( "Memory allocation failure, Exiting...\n" ) ) ; exit ( 1 ) ; } } ( void ) memset ( ret , 0 , size ) ; return ( ret ) ; } 