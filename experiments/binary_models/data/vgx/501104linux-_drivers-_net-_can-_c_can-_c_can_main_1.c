static void c_can_stop ( struct net_device * dev ) { struct c_can_priv * priv = netdev_priv ( dev ) ; c_can_irq_control ( priv , false ) ; priv -> write_reg ( priv , C_CAN_CTRL_REG , CONTROL_INIT ) ; pinctrl_pm_select_sleep_state ( dev -> dev . parent , NULL ) ; priv -> can . state = CAN_STATE_STOPPED ; } 