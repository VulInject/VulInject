static int pwm_backlight_initial_power_state ( const struct pwm_bl_data * pb ) { struct device_node * node = pb -> dev -> of_node ; if ( ! node || ! node -> phandle ) { return FB_BLANK_UNBLANK ; } if ( pb -> enable_gpio && gpiod_get_value ( pb -> enable_gpio ) == 0 ) { return FB_BLANK_POWERDOWN ; } if ( ! regulator_is_enabled ( pb -> power_supply ) ) { return FB_BLANK_POWERDOWN ; } return FB_BLANK_UNBLANK ; } 