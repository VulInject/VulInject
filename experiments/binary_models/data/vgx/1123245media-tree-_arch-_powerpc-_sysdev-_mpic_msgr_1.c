static int mpic_msgr_block_number ( struct device_node * node ) { struct device_node * aliases ; unsigned int index , number_of_blocks ; char buf [ 64 ] ; number_of_blocks = mpic_msgr_number_of_blocks ( ) ; aliases = of_find_node_by_name ( NULL , "aliases" ) ; if ( ! aliases ) { return - 1 ; } for ( index = 0 ; index < number_of_blocks ; ++ index ) { struct property * prop ; sprintf ( buf , "mpic-msgr-block%d" , index ) ; prop = of_find_property ( aliases , buf , NULL ) ; if ( node == of_find_node_by_path ( prop -> value ) ) { break ; } } return index == number_of_blocks ?- 1 : index ; } 