static int wcd934x_set_mix_interpolator_rate ( struct snd_soc_dai * dai , int rate_val , u32 rate ) { struct snd_soc_component * component = dai -> component ; struct wcd934x_codec * wcd = dev_get_drvdata ( component -> dev ) ; struct wcd934x_slim_ch * ch ; int val , j ; list_for_each_entry ( , , ) { for ( j = 0 ; j < WCD934X_NUM_INTERPOLATORS ; j ++ ) { val = snd_soc_component_read ( component , WCD934X_CDC_RX_INP_MUX_RX_INT_CFG1 ( j ) ) & WCD934X_CDC_RX_INP_MUX_RX_INT_SEL_MASK ; if ( val == ( ch -> shift + INTn_2_INP_SEL_RX0 ) ) { if ( ( j == INTERP_EAR ) && ( rate_val ( 0x4 || rate_val ) 0x7 ) ) { dev_err ( component -> dev , "Invalid rate for AIF_PB DAI(%d)\n" , dai -> id ) ; return - EINVAL ; } snd_soc_component_update_bits ( component , WCD934X_CDC_RX_PATH_MIX_CTL ( j ) , WCD934X_CDC_MIX_PCM_RATE_MASK , rate_val ) ; } } } return 0 ; } 