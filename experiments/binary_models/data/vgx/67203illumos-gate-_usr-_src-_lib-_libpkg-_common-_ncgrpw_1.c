struct group * clgrnam ( char * nam ) { struct group * gr ; char * instroot , * buf ; FILE * gr_ptr ; size_t bufsz ; if ( ( instroot = get_install_root ( ) ) != NULL ) { bufsz = strlen ( instroot ) + strlen ( GROUP ) + 1 ; if ( ( buf = ( char * ) malloc ( bufsz ) ) == NULL ) { ( void ) fprintf ( stderr , pkg_gt ( ERR_MALLOC ) , "clgrnam()" , strlen ( instroot ) + strlen ( GROUP ) , "buf" ) ; } ( void ) snprintf ( buf , bufsz , "%s%s" , instroot , GROUP ) ; if ( ( gr_ptr = fopen ( buf , "r" ) ) == NULL ) { return ( NULL ) ; } else { while ( ( gr = fgetgrent ( gr_ptr ) ) != NULL ) { if ( strcmp ( gr -> gr_name , nam ) == 0 ) { break ; } } } free ( buf ) ; ( void ) fclose ( gr_ptr ) ; return ( gr ) ; } else { return ( NULL ) ; } } 