static int handle_read ( struct tcmu_device * dev , struct tcmulib_cmd * cmd ) { struct tcmur_cmd * tcmur_cmd = cmd -> hm_private ; int ret ; ret = check_lba_and_length ( dev , cmd , tcmu_cdb_get_xfer_length ( cmd -> cdb ) ) ; tcmur_cmd -> done = handle_generic_cbk ; return aio_request_schedule ( dev , tcmur_cmd , read_work_fn , tcmur_cmd_complete ) ; } format_unit_state { size_t length ; off_t offset ; uint32_t done_blocks ; } 