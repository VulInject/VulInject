static int default_setup ( struct tdescr * td ) { struct sigaction sa ; sa . sa_sigaction = default_handler ; sa . sa_flags = SA_SIGINFO | SA_RESTART ; sa . sa_flags |= td -> sa_flags ; sigemptyset ( & sa . sa_mask ) ; for ( int sig = 1 ; sig < 32 ; sig ++ ) { sigaction ( sig , & sa , NULL ) ; } for ( int sig = SIGRTMIN ; sig <= SIGRTMAX ; sig ++ ) { sigaction ( sig , & sa , NULL ) ; } if ( td -> sig_trig ) { unblock_signal ( td -> sig_trig ) ; } if ( td -> sig_ok ) { unblock_signal ( td -> sig_ok ) ; } if ( td -> sig_unsupp ) { unblock_signal ( td -> sig_unsupp ) ; } if ( td -> timeout ) { unblock_signal ( SIGALRM ) ; alarm ( td -> timeout , NULL ) ; } fprintf ( stderr , "Registered handlers for all signals.\n" ) ; return 1 ; } 