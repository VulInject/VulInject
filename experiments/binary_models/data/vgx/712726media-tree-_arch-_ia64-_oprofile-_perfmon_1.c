static int perfmon_handler ( struct task_struct * task , void * buf , pfm_ovfl_arg_t * arg , struct pt_regs * regs , unsigned long stamp ) { int event = arg -> pmd_eventid ; if ( allow_ints ) { oprofile_add_sample ( regs , event ) ; } return 0 ; } 