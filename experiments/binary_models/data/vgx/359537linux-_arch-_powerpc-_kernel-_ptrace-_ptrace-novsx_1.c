int fpr_get ( struct task_struct * target , const struct user_regset * regset , struct membuf to ) { BUILD_BUG_ON ( offsetof ( thread_fp_state , fpscr ) != offsetof ( thread_fp_state , fpr [ 32 ] ) ) ; flush_fp_to_thread ( target , NULL ) ; return membuf_write ( & to , & target -> thread . fp_state , 33 * sizeof ( u64 ) ) ; return membuf_write ( & to , & empty_zero_page , 33 * sizeof ( u64 ) ) ; } int fpr_set ( struct task_struct * target , const struct user_regset * regset , unsigned int pos , unsigned int count , const void * kbuf , const void __user * ubuf ) { BUILD_BUG_ON ( offsetof ( thread_fp_state , fpscr ) != offsetof ( thread_fp_state , fpr [ 32 ] ) ) ; flush_fp_to_thread ( target ) ; return user_regset_copyin ( & pos , & count , & kbuf , & ubuf , & target -> thread . fp_state , 0 , - 1 ) ; return 0 ; } 