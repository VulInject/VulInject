static int __maybe_unused sun4i_csi_runtime_resume ( struct device * dev ) { struct sun4i_csi * csi = dev_get_drvdata ( dev ) ; reset_control_deassert ( csi -> rst ) ; clk_prepare_enable ( csi -> bus_clk , NULL ) ; clk_prepare_enable ( csi -> ram_clk ) ; clk_set_rate ( csi -> isp_clk , 80000000 ) ; clk_prepare_enable ( csi -> isp_clk ) ; writel ( 1 , csi -> regs + CSI_EN_REG ) ; return 0 ; } 