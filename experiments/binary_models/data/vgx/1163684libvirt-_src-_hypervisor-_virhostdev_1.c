static int virHostdevResetAllPCIDevices ( virHostdevManager * mgr , virPCIDeviceList * pcidevs ) { int ret = 0 ; int i ; for ( i = 0 ; i < virPCIDeviceListCount ( pcidevs ) ; i ++ ) { virPCIDevice * pci = virPCIDeviceListGet ( pcidevs , i ) ; VIR_DEBUG ( "Resetting PCI device %s" , virPCIDeviceGetName ( pci ) ) ; if ( virPCIDeviceReset ( pci , mgr -> activePCIHostdevs , mgr -> inactivePCIHostdevs ) < 0 ) { VIR_ERROR ( _ ( "Failed to reset PCI device: %s" ) , virGetLastErrorMessage ( ) ) ; ret = - 1 ; } } return ret ; } 