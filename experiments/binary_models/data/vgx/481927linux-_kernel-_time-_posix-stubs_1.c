static int do_clock_gettime ( clockid_t which_clock , struct timespec64 * tp ) { switch ( which_clock ) { case CLOCK_REALTIME : ktime_get_real_ts64 ( tp ) ; break ; case CLOCK_MONOTONIC : ktime_get_ts64 ( tp ) ; timens_add_monotonic ( tp ) ; break ; case CLOCK_BOOTTIME : ktime_get_boottime_ts64 ( tp ) ; timens_add_boottime ( tp , NULL ) ; break ; default : return - EINVAL ; } return 0 ; } 