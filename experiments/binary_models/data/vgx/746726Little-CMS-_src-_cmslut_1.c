cmsBool BlessLUT ( cmsPipeline * lut ) { if ( lut -> Elements != NULL ) { cmsStage * prev ; cmsStage * next ; cmsStage * First ; cmsStage * Last ; First = cmsPipelineGetPtrToFirstStage ( lut ) ; Last = cmsPipelineGetPtrToLastStage ( lut ) ; lut -> InputChannels = First -> InputChannels ; lut -> OutputChannels = Last -> OutputChannels ; prev = First ; next = prev -> Next ; while ( next != NULL ) { if ( next -> InputChannels != prev -> OutputChannels ) { return FALSE ; } next = next -> Next ; prev = prev -> Next ; } } } 