boolean_t hxge_m_getcapab ( void * arg , mac_capab_t cap , void * cap_data ) { p_hxge_t hxgep = arg ; switch ( cap ) { case MAC_CAPAB_HCKSUM : { uint32_t * txflags = cap_data ; * txflags = HCKSUM_INET_PARTIAL ; break ; } case MAC_CAPAB_RINGS : { mac_capab_rings_t * cap_rings = cap_data ; MUTEX_ENTER ( hxgep -> genlock ) ; if ( cap_rings -> mr_type == MAC_RING_TYPE_RX ) { cap_rings -> mr_group_type = MAC_GROUP_TYPE_STATIC ; cap_rings -> mr_rnum = HXGE_MAX_RDCS ; cap_rings -> mr_rget = hxge_fill_ring ; cap_rings -> mr_gnum = HXGE_MAX_RX_GROUPS ; cap_rings -> mr_gget = hxge_group_get ; cap_rings -> mr_gremring = NULL ; } else { cap_rings -> mr_group_type = MAC_GROUP_TYPE_STATIC ; cap_rings -> mr_rnum = HXGE_MAX_TDCS ; cap_rings -> mr_rget = hxge_fill_ring ; cap_rings -> mr_gnum = 0 ; cap_rings -> mr_gget = NULL ; cap_rings -> mr_gaddring = NULL ; cap_rings -> mr_gremring = NULL ; } MUTEX_EXIT ( hxgep -> genlock ) ; break ; } default : return ( B_FALSE ) ; } return ( B_TRUE ) ; } 