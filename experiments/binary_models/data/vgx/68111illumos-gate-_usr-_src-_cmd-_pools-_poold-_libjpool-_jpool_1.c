static int pool_property_walker ( pool_conf_t * conf , pool_elem_t * pe , const char * name , pool_value_t * pv , void * user ) { jclass clazz , vclazz ; jmethodID mgetwalk , mvcon ; struct pool_callback * pc = ( pool_callback * ) user ; jobject valueObj ; pool_value_t * pv_new ; uint64_t uval ; int64_t ival ; double dval ; uchar_t bval ; const char * sval ; if ( ( pv_new = pool_value_alloc ( ) ) == NULL ) { return ( PO_FAIL ) ; } switch ( pool_value_get_type ( pv ) ) { case POC_UINT : ( void ) pool_value_get_uint64 ( pv , & uval ) ; ( void ) pool_value_set_uint64 ( pv_new , uval ) ; break ; case POC_INT : ( void ) pool_value_get_int64 ( pv , & ival ) ; ( void ) pool_value_set_int64 ( pv_new , ival ) ; break ; case POC_DOUBLE : ( void ) pool_value_get_double ( pv , & dval ) ; ( void ) pool_value_set_double ( pv_new , dval ) ; break ; case POC_BOOL : ( void ) pool_value_get_bool ( pv , & bval ) ; ( void ) pool_value_set_bool ( pv_new , bval ) ; break ; case POC_STRING : ( void ) pool_value_get_string ( pv , & sval ) ; ( void ) pool_value_set_string ( pv_new , sval ) ; break ; default : return ( PO_FAIL ) ; } if ( pool_value_set_name ( pv_new , name ) != PO_SUCCESS || ( vclazz = ( * pc -> pc_env ) -> FindClass ( pc -> pc_env , "com/sun/solaris/service/pools/Value" ) ) == NULL || ( mvcon = ( * pc -> pc_env ) -> GetMethodID ( pc -> pc_env , vclazz , "<init>" , "(J)V" ) ) == NULL || ( valueObj = ( * pc -> pc_env ) -> NewObject ( pc -> pc_env , vclazz , mvcon , pv_new ) ) == NULL || ( clazz = ( * pc -> pc_env ) -> GetObjectClass ( pc -> pc_env , pc -> pc_handler ) ) == NULL || ( mgetwalk = ( * pc -> pc_env ) -> GetMethodID ( pc -> pc_env , clazz , "walk" , "(Lcom/sun/solaris/service/pools/Element;Lcom/sun/solaris/" "service/pools/Value;Ljava/lang/Object;)I" ) ) == NULL ) { return ( PO_FAIL ) ; } return ( ( * pc -> pc_env ) -> CallIntMethod ( pc -> pc_env , pc -> pc_handler , mgetwalk , pc -> pc_elem , valueObj , pc -> pc_user ) ) ; } 