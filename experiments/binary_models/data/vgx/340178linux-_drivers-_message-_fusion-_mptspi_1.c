static void mptspi_write_dt ( struct scsi_target * starget , int dt ) { struct _CONFIG_PAGE_SCSI_DEVICE_1 pg1 ; u32 nego ; if ( spi_period ( starget ) == - 1 ) { mptspi_read_parameters ( starget ) ; } if ( ! dt && spi_period ( starget ) < 10 ) { spi_period ( starget ) = 10 ; } spi_dt ( starget ) = dt ; nego = mptspi_getRP ( starget ) ; pg1 . RequestedParameters = cpu_to_le32 ( nego ) ; pg1 . Reserved = 0 ; mptspi_write_spi_device_pg1 ( starget , & pg1 ) ; } 