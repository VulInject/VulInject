static int mpc8_handle_chunk ( AVFormatContext * s , int tag , int64_t chunk_pos , int64_t size ) { AVIOContext * pb = s -> pb ; int64_t pos , off ; int ret ; switch ( tag ) { case TAG_SEEKTBLOFF : pos = avio_tell ( pb ) ; off = ffio_read_varlen ( pb ) ; pos += size ; ret = mpc8_parse_seektable ( s , chunk_pos + off ) ; if ( ret < 0 ) { return AVERROR_INVALIDDATA ; } avio_seek ( pb , pos , SEEK_SET ) ; break ; default : avio_skip ( pb , size ) ; } return 0 ; } 