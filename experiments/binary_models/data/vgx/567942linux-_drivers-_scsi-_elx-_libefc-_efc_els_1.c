int efc_send_plogi ( struct efc_node * node ) { struct efc_els_io_req * els ; struct efc * efc = node -> efc ; struct fc_els_flogi * plogi ; node_els_trace ( ) ; els = efc_els_io_alloc ( node , sizeof ( * plogi ) ) ; if ( ! els ) { efc_log_err ( efc , "IO alloc failed\n" ) ; return - EIO ; } els -> display_name = "plogi" ; plogi = els -> io . req . virt ; memcpy ( plogi , node -> nport -> service_params , sizeof ( * plogi ) ) ; plogi -> fl_cmd = ELS_PLOGI ; return efc_els_send_req ( node , els , EFC_DISC_IO_ELS_REQ ) ; } 