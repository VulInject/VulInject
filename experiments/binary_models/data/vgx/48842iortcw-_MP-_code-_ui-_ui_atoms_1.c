void UI_ClearScores ( void ) { char gameList [ 4096 ] ; char * gameFile ; int i , len , count , size ; fileHandle_t f ; postGameInfo_t newInfo ; count = trap_FS_GetFileList ( "games" , "game" , gameList , sizeof ( gameList ) ) ; size = sizeof ( postGameInfo_t ) ; if ( count > 0 ) { gameFile = gameList ; for ( i = 0 ; i < count ; i ++ ) { len = strlen ( gameFile ) ; if ( trap_FS_FOpenFile ( va ( "games/%s" , gameFile ) , & f , FS_WRITE ) >= 0 ) { trap_FS_Write ( & size , sizeof ( int ) , f ) ; trap_FS_Write ( & newInfo , size , f ) ; trap_FS_FCloseFile ( f ) ; } gameFile += len + 1 ; } } UI_SetBestScores ( & newInfo , qfalse ) ; } 