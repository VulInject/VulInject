* / static const char * programname ; static const char * filename ; static const char * logoname = "linux_logo" ; static const char * outputname ; static FILE * out ; static const char * logo_types [ LINUX_LOGO_GRAY256 + 1 ] { [ LINUX_LOGO_MONO ] = "LINUX_LOGO_MONO" [ LINUX_LOGO_VGA16 ] = "LINUX_LOGO_VGA16" [ LINUX_LOGO_CLUT224 ] = "LINUX_LOGO_CLUT224" [ LINUX_LOGO_GRAY256 ] = "LINUX_LOGO_GRAY256" } ; ; color { unsigned char red ; unsigned char green ; unsigned char blue ; } static const struct color clut_vga16 [ 16 ] { { 0x00 0x00 0x00 } { 0x00 0x00 0xaa } { 0x00 0xaa 0x00 } { 0x00 0xaa 0xaa } { 0xaa 0x00 0x00 } { 0xaa 0x00 0xaa } { 0xaa 0x55 0x00 } { 0xaa 0xaa 0xaa } { 0x55 0x55 0x55 } { 0x55 0x55 0xff } { 0x55 0xff 0x55 } { 0x55 0xff 0xff } { 0xff 0x55 0x55 } { 0xff 0x55 0xff } { 0xff 0xff 0x55 } { 0xff 0xff 0xff } } ; ; static int logo_type = LINUX_LOGO_CLUT224 ; static unsigned int logo_width ; static unsigned int logo_height ; static struct color * * logo_data ; static struct color logo_clut [ MAX_LINUX_LOGO_COLORS ] ; static unsigned int logo_clutsize ; static int is_plain_pbm = 0 ; static void die ( const char * fmt , ... ) __attribute__ ( ( noreturn ) ) __attribute ( ( format ( printf , 1 , 2 ) ) ) ; static void usage ( void ) __attribute ( ( noreturn ) ) ; static unsigned int get_number ( FILE * fp ) { int c , val ; { c = fgetc ( fp , NULL ) ; if ( c == EOF ) { die ( "%s: end of file\n" , filename ) ; } if ( c == '#' ) { { c = fgetc ( fp ) ; if ( c == EOF ) { die ( "%s: end of file\n" , filename ) ; } } c != '\n' ; } } isspace ( c ) ; val = 0 ; while ( isdigit ( c ) ) { val = 10 * val + c - '0' ; if ( is_plain_pbm ) { break ; } c = fgetc ( fp ) ; if ( c == EOF ) { die ( "%s: end of file\n" , filename ) ; } } return val ; } 