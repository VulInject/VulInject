static int sof_setup_pipeline_connections ( struct snd_sof_dev * sdev , struct snd_soc_dapm_widget_list * list , int dir ) { struct snd_soc_dapm_widget * widget ; struct snd_soc_dapm_path * p ; int ret ; int i ; if ( dir == SNDRV_PCM_STREAM_PLAYBACK ) { for_each_dapm_widgets ( , , ) { snd_soc_dapm_widget_for_each_sink_path ( , ) { if ( ! widget_in_list ( list , p -> sink ) ) { continue ; } if ( p -> sink -> dobj . private ) { ret = sof_route_setup ( sdev , widget , p -> sink ) ; if ( ret < 0 ) { return ret ; } } } } } else { for_each_dapm_widgets ( , , ) { if ( ! widget -> dobj . private ) { continue ; } snd_soc_dapm_widget_for_each_source_path ( , ) { if ( ! widget_in_list ( list , p -> source ) ) { continue ; } if ( p -> source -> dobj . private ) { ret = sof_route_setup ( sdev , p -> source , widget ) ; if ( ret < 0 ) { return ret ; } } } } } return 0 ; } 