void postjob ( pid , fg ) pid_t pid ; int fg ; { int propts ; thisjob -> j_nxtp = * nextjob ; * nextjob = thisjob ; thisjob -> j_curp = jobcur ; jobcur = thisjob ; if ( thisjob -> j_jid ) { thisjob -> j_pgid = pid ; propts = PR_JID | PR_PGID ; } else { thisjob -> j_pgid = mypgid ; propts = PR_PGID ; } thisjob -> j_flag = J_RUNNING ; thisjob -> j_tgid = thisjob -> j_pgid ; thisjob -> j_pid = pid ; eofflg = 0 ; if ( fg ) { thisjob -> j_flag |= J_FOREGND ; waitjob ( thisjob , NULL ) ; } else { if ( flags & ttyflg ) { printjob ( thisjob , propts ) ; } assnum ( & pcsadr , ( long ) pid ) ; } } 