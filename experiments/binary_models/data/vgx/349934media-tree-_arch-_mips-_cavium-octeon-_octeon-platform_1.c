static void __init octeon_fdt_pip_port ( int iface , int i , int p , int max ) { char name_buffer [ 20 ] ; int eth ; int phy_addr ; int ipd_port ; sprintf ( name_buffer , "ethernet@%x" , p ) ; eth = fdt_subnode_offset ( initial_boot_params , iface , name_buffer ) ; if ( eth < 0 ) { return ; } if ( p > max ) { pr_debug ( "Deleting port %x:%x\n" , i , p ) ; octeon_fdt_rm_ethernet ( eth ) ; return ; } if ( OCTEON_IS_MODEL ( OCTEON_CN68XX ) ) { ipd_port = ( 0x100 * i ) + ( 0x10 * p ) + 0x800 ; } else { ipd_port = 16 * i + p ; } phy_addr = cvmx_helper_board_get_mii_address ( ipd_port ) ; octeon_fdt_set_phy ( eth , phy_addr ) ; } 