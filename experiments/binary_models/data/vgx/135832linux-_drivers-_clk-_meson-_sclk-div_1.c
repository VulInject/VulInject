static int sclk_div_get_duty_cycle ( struct clk_hw * hw , struct clk_duty * duty ) { struct clk_regmap * clk = to_clk_regmap ( hw ) ; struct meson_sclk_div_data * sclk = meson_sclk_div_data ( clk ) ; int hi ; if ( ! MESON_PARM_APPLICABLE ( & sclk -> hi ) ) { duty -> den = 2 ; return 0 ; } hi = meson_parm_read ( clk -> map , & sclk -> hi ) ; duty -> num = hi + 1 ; duty -> den = sclk -> cached_div ; return 0 ; } 