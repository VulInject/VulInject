static void exit_net_drop_monitor ( void ) { struct per_cpu_dm_data * data ; int cpu ; BUG_ON ( unregister_netdevice_notifier ( & dropmon_net_notifier ) ) ; for_each_possible_cpu ( ) { data = & per_cpu ( dm_cpu_data , cpu ) ; del_timer_sync ( & data -> send_timer ) ; cancel_work_sync ( & data -> dm_alert_work ) ; } BUG_ON ( genl_unregister_family ( & net_drop_monitor_family ) ) ; } 