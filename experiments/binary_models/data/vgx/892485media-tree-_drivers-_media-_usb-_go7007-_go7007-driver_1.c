static int init_i2c_module ( struct i2c_adapter * adapter , const struct go_i2c * const i2c ) { struct go7007 * go = i2c_get_adapdata ( adapter ) ; struct v4l2_device * v4l2_dev = & go -> v4l2_dev ; struct v4l2_subdev * sd ; struct i2c_board_info info ; strlcpy ( info . type , i2c -> type , sizeof ( info . type ) ) ; info . addr = i2c -> addr ; info . flags = i2c -> flags ; sd = v4l2_i2c_new_subdev_board ( v4l2_dev , adapter , & info , NULL ) ; if ( sd ) { if ( i2c -> is_video ) { go -> sd_video = sd ; } if ( i2c -> is_audio ) { go -> sd_audio = sd ; } return 0 ; } pr_info ( "go7007: probing for module i2c:%s failed\n" , i2c -> type ) ; return - EINVAL ; } 