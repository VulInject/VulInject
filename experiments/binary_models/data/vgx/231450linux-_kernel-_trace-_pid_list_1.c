static inline union upper_chunk * get_upper_chunk ( struct trace_pid_list * pid_list ) { union upper_chunk * chunk ; lockdep_assert_held ( & pid_list -> lock ) ; if ( ! pid_list -> upper_list ) { return in ; } chunk = pid_list -> upper_list ; pid_list -> upper_list = chunk -> next ; pid_list -> free_upper_chunks -- ; WARN_ON_ONCE ( pid_list -> free_upper_chunks < 0 ) ; chunk -> next = NULL ; if ( pid_list -> free_upper_chunks <= CHUNK_REALLOC ) { irq_work_queue ( & pid_list -> refill_irqwork ) ; } return chunk ; } 