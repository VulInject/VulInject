void radeon_router_select_cd_port ( struct radeon_connector * radeon_connector ) { u8 val ; if ( ! radeon_connector -> router . cd_valid ) { return ; } radeon_i2c_get_byte ( radeon_connector -> router_bus , radeon_connector -> router . i2c_addr , 0x3 , & val ) ; val &= ~ radeon_connector -> router . cd_mux_control_pin ; radeon_i2c_put_byte ( radeon_connector -> router_bus , radeon_connector -> router . i2c_addr , 0x3 , val ) ; radeon_i2c_get_byte ( radeon_connector -> router_bus , radeon_connector -> router . i2c_addr , 0x1 , & val ) ; val &= ~ radeon_connector -> router . cd_mux_control_pin ; val |= radeon_connector -> router . cd_mux_state ; radeon_i2c_put_byte ( radeon_connector -> router_bus , radeon_connector -> router . i2c_addr , 0x1 , val ) ; } 