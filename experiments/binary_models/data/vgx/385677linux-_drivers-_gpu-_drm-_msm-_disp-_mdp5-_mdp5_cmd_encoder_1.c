void mdp5_cmd_encoder_disable ( struct drm_encoder * encoder ) { struct mdp5_encoder * mdp5_cmd_enc = to_mdp5_encoder ( encoder ) ; struct mdp5_ctl * ctl = mdp5_cmd_enc -> ctl ; struct mdp5_interface * intf = mdp5_cmd_enc -> intf ; struct mdp5_pipeline * pipeline = mdp5_crtc_get_pipeline ( encoder -> crtc ) ; pingpong_tearcheck_disable ( encoder ) ; mdp5_ctl_set_encoder_state ( ctl , pipeline , false ) ; mdp5_ctl_commit ( ctl , pipeline , mdp_ctl_flush_mask_encoder ( intf ) , true ) ; mdp5_cmd_enc -> enabled = false ; } 