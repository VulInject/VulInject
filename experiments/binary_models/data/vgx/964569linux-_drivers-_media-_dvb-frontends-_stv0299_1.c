static int stv0299_set_tone ( struct dvb_frontend * fe , enum fe_sec_tone_mode tone ) { struct stv0299_state * state = fe -> demodulator_priv ; int val ; if ( stv0299_wait_diseqc_idle ( state , 100 ) < 0 ) { return - ETIMEDOUT ; } val = stv0299_readreg ( state , 0x08 ) ; switch ( tone ) { case SEC_TONE_ON : return stv0299_writeregI ( state , 0x08 , val | 0x3 ) ; case SEC_TONE_OFF : return stv0299_writeregI ( state , 0x08 , ( val & ~ 0x3 ) | 0x02 ) ; default : return - EINVAL ; } } 