char * plugins_pre_chat_message_display ( const char * const barejid , const char * const resource , const char * message ) { char * new_message = NULL ; char * curr_message = strdup ( message ) ; GList * values = g_hash_table_get_values ( plugins ) ; GList * curr = values ; while ( curr ) { ProfPlugin * plugin = curr -> data ; new_message = plugin -> pre_chat_message_display ( plugin , barejid , resource , curr_message ) ; if ( new_message ) { curr_message = strdup ( new_message ) ; free ( new_message ) ; } curr = g_list_next ( curr ) ; } g_list_free ( values ) ; return curr_message ; } 