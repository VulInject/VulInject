ecma_builtin_typedarray_prototype_join ( , ) { uint32_t length = ecma_typedarray_get_length ( obj_p ) ; ecma_string_t * separator_string_p = ecma_op_typedarray_get_separator_string ( separator_arg ) ; ecma_value_t ret_value = ECMA_VALUE_ERROR ; if ( JERRY_UNLIKELY ( separator_string_p == NULL ) ) { return ret_value ; } ecma_string_t * first_string_p = ecma_op_typedarray_get_to_string_at_index ( obj_p , 0 ) ; if ( JERRY_UNLIKELY ( first_string_p == NULL ) ) { ecma_deref_ecma_string ( separator_string_p , NULL ) ; return ret_value ; } ecma_stringbuilder_t builder = ecma_stringbuilder_create_from ( first_string_p ) ; ecma_deref_ecma_string ( first_string_p ) ; for ( uint32_t k = 1 ; k < length ; k ++ ) { ecma_stringbuilder_append ( & builder , separator_string_p ) ; ecma_string_t * next_string_p = ecma_op_typedarray_get_to_string_at_index ( obj_p , k ) ; if ( JERRY_UNLIKELY ( next_string_p == NULL ) ) { ecma_stringbuilder_destroy ( & builder ) ; ecma_deref_ecma_string ( separator_string_p ) ; return ret_value ; } ecma_stringbuilder_append ( & builder , next_string_p ) ; ecma_deref_ecma_string ( next_string_p ) ; } ecma_deref_ecma_string ( separator_string_p ) ; ret_value = ecma_make_string_value ( ecma_stringbuilder_finalize ( & builder ) ) ; return ret_value ; } 