int main ( int argc , char * * argv ) { blkid_cache cache = NULL ; int ret ; blkid_init_debug ( BLKID_DEBUG_ALL ) ; if ( ( argc > 2 ) ) { fprintf ( stderr , "Usage: %s [filename] \n" , argv [ 0 ] ) ; exit ( 1 ) ; } if ( ( ret = blkid_get_cache ( & cache , argv [ 1 ] ) ) < 0 ) { fprintf ( stderr , "error %d parsing cache file %s\n" , ret , argv [ 1 ] ?argv [ 1 ] : blkid_get_cache_filename ( NULL ) ) ; exit ( 1 ) ; } if ( ( ret = blkid_get_cache ( & cache , "/dev/null" ) ) != 0 ) { fprintf ( stderr , "%s: error creating cache (%d)\n" , argv [ 0 ] , ret ) ; exit ( 1 ) ; } if ( ( ret = blkid_probe_all ( cache ) ) < 0 ) { fprintf ( stderr , "error probing devices\n" ) ; } blkid_put_cache ( cache , NULL ) ; return ret ; } 