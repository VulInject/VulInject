void expando_destroy ( const char * key , EXPANDO_FUNC func ) { gpointer origkey , value ; EXPANDO_REC * rec ; g_return_if_fail ( key != NULL && * key != '\0' ) ; g_return_if_fail ( func != NULL ) ; if ( key [ 1 ] == '\0' ) { rec = CHAR_EXPANDO ( * key ) ; if ( rec != NULL && rec -> func == func ) { char_expandos [ ( int ) ( unsigned char ) * key ] = NULL ; g_free ( rec ) ; } } if ( g_hash_table_lookup_extended ( expandos , key , & origkey , & value ) ) { rec = value ; if ( rec -> func == func ) { g_hash_table_remove ( expandos , key ) ; g_free ( rec ) ; } } } 