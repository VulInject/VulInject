static void _dump_nodes_res ( data_t * dnodes , job_resources_t * j ) { hostlist_t hl = NULL ; size_t bit_inx = 0 ; size_t array_size ; size_t sock_inx = 0 , sock_reps = 0 ; hl = hostlist_create ( j -> nodes ) ; array_size = bit_size ( j -> core_bitmap ) ; for ( size_t node_inx = 0 ; node_inx < j -> nhosts ; node_inx ++ ) { char * nodename = hostlist_nth ( hl , node_inx ) ; if ( sock_reps >= j -> sock_core_rep_count [ sock_inx ] ) { sock_inx ++ ; sock_reps = 0 ; } sock_reps ++ ; _dump_node_res ( dnodes , j , node_inx , nodename , sock_inx , & bit_inx , array_size ) ; free ( nodename ) ; } FREE_NULL_HOSTLIST ( hl ) ; } 