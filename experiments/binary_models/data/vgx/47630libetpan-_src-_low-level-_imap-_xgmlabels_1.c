static int fetch_data_xgmlabels_parse ( mailstream * fd , MMAPString * buffer , struct mailimap_parser_context * parser_ctx , size_t * indx , struct mailimap_msg_att_xgmlabels * * result ) { size_t cur_token ; struct mailimap_msg_att_xgmlabels * att ; clist * label_list ; int r ; cur_token = * indx ; r = mailimap_token_case_insensitive_parse ( fd , buffer , & cur_token , "X-GM-LABELS" ) ; if ( r != MAILIMAP_NO_ERROR ) { return r ; } r = mailimap_space_parse ( fd , buffer , & cur_token ) ; if ( r != MAILIMAP_NO_ERROR ) { return r ; } r = mailimap_xgmlabels_parse ( fd , buffer , parser_ctx , & cur_token , & label_list ) ; if ( r != MAILIMAP_NO_ERROR ) { return r ; } att = mailimap_msg_att_xgmlabels_new ( label_list ) ; if ( att == NULL ) { clist_foreach ( label_list , ( clist_func ) mailimap_astring_free , NULL ) ; return MAILIMAP_ERROR_MEMORY ; } * indx = cur_token ; * result = att ; return MAILIMAP_NO_ERROR ; } 