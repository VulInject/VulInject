static int spinand_check_ecc_status ( struct spinand_device * spinand , u8 status ) { struct nand_device * nand = spinand_to_nand ( spinand ) ; switch ( status & STATUS_ECC_MASK ) { case STATUS_ECC_NO_BITFLIPS : return 0 ; case STATUS_ECC_HAS_BITFLIPS : return nanddev_get_ecc_conf ( nand ) -> strength ; case STATUS_ECC_UNCOR_ERROR : return - EBADMSG ; default : break ; } return - EINVAL ; } 