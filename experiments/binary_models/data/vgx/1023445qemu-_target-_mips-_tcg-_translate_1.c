static void gen_cp1 ( DisasContext * ctx , uint32_t opc , int rt , int fs ) { TCGv t0 = tcg_temp_new ( ) ; switch ( opc ) { case OPC_MFC1 : { TCGv_i32 fp0 = tcg_temp_new_i32 ( ) ; gen_load_fpr32 ( ctx , fp0 , fs ) ; tcg_gen_ext_i32_tl ( t0 , fp0 ) ; tcg_temp_free_i32 ( fp0 ) ; } gen_store_gpr ( t0 , rt ) ; break ; case OPC_MTC1 : gen_load_gpr ( t0 , rt ) ; { TCGv_i32 fp0 = tcg_temp_new_i32 ( ) ; tcg_gen_trunc_tl_i32 ( fp0 , t0 ) ; gen_store_fpr32 ( ctx , fp0 , fs ) ; tcg_temp_free_i32 ( fp0 ) ; } break ; case OPC_CFC1 : gen_helper_1e0i ( cfc1 , t0 , fs ) ; gen_store_gpr ( t0 , rt ) ; break ; case OPC_CTC1 : gen_load_gpr ( t0 , rt ) ; save_cpu_state ( ctx , 0 ) ; gen_helper_0e2i ( ctc1 , t0 , tcg_constant_i32 ( fs ) , rt ) ; ctx -> base . is_jmp = DISAS_STOP ; break ; case OPC_DMFC1 : gen_load_fpr64 ( ctx , t0 , fs ) ; gen_store_gpr ( t0 , rt ) ; break ; case OPC_DMTC1 : gen_load_gpr ( t0 , rt ) ; gen_store_fpr64 ( ctx , t0 , fs ) ; break ; case OPC_MFHC1 : { TCGv_i32 fp0 = tcg_temp_new_i32 ( ) ; gen_load_fpr32h ( ctx , fp0 , fs ) ; tcg_gen_ext_i32_tl ( t0 , fp0 ) ; tcg_temp_free_i32 ( fp0 ) ; } gen_store_gpr ( t0 , rt ) ; break ; case OPC_MTHC1 : gen_load_gpr ( t0 , rt ) ; { TCGv_i32 fp0 = tcg_temp_new_i32 ( ) ; tcg_gen_trunc_tl_i32 ( fp0 , t0 ) ; gen_store_fpr32h ( ctx , fp0 , fs ) ; tcg_temp_free_i32 ( fp0 ) ; } break ; default : MIPS_INVAL ( "cp1 move" ) ; gen_reserved_instruction ( ctx ) ; out } out } 