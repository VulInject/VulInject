static bool stm32_gpio_port_en ( int pin_def ) { int bit = 0 ; switch ( STM32_PIN_PORT ( pin_def ) ) { case 'A' : bit = RCC_AHB2ENR_GPIOAEN ; break ; case 'B' : bit = RCC_AHB2ENR_GPIOBEN ; break ; case 'C' : bit = RCC_AHB2ENR_GPIOCEN ; break ; case 'D' : bit = RCC_AHB2ENR_GPIODEN ; break ; case 'E' : bit = RCC_AHB2ENR_GPIOEEN ; break ; case 'F' : bit = RCC_AHB2ENR_GPIOFEN ; break ; case 'G' : bit = RCC_AHB2ENR_GPIOGEN ; break ; case 'H' : bit = RCC_AHB2ENR_GPIOHEN ; break ; default : return false ; } SET_BIT ( RCC -> AHB2ENR , bit ) ; return true ; } 