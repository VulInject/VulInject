kpathsea_finish ( ) { int i ; kpse_format_info_type f ; if ( kpse == NULL ) { return ; } hash_free ( kpse -> cnf_hash ) ; hash_free ( kpse -> db ) ; hash_free ( kpse -> alias_db ) ; str_list_free ( & kpse -> db_dir_list ) ; hash_free ( kpse -> link_table ) ; cache_free ( kpse -> the_cache , kpse -> cache_length ) ; hash_free ( kpse -> map ) ; string_free ( kpse -> map_path ) ; string_free ( kpse -> elt ) ; if ( kpse -> log_file != ( FILE * ) NULL ) { fclose ( kpse -> log_file ) ; } string_free ( kpse -> invocation_name ) ; string_free ( kpse -> invocation_short_name ) ; string_free ( kpse -> program_name ) ; string_free ( kpse -> fallback_font ) ; if ( kpse -> fallback_resolutions != NULL ) { free ( kpse -> fallback_resolutions ) ; } for ( i = 0 ; i != kpse_last_format ; ++ i ) { f = kpse -> format_info [ i ] ; string_free ( f . path ) ; string_free ( f . override_path ) ; string_free ( f . client_path ) ; } if ( kpse -> missfont != ( FILE * ) NULL ) { fclose ( kpse -> missfont ) ; } for ( i = 0 ; i < ( int ) kpse -> expansion_len ; i ++ ) { string_free ( kpse -> expansions [ i ] . var ) ; } free ( kpse -> expansions ) ; if ( kpse -> saved_env != NULL ) { for ( i = 0 ; i != kpse -> saved_count ; ++ i ) { string_free ( kpse -> saved_env [ i ] ) ; } free ( kpse -> saved_env ) ; } if ( kpse -> suffixlist != NULL ) { char * * p ; for ( p = kpse -> suffixlist ; * p ; p ++ ) { free ( * p ) ; } free ( kpse -> suffixlist ) ; kpse -> suffixlist = NULL ; } if ( kpse == kpse_def ) { return ; } free ( kpse ) ; } 