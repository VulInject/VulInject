static int monitor_init ( void ) { INotifyFd = inotify_init1 ( IN_NONBLOCK | IN_CLOEXEC ) ; if ( INotifyFd == - 1 ) { mutt_debug ( LL_DEBUG2 , "inotify_init1 failed, errno=%d %s\n" , errno , strerror ( errno ) ) ; return - 1 ; } INotifyFd = inotify_init ( ) ; if ( INotifyFd == - 1 ) { mutt_debug ( LL_DEBUG2 , "monitor: inotify_init failed, errno=%d %s\n" , errno , strerror ( errno ) ) ; return - 1 ; } fcntl ( INotifyFd , F_SETFL , O_NONBLOCK ) ; fcntl ( INotifyFd , F_SETFD , FD_CLOEXEC ) ; mutt_poll_fd_add ( 0 , POLLIN ) ; mutt_poll_fd_add ( INotifyFd , POLLIN ) ; return 0 ; } 