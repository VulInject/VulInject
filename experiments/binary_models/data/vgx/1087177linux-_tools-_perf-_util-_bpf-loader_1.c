static int bpf_loader_strerror ( int err , char * buf , size_t size ) { char sbuf [ STRERR_BUFSIZE ] ; const char * msg ; err = err > 0 ?err : - err ; if ( err >= __LIBBPF_ERRNO__START ) { return libbpf_strerror ( err , buf , size ) ; } if ( err >= __BPF_LOADER_ERRNO__START && err < __BPF_LOADER_ERRNO__END ) { msg = bpf_loader_strerror_table [ ERRNO_OFFSET ( err ) ] ; snprintf ( buf , size , "%s" , msg ) ; buf [ size - 1 ] = '\0' ; return 0 ; } if ( err >= __BPF_LOADER_ERRNO__END ) { snprintf ( buf , size , "Unknown bpf loader error %d" , err ) ; } else { snprintf ( buf , size , "%s" , str_error_r ( err , sbuf , sizeof ( sbuf ) ) ) ; } buf [ size - 1 ] = '\0' ; return - 1 ; } 