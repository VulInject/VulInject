static int sched_rt_runtime_exceeded ( struct rt_rq * rt_rq ) { u64 runtime = sched_rt_runtime ( rt_rq ) ; if ( rt_rq -> rt_throttled ) { return rt_rq_throttled ( rt_rq ) ; } if ( runtime >= sched_rt_period ( rt_rq ) ) { return 0 ; } balance_runtime ( rt_rq ) ; runtime = sched_rt_runtime ( rt_rq ) ; if ( runtime == RUNTIME_INF ) { return 0 ; } if ( rt_rq -> rt_time > runtime ) { struct rt_bandwidth * rt_b = sched_rt_bandwidth ( rt_rq ) ; if ( likely ( rt_b -> rt_runtime ) ) { rt_rq -> rt_throttled = 1 ; printk_deferred_once ( "sched: RT throttling activated\n" ) ; } else { rt_rq -> rt_time = 0 ; } if ( rt_rq_throttled ( rt_rq ) ) { sched_rt_rq_dequeue ( rt_rq , NULL ) ; return 1 ; } } return 0 ; } 