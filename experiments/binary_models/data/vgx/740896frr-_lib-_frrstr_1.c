void frrstr_split ( const char * string , const char * delimiter , char * * * result , int * argc ) { unsigned int sz = 4 , idx = 0 ; char * copy , * copystart ; * result = XCALLOC ( MTYPE_TMP , sizeof ( char * ) * sz ) ; copystart = copy = XSTRDUP ( MTYPE_TMP , string ) ; * argc = 0 ; const char * tok = NULL ; while ( copy ) { tok = strsep ( & copy , delimiter ) ; ( * result ) [ idx ] = XSTRDUP ( MTYPE_TMP , tok ) ; if ( ++ idx == sz ) { * result = XREALLOC ( MTYPE_TMP , * result , ( sz *= 2 ) * sizeof ( char * ) ) ; } ( * argc ) ++ ; } XFREE ( MTYPE_TMP , copystart ) ; } 