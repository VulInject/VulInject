static void free_buffer ( uint64_t seqnum ) { i_buffer_t * node , * prev ; ( void ) pthread_mutex_lock ( & buffer_lock ) ; prev = NULL ; node = buffer_list ; while ( node ) { if ( node -> seqnum == seqnum ) { dprintf ( "Free buffer %lld\n" , seqnum ) ; if ( prev ) { prev -> next = node -> next ; } else { buffer_list = node -> next ; } free ( node ) ; break ; } prev = node ; node = node -> next ; } ( void ) pthread_mutex_unlock ( & buffer_lock ) ; } 