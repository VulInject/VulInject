Efunction * EfunctionDel ( Efunction * cb ) { Efunction * p , * q ; for ( p = Efunctions [ cb -> type ] ; p ; p = p -> next ) { if ( p == cb ) { q = p -> next ; DelListItem ( p , Efunctions [ cb -> type ] ) ; if ( * efunction_table [ cb -> type ] . funcptr == p ) { * efunction_table [ cb -> type ] . funcptr = NULL ; } if ( p -> owner ) { ModuleObject * cbobj ; for ( cbobj = p -> owner -> objects ; cbobj ; cbobj = cbobj -> next ) { if ( ( cbobj -> type == MOBJ_EFUNCTION ) && ( cbobj -> object . efunction == p ) ) { DelListItem ( cbobj , cb -> owner -> objects ) ; safe_free ( cbobj ) ; break ; } } } return q ; } } return NULL ; } 