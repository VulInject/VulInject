static void event_userhost ( SERVER_REC * server , const char * data ) { char * params , * hosts , * * phosts , * * pos , * ptr ; int oper ; g_return_if_fail ( data != NULL ) ; params = event_get_params ( data , 2 , NULL , & hosts ) ; phosts = g_strsplit ( hosts , " " , - 1 ) ; for ( pos = phosts ; * pos != NULL ; pos ++ ) { ptr = strchr ( * pos , '=' ) ; if ( ptr == NULL || ptr == * pos ) { continue ; } if ( ptr [ - 1 ] == '*' ) { ptr [ - 1 ] = '\0' ; oper = 1 ; } else { oper = 0 ; } * ptr ++ = '\0' ; nicklist_update_flags ( server , * pos , * ptr == '-' , oper ) ; } g_strfreev ( phosts ) ; } 