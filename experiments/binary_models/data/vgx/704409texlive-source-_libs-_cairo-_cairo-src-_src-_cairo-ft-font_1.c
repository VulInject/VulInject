_cairo_ft_unscaled_font_create_for_pattern ( , ) { FT_Face font_face = NULL ; char * filename = NULL ; int id ; FcResult ret ; ret = FcPatternGetFTFace ( pattern , FC_FT_FACE , 0 , & font_face ) ; if ( ret == FcResultMatch ) { DONE } if ( ret == FcResultOutOfMemory ) { return _cairo_error ( CAIRO_STATUS_NO_MEMORY ) ; } ret = FcPatternGetString ( pattern , FC_FILE , 0 , ( FcChar8 * * ) & filename ) ; if ( ret == FcResultOutOfMemory ) { return _cairo_error ( CAIRO_STATUS_NO_MEMORY ) ; } if ( ret == FcResultMatch ) { if ( access ( filename , R_OK ) == 0 ) { ret = FcPatternGetInteger ( pattern , FC_INDEX , 0 , & id ) ; if ( ret == FcResultOutOfMemory ) { return _cairo_error ( CAIRO_STATUS_NO_MEMORY ) ; } DONE } else { return _cairo_error ( CAIRO_STATUS_FILE_NOT_FOUND ) ; } } * out = NULL ; return CAIRO_STATUS_SUCCESS ; DONE return _cairo_ft_unscaled_font_create_internal ( font_face != NULL , filename , id , font_face , out ) ; } 