static int jz4740_musb_role_switch_set ( struct usb_role_switch * sw , enum usb_role role ) { struct jz4740_glue * glue = usb_role_switch_get_drvdata ( sw ) ; struct usb_phy * phy = glue -> musb -> xceiv ; switch ( role ) { case USB_ROLE_NONE : atomic_notifier_call_chain ( & phy -> notifier , USB_EVENT_NONE , phy ) ; break ; case USB_ROLE_DEVICE : atomic_notifier_call_chain ( & phy -> notifier , USB_EVENT_VBUS , phy ) ; break ; case USB_ROLE_HOST : atomic_notifier_call_chain ( & phy -> notifier , USB_EVENT_ID , phy ) ; break ; } return 0 ; } 