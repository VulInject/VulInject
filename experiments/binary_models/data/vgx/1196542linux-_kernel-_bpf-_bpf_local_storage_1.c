struct bpf_local_storage_elem * bpf_selem_alloc ( struct bpf_local_storage_map * smap , void * owner , void * value , bool charge_mem , gfp_t gfp_flags ) { struct bpf_local_storage_elem * selem ; if ( charge_mem && mem_charge ( smap , owner , smap -> elem_size ) ) { return in ; } selem = bpf_map_kzalloc ( & smap -> map , smap -> elem_size , gfp_flags | __GFP_NOWARN ) ; if ( selem ) { if ( value ) { copy_map_value ( & smap -> map , SDATA ( selem ) -> data , value ) ; } return selem ; } if ( charge_mem ) { mem_uncharge ( smap , owner , smap -> elem_size ) ; } return NULL ; } 