static int dsa_slave_prechangeupper ( struct net_device * dev , struct netdev_notifier_changeupper_info * info ) { struct dsa_port * dp = dsa_slave_to_port ( dev ) ; if ( netif_is_bridge_master ( info -> upper_dev ) && ! info -> linking ) { dsa_port_pre_bridge_leave ( dp , info -> upper_dev ) ; } if ( netif_is_lag_master ( info -> upper_dev ) && ! info -> linking ) { dsa_port_pre_lag_leave ( dp , info -> upper_dev ) ; } return NOTIFY_DONE ; } 