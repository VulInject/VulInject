static int parse_proc_net_line ( char * line , int * ipAddress , int * rx_queue ) { int i ; int ipOctetExtractionMask = 0xFF ; char * currColonLocation ; char * nextNonNumericalChar ; char * currentLocationInLine = line ; int parsedInteger [ 4 ] ; for ( i = 0 ; i < 4 ; i ++ ) { currColonLocation = strchr ( currentLocationInLine , ':' ) ; parsedInteger [ i ] = ( int ) strtol ( ++ currColonLocation , & nextNonNumericalChar , 16 ) ; if ( nextNonNumericalChar == currColonLocation ) { return 0 ; } currentLocationInLine = nextNonNumericalChar ; } for ( i = 0 ; i < NUM_IP_OCTETS ; i ++ ) { ipAddress [ i ] = parsedInteger [ 0 ] & ( ipOctetExtractionMask << i * 8 ) ; ipAddress [ i ] >>= i * 8 ; } ipAddress [ NUM_IP_OCTETS ] = parsedInteger [ 1 ] ; * rx_queue = parsedInteger [ 3 ] ; return 1 ; } 