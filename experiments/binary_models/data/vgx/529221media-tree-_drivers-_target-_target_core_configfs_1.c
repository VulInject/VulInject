static ssize_t target_wwn_vpd_protocol_identifier_show ( struct config_item * item , char * page ) { struct t10_wwn * t10_wwn = to_t10_wwn ( item ) ; struct t10_vpd * vpd ; unsigned char buf [ VPD_TMP_BUF_SIZE ] ; ssize_t len = 0 ; spin_lock ( & t10_wwn -> t10_vpd_lock ) ; list_for_each_entry ( , , ) { if ( ! vpd -> protocol_identifier_set ) { continue ; } transport_dump_vpd_proto_id ( vpd , buf , VPD_TMP_BUF_SIZE ) ; if ( len + strlen ( buf ) >= PAGE_SIZE ) { break ; } len += sprintf ( page + len , "%s" , buf ) ; } spin_unlock ( & t10_wwn -> t10_vpd_lock ) ; return len ; } 