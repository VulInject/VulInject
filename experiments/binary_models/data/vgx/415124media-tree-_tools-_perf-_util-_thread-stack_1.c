static int __thread_stack__flush ( struct thread * thread , struct thread_stack * ts ) { struct call_return_processor * crp = ts -> crp ; int err ; if ( ! crp ) { return 0 ; } while ( ts -> cnt ) { err = thread_stack__call_return ( thread , ts , -- ts -> cnt , ts -> last_time , 0 , true ) ; if ( err ) { pr_err ( "Error flushing thread stack!\n" ) ; ts -> cnt = 0 ; return err ; } } return 0 ; } 