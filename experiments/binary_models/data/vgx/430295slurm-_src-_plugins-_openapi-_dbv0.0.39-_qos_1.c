static void _delete_qos ( ctxt_t * ctxt , slurmdb_qos_cond_t * qos_cond ) { List qos_list = NULL ; data_t * dremoved = data_set_list ( data_key_set ( ctxt -> resp , "removed_qos" ) ) ; if ( ! db_query_list ( ctxt , & qos_list , slurmdb_qos_remove , qos_cond ) && qos_list ) { list_for_each ( qos_list , _foreach_delete_qos , dremoved ) ; } if ( ! ctxt -> rc ) { db_query_commit ( ctxt ) ; } FREE_NULL_LIST ( qos_list , NULL ) ; } 