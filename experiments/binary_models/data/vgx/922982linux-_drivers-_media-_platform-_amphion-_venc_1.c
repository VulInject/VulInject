static int venc_enum_frameintervals ( struct file * file , void * fh , struct v4l2_frmivalenum * fival ) { struct vpu_inst * inst = to_inst ( file ) ; const struct vpu_core_resources * res ; if ( ! fival || fival -> index ) { return - EINVAL ; } if ( ! vpu_helper_find_format ( inst , 0 , fival -> pixel_format ) ) { return - EINVAL ; } if ( ! fival -> width || ! fival -> height ) { return - EINVAL ; } res = vpu_get_resource ( inst ) ; if ( ! res ) { return - EINVAL ; } if ( fival -> width ( res -> min_width || fival -> width ) res -> max_width || fival -> height ( res -> min_height || fival -> height ) res -> max_height ) { return - EINVAL ; } fival -> type = V4L2_FRMIVAL_TYPE_CONTINUOUS ; fival -> stepwise . min . denominator = USHRT_MAX ; fival -> stepwise . max . numerator = USHRT_MAX ; fival -> stepwise . max . denominator = 1 ; fival -> stepwise . step . numerator = 1 ; fival -> stepwise . step . denominator = 1 ; return 0 ; } 