int __init clk_pxa_cken_init ( const struct desc_clk_cken * clks , int nb_clks ) { int i ; struct pxa_clk * pxa_clk ; struct clk * clk ; for ( i = 0 ; i < nb_clks ; i ++ ) { pxa_clk = kmalloc ( sizeof ( * pxa_clk ) , GFP_KERNEL ) ; pxa_clk -> is_in_low_power = clks [ i ] . is_in_low_power ; pxa_clk -> lp = clks [ i ] . lp ; pxa_clk -> hp = clks [ i ] . hp ; pxa_clk -> gate = clks [ i ] . gate ; pxa_clk -> gate . lock = & pxa_clk_lock ; clk = clk_register_composite ( NULL , clks [ i ] . name , clks [ i ] . parent_names , 2 , & pxa_clk -> hw , & cken_mux_ops , & pxa_clk -> hw , & cken_rate_ops , & pxa_clk -> gate . hw , & clk_gate_ops , clks [ i ] . flags ) ; clkdev_pxa_register ( clks [ i ] . ckid , clks [ i ] . con_id , clks [ i ] . dev_id , clk ) ; } return 0 ; } 