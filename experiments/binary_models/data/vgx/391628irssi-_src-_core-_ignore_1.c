static void read_ignores ( void ) { IGNORE_REC * rec ; CONFIG_NODE * node ; GSList * tmp ; while ( ignores != NULL ) { ignore_destroy ( ignores -> data , FALSE ) ; } node = iconfig_node_traverse ( "ignores" , FALSE ) ; if ( node == NULL ) { nickmatch_rebuild ( nickmatch ) ; return ; } tmp = config_node_first ( node -> value ) ; for ( ; tmp != NULL ; tmp = config_node_next ( tmp ) ) { node = tmp -> data ; rec = g_new0 ( IGNORE_REC , 1 ) ; ignores = g_slist_append ( ignores , rec ) ; rec -> mask = g_strdup ( config_node_get_str ( node , "mask" , NULL ) ) ; rec -> pattern = g_strdup ( config_node_get_str ( node , "pattern" , NULL ) ) ; rec -> level = level2bits ( config_node_get_str ( node , "level" , "" ) , NULL ) ; rec -> exception = config_node_get_bool ( node , "exception" , FALSE ) ; rec -> regexp = config_node_get_bool ( node , "regexp" , FALSE ) ; rec -> fullword = config_node_get_bool ( node , "fullword" , FALSE ) ; rec -> replies = config_node_get_bool ( node , "replies" , FALSE ) ; rec -> unignore_time = config_node_get_int ( node , "unignore_time" , 0 ) ; rec -> servertag = g_strdup ( config_node_get_str ( node , "servertag" , 0 ) ) ; node = iconfig_node_section ( node , "channels" , - 1 ) ; if ( node != NULL ) { rec -> channels = config_node_get_list ( node ) ; } ignore_init_rec ( rec ) ; } nickmatch_rebuild ( nickmatch ) ; } 