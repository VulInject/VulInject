void launch_xdvi ( const char * filename , const char * anchor_name ) { int i = 0 ; const char * argv [ ARG_LEN ] ; char * shrink_arg ; ASSERT ( filename != NULL , "filename argument to launch_xdvi() mustn't be NULL" ) ; argv [ i ++ ] = kpse_invocation_name ; argv [ i ++ ] = "-name" ; argv [ i ++ ] = "xdvi" ; if ( globals . debug != 0 ) { argv [ i ++ ] = "-debug" ; argv [ i ++ ] = resource . debug_arg ; } if ( anchor_name != NULL ) { argv [ i ++ ] = "-anchorposition" ; argv [ i ++ ] = anchor_name ; } argv [ i ++ ] = "-s" ; shrink_arg = XMALLOC ( shrink_arg , LENGTH_OF_INT + 1 ) ; sprintf ( shrink_arg , "%d" , currwin . shrinkfactor ) ; argv [ i ++ ] = shrink_arg ; argv [ i ++ ] = filename ; argv [ i ++ ] = NULL ; ASSERT ( i <= ARG_LEN , "Too few elements in argv[]" ) ; if ( globals . debug & DBG_HTEX ) { fprintf ( stderr , "Invoking:\n" ) ; for ( i = 0 ; argv [ i ] ; i ++ ) { fprintf ( stderr , "%s\n" , argv [ i ] ) ; } } fork_process ( argv [ 0 ] , False , NULL , NULL , NULL , 0 , argv ) ; { int pid ; switch ( pid = fork ( ) ) { case - 1 : perror ( "fork" ) ; case 0 : execvp ( argv [ 0 ] , ( char * * ) argv ) ; XDVI_ERROR ( ( stderr , "%s: Execution of %s failed." , globals . program_name , argv [ 0 ] ) ) ; _exit ( EXIT_FAILURE ) ; default : FREE ( shrink_arg ) ; } } } 