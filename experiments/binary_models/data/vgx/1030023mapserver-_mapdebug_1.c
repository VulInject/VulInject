void msDebugCleanup ( ) { msCloseErrorFile ( ) ; { void * thread_id = msGetThreadId ( ) ; debugInfoObj * link ; msAcquireLock ( TLOCK_DEBUGOBJ ) ; for ( link = debuginfo_list ; link != NULL && link -> thread_id != thread_id && link -> next != NULL && link -> next -> thread_id != thread_id ; link = link -> next ) { } if ( link -> thread_id == thread_id ) { if ( debuginfo_list == link ) { debuginfo_list = link -> next ; } free ( link ) ; } if ( link -> next != NULL && link -> next -> thread_id == thread_id ) { debugInfoObj * next_link = link -> next ; link -> next = link -> next -> next ; free ( next_link ) ; } msReleaseLock ( TLOCK_DEBUGOBJ , NULL ) ; } } 