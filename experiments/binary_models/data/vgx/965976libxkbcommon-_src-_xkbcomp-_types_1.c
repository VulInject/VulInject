static void HandleKeyTypesFile ( KeyTypesInfo * info , XkbFile * file , enum merge_mode merge ) { bool ok ; info -> name = strdup_safe ( file -> name ) ; for ( ParseCommon * stmt = file -> defs ; stmt ; stmt = stmt -> next ) { switch ( stmt -> type ) { case STMT_INCLUDE : ok = HandleIncludeKeyTypes ( info , ( IncludeStmt * ) stmt ) ; break ; case STMT_TYPE : ok = HandleKeyTypeDef ( info , ( KeyTypeDef * ) stmt , merge ) ; break ; case STMT_VAR : log_err ( info -> ctx , "Support for changing the default type has been removed; " "Statement ignored\n" ) ; ok = true ; break ; case STMT_VMOD : ok = HandleVModDef ( info -> ctx , & info -> mods , ( VModDef * ) stmt , merge ) ; break ; default : log_err ( info -> ctx , "Key type files may not include other declarations; " "Ignoring %s\n" , stmt_type_to_string ( stmt -> type ) ) ; ok = false ; break ; } if ( ! ok ) { info -> errorCount ++ ; } if ( info -> errorCount > 10 ) { log_err ( info -> ctx , "Abandoning keytypes file \"%s\"\n" , file -> name ) ; break ; } } } 