bool test_r_egg_save(void) {
	REgg *egg = r_egg_new ();
	RAnal *a = r_anal_new ();
	r_anal_bind (a, &egg->rasm->analb);
	r_egg_setup (egg, arch, bits, 0, os);
	r_egg_load (egg, program, 0);
	mu_assert ("Compilation", r_egg_compile (egg)); 
	mu_assert ("Assembly", r_egg_assemble (egg)); 
	mu_assert ("Binary", r_egg_get_bin (egg));
	r_egg_finalize (egg); 
	int out = memfd_create ("out", 0);
	int in = open ("./file", O_WRONLY | O_CREAT, S_IRUSR | S_IWUSR); 
	write (in, "test file", 9);
	close (in); 
	if (!fork ()) {
		r_egg_run (egg);
	}
	wait (NULL);
	struct stat sz; 
	fstat (out, &sz);
	char buf[sz.st_size + 1];
	lseek (out, 0, 0);
	read (out, buf, sz.st_size);
	buf[sz.st_size] = '\0';
	mu_assert_eq (strcmp (buf, "test file"), 0, "Save");
	close (out);
	unlink ("./file");
	r_egg_free (egg);
	mu_end;
}
bool test_r_egg_save(void) {
	R_LOG_WARN ("This test is linux specific because it's using memfd");
	mu_end;
}
