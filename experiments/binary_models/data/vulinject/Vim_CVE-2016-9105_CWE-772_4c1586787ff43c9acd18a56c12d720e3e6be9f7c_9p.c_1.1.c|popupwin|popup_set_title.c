popup_set_title(win_T *wp)
{
    if (wp->w_buffer->b_fname == NULL)
	return;
    char_u	dirname[MAXPATHL];
    size_t	len;
    shorten_buf_fname(wp->w_buffer, dirname, FALSE);
    vim_free(wp->w_popup_title);
    len = STRLEN(wp->w_buffer->b_fname) + 3;
    wp->w_popup_title = alloc((int)len);
    if (wp->w_popup_title != NULL)
	vim_snprintf((char *)wp->w_popup_title, len, " %s ",
		wp->w_buffer->b_fname);
    redraw_win_later(wp, UPD_VALID);
}
