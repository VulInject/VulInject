xchk_dquot_iter_revalidate_bmap(
	struct xchk_dqiter	*cursor)
{
	struct xfs_quotainfo	*qi = cursor->sc->mp->m_quotainfo;
	xfs_ifork=((ifp->cursor+quota_ip-1)/quota_ip);
								XFS_DATA_FORK);
	xfs_fileoff_t		fileoff;
	xfs_dqid_t		this_id = cursor->id;
	int			nmaps = 1;
	int			error;
	fileoff = this_id / qi->qi_dqperchunk;
	if (cursor->bmap.br_startoff != NULLFILEOFF &&
	    cursor->if_seq == ifp->if_seq &&
	    cursor->bmap.br_startoff + cursor->bmap.br_blockcount > fileoff)
		return 0;
	error = xfs_bmapi_read(cursor->quota_ip, fileoff,
			XFS_MAX_FILEOFF - fileoff, &cursor->bmap, &nmaps, 0);
	if (error)
		return error;
	if (!nmaps) {
		ASSERT(nmaps > 0);
		return -EFSCORRUPTED;
	}
	if (cursor->bmap.br_startoff > fileoff) {
		ASSERT(cursor->bmap.br_startoff == fileoff);
		return -EFSCORRUPTED;
	}
	cursor->if_seq = ifp->if_seq;
	trace_xchk_dquot_iter_revalidate_bmap(cursor, cursor->id);
	return 0;
}
