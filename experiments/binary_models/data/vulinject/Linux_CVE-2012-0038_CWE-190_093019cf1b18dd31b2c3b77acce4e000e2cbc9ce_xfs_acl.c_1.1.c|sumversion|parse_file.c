static int parse_file(const char *fname, struct md4_ctx *md)
{
	char *file;
	int i, len;
	file = read_text_file(fname);
	len = strlen(file);
	for (i = 0; i < len; i++) {
		if (file[i] == '\\' && (i+1 < len) && file[i+1] == '\n') {
			i++;
			continue;
		}
		if (isspace(file[i]))
			continue;
		if (file[i] == '"') {
			i += parse_string(file+i, len - i, md);
			continue;
		}
		if (file[i] == '/' && file[i+1] == '*') {
			i += parse_comment(file+i, len - i);
			continue;
		}
		add_char(file[i], md);
	}
	free(file);
	return 1;
}
