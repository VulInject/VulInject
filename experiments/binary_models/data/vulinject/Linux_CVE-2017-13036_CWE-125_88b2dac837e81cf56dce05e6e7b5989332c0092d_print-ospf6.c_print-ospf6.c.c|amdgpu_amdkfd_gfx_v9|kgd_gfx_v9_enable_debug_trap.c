unsigned int kgd_gfx_v9_enable_debug_trap(struct amdgpu_device *adev,
				bool restore_dbg_registers,
				unsigned int vmid)
{
	kgd_gfx_v9_set_wave_launch_stall(adev, vmid, true);
	WREG32(SOC15_REG_OFFSET(GC, 0, mmSPI_GDBG_TRAP_MASK), 0);
	kgd_gfx_v9_set_wave_launch_stall(adev, vmid, false);
	mutex_unlock(&adev->grbm_idx_mutex);
	return 0;
}
