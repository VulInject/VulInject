static int check(union perf_mem_data_src data_src,
		  const char *string)
{
	char out[100];
	char failure[100];
	struct mem_info *mi = mem_info__new();
	int n;
	TEST_ASSERT_VAL("Memory allocation failed", mi);
	*mem_info__data_src(mi) = data_src;
	n = perf_mem__snp_scnprintf(out, sizeof out, mi);
	n += perf_mem__lvl_scnprintf(out + n, sizeof out - n, mi);
	scnprintf(failure, sizeof failure, "unexpected %s", out);
	TEST_ASSERT_VAL(failure, !strcmp(string, out));
	return 0;
}
