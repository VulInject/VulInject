void bmips_ebase_setup(void)
{
	unsigned int new_ebase = ebase;
	BUG_ON(ebase != CKSEG0);
	switch (current_cpu_type()) {
	case CPU_BMIPS4350:
		set_uncached_handler(BMIPS_WARM_RESTART_VEC - CKSEG0,
			&bmips_smp_int_vec, 0x80);
		__sync();
		return;
	case CPU_BMIPS3300:
	case CPU_BMIPS4380:
		new_ebase = 0x80000400;
		bmips_set_reset_vec(0, RESET_FROM_KSEG0);
		break;
	case CPU_BMIPS5000:
		new_ebase = 0x80001000;
		bmips_set_reset_vec(0, RESET_FROM_KSEG0);
		break;
	default:
		return;
	}
	board_nmi_handler_setup = &bmips_nmi_handler_setup;
	ebase = new_ebase;
}
