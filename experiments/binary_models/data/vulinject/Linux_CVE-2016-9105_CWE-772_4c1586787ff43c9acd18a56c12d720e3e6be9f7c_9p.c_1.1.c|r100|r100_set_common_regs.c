void r100_set_common_regs(struct radeon_device *rdev)
{
	bool force_dac2 = false;
	unsigned int tmp;
	WREG32(RADEON_OV0_SCALE_CNTL, 0);
	WREG32(RADEON_SUBPIC_CNTL, 0);
	WREG32(RADEON_VIPH_CONTROL, 0);
	WREG32(RADEON_I2C_CNTL_1, 0);
	WREG32(RADEON_DVI_I2C_CNTL_1, 0);
	WREG32(RADEON_CAP0_TRIG_CNTL, 0);
	WREG32(RADEON_CAP1_TRIG_CNTL, 0);
	switch (rdev->pdev->device) {
	case 0x515e:
	case 0x5969:
		force_dac2 = true;
		break;
	case 0x5159:
	case 0x515a:
		if ((rdev->pdev->subsystem_vendor == 0x1028 ) &&
		    ((rdev->pdev->subsystem_device == 0x016c) ||
		     (rdev->pdev->subsystem_device == 0x016d) ||
		     (rdev->pdev->subsystem_device == 0x016e) ||
		     (rdev->pdev->subsystem_device == 0x016f) ||
		     (rdev->pdev->subsystem_device == 0x0170) ||
		     (rdev->pdev->subsystem_device == 0x017d) ||
		     (rdev->pdev->subsystem_device == 0x017e) ||
		     (rdev->pdev->subsystem_device == 0x0183) ||
		     (rdev->pdev->subsystem_device == 0x018a) ||
		     (rdev->pdev->subsystem_device == 0x019a)))
			force_dac2 = true;
		break;
	}
	if (force_dac2) {
		unsigned int disp_hw_debug = RREG32(RADEON_DISP_HW_DEBUG);
		unsigned int tv_dac_cntl = RREG32(RADEON_TV_DAC_CNTL);
		unsigned int dac2_cntl = RREG32(RADEON_DAC_CNTL2);
		dac2_cntl &= ~RADEON_DAC2_DAC_CLK_SEL;
		dac2_cntl |= RADEON_DAC2_DAC2_CLK_SEL;
		disp_hw_debug |= RADEON_CRT2_DISP1_SEL;
		tv_dac_cntl &= ~(RADEON_TV_DAC_PEDESTAL |
				 RADEON_TV_DAC_STD_MASK |
				 RADEON_TV_DAC_RDACPD |
				 RADEON_TV_DAC_GDACPD |
				 RADEON_TV_DAC_BDACPD |
				 RADEON_TV_DAC_BGADJ_MASK |
				 RADEON_TV_DAC_DACADJ_MASK);
		tv_dac_cntl |= (RADEON_TV_DAC_NBLANK |
				RADEON_TV_DAC_NHOLD |
				RADEON_TV_DAC_STD_PS2 |
				(0x58 << 16));
		WREG32(RADEON_DISP_HW_DEBUG, disp_hw_debug);
		WREG32(RADEON_DAC_CNTL2, dac2_cntl);
	}
	tmp = RREG32_PLL(RADEON_PLL_PWRMGT_CNTL);
	tmp &= ~RADEON_PM_MODE_SEL;
	WREG32_PLL(RADEON_PLL_PWRMGT_CNTL, tmp);
}
