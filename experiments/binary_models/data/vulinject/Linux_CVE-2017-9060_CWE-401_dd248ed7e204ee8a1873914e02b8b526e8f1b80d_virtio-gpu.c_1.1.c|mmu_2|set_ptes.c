void set_ptes(struct mm_struct *mm, unsigned int addr,
			      pte_t *ptep, pte_t pteval, unsigned int nr)
{
	unsigned int ext = 0;
	if (addr < TASK_SIZE && pte_valid_user(pteval)) {
		if (!pte_special(pteval))
		ext |= PTE_EXT_NG;
	}
	for (;;) {
		set_pte_ext(ptep, pteval, ext);
		if (--nr == 0)
			break;
		ptep++;
		pteval = pte_next_pfn(pteval);
	}
}
