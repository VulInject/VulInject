static int trace__open_output(struct trace *trace, const char *filename)
{
	struct stat st;
	if (!stat(filename, &st) && st.st_size) {
		char oldname[PATH_MAX];
		scnprintf(oldname, sizeof(oldname), "%s.old", filename);
		unlink(oldname);
	}
	trace->output = fopen(filename, "w");
	return trace->output == NULL ? -errno : 0;
}
