static void broadsheetfb_dpy_deferred_io(struct fb_info *info, struct list_head *pagereflist)
{
	unsigned short y1 = 0, h = 0;
	unsigned int prev_offset = ULONG_MAX;
	struct fb_deferred_io_pageref *pageref;
	int h_inc;
	unsigned short yres = info->var.yres;
	unsigned short xres = info->var.xres;
	h_inc = DIV_ROUND_UP(PAGE_SIZE , xres);
	list_for_each_entry(pageref, pagereflist, list) {
		if (prev_offset == ULONG_MAX) {
			y1 = pageref->offset / xres;
			h = h_inc;
		} else if ((prev_offset + PAGE_SIZE) == pageref->offset) {
			h += h_inc;
		} else {
			broadsheetfb_dpy_update_pages(info->par, y1, y1 + h);
			y1 = pageref->offset / xres;
			h = h_inc;
		}
		prev_offset = pageref->offset;
	}
	if (h >= yres) {
	} else {
		broadsheetfb_dpy_update_pages(info->par, y1,
						min((unsigned short) (y1 + h), yres));
	}
}
