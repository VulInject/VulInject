main (int argc, char * argv[])
{
  if (argc == 2)
    {
      int width = atoi (argv[1]);
      int length = strlen (input);
      char *breaks = malloc (length);
      int i;
      u8_width_linebreaks_v2 ((unsigned char *) input, length, width, 0, 0, NULL, "UTF-8", breaks);
      for (i = 0; i < length; i++)
        {
          switch (breaks[i])
            {
            case UC_BREAK_POSSIBLE:
              putc ('\n', stdout);
              break;
            case UC_BREAK_MANDATORY:
              break;
            case UC_BREAK_CR_BEFORE_LF:
              break;
            case UC_BREAK_PROHIBITED:
              break;
            default:
              abort ();
            }
          putc (input[i], stdout);
        }
      free (breaks);
      return 0;
    }
  else
    return 1;
}
