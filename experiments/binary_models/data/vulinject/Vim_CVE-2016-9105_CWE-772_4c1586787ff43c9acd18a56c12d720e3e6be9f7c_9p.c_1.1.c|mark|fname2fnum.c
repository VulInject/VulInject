fname2fnum(xfmark_T *fm)
{
    char_u	*p;
    if (fm->fname == NULL)
	return;
    if (fm->fname[0] == '~' && (fm->fname[1] == '/'
#ifdef BACKSLASH_IN_FILENAME
		|| fm->fname[1] == '\\'
#endif
		))
    {
	int len;
	expand_env((char_u *)"~/", NameBuff, MAXPATHL);
	len = (int)STRLEN(NameBuff);
	vim_strncpy(NameBuff + len, fm->fname + 2, MAXPATHL - len - 1);
    }
    else
	vim_strncpy(NameBuff, fm->fname, MAXPATHL - 1);
    p = shorten_fname(NameBuff, IObuff);
    (void)buflist_new(NameBuff, p, (linenr_T)1, 0);
}
