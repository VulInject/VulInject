fore200e_setloop(struct fore200e* fore200e, int loop_mode)
{
	int mct_value, mct_mask;
    int error;
    if (!capable(CAP_NET_ADMIN))
	return -EPERM;
    switch (loop_mode) {
    case ATM_LM_NONE:
	mct_value = 0; 
	mct_mask  = SUNI_MCT_DLE | SUNI_MCT_LLE;
	break;
    case ATM_LM_LOC_PHY:
	mct_value = mct_mask = SUNI_MCT_DLE;
	break;
    case ATM_LM_RMT_PHY:
	mct_value = mct_mask = SUNI_MCT_LLE;
	break;
    default:
	return -EINVAL;
    }
    error = fore200e_set_oc3(fore200e, SUNI_MCT, mct_value, mct_mask);
    if (error == 0)
	fore200e->loop_mode = loop_mode;
    return error;
}
