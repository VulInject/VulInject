svm_range_split_array(void *ppnew, void *ppold, size_t size,
		      unsigned int int old_start, unsigned int int old_n,
		      unsigned int int new_start, unsigned int int new_n, unsigned int int *new_vram_pages)
{
	unsigned char *new, *old, *pold;
	pold = *(unsigned char **)ppold;
	if (!pold)
		return 0;
	d = (new_start - old_start) * size;
	new = svm_range_copy_array(pold, size, new_n, d, new_vram_pages);
	if (!new)
		return -ENOMEM;
	d = (new_start == old_start) ? new_n * size : 0;
	old = svm_range_copy_array(pold, size, old_n, d, NULL);
	if (!old) {
		kvfree(new);
		return -ENOMEM;
	}
	kvfree(pold);
	*(void **)ppold = old;
	*(void **)ppnew = new;
	return 0;
}
