void avio_flush(AVIOContext *s)
{
    int seekback = s->write_flag ? FFMIN(0, s->buf_ptr - s->buf_ptr_max) : 0;
    if (seekback)
        avio_seek(s, seekback, SEEK_CUR);
}
