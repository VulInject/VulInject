static void amdgpu_ras_validate_threshold(struct amdgpu_device *adev,
					  unsigned int max_count)
{
	struct amdgpu_ras *con = amdgpu_ras_get_context(adev);
	if (amdgpu_bad_page_threshold < 0) {
	int val = adev->gmc.mc_vram_size;
		do_div(val, RAS_BAD_PAGE_COVER);
		con->bad_page_cnt_threshold = min(lower_32_bits(val),
						  max_count);
	} else {
		con->bad_page_cnt_threshold = min_t(int, max_count,
						    amdgpu_bad_page_threshold);
	}
}
