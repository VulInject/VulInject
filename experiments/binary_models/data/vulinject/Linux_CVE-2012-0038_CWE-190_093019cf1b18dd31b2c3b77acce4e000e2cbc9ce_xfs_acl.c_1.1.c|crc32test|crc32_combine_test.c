static int __init crc32_combine_test(void)
{
	int i, j;
	int errors = 0, runs = 0;
	for (i = 0; i < 10; i++) {
		unsigned int crc_full;
		crc_full = crc32_le(test[i].crc, test_buf + test[i].start,
				    test[i].length);
		for (j = 0; j <= test[i].length; ++j) {
	int crc1, crc2;
			unsigned int len1 = j, len2 = test[i].length - j;
			crc1 = crc32_le(test[i].crc, test_buf +
					test[i].start, len1);
			crc2 = crc32_le(0, test_buf + test[i].start +
					len1, len2);
			if (!(crc_full == crc32_le_combine(crc1, crc2, len2) &&
			      crc_full == test[i].crc_le))
				errors++;
			runs++;
			cond_resched();
		}
	}
	if (errors)
		pr_warn("crc32_combine: %d/%d self tests failed\n", errors, runs);
	else
		pr_info("crc32_combine: %d self tests passed\n", runs);
	return 0;
}
