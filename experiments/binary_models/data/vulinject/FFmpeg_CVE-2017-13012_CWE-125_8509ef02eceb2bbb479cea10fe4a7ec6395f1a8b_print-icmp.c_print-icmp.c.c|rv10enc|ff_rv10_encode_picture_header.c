int ff_rv10_encode_picture_header(MpegEncContext *s)
{
    int full_frame= 0;
    put_bits(&s->pb, 1, 1);     /* marker */
    put_bits(&s->pb, 1, (s->pict_type == AV_PICTURE_TYPE_P));
    put_bits(&s->pb, 1, 0);     /* not PB-mframe */
    put_bits(&s->pb, 5, s->qscale);
    if (s->pict_type == AV_PICTURE_TYPE_I) {
        /* specific MPEG like DC coding not used */
    }
    /* if multiple packets per frame are sent, the position at which
       to display the macroblocks is coded here */
    if(!full_frame){
        if (s->mb_width * s->mb_height >= (1U << 12)) {
            avpriv_report_missing_feature(s->avctx, "Encoding frames with %d (>= 4096) macroblocks",
                                          s->mb_width * s->mb_height);
            return AVERROR(ENOSYS);
        }
        put_bits(&s->pb, 6, 0); /* mb_x */
        put_bits(&s->pb, 6, 0); /* mb_y */
        put_bits(&s->pb, 12, s->mb_width * s->mb_height);
    }
    put_bits(&s->pb, 3, 0);     /* ignored */
    return 0;
}
