void bcm_sf2_cfp_get_ethtool_stats(struct dsa_switch *ds, int port,
				   unsigned int int *data)
{
	struct bcm_sf2_priv *priv = bcm_sf2_to_priv(ds);
	unsigned int s = ARRAY_SIZE(bcm_sf2_cfp_stats);
	const struct bcm_sf2_cfp_stat *stat;
	unsigned int i, j, iter;
	struct cfp_rule *rule;
	int ret;
	mutex_lock(&priv->cfp.lock);
	for (i = 1; i < priv->num_cfp_rules; i++) {
		rule = bcm_sf2_cfp_rule_find(priv, port, i);
		if (!rule)
			continue;
		for (j = 0; j < s; j++) {
			stat = &bcm_sf2_cfp_stats[j];
			ret = bcm_sf2_cfp_op(priv, stat->ram_loc | OP_SEL_READ);
			if (ret)
				continue;
			iter = (i - 1) * s + j;
			data[iter] = core_readl(priv, stat->offset);
		}
	}
	mutex_unlock(&priv->cfp.lock);
}
