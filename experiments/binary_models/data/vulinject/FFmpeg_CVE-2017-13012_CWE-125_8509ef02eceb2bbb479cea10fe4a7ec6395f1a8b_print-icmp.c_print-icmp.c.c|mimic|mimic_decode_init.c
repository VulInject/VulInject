static av_cold int mimic_decode_init(AVCodecContext *avctx)
{
    static AVOnce init_static_once = AV_ONCE_INIT;
    MimicContext *ctx = avctx->priv_data;
    int i;
    ctx->prev_index = 0;
    ctx->cur_index  = 15;
    ff_bswapdsp_init(&ctx->bbdsp);
    ff_hpeldsp_init(&ctx->hdsp, avctx->flags);
    ff_idctdsp_init(&ctx->idsp, avctx);
    ff_permute_scantable(ctx->permutated_scantable, col_zag, ctx->idsp.idct_permutation);
    for (i = 0; i < FF_ARRAY_ELEMS(ctx->frames); i++) {
        ctx->frames[i].f = av_frame_alloc();
        if (!ctx->frames[i].f)
            return AVERROR(ENOMEM);
    }
    ff_thread_once(&init_static_once, mimic_init_static);
    return 0;
}
