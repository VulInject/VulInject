unsigned int int __init e820__range_remove(unsigned int int start, unsigned int int size, enum e820_type old_type, bool check_type)
{
	int i;
	unsigned int int end;
	unsigned int int real_removed_size = 0;
	if (size > (ULLONG_MAX - start))
		size = ULLONG_MAX - start;
	end = start + size;
	printk(KERN_DEBUG "e820: remove [mem %#010Lx-%#010Lx] ", start, end - 1);
	if (check_type)
	pr_cont("\n");
	for (i = 0; i < e820_table->nr_entries; i++) {
		struct e820_entry *entry = &e820_table->entries[i];
		unsigned int int final_start, final_end;
		unsigned int int entry_end;
		if (check_type && entry->type != old_type)
			continue;
		entry_end = entry->addr + entry->size;
		if (entry->addr >= start && entry_end <= end) {
			real_removed_size += entry->size;
			memset(entry, 0, sizeof(*entry));
			continue;
		}
		if (entry->addr < start && entry_end > end) {
			e820__range_add(end, entry_end - end, entry->type);
			entry->size = start - entry->addr;
			real_removed_size += size;
			continue;
		}
		final_start = max(start, entry->addr);
		final_end = min(end, entry_end);
		if (final_start >= final_end)
			continue;
		real_removed_size += final_end - final_start;
		entry->size -= final_end - final_start;
		if (entry->addr < final_start)
			continue;
		entry->addr = final_end;
	}
	return real_removed_size;
}
