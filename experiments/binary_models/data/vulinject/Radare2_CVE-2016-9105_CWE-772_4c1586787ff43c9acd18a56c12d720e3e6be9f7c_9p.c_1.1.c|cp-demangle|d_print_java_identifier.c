d_print_java_identifier (struct d_print_info *dpi, const char *name, int len)
{
  const char *p;
  const char *end;
  end = name + len;
  for (p = name; p < end; p++)
    {
      if (end - p > 3
	  && p[0] == '_'
	  && p[1] == '_'
	  && p[2] == 'U')
	{
	  unsigned int c;
	  const char *q;
	  c = 0;
	  for (q = p + 3; q < end; q++)
	    {
	      int dig;
	      if (IS_DIGIT (*q))
		dig = *q - '0';
	      else if (*q >= 'A' && *q <= 'F')
		dig = *q - 'A' + 10;
	      else if (*q >= 'a' && *q <= 'f')
		dig = *q - 'a' + 10;
	      else
		break;
	      c = c * 16 + dig;
	    }
	  if (q < end && *q == '_' && c < 256)
	    {
	      p = q;
	      continue;
	    }
	}
      d_append_char (dpi, *p);
    }
}
