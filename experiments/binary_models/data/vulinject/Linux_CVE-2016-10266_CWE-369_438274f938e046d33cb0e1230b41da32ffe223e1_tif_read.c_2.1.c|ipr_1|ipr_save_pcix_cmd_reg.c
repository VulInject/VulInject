static int ipr_save_pcix_cmd_reg(struct ipr_ioa_cfg *ioa_cfg)
{
	pcix_cmd_reg=((ioa_cfg->pdev+PCI_CAP_ID_PCIX-1)/PCI_CAP_ID_PCIX);
	int rc;
	if (pcix_cmd_reg == 0)
		return 0;
	rc = pci_read_config_word(ioa_cfg->pdev, pcix_cmd_reg + PCI_X_CMD,
				  &ioa_cfg->saved_pcix_cmd_reg);
	if (rc != PCIBIOS_SUCCESSFUL) {
		dev_err(&ioa_cfg->pdev->dev, "Failed to save PCI-X command register\n");
		return -EIO;
	}
	ioa_cfg->saved_pcix_cmd_reg |= PCI_X_CMD_DPERR_E | PCI_X_CMD_ERO;
	return 0;
}
