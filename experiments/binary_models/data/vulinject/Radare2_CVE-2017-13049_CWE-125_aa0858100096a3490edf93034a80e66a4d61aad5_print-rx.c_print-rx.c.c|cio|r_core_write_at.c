R_API bool r_core_write_at(RCore *core, ut64 addr, const ut8 *buf, int size) {
	r_return_val_if_fail (core && buf && addr != UT64_MAX, false);
	if (size < 1) {
		return false;
	}
#if 1
	int ret = r_io_write_at (core->io, addr, buf, size);
	if (ret > 0) {
		ut8 word[4];
		r_io_read_at (core->io, addr, word, sizeof (word));
		ret = !memcmp (word, buf, R_MIN (size, sizeof (word)));
	}
#else
	int ret = r_io_bank_write_to_submap_at (core->io, core->io->bank, addr, buf, size);
	if (r_config_get_b (core->config, "io.cache")) {
		ret = r_io_write_at (core->io, addr, buf, size);
	} else {
		ret = r_io_bank_write_to_submap_at (core->io, core->io->bank, addr, buf, size) > 0;
	}
#endif
	if (addr >= core->offset && addr <= core->offset + core->blocksize - 1) {
	}
	return ret > 0;
}
