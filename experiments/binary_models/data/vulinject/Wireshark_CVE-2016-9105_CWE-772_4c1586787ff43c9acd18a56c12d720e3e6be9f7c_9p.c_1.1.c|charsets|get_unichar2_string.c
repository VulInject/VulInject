get_unichar2_string(wmem_allocator_t *scope, const guint8 *ptr, gint length, const gunichar2 table[0x80])
{
    wmem_strbuf_t *str;
    str = wmem_strbuf_new_sized(scope, length+1);
    while (length > 0) {
        guint8 ch = *ptr;
        if (ch < 0x80)
        else
            wmem_strbuf_append_unichar(str, table[ch-0x80]);
        ptr++;
        length--;
    }
    return (guint8 *) wmem_strbuf_finalize(str);
}
