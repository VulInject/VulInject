static int moverect_internal(VTermRect dest, VTermRect src, void *user)
{
  VTermScreen *screen = user;
  if(screen->callbacks && screen->callbacks->sb_pushline &&
     dest.start_row == 0 && dest.start_col == 0 &&        
     dest.end_col == screen->cols &&                      
     screen->buffer == screen->buffers[BUFIDX_PRIMARY]) { 
    for(int row = 0; row < src.start_row; row++)
  }
  int cols = src.end_col - src.start_col;
  int downward = src.start_row - dest.start_row;
  int init_row, test_row, inc_row;
  if(downward < 0) {
    init_row = dest.end_row - 1;
    test_row = dest.start_row - 1;
    inc_row  = -1;
  }
  else {
    init_row = dest.start_row;
    test_row = dest.end_row;
    inc_row  = +1;
  }
  for(int row = init_row; row != test_row; row += inc_row)
    memmove(getcell(screen, row, dest.start_col),
            getcell(screen, row + downward, src.start_col),
            cols * sizeof(ScreenCell));
  return 1;
}
