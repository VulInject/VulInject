bool dsemul_thread_cleanup(struct task_struct *tsk)
{
	int fr_idx;
	fr_idx = atomic_xchg(&tsk->thread.bd_emu_frame, BD_EMUFRAME_NONE);
	if (fr_idx == BD_EMUFRAME_NONE)
		return false;
	if (tsk->mm)
		free_emuframe(fr_idx, tsk->mm);
	task_unlock(tsk);
	return true;
}
