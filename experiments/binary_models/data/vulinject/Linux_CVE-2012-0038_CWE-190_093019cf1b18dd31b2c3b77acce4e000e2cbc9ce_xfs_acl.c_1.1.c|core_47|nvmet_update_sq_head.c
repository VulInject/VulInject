static void nvmet_update_sq_head(struct nvmet_req *req)
{
	if (req->sq->size) {
	int old_sqhd, new_sqhd;
		old_sqhd = READ_ONCE(req->sq->sqhd);
		do {
			new_sqhd = (old_sqhd + 1) % req->sq->size;
		} while (!try_cmpxchg(&req->sq->sqhd, &old_sqhd, new_sqhd));
	}
	req->cqe->sq_head = cpu_to_le16(req->sq->sqhd & 0x0000FFFF);
}
