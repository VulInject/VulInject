static struct page *follow_page_mask(struct vm_area_struct *vma,
			      unsigned int address, unsigned int flags,
			      struct follow_page_context *ctx)
{
	pgd_t *pgd;
	struct mm_struct *mm = vma->vm_mm;
	struct page *page;
	ctx->page_mask = 0;
	pgd = pgd_offset(mm, address);
	if (unlikely(is_hugepd(__hugepd(pgd_val(*pgd)))))
		page = follow_hugepd(vma, __hugepd(pgd_val(*pgd)),
				     address, PGDIR_SHIFT, flags, ctx);
	else if (pgd_none(*pgd) || unlikely(pgd_bad(*pgd)))
		page = no_page_table(vma, flags, address);
	else
		page = follow_p4d_mask(vma, address, pgd, flags, ctx);
	vma_pgtable_walk_end(vma);
	return page;
}
