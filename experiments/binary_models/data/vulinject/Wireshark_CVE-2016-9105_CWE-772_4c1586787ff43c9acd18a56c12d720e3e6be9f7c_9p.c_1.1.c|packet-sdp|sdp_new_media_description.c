sdp_new_media_description(wmem_array_t *media_descriptions, session_info_t *session_info)
{
    media_description_t empty_desc;
    media_description_t *media_desc;
    if (wmem_array_get_count(media_descriptions) >= SDP_MAX_RTP_CHANNELS) {
        DPRINT(("Too many media descriptions (more than %d), returning NULL!",
                wmem_array_get_count(media_descriptions)));
        return NULL;
    }
    memset(&empty_desc, 0, sizeof(media_description_t));
    media_desc = (media_description_t *) wmem_array_index(media_descriptions,
            wmem_array_get_count(media_descriptions) - 1);
    if (session_info->conn_addr.type != AT_NONE) {
        copy_address_wmem(wmem_file_scope(), &media_desc->conn_addr, &session_info->conn_addr);
    }
    media_desc->media.rtp_dyn_payload =
        rtp_dyn_payload_dup(session_info->rtp_dyn_payload);
    return media_desc;
}
