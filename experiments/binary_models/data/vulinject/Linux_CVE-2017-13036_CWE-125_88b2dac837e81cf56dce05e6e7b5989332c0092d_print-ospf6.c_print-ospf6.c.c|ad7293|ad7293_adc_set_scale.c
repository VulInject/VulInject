static int ad7293_adc_set_scale(struct ad7293_state *st, unsigned int ch,
				unsigned short range)
{
	int ret;
	mutex_lock(&st->lock);
	ret = __ad7293_spi_update_bits(st, AD7293_REG_VINX_RANGE1, ch_msk,
				       AD7293_REG_VINX_RANGE_SET_CH_MSK(range, ch));
	if (ret)
		goto exit;
	ret = __ad7293_spi_update_bits(st, AD7293_REG_VINX_RANGE0, ch_msk,
				       AD7293_REG_VINX_RANGE_SET_CH_MSK((range >> 1), ch));
exit:
	mutex_unlock(&st->lock);
	return ret;
}
