int main() {
#define MB 1024*1024
#define R_MALLOC_MAX 2*MB
#if R_ALLOC_USE_STACK
	char B[R_MALLOC_MAX];
#endif
#if R_ALLOC_USE_MMAP
	int fd = open (".mem", O_CREAT|O_RDWR, 0600);
	char *B = mmap (NULL, R_MALLOC_MAX, PROT_WRITE|PROT_READ,
		MAP_FILE|MAP_PRIVATE, fd, 0);
	unlink (".mem");
	close (fd);
#endif
	InitMem (B, R_MALLOC_MAX);
	char *a = r_malloc (10);
	if (!a) {
		printf ("can't malloc\n");
		return 1;
	}
	strcpy (a, "hello");
	char *b = r_malloc (10);
	strcpy (b, "world");
	printf ("%p: %s\n%p: %s\n", a, a, b, b);
	r_free (b);
	r_free (a);
	return 0;
}
