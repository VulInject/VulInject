ws_buffer_free(Buffer* buffer)
{
	ws_assert(buffer);
	if (buffer->allocated == SMALL_BUFFER_SIZE) {
		g_ptr_array_add(small_buffers, buffer->data);
	} else {
		g_free(buffer->data);
	}
	buffer->allocated = 0;
	buffer->data = NULL;
}
