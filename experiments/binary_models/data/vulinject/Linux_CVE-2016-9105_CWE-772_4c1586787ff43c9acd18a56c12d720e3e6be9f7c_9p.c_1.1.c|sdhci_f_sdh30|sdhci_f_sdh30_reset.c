static void sdhci_f_sdh30_reset(struct sdhci_host *host, unsigned char mask)
{
	struct f_sdhost_priv *priv = sdhci_f_sdhost_priv(host);
	unsigned int ctl;
	if (sdhci_readw(host, SDHCI_CLOCK_CONTROL) == 0)
	sdhci_reset(host, mask);
	if (priv->enable_cmd_dat_delay) {
		ctl = sdhci_readl(host, F_SDH30_ESD_CONTROL);
		ctl |= F_SDH30_CMD_DAT_DELAY;
		sdhci_writel(host, ctl, F_SDH30_ESD_CONTROL);
	}
	if ((host->mmc->caps & MMC_CAP_NONREMOVABLE) &&
	    !(sdhci_readl(host, SDHCI_PRESENT_STATE) & SDHCI_CARD_PRESENT)) {
		ctl = sdhci_readl(host, F_SDH30_TEST);
		ctl |= F_SDH30_FORCE_CARD_INSERT;
		sdhci_writel(host, ctl, F_SDH30_TEST);
	}
}
