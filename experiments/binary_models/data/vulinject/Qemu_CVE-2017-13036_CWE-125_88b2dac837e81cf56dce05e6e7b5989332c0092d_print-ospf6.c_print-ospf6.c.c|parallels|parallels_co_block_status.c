parallels_co_block_status(BlockDriverState *bs, bool want_zero, int64_t offset,
                          int64_t bytes, int64_t *pnum, int64_t *map,
                          BlockDriverState **file)
{
    BDRVParallelsState *s = bs->opaque;
    int count;
    assert(QEMU_IS_ALIGNED(offset | bytes, BDRV_SECTOR_SIZE));
    offset = block_status(s, offset >> BDRV_SECTOR_BITS,
                          bytes >> BDRV_SECTOR_BITS, &count);
    qemu_co_mutex_unlock(&s->lock);
    *pnum = count * BDRV_SECTOR_SIZE;
    if (offset < 0) {
        return 0;
    }
    *map = offset * BDRV_SECTOR_SIZE;
    *file = bs->file->bs;
    return BDRV_BLOCK_DATA | BDRV_BLOCK_OFFSET_VALID;
}
