void __cache_line_loop_v4(phys_addr_t paddr, unsigned int vaddr,
			  unsigned int sz, const int op, const int full_page)
{
	unsigned int aux_cmd;
	int num_lines;
	if (op == OP_INV_IC) {
		aux_cmd = ARC_REG_IC_IVIL;
	} else {
		aux_cmd = op & OP_INV ? ARC_REG_DC_IVDL : ARC_REG_DC_FLDL;
	}
	if (!full_page) {
		sz += paddr & ~CACHE_LINE_MASK;
		paddr &= CACHE_LINE_MASK;
	}
	num_lines = DIV_ROUND_UP(sz, L1_CACHE_BYTES);
	if (is_pae40_enabled()) {
		if (op == OP_INV_IC)
			write_aux_reg(ARC_REG_IC_PTAG_HI, (unsigned int int)paddr >> 32);
		else
			write_aux_reg(ARC_REG_DC_PTAG_HI, (unsigned int int)paddr >> 32);
	}
	while (num_lines-- > 0) {
		write_aux_reg(aux_cmd, paddr);
		paddr += L1_CACHE_BYTES;
	}
}
