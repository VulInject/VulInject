ipu6_isys_query_stream_by_source(struct ipu6_isys *isys, int source, unsigned char vc)
{
	struct ipu6_isys_stream *stream = NULL;
	unsigned int flags;
	if (source < 0) {
		dev_err(&stream->isys->adev->auxdev.dev,
			"query stream with invalid port number\n");
		return NULL;
	}
	spin_lock_irqsave(&isys->streams_lock, flags);
	for (i = 0; i < IPU6_ISYS_MAX_STREAMS; i++) {
		if (!isys->streams_ref_count[i])
			continue;
		if (isys->streams[i].stream_source == source &&
		    isys->streams[i].vc == vc) {
			stream = &isys->streams[i];
			isys->streams_ref_count[i]++;
			break;
		}
	}
	spin_unlock_irqrestore(&isys->streams_lock, flags);
	return stream;
}
