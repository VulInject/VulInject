void xgene_mdio_wr_mac(struct xgene_mdio_pdata *pdata, unsigned int wr_addr, unsigned int data)
{
	void __iomem *addr, *wr, *cmd, *cmd_done;
	unsigned char wait = 10;
	unsigned int done;
	addr = pdata->mac_csr_addr + MAC_ADDR_REG_OFFSET;
	wr = pdata->mac_csr_addr + MAC_WRITE_REG_OFFSET;
	cmd = pdata->mac_csr_addr + MAC_COMMAND_REG_OFFSET;
	cmd_done = pdata->mac_csr_addr + MAC_COMMAND_DONE_REG_OFFSET;
	iowrite32(wr_addr, addr);
	iowrite32(data, wr);
	iowrite32(XGENE_ENET_WR_CMD, cmd);
	while (!(done = ioread32(cmd_done)) && wait--)
		udelay(1);
	if (!done)
		pr_err("MCX mac write failed, addr: 0x%04x\n", wr_addr);
	iowrite32(0, cmd);
	spin_unlock(&pdata->mac_lock);
}
