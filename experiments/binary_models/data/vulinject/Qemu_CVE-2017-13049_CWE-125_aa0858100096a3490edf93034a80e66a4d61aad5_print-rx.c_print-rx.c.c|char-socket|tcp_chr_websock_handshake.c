static void tcp_chr_websock_handshake(QIOTask *task, gpointer user_data)
{
    Chardev *chr = user_data;
    SocketChardev *s = user_data;
    Error *err = NULL;
    if (qio_task_propagate_error(task, &err)) {
        error_reportf_err(err,
                          "websock handshake of character device %s failed: ",
                          chr->label);
    } else {
        if (s->do_telnetopt) {
            tcp_chr_telnet_init(chr);
        } else {
            tcp_chr_connect(chr);
        }
    }
}
