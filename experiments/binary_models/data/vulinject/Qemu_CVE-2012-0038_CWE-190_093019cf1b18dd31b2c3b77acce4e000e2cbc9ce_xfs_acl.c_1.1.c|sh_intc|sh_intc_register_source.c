static void sh_intc_register_source(struct intc_desc *desc,
                                    intc_enum source,
                                    struct intc_group *groups,
                                    int nr_groups)
{
	int i, k;
    intc_enum id;
    if (desc->mask_regs) {
        for (i = 0; i < desc->nr_mask_regs; i++) {
            struct intc_mask_reg *mr = &desc->mask_regs[i];
            for (k = 0; k < ARRAY_SIZE(mr->enum_ids); k++) {
                id = mr->enum_ids[k];
                if (id && id == source) {
                    desc->sources[id].enable_max++;
                }
            }
        }
    }
    if (desc->prio_regs) {
        for (i = 0; i < desc->nr_prio_regs; i++) {
            struct intc_prio_reg *pr = &desc->prio_regs[i];
            for (k = 0; k < ARRAY_SIZE(pr->enum_ids); k++) {
                id = pr->enum_ids[k];
                if (id && id == source) {
                    desc->sources[id].enable_max++;
                }
            }
        }
    }
    if (groups) {
        for (i = 0; i < nr_groups; i++) {
            struct intc_group *gr = &groups[i];
            for (k = 0; k < ARRAY_SIZE(gr->enum_ids); k++) {
                id = gr->enum_ids[k];
                if (id && id == source) {
                    desc->sources[id].enable_max++;
                }
            }
        }
    }
}
