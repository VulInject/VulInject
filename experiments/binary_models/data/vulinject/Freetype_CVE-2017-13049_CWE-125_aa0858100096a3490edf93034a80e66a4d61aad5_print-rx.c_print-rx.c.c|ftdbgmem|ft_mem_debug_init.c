  ft_mem_debug_init( FT_Memory  memory )
  {
    FT_MemTable  table;
    if ( !ft_getenv( "FT2_DEBUG_MEMORY" ) )
      return;
    table = (FT_MemTable)memory->alloc( memory, sizeof ( *table ) );
    if ( table )
    {
      table->memory      = memory;
      table->memory_user = memory->user;
      table->alloc       = memory->alloc;
      table->realloc     = memory->realloc;
      table->free        = memory->free;
      ft_mem_table_resize( table );
      if ( table->size )
      {
        const char*  p;
        memory->user    = table;
        memory->alloc   = ft_mem_debug_alloc;
        memory->realloc = ft_mem_debug_realloc;
        memory->free    = ft_mem_debug_free;
        p = ft_getenv( "FT2_ALLOC_TOTAL_MAX" );
        if ( p )
        {
          FT_Long  total_max = ft_strtol( p, NULL, 10 );
          if ( total_max > 0 )
          {
            table->bound_total     = 1;
            table->alloc_total_max = total_max;
          }
        }
        p = ft_getenv( "FT2_ALLOC_COUNT_MAX" );
        if ( p )
        {
          FT_Long  total_count = ft_strtol( p, NULL, 10 );
          if ( total_count > 0 )
          {
            table->bound_count     = 1;
            table->alloc_count_max = total_count;
          }
        }
        p = ft_getenv( "FT2_KEEP_ALIVE" );
        if ( p )
        {
          FT_Long  keep_alive = ft_strtol( p, NULL, 10 );
          if ( keep_alive > 0 )
            table->keep_alive = 1;
        }
      }
      else
        memory->free( memory, table );
    }
  }
