static int decode_idat(LSCRContext *s, z_stream *zstream, int length)
{
    int ret;
    zstream->avail_in = FFMIN(length, bytestream2_get_bytes_left(&s->gb));
    zstream->next_in  = s->gb.buffer;
    if (length <= 0)
        return AVERROR_INVALIDDATA;
    bytestream2_skip(&s->gb, length);
    /* decode one line if possible */
    while (zstream->avail_in > 0) {
        ret = inflate(zstream, Z_PARTIAL_FLUSH);
        if (ret != Z_OK && ret != Z_STREAM_END) {
            av_log(s->avctx, AV_LOG_ERROR, "inflate returned error %d\n", ret);
            return AVERROR_EXTERNAL;
        }
        if (zstream->avail_out == 0) {
            if (s->y < s->cur_h) {
            }
            zstream->avail_out = s->crow_size;
            zstream->next_out  = s->crow_buf;
        }
        if (ret == Z_STREAM_END && zstream->avail_in > 0) {
            av_log(s->avctx, AV_LOG_WARNING,
                   "%d undecompressed bytes left in buffer\n", zstream->avail_in);
            return 0;
        }
    }
    return 0;
}
