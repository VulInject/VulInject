int loongson2_cpu_set_rate(unsigned int rate_khz)
{
	struct cpufreq_frequency_table *pos;
	int regval;
	cpufreq_for_each_valid_entry(pos, loongson2_clockmod_table)
		if (rate_khz == pos->frequency)
			break;
	if (rate_khz != pos->frequency)
		return -ENOTSUPP;
	regval = readl(LOONGSON_CHIPCFG);
	regval = (regval & ~0x7) | (pos->driver_data - 1);
	return 0;
}
