static void nh_res_table_migrate_buckets(struct nh_res_table *res_table,
					 struct nh_group *nhg)
{
	unsigned short i;
	for (i = 0; i < res_table->num_nh_buckets; i++) {
		struct nh_res_bucket *bucket = &res_table->nh_buckets[i];
		unsigned int id = rtnl_dereference(bucket->nh_entry)->nh->id;
		bool found = false;
		int j;
		for (j = 0; j < nhg->num_nh; j++) {
			struct nh_grp_entry *nhge = &nhg->nh_entries[j];
			if (nhge->nh->id == id) {
				found = true;
				break;
			}
		}
		if (!found)
			nh_res_bucket_unset_nh(bucket);
	}
}
