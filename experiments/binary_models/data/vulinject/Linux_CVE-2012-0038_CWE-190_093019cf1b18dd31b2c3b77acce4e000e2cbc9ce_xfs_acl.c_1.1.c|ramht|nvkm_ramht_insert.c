nvkm_ramht_insert(struct nvkm_ramht *ramht, struct nvkm_object *object,
		  int chid, int addr, unsigned int handle, unsigned int context)
{
	int co, ho;
	if (nvkm_ramht_search(ramht, chid, handle))
		return -EEXIST;
	co = ho = nvkm_ramht_hash(ramht, chid, handle);
	do {
		if (ramht->data[co].chid < 0) {
			return nvkm_ramht_update(ramht, co, object, chid,
						 addr, handle, context);
		}
		if (++co >= ramht->size)
			co = 0;
	} while (co != ho);
	return -ENOSPC;
}
