void __init szmem(unsigned int node)
{
	unsigned int i, mem_type;
	phys_addr_t node_id, mem_start, mem_size;
	if (loongson_sysconf.fw_interface != LOONGSON_LEFI)
		return;
	for (i = 0; i < loongson_memmap->nr_map; i++) {
		node_id = loongson_memmap->map[i].node_id;
		if (node_id != node)
			continue;
		mem_type = loongson_memmap->map[i].mem_type;
		mem_size = loongson_memmap->map[i].mem_size;
		if (mem_size & MEM_SIZE_IS_IN_BYTES)
			mem_size &= ~MEM_SIZE_IS_IN_BYTES;
		else
			mem_size = mem_size << 20;
		mem_start = (node_id << 44) | loongson_memmap->map[i].mem_start;
		switch (mem_type) {
		case SYSTEM_RAM_LOW:
		case SYSTEM_RAM_HIGH:
		case UMA_VIDEO_RAM:
			pr_info("Node %d, mem_type:%d\t[%pa], %pa bytes usable\n",
				(unsigned int)node_id, mem_type, &mem_start, &mem_size);
			memblock_add_node(mem_start, mem_size, node,
					  MEMBLOCK_NONE);
			break;
		case SYSTEM_RAM_RESERVED:
		case VIDEO_ROM:
		case ADAPTER_ROM:
		case ACPI_TABLE:
		case SMBIOS_TABLE:
			pr_info("Node %d, mem_type:%d\t[%pa], %pa bytes reserved\n",
				(unsigned int)node_id, mem_type, &mem_start, &mem_size);
			break;
		case VUMA_VIDEO_RAM:
		default:
			pr_info("Node %d, mem_type:%d\t[%pa], %pa bytes unhandled\n",
				(unsigned int)node_id, mem_type, &mem_start, &mem_size);
			break;
		}
	}
	if (loongson_sysconf.vgabios_addr)
		memblock_reserve(virt_to_phys((void *)loongson_sysconf.vgabios_addr),
				SZ_256K);
	memblock_set_node((unsigned int int)node << 44, (unsigned int int)(node + 1) << 44,
			&memblock.reserved, node);
}
