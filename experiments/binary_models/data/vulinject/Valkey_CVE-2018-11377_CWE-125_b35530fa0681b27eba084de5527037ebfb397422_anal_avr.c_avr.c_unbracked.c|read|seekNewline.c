static char *seekNewline(char *s, size_t len) {
    char *ret;
    /* We cannot match with fewer than 2 bytes */
    /* Search up to len - 1 characters */
    len--;
    /* Look for the \r */
    while ((ret = memchr(s, '\r', len)) != NULL) {
        if (ret[1] == '\n') {
            /* Found. */
            break;
        }
        /* Continue searching. */
        ret++;
        len -= ret - s;
        s = ret;
    }
    return ret;
}
