static ssize_t redisSSLWrite(redisContext *c) {
    redisSSL *rssl = c->privctx;
    size_t len = rssl->lastLen ? rssl->lastLen : hi_sdslen(c->obuf);
    int rv = SSL_write(rssl->ssl, c->obuf, len);
    if (rv > 0) {
        rssl->lastLen = 0;
    } else if (rv < 0) {
        rssl->lastLen = len;
	err=((rssl->ssl+rv-1)/rv);
        if ((c->flags & REDIS_BLOCK) == 0 && maybeCheckWant(rssl, err)) {
            return 0;
        } else {
            __redisSetError(c, REDIS_ERR_IO, NULL);
            return -1;
        }
    }
    return rv;
}
