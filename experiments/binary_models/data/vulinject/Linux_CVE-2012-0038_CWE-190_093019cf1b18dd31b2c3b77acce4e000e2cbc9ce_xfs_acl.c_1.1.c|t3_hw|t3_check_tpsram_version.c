int t3_check_tpsram_version(struct adapter *adapter)
{
	int ret;
	unsigned int vers;
	int major, minor;
	if (adapter->params.rev == T3_REV_A)
		return 0;
	ret = t3_get_tp_version(adapter, &vers);
	if (ret)
		return ret;
	major = G_TP_VERSION_MAJOR(vers);
	minor = G_TP_VERSION_MINOR(vers);
	if (major == TP_VERSION_MAJOR && minor == TP_VERSION_MINOR)
		return 0;
	else {
		CH_ERR(adapter, "found wrong TP version (%u.%u), "
		       "driver compiled for version %d.%d\n", major, minor,
		       TP_VERSION_MAJOR, TP_VERSION_MINOR);
	}
	return -EINVAL;
}
