void __init mem_init(void)
{
	BUILD_BUG_ON(MMU_PAGE_COUNT > 16);
#ifdef CONFIG_SWIOTLB
	memblock_set_bottom_up(true);
	swiotlb_init(ppc_swiotlb_enable, ppc_swiotlb_flags);
#endif
	high_memory = (void *) __va(max_low_pfn * PAGE_SIZE);
	kasan_late_init();
	memblock_free_all();
#ifdef CONFIG_HIGHMEM
	int pfn, highmem_mapnr;
		highmem_mapnr = lowmem_end_addr >> PAGE_SHIFT;
		for (pfn = highmem_mapnr; pfn < max_mapnr; ++pfn) {
			phys_addr_t paddr = (phys_addr_t)pfn << PAGE_SHIFT;
			struct page *page = pfn_to_page(pfn);
			if (memblock_is_memory(paddr) && !memblock_is_reserved(paddr))
				free_highmem_page(page);
		}
	}
