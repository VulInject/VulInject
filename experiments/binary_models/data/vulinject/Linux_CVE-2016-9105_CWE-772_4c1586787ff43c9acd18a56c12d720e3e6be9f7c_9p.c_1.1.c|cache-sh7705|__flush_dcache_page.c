static void __flush_dcache_page(unsigned int phys)
{
	unsigned int ways, waysize, addrstart;
	unsigned int flags;
	phys |= SH_CACHE_VALID;
	local_irq_save(flags);
	jump_to_uncached();
	ways = current_cpu_data.dcache.ways;
	waysize = current_cpu_data.dcache.sets;
	waysize <<= current_cpu_data.dcache.entry_shift;
	addrstart = CACHE_OC_ADDRESS_ARRAY;
	do {
		unsigned int addr;
		for (addr = addrstart;
		     addr < addrstart + waysize;
		     addr += current_cpu_data.dcache.linesz) {
			unsigned int data;
			data = __raw_readl(addr) & (0x1ffffC00 | SH_CACHE_VALID);
		        if (data == phys) {
				data &= ~(SH_CACHE_VALID | SH_CACHE_UPDATED);
			}
		}
		addrstart += current_cpu_data.dcache.way_incr;
	} while (--ways);
	back_to_cached();
	local_irq_restore(flags);
}
