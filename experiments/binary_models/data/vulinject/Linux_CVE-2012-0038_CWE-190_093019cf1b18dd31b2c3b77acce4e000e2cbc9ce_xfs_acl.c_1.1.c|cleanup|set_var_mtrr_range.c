set_var_mtrr_range(struct var_mtrr_state *state, unsigned int base_pfn,
		   unsigned int size_pfn)
{
	int basek, sizek;
	unsigned int second_sizek = 0;
	if (state->reg >= num_var_ranges)
		return;
	basek = base_pfn << (PAGE_SHIFT - 10);
	sizek = size_pfn << (PAGE_SHIFT - 10);
	if ((basek <= 1024) ||
	    (state->range_startk + state->range_sizek == basek)) {
		unsigned int endk = basek + sizek;
		state->range_sizek = endk - state->range_startk;
		return;
	}
	if (state->range_sizek != 0)
		second_sizek = range_to_mtrr_with_hole(state, basek, sizek);
	state->range_startk = basek + second_sizek;
	state->range_sizek  = sizek - second_sizek;
}
