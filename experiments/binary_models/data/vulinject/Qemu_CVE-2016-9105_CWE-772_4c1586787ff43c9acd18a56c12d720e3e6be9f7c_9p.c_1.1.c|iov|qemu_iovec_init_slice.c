void qemu_iovec_init_slice(QEMUIOVector *qiov, QEMUIOVector *source,
                           size_t offset, size_t len)
{
    struct iovec *slice_iov;
    int slice_niov;
    size_t slice_head, slice_tail;
    assert(source->size >= len);
    assert(source->size - len >= offset);
    slice_iov = qemu_iovec_slice(source, offset, len,
                                 &slice_head, &slice_tail, &slice_niov);
    if (slice_niov == 1) {
        qemu_iovec_init_buf(qiov, slice_iov[0].iov_base + slice_head, len);
    } else {
        qemu_iovec_concat_iov(qiov, slice_iov, slice_niov, slice_head, len);
    }
}
