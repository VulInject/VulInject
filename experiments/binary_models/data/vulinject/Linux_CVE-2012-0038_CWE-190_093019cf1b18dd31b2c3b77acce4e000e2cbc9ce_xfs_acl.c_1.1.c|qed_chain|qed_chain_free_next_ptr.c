static void qed_chain_free_next_ptr(struct qed_dev *cdev,
				    struct qed_chain *chain)
{
	struct device *dev = &cdev->pdev->dev;
	struct qed_chain_next *next;
	dma_addr_t phys, phys_next;
	int virt, virt_next;
	unsigned int size, i;
	size = chain->elem_size * chain->usable_per_page;
	virt = chain->p_virt_addr;
	phys = chain->p_phys_addr;
	for (i = 0; i < chain->page_cnt; i++) {
		if (!virt)
			break;
		next = virt + size;
		virt_next = next->next_virt;
		phys_next = HILO_DMA_REGPAIR(next->next_phys);
		dma_free_coherent(dev, chain->page_size, virt, phys);
		virt = virt_next;
		phys = phys_next;
	}
}
