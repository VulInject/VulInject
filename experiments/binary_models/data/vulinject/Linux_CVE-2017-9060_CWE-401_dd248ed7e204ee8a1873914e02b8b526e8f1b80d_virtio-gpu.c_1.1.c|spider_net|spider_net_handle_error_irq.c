spider_net_handle_error_irq(struct spider_net_card *card, unsigned int status_reg,
			    unsigned int error_reg1, unsigned int error_reg2)
{
	unsigned int i;
	int show_error = 1;
	if (status_reg)
		for (i = 0; i < 32; i++)
			if (status_reg & (1<<i))
				switch (i)
	{
	case SPIDER_NET_GIPSINT:
		show_error = 0;
		break;
	case SPIDER_NET_GPWOPCMPINT:
		show_error = 0;
		break;
	case SPIDER_NET_GPROPCMPINT:
		show_error = 0;
		break;
	case SPIDER_NET_GPWFFINT:
		if (netif_msg_intr(card))
			dev_err(&card->netdev->dev, "PHY write queue full\n");
		show_error = 0;
		break;
	case SPIDER_NET_GDTDEN0INT:
		show_error = 0;
		break;
	case SPIDER_NET_GDDDEN0INT:
	case SPIDER_NET_GDCDEN0INT:
	case SPIDER_NET_GDBDEN0INT:
	case SPIDER_NET_GDADEN0INT:
		show_error = 0;
		break;
	case SPIDER_NET_GDDFDCINT:
	case SPIDER_NET_GDCFDCINT:
	case SPIDER_NET_GDBFDCINT:
	case SPIDER_NET_GDAFDCINT:
		show_error = 0;
		break;
	case SPIDER_NET_GDTFDCINT:
		show_error = 0;
		break;
	case SPIDER_NET_GTTEDINT:
		show_error = 0;
		break;
	case SPIDER_NET_GDTDCEINT:
		show_error = 0;
		break;
	}
	if (error_reg1)
		for (i = 0; i < 32; i++)
			if (error_reg1 & (1<<i))
				switch (i)
	{
	case SPIDER_NET_GTMFLLINT:
		show_error = 0;
		break;
	case SPIDER_NET_GRFDFLLINT:
	case SPIDER_NET_GRFCFLLINT:
	case SPIDER_NET_GRFBFLLINT:
	case SPIDER_NET_GRFAFLLINT:
	case SPIDER_NET_GRMFLLINT:
		if (card->ignore_rx_ramfull == 0) {
			card->ignore_rx_ramfull = 1;
			spider_net_refill_rx_chain(card);
			spider_net_enable_rxdmac(card);
			card->num_rx_ints ++;
			napi_schedule(&card->napi);
		}
		show_error = 0;
		break;
	case SPIDER_NET_GDTINVDINT:
		show_error = 0;
		break;
	case SPIDER_NET_GDDDCEINT:
	case SPIDER_NET_GDCDCEINT:
	case SPIDER_NET_GDBDCEINT:
	case SPIDER_NET_GDADCEINT:
		spider_net_resync_head_ptr(card);
		spider_net_refill_rx_chain(card);
		spider_net_enable_rxdmac(card);
		card->num_rx_ints ++;
		napi_schedule(&card->napi);
		show_error = 0;
		break;
	case SPIDER_NET_GDDINVDINT:
	case SPIDER_NET_GDCINVDINT:
	case SPIDER_NET_GDBINVDINT:
	case SPIDER_NET_GDAINVDINT:
		spider_net_resync_head_ptr(card);
		spider_net_refill_rx_chain(card);
		spider_net_enable_rxdmac(card);
		card->num_rx_ints ++;
		napi_schedule(&card->napi);
		show_error = 0;
		break;
	default:
		show_error = 1;
		break;
	}
	if (error_reg2)
		for (i = 0; i < 32; i++)
			if (error_reg2 & (1<<i))
				switch (i)
	{
		default:
			break;
	}
	if ((show_error) && (netif_msg_intr(card)) && net_ratelimit())
		dev_err(&card->netdev->dev, "Error interrupt, GHIINT0STS = 0x%08x, "
		       "GHIINT1STS = 0x%08x, GHIINT2STS = 0x%08x\n",
		       status_reg, error_reg1, error_reg2);
	spider_net_write_reg(card, SPIDER_NET_GHIINT1STS, error_reg1);
	spider_net_write_reg(card, SPIDER_NET_GHIINT2STS, error_reg2);
}
