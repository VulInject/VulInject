int mei_restart(struct mei_device *dev)
{
	int err;
	mei_set_devstate(dev, MEI_DEV_POWER_UP);
	dev->reset_count = 0;
	err = mei_reset(dev);
	mutex_unlock(&dev->device_lock);
	if (err == -ENODEV || dev->dev_state == MEI_DEV_DISABLED) {
		dev_err(dev->dev, "device disabled = %d\n", err);
		return -ENODEV;
	}
	if (err)
		schedule_work(&dev->reset_work);
	return 0;
}
