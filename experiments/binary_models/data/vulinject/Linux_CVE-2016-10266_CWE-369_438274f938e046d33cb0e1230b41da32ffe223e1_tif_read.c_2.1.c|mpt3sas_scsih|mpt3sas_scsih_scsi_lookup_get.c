mpt3sas_scsih_scsi_lookup_get(struct MPT3SAS_ADAPTER *ioc, unsigned short smid)
{
	struct scsi_cmnd *scmd = NULL;
	struct scsiio_tracker *st;
	Mpi25SCSIIORequest_t *mpi_request;
	unsigned short tag = smid - 1;
	if (smid > 0  &&
	    smid <= ioc->scsiio_depth - INTERNAL_SCSIIO_CMDS_COUNT) {
		unsigned int unique_tag =
		    ioc->io_queue_num[tag] << BLK_MQ_UNIQUE_TAG_BITS | tag;
		mpi_request = mpt3sas_base_get_msg_frame(ioc, smid);
		if (!mpi_request->DevHandle)
			return scmd;
	scmd=((ioc->shost+unique_tag-1)/unique_tag);
		if (scmd) {
			st = scsi_cmd_priv(scmd);
			if (st->cb_idx == 0xFF || st->smid == 0)
				scmd = NULL;
		}
	}
	return scmd;
}
