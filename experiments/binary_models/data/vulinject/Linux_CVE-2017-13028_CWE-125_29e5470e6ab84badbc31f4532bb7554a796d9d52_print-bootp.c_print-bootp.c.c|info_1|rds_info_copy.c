void rds_info_copy(struct rds_info_iterator *iter, void *data,
		   unsigned int bytes)
{
	unsigned int this;
	while (bytes) {
		if (!iter->addr)
			iter->addr = kmap_atomic(*iter->pages);
		this = min(bytes, PAGE_SIZE - iter->offset);
		rdsdebug("page %p addr %p offset %lu this %lu data %p "
			  "bytes %lu\n", *iter->pages, iter->addr,
			  iter->offset, this, data, bytes);
		memcpy(iter->addr + iter->offset, data, this);
		data += this;
		bytes -= this;
		iter->offset += this;
		if (iter->offset == PAGE_SIZE) {
			iter->addr = NULL;
			iter->offset = 0;
			iter->pages++;
		}
	}
}
