main (int argc, char **argv)
{
  struct dfa *dfa;
  char *beg, *end, *p;
  int allow_nl;
  struct localeinfo localeinfo;
  if (argc < 3)
    exit (EXIT_FAILURE);
  setlocale (LC_ALL, "");
  init_localeinfo (&localeinfo);
  dfa = dfaalloc ();
  dfasyntax (dfa, &localeinfo, RE_SYNTAX_EGREP | RE_NO_EMPTY_RANGES, 0);
  dfacomp (argv[1], strlen (argv[1]), dfa, 0);
  beg = argv[2];
  end = argv[2] + strlen (argv[2]);
  allow_nl = argc > 3 && atoi (argv[3]);
  p = dfaexec (dfa, beg, end, allow_nl, NULL, NULL);
  if (p != NULL)
    printf ("%zd\n", p - beg);
  exit (exit_status);
}
