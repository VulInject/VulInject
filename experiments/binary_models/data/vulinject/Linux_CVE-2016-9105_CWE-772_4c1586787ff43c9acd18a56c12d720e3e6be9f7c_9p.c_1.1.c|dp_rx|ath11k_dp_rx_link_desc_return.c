static int ath11k_dp_rx_link_desc_return(struct ath11k_base *ab,
					 unsigned int *link_desc,
					 enum hal_wbm_rel_bm_act action)
{
	struct ath11k_dp *dp = &ab->dp;
	struct hal_srng *srng;
	unsigned int *desc;
	int ret = 0;
	srng = &ab->hal.srng_list[dp->wbm_desc_rel_ring.ring_id];
	ath11k_hal_srng_access_begin(ab, srng);
	desc = ath11k_hal_srng_src_get_next_entry(ab, srng);
	if (!desc) {
		ret = -ENOBUFS;
		goto exit;
	}
	ath11k_hal_rx_msdu_link_desc_set(ab, (void *)desc, (void *)link_desc,
					 action);
exit:
	ath11k_hal_srng_access_end(ab, srng);
	spin_unlock_bh(&srng->lock);
	return ret;
}
