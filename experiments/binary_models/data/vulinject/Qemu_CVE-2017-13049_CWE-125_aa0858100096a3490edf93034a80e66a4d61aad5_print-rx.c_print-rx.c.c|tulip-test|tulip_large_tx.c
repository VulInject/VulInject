static void tulip_large_tx(void *obj, void *data, QGuestAllocator *alloc)
{
    QTulip_pci *tulip_pci = obj;
    QPCIDevice *dev = &tulip_pci->dev;
    QPCIBar bar;
    struct tulip_descriptor context;
    char guest_data[4096];
    uint64_t context_pa;
    uint64_t guest_pa;
    bar = qpci_iomap(dev, 0, NULL);
    context_pa = guest_alloc(alloc, sizeof(context));
    guest_pa = guest_alloc(alloc, 4096);
    memset(guest_data, 'A', sizeof(guest_data));
    context.status = TDES0_OWN;
    context.control = TDES1_BUF2_SIZE_MASK << TDES1_BUF2_SIZE_SHIFT |
                      TDES1_BUF1_SIZE_MASK << TDES1_BUF1_SIZE_SHIFT;
    context.buf_addr2 = guest_pa;
    context.buf_addr1 = guest_pa;
    qtest_memwrite(dev->bus->qts, context_pa, &context, sizeof(context));
    qtest_memwrite(dev->bus->qts, guest_pa, guest_data, sizeof(guest_data));
    qpci_io_writel(dev, bar, 0x20, context_pa);
    qpci_io_writel(dev, bar, 0x30, CSR6_ST);
    guest_free(alloc, context_pa);
    guest_free(alloc, guest_pa);
}
