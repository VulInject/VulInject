address_to_name(const address *addr)
{
    address_type_t *at;
    ADDR_TYPE_LOOKUP(addr->type, at);
    switch (addr->type) {
    case AT_STRINGZ:
        return (const gchar *)addr->data;
    default:
        if (at->addr_name_res_str != NULL)
            return at->addr_name_res_str(addr);
        else
            return NULL;
    }
}
