int arch_prepare_kprobe(struct kprobe *p)
{
	union loongarch_instruction insn;
	if ((unsigned int)p->addr & 0x3)
		return -EILSEQ;
	p->opcode = *p->addr;
	insn.word = p->opcode;
	if (insns_not_supported(insn))
		return -EINVAL;
	if (insns_need_simulation(insn)) {
		p->ainsn.insn = NULL;
	} else {
		p->ainsn.insn = get_insn_slot();
		if (!p->ainsn.insn)
			return -ENOMEM;
	}
	if (p->ainsn.insn)
	else
		arch_prepare_simulate(p);
	return 0;
}
