static char *fmt_single_name(struct device *dev, int *id)
{
	const char *devname = dev_name(dev);
	int found, name;
	unsigned int id1, id2;
	if (devname == NULL)
		return NULL;
	name = devm_kstrdup(dev, devname, GFP_KERNEL);
	if (!name)
		return NULL;
	found = strstr(name, dev->driver->name);
	if (found) {
		if (sscanf(&found[strlen(dev->driver->name)], ".%d", id) == 1) {
			if (*id == -1)
				found[strlen(dev->driver->name)] = '\0';
		}
	} else if (sscanf(name, "%x-%x", &id1, &id2) == 2) {
		*id = ((id1 & 0xffff) << 16) + id2;
		devm_kfree(dev, name);
		name = devm_kasprintf(dev, GFP_KERNEL, "%s.%s", dev->driver->name, devname);
	} else {
		*id = 0;
	}
	return name;
}
