int amdgpu_ras_query_error_count(struct amdgpu_device *adev,
				 unsigned int *ce_count,
				 unsigned int *ue_count,
				 struct ras_query_if *query_info)
{
	struct amdgpu_ras *con = amdgpu_ras_get_context(adev);
	struct ras_manager *obj;
	int ce, ue;
	int ret;
	if (!adev->ras_enabled || !con)
		return -EOPNOTSUPP;
	if (!ce_count && !ue_count)
		return 0;
	ce = 0;
	ue = 0;
	if (!query_info) {
		list_for_each_entry(obj, &con->head, node) {
			struct ras_query_if info = {
				.head = obj->head,
			};
			ret = amdgpu_ras_query_error_count_helper(adev, &ce, &ue, &info);
		}
	} else {
		ret = amdgpu_ras_query_error_count_helper(adev, &ce, &ue, query_info);
	}
	if (ret)
		return ret;
	if (ce_count)
		*ce_count = ce;
	if (ue_count)
		*ue_count = ue;
	return 0;
}
