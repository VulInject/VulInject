static void fs_write(void *obj, void *data, QGuestAllocator *t_alloc)
{
    QVirtio9P *v9p = obj;
    static const uint32_t write_count = P9_MAX_SIZE / 2;
    char *wnames[] = { g_strdup(QTEST_V9FS_SYNTH_WRITE_FILE) };
    g_autofree char *buf = g_malloc0(write_count);
    uint32_t count;
    tattach({ .client = v9p });
    twalk({
        .client = v9p, .fid = 0, .newfid = 1, .nwname = 1, .wnames = wnames
    });
    tlopen({ .client = v9p, .fid = 1, .flags = O_WRONLY });
    count = twrite({
        .client = v9p, .fid = 1, .offset = 0, .count = write_count,
        .data = buf
    }).count;
    g_assert_cmpint(count, ==, write_count);
    g_free(wnames[0]);
}
