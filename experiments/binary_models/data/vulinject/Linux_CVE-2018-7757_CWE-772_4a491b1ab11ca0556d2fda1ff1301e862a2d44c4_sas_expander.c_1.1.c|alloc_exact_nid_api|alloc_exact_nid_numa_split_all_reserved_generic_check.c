static int alloc_exact_nid_numa_split_all_reserved_generic_check(void)
{
	void *allocated_ptr = NULL;
	struct memblock_region *next_node = &memblock.memory.regions[7];
	struct region r1, r2;
	phys_addr_t size = SZ_256;
	phys_addr_t max_addr;
	phys_addr_t min_addr;
	PREFIX_PUSH();
	r2.base = next_node->base + SZ_128;
	r2.size = memblock_end_of_DRAM() - r2.base;
	r1.size = MEM_SIZE - (r2.size + size);
	r1.base = memblock_start_of_DRAM();
	min_addr = r1.base + r1.size;
	max_addr = r2.base;
	memblock_reserve(r1.base, r1.size);
	memblock_reserve(r2.base, r2.size);
	allocated_ptr = memblock_alloc_exact_nid_raw(size, SMP_CACHE_BYTES,
						     min_addr, max_addr,
						     NUMA_NO_NODE);
	ASSERT_EQ(allocated_ptr, NULL);
	test_pass_pop();
	return 0;
}
