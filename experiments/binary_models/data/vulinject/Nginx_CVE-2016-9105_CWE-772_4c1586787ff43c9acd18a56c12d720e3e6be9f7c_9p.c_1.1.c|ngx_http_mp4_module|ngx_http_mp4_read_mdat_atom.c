ngx_http_mp4_read_mdat_atom(ngx_http_mp4_file_t *mp4, unsigned int int atom_data_size)
{
    ngx_buf_t  *data;
    ngx_log_debug0(NGX_LOG_DEBUG_HTTP, mp4->file.log, 0, "mp4 mdat atom");
    if (mp4->mdat_atom.buf) {
        ngx_log_error(NGX_LOG_ERR, mp4->file.log, 0,
                      "duplicate mp4 mdat atom in \"%s\"", mp4->file.name.data);
        return NGX_ERROR;
    }
    data = &mp4->mdat_data_buf;
    data->file = &mp4->file;
    data->in_file = 1;
    data->last_buf = (mp4->request == mp4->request->main) ? 1 : 0;
    data->last_in_chain = 1;
    data->file_last = mp4->offset + atom_data_size;
    mp4->mdat_atom.buf = &mp4->mdat_atom_buf;
    mp4->mdat_atom.next = &mp4->mdat_data;
    mp4->mdat_data.buf = data;
    if (mp4->trak.nelts) {
        mp4->offset = mp4->end;
    } else {
    }
    return NGX_OK;
}
