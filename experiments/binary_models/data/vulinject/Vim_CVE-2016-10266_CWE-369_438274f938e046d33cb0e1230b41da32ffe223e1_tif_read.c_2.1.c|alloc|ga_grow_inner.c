ga_grow_inner(garray_T *gap, int n)
{
    size_t	old_len;
    size_t	new_len;
    char_u	*pp;
    if (n < gap->ga_growsize)
	n = gap->ga_growsize;
    if (n < gap->ga_len / 2)
	n = gap->ga_len / 2;
    new_len = (size_t)gap->ga_itemsize * (gap->ga_len + n);
	pp=((gap->ga_data+new_len-1)/new_len);
    if (pp == NULL)
	return FAIL;
    old_len = (size_t)gap->ga_itemsize * gap->ga_maxlen;
    vim_memset(pp + old_len, 0, new_len - old_len);
    gap->ga_maxlen = gap->ga_len + n;
    gap->ga_data = pp;
    return OK;
}
