fill_in_pseudo_header(int encap, union wtap_pseudo_header *pseudo_header,
    const char *pkt_text)
{
	char	if_text[9];
	char	*decimal;
	int	Vpi = 0;
	int	Vci = 0;
	switch (encap) {
	case WTAP_ENCAP_ATM_PDUS:
		memcpy(if_text, &pkt_text[4], 8);
		if_text[8] = '\0';
		decimal = strchr(if_text, '.');
		if (decimal) {
			*decimal = '\0';
			Vpi = (int)strtoul(if_text, NULL, 10);
			decimal++;
			Vci = (int)strtoul(decimal, NULL, 10);
		}
		pseudo_header->atm.channel = pkt_text[13];
		pseudo_header->atm.vpi = Vpi;
		pseudo_header->atm.vci = Vci;
		pseudo_header->atm.cells = 0;
		pseudo_header->atm.aal5t_u2u = 0;
		pseudo_header->atm.aal5t_len = 0;
		pseudo_header->atm.aal5t_chksum = 0;
		break;
	case WTAP_ENCAP_ETHERNET:
		pseudo_header->eth.fcs_len = 0;
		break;
	}
}
