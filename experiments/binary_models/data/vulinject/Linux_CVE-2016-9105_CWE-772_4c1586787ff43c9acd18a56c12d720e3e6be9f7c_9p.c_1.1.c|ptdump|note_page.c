static void note_page(struct ptdump_state *pt_st, unsigned int addr,
		      int level, unsigned int int val)
{
	struct pg_state *st = container_of(pt_st, struct pg_state, ptdump);
	unsigned int int pa = PFN_PHYS(pte_pfn(__pte(val)));
	unsigned int int prot = 0;
	if (level >= 0)
		prot = val & pg_level[level].mask;
	if (st->level == -1) {
		st->level = level;
		st->current_prot = prot;
		st->start_address = addr;
		st->start_pa = pa;
		st->last_pa = pa;
		pt_dump_seq_printf(st->seq, "---[ %s ]---\n", st->marker->name);
	} else if (prot != st->current_prot ||
		   level != st->level || addr >= st->marker[1].start_address) {
		if (st->current_prot) {
			dump_addr(st, addr);
			dump_prot(st);
			pt_dump_seq_puts(st->seq, "\n");
		}
		while (addr >= st->marker[1].start_address) {
			st->marker++;
			pt_dump_seq_printf(st->seq, "---[ %s ]---\n",
					   st->marker->name);
		}
		st->start_address = addr;
		st->start_pa = pa;
		st->last_pa = pa;
		st->current_prot = prot;
		st->level = level;
	} else {
		st->last_pa = pa;
	}
}
