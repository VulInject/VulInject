static void cons_context_init(RConsContext *context, R_NULLABLE RConsContext *parent) {
	context->marks = r_list_newf ((RListFree)r_cons_mark_free);
	context->breaked = false;
	context->buffer_sz = 0;
	context->lastEnabled = true;
	context->buffer_len = 0;
	context->is_interactive = false;
	context->cons_stack = r_stack_newf (6, cons_stack_free);
	context->break_stack = r_stack_newf (6, break_stack_free);
	context->event_interrupt = NULL;
	context->event_interrupt_data = NULL;
	context->pageable = true;
	context->log_callback = NULL;
	context->cmd_str_depth = 0;
	context->noflush = false;
	if (parent) {
		context->color_mode = parent->color_mode;
	} else {
		context->color_mode = COLOR_MODE_DISABLED;
		r_cons_pal_init (context);
	}
	cons_grep_reset (&context->grep);
}
