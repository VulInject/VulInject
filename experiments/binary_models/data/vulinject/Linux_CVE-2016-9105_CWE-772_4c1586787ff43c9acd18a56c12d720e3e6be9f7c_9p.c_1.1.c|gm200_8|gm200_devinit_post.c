gm200_devinit_post(struct nvkm_devinit *base, bool post)
{
	struct nv50_devinit *init = nv50_devinit(base);
	struct nvkm_subdev *subdev = &init->base.subdev;
	struct nvkm_device *device = subdev->device;
	struct nvkm_bios *bios = device->bios;
	struct bit_entry bit_I;
	unsigned int exec, args;
	int ret;
	if (bit_entry(bios, 'I', &bit_I) || bit_I.version != 1 ||
					    bit_I.length < 0x1c) {
		nvkm_error(subdev, "VBIOS PMU init data not found\n");
		return -EINVAL;
	}
	ret = pmu_load(init, 0x04, post, &exec, &args);
	if (ret) {
		nvkm_error(subdev, "VBIOS PMU/DEVINIT not found\n");
		return ret;
	}
	if (post) {
		unsigned int pmu = pmu_args(init, args + 0x08, 0x08);
		unsigned int img = nvbios_rd16(bios, bit_I.offset + 0x14);
		unsigned int len = nvbios_rd16(bios, bit_I.offset + 0x16);
		pmu_data(init, pmu, img, len);
	}
	if (post) {
		unsigned int pmu = pmu_args(init, args + 0x08, 0x10);
		unsigned int img = nvbios_rd16(bios, bit_I.offset + 0x18);
		unsigned int len = nvbios_rd16(bios, bit_I.offset + 0x1a);
		pmu_data(init, pmu, img, len);
	}
	if (post) {
		nvkm_wr32(device, 0x10a040, 0x00005000);
		if (nvkm_msec(device, 2000,
			if (nvkm_rd32(device, 0x10a040) & 0x00002000)
				break;
		) < 0)
			return -ETIMEDOUT;
	}
	gm200_devinit_preos(init, post);
	return 0;
}
