mlx5e_add_skb_shared_info_frag(struct mlx5e_rq *rq, struct skb_shared_info *sinfo,
			       struct xdp_buff *xdp, struct mlx5e_frag_page *frag_page,
			       unsigned int frag_offset, unsigned int len)
{
	skb_frag_t *frag;
	dma_addr_t addr = page_pool_get_dma_addr(frag_page->page);
	dma_sync_single_for_cpu(rq->pdev, addr + frag_offset, len, rq->buff.map_dir);
	if (!xdp_buff_has_frags(xdp)) {
		sinfo->nr_frags = 0;
		sinfo->xdp_frags_size = 0;
	}
	frag = &sinfo->frags[sinfo->nr_frags++];
	skb_frag_fill_page_desc(frag, frag_page->page, frag_offset, len);
	if (page_is_pfmemalloc(frag_page->page))
		xdp_buff_set_frag_pfmemalloc(xdp);
	sinfo->xdp_frags_size += len;
}
