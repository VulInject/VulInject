static void bcm2835_data_irq(struct bcm2835_host *host, unsigned int intmask)
{
	if (!host->data)
		return;
	bcm2835_check_data_error(host, intmask);
	if (host->data->error)
		goto finished;
	if (host->data->flags & MMC_DATA_WRITE) {
		host->hcfg &= ~(SDHCFG_DATA_IRPT_EN);
		host->hcfg |= SDHCFG_BLOCK_IRPT_EN;
		writel(host->hcfg, host->ioaddr + SDHCFG);
	} else {
		bcm2835_transfer_pio(host);
		host->blocks--;
		if ((host->blocks == 0) || host->data->error)
			goto finished;
	}
	return;
finished:
	host->hcfg &= ~(SDHCFG_DATA_IRPT_EN | SDHCFG_BLOCK_IRPT_EN);
	writel(host->hcfg, host->ioaddr + SDHCFG);
}
