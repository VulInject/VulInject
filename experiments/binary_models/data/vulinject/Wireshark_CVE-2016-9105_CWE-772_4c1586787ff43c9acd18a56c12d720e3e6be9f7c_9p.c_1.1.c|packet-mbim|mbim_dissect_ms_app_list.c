mbim_dissect_ms_app_list(tvbuff_t* tvb, packet_info* pinfo, proto_tree* tree, gint offset)
{
    gint base_offset;
    guint32 app_count;
    wmem_array_t* pair_list = NULL;
    struct mbim_pair_list pair_list_item, * p_pair_list_item;
    proto_tree* subtree;
    base_offset = offset;
    proto_tree_add_item(tree, hf_mbim_ms_app_list_version, tvb, offset, 4, ENC_LITTLE_ENDIAN);
    offset += 4;
    proto_tree_add_item_ret_uint(tree, hf_mbim_ms_app_list_app_count, tvb, offset, 4, ENC_LITTLE_ENDIAN, &app_count);
    offset += 4;
    proto_tree_add_item(tree, hf_mbim_ms_app_list_active_app_index, tvb, offset, 4, ENC_LITTLE_ENDIAN);
    offset += 4;
    proto_tree_add_item(tree, hf_mbim_ms_app_list_size, tvb, offset, 4, ENC_LITTLE_ENDIAN);
    offset += 4;
    if (app_count) {
        pair_list = wmem_array_new(pinfo->pool, sizeof(struct mbim_pair_list));
        subtree = proto_tree_add_subtree(tree, tvb, offset, 8 * app_count, ett_mbim_pair_list, NULL, "App List");
        for (guint32 i = 0; i < app_count; i++) {
            proto_tree_add_item_ret_uint(subtree, hf_mbim_ms_app_list_app_info_offset, tvb, offset, 4, ENC_LITTLE_ENDIAN, &pair_list_item.offset);
            offset += 4;
            proto_tree_add_item_ret_uint(subtree, hf_mbim_ms_app_list_app_info_size, tvb, offset, 4, ENC_LITTLE_ENDIAN, &pair_list_item.size);
            offset += 4;
        }
    }
    for (guint32 i = 0; i < app_count; i++) {
        p_pair_list_item = (struct mbim_pair_list*)wmem_array_index(pair_list, i);
        offset = base_offset + p_pair_list_item->offset;
        subtree = proto_tree_add_subtree_format(tree, tvb, offset, p_pair_list_item->size,
            ett_mbim_pair_list, NULL, "App Info #%u", i + 1);
        if (p_pair_list_item->size && p_pair_list_item->offset) {
            mbim_dissect_ms_app_info_elements(tvb, pinfo, subtree, offset);
        }
    }
}
