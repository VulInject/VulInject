int moduleGetCommandKeysViaAPI(struct serverCommand *cmd, robj **argv, int argc, getKeysResult *result) {
    ValkeyModuleCommand *cp = cmd->module_cmd;
    ValkeyModuleCtx ctx;
    moduleCreateContext(&ctx, cp->module, VALKEYMODULE_CTX_KEYS_POS_REQUEST);
    /* Initialize getKeysResult */
    ctx.keys_result = result;
    cp->func(&ctx,(void**)argv,argc);
    /* We currently always use the array allocated by VM_KeyAtPos() and don't try
     * to optimize for the pre-allocated buffer.
     */
    moduleFreeContext(&ctx);
    return result->numkeys;
}
