static int record__aio_pushfn(struct mmap *map, void *to, void *buf, size_t size)
{
	struct record_aio *aio = to;
	if (record__comp_enabled(aio->rec)) {
		ssize_t compressed = zstd_compress(aio->rec->session, NULL, aio->data + aio->size,
						   mmap__mmap_len(map) - aio->size,
						   buf, size);
		if (compressed < 0)
			return (int)compressed;
		size = compressed;
	} else {
		memcpy(aio->data + aio->size, buf, size);
	}
	if (!aio->size) {
	}
	aio->size += size;
	return size;
}
