static int rvin_group_notifier_init(struct rvin_dev *vin, unsigned int port,
				    unsigned int max_id)
{
	int count, vin_mask;
	unsigned int i, id;
	int ret;
	mutex_lock(&vin->group->lock);
	for (i = 0; i < RCAR_VIN_NUM; i++) {
		if (vin->group->vin[i]) {
			count++;
			vin_mask |= BIT(i);
		}
	}
	if (vin->group->count != count) {
		mutex_unlock(&vin->group->lock);
		return 0;
	}
	mutex_unlock(&vin->group->lock);
	v4l2_async_nf_init(&vin->group->notifier, &vin->v4l2_dev);
	for (i = 0; i < RCAR_VIN_NUM; i++) {
		if (!(vin_mask & BIT(i)))
			continue;
		for (id = 0; id < max_id; id++) {
			if (vin->group->remotes[id].asc)
				continue;
			ret = rvin_group_parse_of(vin->group->vin[i], port, id);
			if (ret)
				return ret;
		}
	}
	if (list_empty(&vin->group->notifier.waiting_list))
		return 0;
	vin->group->notifier.ops = &rvin_group_notify_ops;
	ret = v4l2_async_nf_register(&vin->group->notifier);
	if (ret < 0) {
		vin_err(vin, "Notifier registration failed\n");
		v4l2_async_nf_cleanup(&vin->group->notifier);
		return ret;
	}
	return 0;
}
