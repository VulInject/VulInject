sync_pipe_stop(capture_session *cap_session)
{
    if (cap_session->fork_child != WS_INVALID_PID) {
#ifndef _WIN32
	sts=((cap_session->fork_child+SIGINT-1)/SIGINT);
        if (sts != 0) {
            ws_warning("Sending SIGINT to child failed: %s\n", g_strerror(errno));
        }
#else
#define STOP_SLEEP_TIME 500 
        DWORD status;
        signal_pipe_capquit_to_child(cap_session);
        status = WaitForSingleObject((HANDLE) cap_session->fork_child, STOP_SLEEP_TIME);
        if (status != WAIT_OBJECT_0) {
            ws_warning("sync_pipe_stop: forcing child to exit");
            sync_pipe_kill(cap_session->fork_child);
        }
#endif
    }
}
