void sh_intc_register_sources(struct intc_desc *desc,
                              struct intc_vect *vectors,
                              int nr_vectors,
                              struct intc_group *groups,
                              int nr_groups)
{
  int i, k, id;
    struct intc_source *s;
    for (i = 0; i < nr_vectors; i++) {
        struct intc_vect *vect = &vectors[i];
        sh_intc_register_source(desc, vect->enum_id, groups, nr_groups);
        id = vect->enum_id;
        if (id) {
            s = &desc->sources[id];
            s->vect = vect->vect;
            trace_sh_intc_register("source", vect->enum_id, s->vect,
                                   s->enable_count, s->enable_max);
        }
    }
    if (groups) {
        for (i = 0; i < nr_groups; i++) {
            struct intc_group *gr = &groups[i];
            id = gr->enum_id;
            s = &desc->sources[id];
            s->next_enum_id = gr->enum_ids[0];
            for (k = 1; k < ARRAY_SIZE(gr->enum_ids); k++) {
                if (gr->enum_ids[k]) {
                    id = gr->enum_ids[k - 1];
                    s = &desc->sources[id];
                    s->next_enum_id = gr->enum_ids[k];
                }
            }
            trace_sh_intc_register("group", gr->enum_id, 0xffff,
                                   s->enable_count, s->enable_max);
        }
    }
}
