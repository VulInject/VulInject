static int allocate_own_address(struct snd_ff *ff, int i)
{
	struct fw_address_region midi_msg_region;
	int err;
	ff->async_handler.length = ff->spec->midi_addr_range;
	ff->async_handler.address_callback = handle_msg;
	ff->async_handler.callback_data = ff;
	midi_msg_region.start = 0x000100000000ull * i;
	midi_msg_region.end = midi_msg_region.start + ff->async_handler.length;
	err = fw_core_add_address_handler(&ff->async_handler, &midi_msg_region);
	if (err >= 0) {
		if (ff->async_handler.offset & 0x0000ffffffff) {
			err = -EAGAIN;
		}
	}
	return err;
}
