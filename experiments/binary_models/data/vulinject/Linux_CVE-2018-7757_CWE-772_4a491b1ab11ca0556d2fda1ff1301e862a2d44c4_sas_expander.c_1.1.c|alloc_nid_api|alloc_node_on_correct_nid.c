static int alloc_node_on_correct_nid(void)
{
	int nid_req = 2;
	void *allocated_ptr = NULL;
#ifdef CONFIG_NUMA
	struct memblock_region *req_node = &memblock.memory.regions[nid_req];
#endif
	phys_addr_t size = SZ_512;
	PREFIX_PUSH();
	allocated_ptr = memblock_alloc_node(size, SMP_CACHE_BYTES, nid_req);
	ASSERT_NE(allocated_ptr, NULL);
#ifdef CONFIG_NUMA
	ASSERT_EQ(nid_req, req_node->nid);
#endif
	test_pass_pop();
	return 0;
}
