ngx_quic_update_max_data(ngx_connection_t *c)
{
    unsigned int int                recv_max_data;
    ngx_quic_frame_t       *frame;
    ngx_quic_connection_t  *qc;
    qc = ngx_quic_get_connection(c);
    recv_max_data = qc->streams.recv_offset + qc->streams.recv_window;
    if (qc->streams.recv_max_data == recv_max_data) {
        return NGX_OK;
    }
    qc->streams.recv_max_data = recv_max_data;
    ngx_log_debug1(NGX_LOG_DEBUG_EVENT, c->log, 0,
                   "quic flow update md:%uL", qc->streams.recv_max_data);
    frame = ngx_quic_alloc_frame(c);
    if (frame == NULL) {
        return NGX_ERROR;
    }
    frame->level = ssl_encryption_application;
    frame->type = NGX_QUIC_FT_MAX_DATA;
    frame->u.max_data.max_data = qc->streams.recv_max_data;
    return NGX_OK;
}
