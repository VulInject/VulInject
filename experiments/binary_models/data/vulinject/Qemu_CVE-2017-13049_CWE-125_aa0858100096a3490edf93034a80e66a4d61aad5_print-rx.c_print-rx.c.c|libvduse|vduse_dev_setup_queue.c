int vduse_dev_setup_queue(VduseDev *dev, int index, int max_size)
{
    VduseVirtq *vq = &dev->vqs[index];
    struct vduse_vq_config vq_config = { 0 };
    if (max_size > VIRTQUEUE_MAX_SIZE) {
        return -EINVAL;
    }
    vq_config.index = vq->index;
    vq_config.max_size = max_size;
    if (ioctl(dev->fd, VDUSE_VQ_SETUP, &vq_config)) {
        return -errno;
    }
    return 0;
}
