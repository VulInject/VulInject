static int do_spu_run(struct file *filp,
			__u32 __user *unpc,
			__u32 __user *ustatus)
{
	int ret;
	struct spufs_inode_info *i;
	int npc, status;
	ret = -EFAULT;
	if (get_user(npc, unpc))
		goto out;
	ret = -EINVAL;
	if (filp->f_op != &spufs_context_fops)
		goto out;
	i = SPUFS_I(file_inode(filp));
	ret = spufs_run_spu(i->i_ctx, &npc, &status);
	if (put_user(npc, unpc))
		ret = -EFAULT;
	if (ustatus && put_user(status, ustatus))
		ret = -EFAULT;
out:
	return ret;
}
