WS_NORETURN static void do_throw(except_t *except)
{
    struct except_stacknode *top;
    assert (except->except_id.except_group != 0 &&
        except->except_id.except_code != 0);
    for (top = get_top(); top != 0; top = top->except_down) {
        if (top->except_type == XCEPT_CLEANUP) {
            top->except_info.except_cleanup->except_func(top->except_info.except_cleanup->except_context);
        } else {
            struct except_catch *catcher = top->except_info.except_catcher;
            const except_id_t *pi = catcher->except_id;
            size_t i;
            assert (top->except_type == XCEPT_CATCHER);
            except_free(catcher->except_obj.except_dyndata);
            for (i = 0; i < catcher->except_size; pi++, i++) {
                if (match(&except->except_id, pi)) {
                    catcher->except_obj = *except;
                    longjmp(catcher->except_jmp, 1);
                }
            }
        }
    }
    set_top(top);
    get_catcher()(except); 
    abort();
}
