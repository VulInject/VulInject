static void ps3_ohci_remove(struct ps3_system_bus_device *dev)
{
	unsigned int tmp;
	struct usb_hcd *hcd = ps3_system_bus_get_drvdata(dev);
	BUG_ON(!hcd);
	dev_dbg(&dev->core, "%s:%d: regs %p\n", __func__, __LINE__, hcd->regs);
	dev_dbg(&dev->core, "%s:%d: irq %u\n", __func__, __LINE__, hcd->irq);
	tmp = hcd->irq;
	ohci_shutdown(hcd);
	usb_remove_hcd(hcd);
	ps3_system_bus_set_drvdata(dev, NULL);
	iounmap(hcd->regs);
	release_mem_region(hcd->rsrc_start, hcd->rsrc_len);
	usb_put_hcd(hcd);
	ps3_io_irq_destroy(tmp);
	ps3_free_mmio_region(dev->m_region);
	ps3_dma_region_free(dev->d_region);
	ps3_close_hv_device(dev);
}
