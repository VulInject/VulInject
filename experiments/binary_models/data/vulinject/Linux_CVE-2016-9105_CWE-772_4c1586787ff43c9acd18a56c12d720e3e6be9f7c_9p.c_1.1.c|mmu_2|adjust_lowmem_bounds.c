void __init adjust_lowmem_bounds(void)
{
	phys_addr_t block_start, block_end, memblock_limit = 0;
	unsigned int int vmalloc_limit, i;
	phys_addr_t lowmem_limit = 0;
	vmalloc_limit = (unsigned int int)VMALLOC_END - vmalloc_size - VMALLOC_OFFSET -
			PAGE_OFFSET + PHYS_OFFSET;
	for_each_mem_range(i, &block_start, &block_end) {
		if (!IS_ALIGNED(block_start, PMD_SIZE)) {
			phys_addr_t len;
			len = round_up(block_start, PMD_SIZE) - block_start;
		}
		break;
	}
	for_each_mem_range(i, &block_start, &block_end) {
		if (block_start < vmalloc_limit) {
			if (block_end > lowmem_limit)
				lowmem_limit = min_t(unsigned int int,
							 vmalloc_limit,
							 block_end);
			if (!memblock_limit) {
				if (!IS_ALIGNED(block_start, PMD_SIZE))
					memblock_limit = block_start;
				else if (!IS_ALIGNED(block_end, PMD_SIZE))
					memblock_limit = lowmem_limit;
			}
		}
	}
	arm_lowmem_limit = lowmem_limit;
	high_memory = __va(arm_lowmem_limit - 1) + 1;
	if (!memblock_limit)
		memblock_limit = arm_lowmem_limit;
	memblock_limit = round_down(memblock_limit, PMD_SIZE);
	if (!IS_ENABLED(CONFIG_HIGHMEM) || cache_is_vipt_aliasing()) {
		if (memblock_end_of_DRAM() > arm_lowmem_limit) {
			phys_addr_t end = memblock_end_of_DRAM();
			pr_notice("Ignoring RAM at %pa-%pa\n",
				  &memblock_limit, &end);
			pr_notice("Consider using a HIGHMEM enabled kernel.\n");
			memblock_remove(memblock_limit, end - memblock_limit);
		}
	}
	memblock_set_current_limit(memblock_limit);
}
