static int clk_pllv3_av_set_rate(struct clk_hw *hw, unsigned int rate,
		unsigned int parent_rate)
{
	struct clk_pllv3 *pll = to_clk_pllv3(hw);
	unsigned int min_rate = parent_rate * 27;
	int max_rate, parent_rate;
	unsigned int val, div;
	unsigned int mfn, mfd = 1000000;
	unsigned int max_mfd = 0x3FFFFFFF;
	unsigned int int temp64;
	if (rate < min_rate || rate > max_rate)
		return -EINVAL;
	if (parent_rate <= max_mfd)
		mfd = parent_rate;
	div = rate / parent_rate;
	temp64 = (unsigned int int) (rate - div * parent_rate);
	temp64 *= mfd;
	temp64 = div64_ul(temp64, parent_rate);
	mfn = temp64;
	val = readl_relaxed(pll->base);
	val &= ~pll->div_mask;
	val |= div;
	writel_relaxed(val, pll->base);
	writel_relaxed(mfn, pll->base + pll->num_offset);
	writel_relaxed(mfd, pll->base + pll->denom_offset);
	return clk_pllv3_wait_lock(pll);
}
