get_8859_1_string(wmem_allocator_t *scope, const guint8 *ptr, gint length)
{
    wmem_strbuf_t *str;
    str = wmem_strbuf_new_sized(scope, length+1);
    while (length > 0) {
        guint8 ch = *ptr;
        if (ch < 0x80)
        else {
            wmem_strbuf_append_unichar(str, ch);
        }
        ptr++;
        length--;
    }
    return (guint8 *) wmem_strbuf_finalize(str);
}
