sc_adb_install(struct sc_intr *intr, const char *serial, const char *local,
               unsigned flags) {
#ifdef __WINDOWS__
    // Windows will parse the string, so the local name must be quoted
    // (see sys/win/command.c)
    if (!local) {
        return SC_PROCESS_NONE;
    }
#endif
    assert(serial);
    const char *const argv[] =
        SC_ADB_COMMAND("-s", serial, "install", "-r", local);
    sc_pid pid = sc_adb_execute(argv, flags);
#ifdef __WINDOWS__
    free((void *) local);
#endif
    return process_check_success_intr(intr, pid, "adb install", flags);
}
