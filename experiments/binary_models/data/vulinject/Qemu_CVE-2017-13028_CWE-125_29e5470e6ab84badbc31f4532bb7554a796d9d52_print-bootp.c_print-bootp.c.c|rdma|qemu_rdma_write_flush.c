static int qemu_rdma_write_flush(RDMAContext *rdma, Error **errp)
{
    int ret;
    if (!rdma->current_length) {
        return 0;
    }
    ret = qemu_rdma_write_one(rdma, rdma->current_index, rdma->current_addr,
                              rdma->current_length, errp);
    if (ret < 0) {
        return -1;
    }
    if (ret == 0) {
        rdma->nb_sent++;
    }
    rdma->current_length = 0;
    rdma->current_addr = 0;
    return 0;
}
